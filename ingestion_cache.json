{"pipeline_cache": {"7fa34ed5a115efdd96b3464ae870e608242c2dc692a702f4378c7bd3a7c9d7be": {"nodes": [{"__data__": {"id_": "4a768108-aa1a-45c4-990f-0c8fa131787d", "embedding": null, "metadata": {"file_name": "Chapter 0 Overview of DevShelf.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f97213e-2033-40d4-a34e-34b2b5a83687", "node_type": "4", "metadata": {"file_name": "Chapter 0 Overview of DevShelf.md"}, "hash": "6d2a36b37f261aa0147e0cfc07d130c8e9d8e9d1ec11c9a6c69b6bdfc6db393f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7290e2ef-a727-4a87-ac48-a2b171c8dab8", "node_type": "1", "metadata": {}, "hash": "c19a9cb1a9836dfecc6f27596d00059ba3f9037c6f9b8e9479ae5162034f471c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# Tutorial: DevShelfGUI\n\nDevShelfGUI is a **digital library search engine** that helps users *discover and read programming books*.\nIt offers an intuitive interface (both command-line and graphical) to **search for books**, provides *intelligent recommendations*,\nand allows users to *view book details and read PDFs*. The system also tracks user interactions to improve recommendations.", "mimetype": "text/plain", "start_char_idx": 1, "end_char_idx": 388, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "7290e2ef-a727-4a87-ac48-a2b171c8dab8", "embedding": null, "metadata": {"file_name": "Chapter 0 Overview of DevShelf.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f97213e-2033-40d4-a34e-34b2b5a83687", "node_type": "4", "metadata": {"file_name": "Chapter 0 Overview of DevShelf.md"}, "hash": "6d2a36b37f261aa0147e0cfc07d130c8e9d8e9d1ec11c9a6c69b6bdfc6db393f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4a768108-aa1a-45c4-990f-0c8fa131787d", "node_type": "1", "metadata": {"file_name": "Chapter 0 Overview of DevShelf.md"}, "hash": "16082477163b54c349f81c97c3c31b98e45a56f843f4691c34fd918d647843b0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "## Visual Overview\n\n```mermaid\nflowchart TD\n    A0[\"Book (Domain Model)\n\"]\n    A1[\"Search Index Management\n\"]\n    A2[\"Core Search Engine\n\"]\n    A3[\"Search Enhancement & Recommendations\n\"]\n    A4[\"User Interaction & Analytics\n\"]\n    A5[\"Application Startup & Flow Control\n\"]\n    A6[\"User Interface Presentation\n\"]\n    A7[\"Text Normalization Utilities\n\"]\n    A5 -- \"Loads Books\" --> A0\n    A5 -- \"Loads Index\" --> A1\n    A5 -- \"Loads Text Processors\" --> A7\n    A5 -- \"Initializes Search\" --> A2\n    A5 -- \"Initializes Enhancements\" --> A3\n    A5 -- \"Initializes Analytics\" --> A4\n    A5 -- \"Initializes UI\" --> A6\n    A1 -- \"Indexes Books\" --> A0\n    A1 -- \"Uses for Indexing\" --> A7\n    A2 -- \"Uses Index Data\" --> A1\n    A2 -- \"Processes Query\" --> A7\n    A2 -- \"Delegates Refinement\" --> A3\n    A3 -- \"Uses Book Data\" --> A0\n    A3 -- \"Uses Popularity\" --> A4\n    A3 -- \"Normalizes for Suggestions\" --> A7\n    A4 -- \"Provides Popularity Data\" --> A3\n    A4 -- \"Records Clicks\" --> A0\n    A6 -- \"Requests Services\" --> A5\n    A6 -- \"Displays Books\" --> A0\n```\n\n## Chapters\n\n1. [Application Startup & Flow Control\n](01_application_startup___flow_control_.md)\n2. [Book (Domain Model)\n](02_book__domain_model__.md)\n3. [User Interface Presentation\n](03_user_interface_presentation_.md)\n4. [Search Index Management\n](04_search_index_management_.md)\n5. [Core Search Engine\n](05_core_search_engine_.md)\n6. [User Interaction & Analytics\n](06_user_interaction___analytics_.md)\n7. [Search Enhancement & Recommendations\n](07_search_enhancement___recommendations_.md)\n8. [Text Normalization Utilities\n](08_text_normalization_utilities_.md)", "mimetype": "text/plain", "start_char_idx": 391, "end_char_idx": 2019, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "e20c6bc2-a0f2-4f34-9356-668a965dafef", "embedding": null, "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5cfdfefc-54fc-4217-9c5c-5ef7fc254fbd", "node_type": "4", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "47d033e1e332cb782b477f9b93f1a04fb2370fea0d267cdb98480cc8f9739cf8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "543501d2-6571-49f2-ba8c-235e4e29f55f", "node_type": "1", "metadata": {}, "hash": "5ab538d46bc02850adbcc5c4e29a17cbd6c8959ae5c1beec4affeacf7128eede", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Welcome to DevShelf! This tutorial will guide you through how our digital library application works, starting from the very beginning: how it wakes up and gets ready to serve you.\n\n### The Application's \"Main Director\"\n\nImagine our DevShelf application as a grand play. For any play to begin, you need a **Main Director**. This director doesn't act in the play, but they are crucial for making sure everything is in place before the curtain rises. They:\n\n1.  **Gather the Props:** Load all the books and the special \"search index\" (a magical guide that helps find books quickly).\n2.  **Assemble the Actors:** Bring together all the specialized \"services\" or \"smart tools\" like the `QueryProcessor` (who understands your search), the `ReRanker` (who makes sure the best books appear first), and the `Suggester` (who helps with typos).\n3.  **Set the Stage:** Prepare the user interface, whether it's a simple text-based command line (CLI) or a fancy graphical window (GUI).\n4.  **Signal the Start:** Once everything is ready, they tell the play to begin, allowing you, the user, to interact with the application.\n\nThis \"Main Director\" role is exactly what \"Application Startup & Flow Control\" is all about in DevShelf. It's the brain that orchestrates the entire application, making sure it initializes correctly and manages the overall sequence of operations.\n\n### Your First Interaction: Starting DevShelf\n\nBefore you can search for your favorite book, DevShelf needs to start. We offer two ways to use DevShelf: a Command Line Interface (CLI) where you type commands, and a Graphical User Interface (GUI) with buttons and windows.\n\nLet's see how you'd typically start each version:\n\n#### Starting the CLI Version\n\nTo start the CLI version, you would run the `Main` class.\n\n**`src/main/java/core/Main.java` (Simplified)**\n```java\npackage core;\n\nimport storage.BookLoader;\nimport storage.IndexLoader;\nimport ui.cli.CliView;\n// ... other imports\n\npublic class Main {\n    public static void main(String[] args) {\n        System.out.println(\"\ud83d\udcd6 Assembling DevShelf Engine...\");\n\n        // 1.", "mimetype": "text/plain", "start_char_idx": 2, "end_char_idx": 2089, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "543501d2-6571-49f2-ba8c-235e4e29f55f", "embedding": null, "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5cfdfefc-54fc-4217-9c5c-5ef7fc254fbd", "node_type": "4", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "47d033e1e332cb782b477f9b93f1a04fb2370fea0d267cdb98480cc8f9739cf8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e20c6bc2-a0f2-4f34-9356-668a965dafef", "node_type": "1", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "eb68ce486bf00935f759e3b24ec73162f2fc47d6145fd9e2c688b8f5eeec911e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8802875b-9dc7-4352-8f53-b442d8475b92", "node_type": "1", "metadata": {}, "hash": "47e0bce94a1de3164d6bdb3e277ddd1e43555e28f736234be01632ea2b322e05", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Load All Data (e.g., books and search index)\n        // BookLoader bookLoader = new BookLoader(...);\n        // List<Book> allBooks = bookLoader.loadBooks();\n        // IndexLoader indexLoader = new IndexLoader(...);\n        // SearchIndexData loadedData = indexLoader.loadIndex();\n\n        // 2. Build All Services (our smart tools)\n        // QueryProcessor queryProcessor = new QueryProcessor(...);\n        // ReRanker reRanker = new ReRanker(...);\n        // Suggester suggester = new Suggester(...);\n        // ... and other services\n\n        // 3. Build The UI (the CLI view)\n        CliView view = new CliView();\n\n        // 4. Assemble the Controller & Start\n        // BookSearchEngine engine = new BookSearchEngine(bookMap, queryProcessor, ...);\n        // engine.run(); // This starts the main loop!\n        System.out.println(\"...Assembly complete. Starting application.\");\n    }\n}\n```\nWhen you run `Main.java`, it prints messages like \"\ud83d\udcd6 Assembling DevShelf Engine...\" as it prepares everything. Then, it will present you with the command-line interface, ready for your search queries.\n\n#### Starting the GUI Version\n\nFor the GUI version, we use a special `Launcher` class to make sure JavaFX (the GUI technology) starts correctly.\n\n**`src/main/java/core/Launcher.java`**\n```java\npackage core;\n\npublic class Launcher {\n    public static void main(String[] args) {\n        // We delegate to the real JavaFX class.\n        // This tricks the JVM into loading the classpath correctly first.\n        GuiMain.main(args);\n    }\n}\n```\nThis `Launcher` simply calls `GuiMain.main(args)`. The `GuiMain` class then does the actual work of setting up the graphical window:\n\n**`src/main/java/core/GuiMain.java` (Simplified)**\n```java\npackage core;\n\nimport javafx.application.Application;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Scene;\nimport javafx.stage.Stage;\nimport ui.gui.controllers.MainViewController;\nimport ui.gui.services.DevShelfService;\n// ... other imports\n\npublic class GuiMain extends Application { // Extends Application for JavaFX\n\n    @Override\n    public void start(Stage stage) throws Exception {\n        System.out.println(\"\ud83d\ude80 Starting DevShelf GUI...\");\n\n        // 1.", "mimetype": "text/plain", "start_char_idx": 2090, "end_char_idx": 4289, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "8802875b-9dc7-4352-8f53-b442d8475b92", "embedding": null, "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5cfdfefc-54fc-4217-9c5c-5ef7fc254fbd", "node_type": "4", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "47d033e1e332cb782b477f9b93f1a04fb2370fea0d267cdb98480cc8f9739cf8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "543501d2-6571-49f2-ba8c-235e4e29f55f", "node_type": "1", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "e24928e0c99a18109119bd350ab44be55263d4e2b93548b8dd1dc4df82e24b25", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b090fa2f-b81d-46e6-b0a0-a589336a46e7", "node_type": "1", "metadata": {}, "hash": "afdeaa150b340b9bd58e2085f4d2efcb2c62645b01f91567db8f9f8c7bcf192d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Load Backend Services (Same idea as CLI: books, index, etc.)\n        // BookLoader bookLoader = new BookLoader(...);\n        // Map<Integer, Book> bookMap = ...;\n        // QueryProcessor queryProcessor = ...;\n        // ... and other services\n\n        // 2. Create the App Brain (a special service for the GUI)\n        // DevShelfService service = new DevShelfService(bookMap, queryProcessor, ...);\n\n        // 3. Load the UI (from an FXML file, which describes the window layout)\n        // FXMLLoader loader = new FXMLLoader(getClass().getResource(\"/ui/gui/fxml/MainView.fxml\"));\n        // Parent root = loader.load();\n\n        // 4. Inject the Brain into the Controller (connects UI to logic)\n        // MainViewController controller = loader.getController();\n        // controller.setService(service);\n\n        // 5. Show Window\n        // Scene scene = new Scene(root);\n        // stage.setScene(scene);\n        // stage.setTitle(\"DevShelf - Library Search Engine\");\n        // stage.show();\n\n        System.out.println(\"\u2705 GUI Started successfully.\");\n    }\n\n    public static void main(String[] args) {\n        launch(args); // This calls the start method above\n    }\n}\n```\nWhen `GuiMain` runs, you'll see messages like \"\ud83d\ude80 Starting DevShelf GUI...\" and then a beautiful DevShelf window will pop up on your screen, ready for you to type in the search bar.\n\n### Under the Hood: The Startup Sequence\n\nWhether you launch the CLI or GUI, the core steps for getting DevShelf ready are very similar. Let's visualize this process like a coordinated dance:\n\n```mermaid\nsequenceDiagram\n    participant You\n    participant Launcher/Main App\n    participant Storage Loaders\n    participant Core Services\n    participant User Interface\n    participant Search Engine\n\n    You->>Launcher/Main App: \"Start DevShelf!\"\n    Launcher/Main App->>Storage Loaders: \"Load all books & search index data\"\n    Note over Storage Loaders: Reads data from `book.json` and `index_data.json`\n    Storage Loaders-->>Launcher/Main App: \"Here's the data!\"\n    Launcher/Main App->>Core Services: \"Create smart tools (QueryProcessor, ReRanker, etc.)\"", "mimetype": "text/plain", "start_char_idx": 4290, "end_char_idx": 6411, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "b090fa2f-b81d-46e6-b0a0-a589336a46e7", "embedding": null, "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5cfdfefc-54fc-4217-9c5c-5ef7fc254fbd", "node_type": "4", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "47d033e1e332cb782b477f9b93f1a04fb2370fea0d267cdb98480cc8f9739cf8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8802875b-9dc7-4352-8f53-b442d8475b92", "node_type": "1", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "c7ea6e7f94fb81a0fff6d24ae904ea4a23ba60d8550c26caec6bbcc3458a801e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0cc42647-c493-4e10-acbc-beb5a01588b9", "node_type": "1", "metadata": {}, "hash": "13d50fda1429d6e1bfc656656b8d7479cfbc3194fbbfca7c7319b2289da10472", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Launcher/Main App->>Core Services: \"Create smart tools (QueryProcessor, ReRanker, etc.)\"\n    Note over Core Services: These tools understand queries, rank results, suggest typos\n    Core Services-->>Launcher/Main App: \"Tools are ready!\"\n    Launcher/Main App->>User Interface: \"Prepare the display (CLI text or GUI window)\"\n    User Interface-->>Launcher/Main App: \"Display is ready!\"\n    Launcher/Main App->>Search Engine: \"Assemble the main 'engine' with data, tools, and UI\"\n    Search Engine->>User Interface: \"Show welcome message / main search screen\"\n    User Interface-->>You: \"DevShelf is ready to use!\"\n    You->>User Interface: \"Type a search query...\"\n```\n\nThis sequence shows how the \"Application Startup & Flow Control\" layer (`Launcher/Main App` and `Search Engine` in the diagram) brings together different parts of the system.\n\n### Comparing CLI and GUI Startup\n\nWhile the core steps are similar, there are some differences in how the CLI and GUI versions set things up:\n\n| Feature                   | CLI Version (`core/Main.java`)                                    | GUI Version (`core/GuiMain.java`)                                |\n| :------------------------ | :---------------------------------------------------------------- | :--------------------------------------------------------------- |\n| **Main Entry Point**      | `public static void main(String[] args)` directly in `Main.java`  | `main` in `Launcher.java` calls `GuiMain.main(args)`, which uses `start()` method |\n| **User Interface Class**  | `CliView` ([User Interface Presentation](03_user_interface_presentation_.md))                                 | JavaFX FXML (`MainView.fxml`), managed by `MainViewController` ([User Interface Presentation](03_user_interface_presentation_.md)) |\n| **Core Logic Controller** | `BookSearchEngine` ([Core Search Engine](05_core_search_engine_.md))                                      | `DevShelfService` (a dedicated service for the GUI)              |\n| **Interaction Flow**      | `BookSearchEngine.run()` contains a `while(true)` loop for user input | UI events (e.g., button clicks) call methods in `DevShelfService` |\n\nNotice how both versions load the same underlying data (books, search index) and create the same smart tools (like `QueryProcessor` and `ReRanker`). The main difference is how they connect these tools to their specific user interface.", "mimetype": "text/plain", "start_char_idx": 6323, "end_char_idx": 8709, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "0cc42647-c493-4e10-acbc-beb5a01588b9", "embedding": null, "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5cfdfefc-54fc-4217-9c5c-5ef7fc254fbd", "node_type": "4", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "47d033e1e332cb782b477f9b93f1a04fb2370fea0d267cdb98480cc8f9739cf8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b090fa2f-b81d-46e6-b0a0-a589336a46e7", "node_type": "1", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "814c25a45d23dcc1253e84ffb49e02de13da7efe7cf731a85aad067af6d951d5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d1f74d09-70ef-44a8-9d28-938b0f4136f6", "node_type": "1", "metadata": {}, "hash": "68d018dca4f36880a5454b6815c8d9a5954a5f96d136f14391011fc0bd5ec942", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "The main difference is how they connect these tools to their specific user interface.\n\n#### The CLI's Main Loop\n\nOnce the CLI version starts, its `BookSearchEngine` takes over. It enters a continuous loop, waiting for your commands:\n\n**`src/main/java/core/BookSearchEngine.java` (Simplified `run` method)**\n```java\npackage core;\n\nimport ui.cli.CliView;\n// ... other imports\n\npublic class BookSearchEngine {\n    private final CliView view; // Our CLI display tool\n    // ... other services and state\n\n    public BookSearchEngine( /* ... services, CliView view */ ) {\n        this.view = view;\n        // ... initialize state\n    }\n\n    public void run() {\n        view.showWelcomeMessage(bookMap.size()); // Greet the user\n        while (true) { // This loop keeps the application running\n            String query = view.getSearchQuery(); // Ask the user for a search\n            if (query.equalsIgnoreCase(\"exit\")) { // User wants to quit\n                view.showExitMessage();\n                break; // Exit the loop\n            }\n            if (query.isEmpty()) continue; // Skip empty queries\n\n            processQuery(query); // Handle the search request\n        }\n    }\n    // ... other methods like processQuery, applyFilters, handleFilterMenu etc.\n}\n```\nThis `run()` method is the heart of the CLI application's \"flow control.\" It continuously:\n1.  **Gets Input:** `view.getSearchQuery()` asks you what you want to search for.\n2.  **Processes:** Calls `processQuery(query)` to handle the actual search.\n3.  **Repeats:** Goes back to step 1 until you type \"exit.\"\n\nThe `processQuery` method then orchestrates the search:\n\n**`src/main/java/core/BookSearchEngine.java` (Simplified `processQuery` method)**\n```java\n// Inside BookSearchEngine class\nprivate void processQuery(String query) {\n    // 1. Search! Ask the QueryProcessor (our smart search tool)\n    // List<SearchResult> tfIdfResults = queryProcessor.search(query);\n\n    // 2. Re-rank results (make sure the best ones are on top)\n    // List<SearchResult> rankedResults = reRanker.reRank(tfIdfResults, query);\n\n    // 3.", "mimetype": "text/plain", "start_char_idx": 8624, "end_char_idx": 10709, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "d1f74d09-70ef-44a8-9d28-938b0f4136f6", "embedding": null, "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5cfdfefc-54fc-4217-9c5c-5ef7fc254fbd", "node_type": "4", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "47d033e1e332cb782b477f9b93f1a04fb2370fea0d267cdb98480cc8f9739cf8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0cc42647-c493-4e10-acbc-beb5a01588b9", "node_type": "1", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "4361c8599485c47a3ab642bdd4457a494eb8752f56ebfa6484576cfdc748788a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b785fa9d-d79d-41b1-8c41-061280736120", "node_type": "1", "metadata": {}, "hash": "056f20cc5b6b8e54b262e1c524fee08665b3713ef0f7776f17d0fa2f3c85214a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Re-rank results (make sure the best ones are on top)\n    // List<SearchResult> rankedResults = reRanker.reRank(tfIdfResults, query);\n\n    // 3. Prepare books for display\n    // final List<Book> initialBooks = rankedResults.stream()...;\n\n    // This nested loop lets you filter/sort results for the *current* query\n    while (true) {\n        // A. Apply any filters or sorting you've set\n        // List<Book> filteredBooks = applyFilters(initialBooks);\n        // applySort(filteredBooks);\n\n        // B. Display the results\n        // view.showResults(query, filteredBooks);\n\n        // C. Get your next action (filter, sort, new search, etc.)\n        // String choice = view.getActionPrompt();\n        // switch (choice) {\n        //     case \"f\": handleFilterMenu(); break;\n        //     case \"n\": return; // Go back to the main search loop\n        //     // ... other actions\n        // }\n    }\n}\n```\nInside `processQuery`, there's another loop that allows you to refine your search results (filter, sort) before going back to the main `run()` loop for a brand new search. This shows a clear flow of control, moving from getting a query to processing it, displaying results, and then asking for the next action.\n\n#### The GUI's Service Approach\n\nThe GUI works a bit differently. Instead of a `while(true)` loop, the `DevShelfService` handles specific requests from the user interface.", "mimetype": "text/plain", "start_char_idx": 10566, "end_char_idx": 11955, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "b785fa9d-d79d-41b1-8c41-061280736120", "embedding": null, "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5cfdfefc-54fc-4217-9c5c-5ef7fc254fbd", "node_type": "4", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "47d033e1e332cb782b477f9b93f1a04fb2370fea0d267cdb98480cc8f9739cf8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d1f74d09-70ef-44a8-9d28-938b0f4136f6", "node_type": "1", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "6d1271989242473e85779d1940c25d0a17b2dfa0a0cedf295666ab27098698e6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9874b0f0-209f-4a27-8e76-5bfc64d7b616", "node_type": "1", "metadata": {}, "hash": "37378609c1ba2cf147cf128fd212dbbb7186a4c0c60d8885b40e928d9d058b2a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#### The GUI's Service Approach\n\nThe GUI works a bit differently. Instead of a `while(true)` loop, the `DevShelfService` handles specific requests from the user interface. When you type in the search bar and press Enter, the GUI controller calls the `search` method of `DevShelfService`:\n\n**`src/main/java/ui/gui/services/DevShelfService.java` (Simplified `search` method)**\n```java\npackage ui.gui.services;\n\nimport domain.Book;\nimport domain.SearchResult;\nimport features.search.QueryProcessor;\nimport features.search.ReRanker;\nimport features.search.Suggester;\n// ... other imports\n\npublic class DevShelfService {\n    private final QueryProcessor queryProcessor;\n    private final ReRanker reRanker;\n    private final Suggester suggester;\n    // ... other services and bookMap\n\n    public DevShelfService( /* ... services and bookMap */ ) {\n        this.queryProcessor = queryProcessor;\n        this.reRanker = reRanker;\n        this.suggester = suggester;\n        // ... initialize other services\n    }\n\n    public SearchResponse search(String query) {\n        System.out.println(\"\ud83d\udd0d GUI Processing Query: [\" + query + \"]\");\n\n        // 1. Raw Search (using our smart QueryProcessor tool)\n        // List<SearchResult> results = queryProcessor.search(query);\n\n        // 2. Handle No Results / Typos (ask the Suggester if needed)\n        // if (results.isEmpty()) {\n        //     String suggestion = suggester.suggestSimilar(query);\n        //     if (suggestion != null) { /* ... search with suggestion ... */ }\n        // }\n\n        // 3. Re-Rank (using our ReRanker tool to sort by popularity/relevance)\n        // List<SearchResult> rankedResults = reRanker.reRank(results, usedQuery);\n\n        // 4. Convert to Books (so the UI can display them nicely)\n        // List<Book> books = new ArrayList<>();\n        // for (SearchResult res : rankedResults) { /* ... add book to list ... */ }\n\n        // return new SearchResponse(books, isSuggestion, usedQuery);\n        return null; // Simplified return\n    }\n    // ... other methods like getRecommendationsFor, logClick etc.\n}\n```\nThis `search` method is called each time you submit a query in the GUI.", "mimetype": "text/plain", "start_char_idx": 11784, "end_char_idx": 13942, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "9874b0f0-209f-4a27-8e76-5bfc64d7b616", "embedding": null, "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5cfdfefc-54fc-4217-9c5c-5ef7fc254fbd", "node_type": "4", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "47d033e1e332cb782b477f9b93f1a04fb2370fea0d267cdb98480cc8f9739cf8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b785fa9d-d79d-41b1-8c41-061280736120", "node_type": "1", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "ceeb7dfe7916a38774027e95cfcbab682b72565d6abf0c706b12b57d9d78ef7f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "```\nThis `search` method is called each time you submit a query in the GUI. It performs the same core steps as `processQuery` in the CLI: search, re-rank, and handle suggestions. However, instead of looping for more actions, it returns a `SearchResponse` object containing the results directly to the GUI controller, which then updates the display.\n\n### Conclusion\n\nIn this chapter, we learned that \"Application Startup & Flow Control\" is like the main director of our DevShelf application. It handles the critical tasks of:\n*   **Initialization:** Loading all essential data like books and the search index.\n*   **Service Assembly:** Creating and preparing all the specialized tools (like `QueryProcessor`, `ReRanker`, `Suggester`) that make DevShelf smart.\n*   **User Interface Setup:** Getting either the Command Line Interface (CLI) or the Graphical User Interface (GUI) ready for you.\n*   **Orchestration:** Managing the overall flow, whether it's a continuous command loop in the CLI or handling specific requests from the GUI.\n\nThis entire process ensures that when you finally see DevShelf, everything is perfectly set up and ready for your search adventure!\n\nNext, we'll dive into the most important \"prop\" in our play: the `Book` itself, which is our core piece of data.\n\n[Next Chapter: Book (Domain Model)](02_book__domain_model__.md)", "mimetype": "text/plain", "start_char_idx": 13867, "end_char_idx": 15212, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "db32ac44-ceef-4047-a739-973ee588b5fa", "embedding": null, "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "603f2ddf-c446-43e1-95f6-e87da098a97b", "node_type": "4", "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "hash": "f806c2bba655b5f8b0509976832bbf51af6f3f5a84e5719edaacdeab988c1912", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "71d90193-3746-40cc-9ad2-ed5f192f2d03", "node_type": "1", "metadata": {}, "hash": "1f8f7cb5f3f0196891a796e065a6aaa972f153f1ba5dd31d3dd4ef5c34c46479", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Welcome back! In our last chapter, [Application Startup & Flow Control](01_application_startup___flow_control_.md), we learned how DevShelf wakes up and gets all its \"actors\" and \"props\" ready. Now, it's time to meet the most important \"prop\" of our entire digital library: the `Book` itself!\n\n### What is a \"Book\" in DevShelf?\n\nImagine DevShelf as a digital library. What's the main thing a library stores? Books, of course! But in a computer program, a \"book\" isn't a physical object you can touch. Instead, it's a collection of information, a \"data unit,\" that tells us everything important about one particular book.\n\nThink of it like a **detailed index card** for each book in a physical library. Each card has spaces for the title, author, a short summary, and so on. In DevShelf, each `Book` object is one of these digital index cards. It holds all the essential details about a single book, making it easy for the application to display and search for them.\n\n#### The Problem Our `Book` Solves\n\nIf you search for \"Python\" in DevShelf, the application needs to find specific books and show you their details. Without a clear way to represent *what* a book is and *what information it contains*, this would be impossible! The `Book` object gives us a standard way to store and share all that information throughout the application.\n\nLet's look at an example use case: **Displaying book details after a search.**\nWhen you type \"Clean Code\" and press Enter, DevShelf needs to:\n1.  Find the \"Clean Code\" book.\n2.  Grab all its details (title, author, description, rating, etc.).\n3.  Show those details to you on the screen.\n\nThe `Book` domain model is the key to step 2!\n\n### What Information Does a `Book` Hold?\n\nOur `Book` \"index card\" has several important slots for information. These are called \"properties\" in programming. Here are the main properties of a `Book` in DevShelf:\n\n*   **`bookId`**: A unique number for each book. Like a library's unique call number.\n*   **`title`**: The name of the book (e.g., \"Clean Code\").", "mimetype": "text/plain", "start_char_idx": 2, "end_char_idx": 2034, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "71d90193-3746-40cc-9ad2-ed5f192f2d03", "embedding": null, "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "603f2ddf-c446-43e1-95f6-e87da098a97b", "node_type": "4", "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "hash": "f806c2bba655b5f8b0509976832bbf51af6f3f5a84e5719edaacdeab988c1912", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "db32ac44-ceef-4047-a739-973ee588b5fa", "node_type": "1", "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "hash": "12c0b582ba5835d7f3998a9c51ffdca630de40d7bab153477f99dbf6c56615ef", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9797bc48-ebee-47c0-9399-0c76dacdfc49", "node_type": "1", "metadata": {}, "hash": "960bc531e7d5427749566ec804f9cded5f4fde1fb635e7814a183176d0bda201", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Like a library's unique call number.\n*   **`title`**: The name of the book (e.g., \"Clean Code\").\n*   **`author`**: Who wrote the book (e.g., \"Robert C. Martin\").\n*   **`description`**: A short summary of what the book is about.\n*   **`progLang`**: The main programming language discussed in the book (e.g., \"Java\", \"Python\").\n*   **`category`**: The general topic of the book (e.g., \"Software Engineering\", \"Algorithms\").\n*   **`tag`**: Keywords or topics associated with the book (e.g., [\"clean-code\", \"refactoring\"]). These help with more specific searches.\n*   **`rating`**: How highly the book is rated (e.g., 4.6 out of 5).\n*   **`coverUrl`**: A link to an image of the book's cover.\n*   **`downLink`**: A link to download the book (if available).\n\n### Getting Our Hands on `Book` Objects\n\nBefore DevShelf can display a book, it first needs to load the book's information into memory. This happens right when the application starts up, as we briefly saw in Chapter 1.\n\nThe `BookLoader` is like the library assistant who takes all the physical books (or, in our case, a digital list of book details) and meticulously creates one index card (a `Book` object) for each.\n\nLet's see how DevShelf gets these `Book` objects:\n\n```mermaid\nsequenceDiagram\n    participant You\n    participant Main App\n    participant BookLoader\n    participant book.json file\n\n    You->>Main App: \"Start DevShelf!\"\n    Main App->>BookLoader: \"Load all book details\"\n    Note over BookLoader: Uses a special tool to read JSON\n    BookLoader->>book.json file: \"Read contents of book.json\"\n    book.json file-->>BookLoader: \"Here's all the book data (as text)!\"\n    BookLoader->>BookLoader: \"Convert text data into Book objects\"\n    BookLoader-->>Main App: \"Here's a list of all Book objects!\"\n    Main App-->>You: \"Books are loaded, ready for your search!\"\n```\n\nThis diagram shows the journey from starting the app to having all `Book` objects ready.", "mimetype": "text/plain", "start_char_idx": 1938, "end_char_idx": 3864, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "9797bc48-ebee-47c0-9399-0c76dacdfc49", "embedding": null, "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "603f2ddf-c446-43e1-95f6-e87da098a97b", "node_type": "4", "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "hash": "f806c2bba655b5f8b0509976832bbf51af6f3f5a84e5719edaacdeab988c1912", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "71d90193-3746-40cc-9ad2-ed5f192f2d03", "node_type": "1", "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "hash": "a30f5e0eee97f312993b8b0152ae2ae45bbbb9c9876c80487e24f30fe2ab7577", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "29ef174d-0d8b-40fb-83b5-a8e83f600e1a", "node_type": "1", "metadata": {}, "hash": "8533933d498a5fe9e8e553c0f3af6f8a481bb65d1b8a37a092730f7496f48cee", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Main App-->>You: \"Books are loaded, ready for your search!\"\n```\n\nThis diagram shows the journey from starting the app to having all `Book` objects ready. The `BookLoader` does the heavy lifting of reading from a file named `book.json` and turning that raw text into usable `Book` objects.\n\n#### The `Book` Class: Our Digital Index Card\n\nIn Java, we define what a `Book` looks like using a `class`. This `Book` class acts like a blueprint for all our individual book objects.\n\n**`src/main/java/domain/Book.java` (Simplified)**\n```java\npackage domain;\n\nimport lombok.Getter; // A helper tool that automatically adds 'get' methods\nimport lombok.Setter; // A helper tool that automatically adds 'set' methods\n\n@Getter // Automatically creates methods like getBookId(), getTitle(), etc.\n@Setter // Automatically creates methods like setBookId(id), setTitle(title), etc.\npublic class Book {\n    private int bookId;\n    private String title;\n    private String author;\n    private String description;\n    private String progLang;\n    private String category;\n    private String[] tag; // An array for multiple tags\n    private float rating;\n    private String coverUrl;\n    private String downLink;\n\n    // A special method to create a new empty Book object\n    public Book() {}\n\n    // A special method to create a new Book object with all details at once\n    public Book(int bookId, String title, String author, String description, String progLang,\n                String category, String[] tag, float rating, String coverUrl, String downLink) {\n        this.bookId = bookId;\n        this.title = title;\n        this.author = author;\n        this.description = description;\n        this.progLang = progLang;\n        this.category = category;\n        this.tag = tag;\n        this.rating = rating;\n        this.coverUrl = coverUrl;\n        this.downLink = downLink;\n    }\n}\n```\nIn this code:\n*   `@Getter` and `@Setter` are special tools (from a library called Lombok) that automatically create the \"get\" and \"set\" methods for each property. For example, you can say `book.getTitle()` to get the title or `book.setRating(4.5f)` to change the rating. This keeps our code cleaner.", "mimetype": "text/plain", "start_char_idx": 3711, "end_char_idx": 5882, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "29ef174d-0d8b-40fb-83b5-a8e83f600e1a", "embedding": null, "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "603f2ddf-c446-43e1-95f6-e87da098a97b", "node_type": "4", "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "hash": "f806c2bba655b5f8b0509976832bbf51af6f3f5a84e5719edaacdeab988c1912", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9797bc48-ebee-47c0-9399-0c76dacdfc49", "node_type": "1", "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "hash": "b3f0debecab2ce248511ef41f781f4ac72a21ff08de5703f847b18fc1d8c1b58", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3051e7a5-564c-42f9-8377-a53aab88635e", "node_type": "1", "metadata": {}, "hash": "e50f89d5e6fccc5ac090698e20ef1438da876b9cf1ec4651bd48fa070feade8d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "For example, you can say `book.getTitle()` to get the title or `book.setRating(4.5f)` to change the rating. This keeps our code cleaner.\n*   Each `private` line defines one of the properties we discussed (like `bookId`, `title`, `author`).\n*   The `Book()` and `Book(...)` parts are \"constructors,\" which are like initial setup instructions for creating new `Book` objects.\n\n#### Loading Books from a File\n\nAll the book information for DevShelf is stored in a file called `book.json`. This is a special type of text file that stores data in a structured way that computers can easily understand.\n\nHere's a tiny peek at what `book.json` looks like:\n\n**`src/main/resources/data/book.json` (Snippet)**\n```json\n[\n  {\n    \"bookId\": 1,\n    \"title\": \"Introduction to Algorithms\",\n    \"author\": \"Thomas H. Cormen, Charles E. Leiserson, Ronald L. Rivest, Clifford Stein\",\n    \"description\": \"Comprehensive algorithms textbook...\",\n    \"progLang\": \"Pseudo-code\",\n    \"category\": \"Algorithms\",\n    \"tag\": [ \"algorithms\", \"data-structures\" ],\n    \"rating\": 4.7,\n    \"coverUrl\": \"...\",\n    \"downLink\": \"...\"\n  },\n  {\n    \"bookId\": 2,\n    \"title\": \"The Pragmatic Programmer\",\n    \"author\": \"Andrew Hunt, David Thomas\",\n    \"description\": \"Practical advice and philosophies...\",\n    \"progLang\": \"Multiple\",\n    \"category\": \"Software Engineering\",\n    \"tag\": [ \"best-practices\", \"career\" ],\n    \"rating\": 4.6,\n    \"coverUrl\": \"...\",\n    \"downLink\": \"...\"\n  }\n]\n```\nAs you can see, it's a list of book details, where each book's details match the properties we defined in our `Book.java` class.\n\nThe `BookLoader` class's job is to read this `book.json` file and turn its text into actual `Book` objects that our Java program can use.", "mimetype": "text/plain", "start_char_idx": 5746, "end_char_idx": 7462, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "3051e7a5-564c-42f9-8377-a53aab88635e", "embedding": null, "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "603f2ddf-c446-43e1-95f6-e87da098a97b", "node_type": "4", "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "hash": "f806c2bba655b5f8b0509976832bbf51af6f3f5a84e5719edaacdeab988c1912", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "29ef174d-0d8b-40fb-83b5-a8e83f600e1a", "node_type": "1", "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "hash": "144387c7a8a52ab58e6885d6c5990bcc1352e05c0480caf7ebaa3fda1bd85849", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f29d1ce5-0ea0-4f04-b7da-04b6f2116bcd", "node_type": "1", "metadata": {}, "hash": "a73bad8a248f3cff243012288510525a8fc202033aa459d8759b64d6c5c0be63", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "The `BookLoader` class's job is to read this `book.json` file and turn its text into actual `Book` objects that our Java program can use.\n\n**`src/main/java/storage/BookLoader.java` (Simplified)**\n```java\npackage storage;\n\nimport com.fasterxml.jackson.core.type.TypeReference; // Helps read lists of objects\nimport com.fasterxml.jackson.databind.ObjectMapper; // The \"magic tool\" for JSON\nimport domain.Book; // Our Book blueprint\n\nimport java.io.File; // To work with files on the computer\nimport java.io.IOException; // To handle errors when reading files\nimport java.util.Collections; // To return an empty list if something goes wrong\nimport java.util.List; // To store a list of Book objects\n\npublic class BookLoader {\n\n    private final ObjectMapper mapper = new ObjectMapper(); // Our JSON reading tool\n    private final String jsonFilePath; // Where the book.json file is located\n\n    // When we create a BookLoader, we tell it where to find the book.json file\n    public BookLoader(String jsonFilePath) {\n        this.jsonFilePath = jsonFilePath;\n    }\n\n    // This method does the actual work of loading books\n    public List<Book> loadBooks() {\n        try {\n            File jsonBooks = new File(jsonFilePath); // Find the book.json file\n            // Use the 'mapper' to read the file and turn it into a List of Book objects\n            return mapper.readValue(jsonBooks, new TypeReference<List<Book>>() {});\n        } catch (IOException e) {\n            // If something goes wrong (e.g., file not found), print an error\n            System.err.println(\"Failed to Load Books from JSON file: \" + e.getMessage());\n            return Collections.emptyList(); // Return an empty list to avoid crashing\n        }\n    }\n}\n```\nHere's what happens in `BookLoader.loadBooks()`:\n1.  It creates an `ObjectMapper`, which is a powerful \"translator\" that knows how to convert between Java objects and JSON text.\n2.  It points to the `book.json` file.\n3.  The `mapper.readValue(...)` line is the key! It reads all the text from `book.json` and, because we tell it to expect a `List<Book>`, it magically creates a Java `List` filled with `Book` objects, each populated with the data from the JSON.\n4.  If there's any problem (like the file not being there), it catches the error and prints a message.", "mimetype": "text/plain", "start_char_idx": 7325, "end_char_idx": 9621, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "f29d1ce5-0ea0-4f04-b7da-04b6f2116bcd", "embedding": null, "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "603f2ddf-c446-43e1-95f6-e87da098a97b", "node_type": "4", "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "hash": "f806c2bba655b5f8b0509976832bbf51af6f3f5a84e5719edaacdeab988c1912", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3051e7a5-564c-42f9-8377-a53aab88635e", "node_type": "1", "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "hash": "2e1c516ab593c01b88925a2e0b5a57c676322a6c604baf5f71a6ea387bcb3992", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5300c45d-aac0-4436-bce0-f11b6b7df000", "node_type": "1", "metadata": {}, "hash": "bf2738ca09f18eeebc23bd4a6de0a5390c4b8d9965a157aa087771b34f24b2f0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "4.  If there's any problem (like the file not being there), it catches the error and prints a message.\n\n#### Using Loaded Books\n\nOnce the `BookLoader` has done its job, the `Main` or `GuiMain` application stores these `Book` objects, typically in a `Map` where each book's unique `bookId` is used to quickly find it. This `Map` is then passed to important parts of the application, like the `BookSearchEngine` (for CLI) or `DevShelfService` (for GUI), so they can access book details when needed.\n\nFor example, when the search engine finds a `bookId` that matches your query, it can then easily fetch the full `Book` object from this map and display its details:\n\n```java\n// Simplified code snippet from BookSearchEngine or DevShelfService\n// Imagine 'bookMap' is a Map<Integer, Book> containing all our loaded books\n\n// ... after a search, we get a list of relevant book IDs ...\n// List<Integer> foundBookIds = /* ... results from search logic ... */ ;\n\n// Let's say we found Book with ID 3\nint foundBookId = 3;\n\n// Retrieve the actual Book object using its ID\nBook foundBook = bookMap.get(foundBookId);\n\nif (foundBook != null) {\n    // Now we can easily access its details!\n    System.out.println(\"Title: \" + foundBook.getTitle());\n    System.out.println(\"Author: \" + foundBook.getAuthor());\n    System.out.println(\"Rating: \" + foundBook.getRating());\n    System.out.println(\"Download: \" + foundBook.getDownLink());\n    // The UI will then take these details and show them nicely to the user\n}\n```\nThe output of this snippet would be:\n```\nTitle: Clean Code\nAuthor: Robert C. Martin\nRating: 4.6\nDownload: https://ptgmedia.pearsoncmg.com/images/9780132350884/samplepages/9780132350884.pdf\n```\nThis is how a `Book` object, acting as our digital index card, helps DevShelf organize and present information effectively.\n\n### Conclusion\n\nIn this chapter, we unpacked the `Book` domain model, which is the core unit of data in our DevShelf library.", "mimetype": "text/plain", "start_char_idx": 9519, "end_char_idx": 11462, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "5300c45d-aac0-4436-bce0-f11b6b7df000", "embedding": null, "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "603f2ddf-c446-43e1-95f6-e87da098a97b", "node_type": "4", "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "hash": "f806c2bba655b5f8b0509976832bbf51af6f3f5a84e5719edaacdeab988c1912", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f29d1ce5-0ea0-4f04-b7da-04b6f2116bcd", "node_type": "1", "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "hash": "3c0c7569437bc21897a2923fd16d72c04d605dbb0d3974ab332e2d5285aa5293", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "### Conclusion\n\nIn this chapter, we unpacked the `Book` domain model, which is the core unit of data in our DevShelf library. We learned that:\n*   Each `Book` object is like a detailed digital index card, holding all the essential information about a single book.\n*   It has properties like `bookId`, `title`, `author`, `description`, `rating`, `coverUrl`, and more.\n*   The `BookLoader` is responsible for reading book data from a `book.json` file and transforming it into usable `Book` objects when the application starts.\n*   These `Book` objects are then stored in a way that allows other parts of the application, like the search engine, to easily find and retrieve their details.\n\nUnderstanding the `Book` object is fundamental because it's what our users are ultimately searching for and interacting with. In the next chapter, we'll explore how DevShelf actually displays these `Book` objects to you, the user, through its interface.\n\n[Next Chapter: User Interface Presentation](03_user_interface_presentation_.md)", "mimetype": "text/plain", "start_char_idx": 11337, "end_char_idx": 12358, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "b9781c38-148a-4d22-8eeb-59db7c8ac386", "embedding": null, "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6c816bad-9dcf-4e5f-8fe9-8515f290e64a", "node_type": "4", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "74eaa45f6b8bfd17bfc1106c7a98f9728d85219084d4a91725c434c2d4bbc5f4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "987c144f-632d-4c55-b86d-a1ae65482ff7", "node_type": "1", "metadata": {}, "hash": "d9c6aaa0c881342f0286093ec9dea7eefb39a3cd98fcfc4d847d363349d80440", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Welcome back to DevShelf! In our last chapter, [Book (Domain Model)](02_book__domain_model_.md), we got to know the most important \"prop\" in our digital library: the `Book` itself, a digital index card holding all its details. Now, imagine you've found the perfect book \u2013 how does DevShelf actually *show* you that book? And how do you tell DevShelf what you're looking for?\n\nThat's where **User Interface Presentation** comes in!\n\n### The \"Face\" of DevShelf\n\nThink of the \"User Interface Presentation\" as the **face** of our DevShelf application. It's everything you see and interact with on your screen. Just like your face shows your expressions and allows you to speak and listen, DevShelf's UI (User Interface) is how it displays information (like search results or welcome messages) and how it gathers your input (like your search queries or clicks).\n\nIt takes all the internal data and clever logic (like finding books) and translates it into something you can easily understand and use. A good \"face\" makes the digital library feel friendly and easy to navigate!\n\n#### The Problem Our UI Solves\n\nImagine you've searched for \"Python\" in DevShelf. The application's core logic has found many Python books. But how do you *see* them? How do you type \"Python\" in the first place? Without a UI, DevShelf would be a powerful brain with no way to communicate with you!\n\nOur User Interface Presentation solves this by providing:\n1.  **Display:** Ways to show books, messages, and options.\n2.  **Input:** Ways for you to type, click, and interact.\n\nLet's focus on a central use case: **Displaying search results and letting the user type a new search query.** We want to see the books and then easily search again.\n\n### Two Ways DevShelf Shows Its Face: CLI vs. GUI\n\nAs we briefly touched on in Chapter 1, DevShelf has two different \"faces\":\n\n*   **CLI (Command Line Interface):** A simple text-based interface where you type commands and read text responses.\n*   **GUI (Graphical User Interface):** A visual interface with windows, buttons, text fields, and images that you interact with using your mouse and keyboard.", "mimetype": "text/plain", "start_char_idx": 1, "end_char_idx": 2119, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "987c144f-632d-4c55-b86d-a1ae65482ff7", "embedding": null, "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6c816bad-9dcf-4e5f-8fe9-8515f290e64a", "node_type": "4", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "74eaa45f6b8bfd17bfc1106c7a98f9728d85219084d4a91725c434c2d4bbc5f4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b9781c38-148a-4d22-8eeb-59db7c8ac386", "node_type": "1", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "95486bc2ff2d544123b431233a4429be2ce2fff58f80403d55573e8a108eb448", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f4bf5bd1-018e-40c7-ad34-c89118764c64", "node_type": "1", "metadata": {}, "hash": "175b5c4a9c1d4aceef6c39cb7615612697bfe6619cd29e432590ea96a7ec076b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "*   **GUI (Graphical User Interface):** A visual interface with windows, buttons, text fields, and images that you interact with using your mouse and keyboard.\n\nBoth serve the same purpose \u2013 showing information and getting input \u2013 but they do it in very different ways.\n\n#### 1. The CLI's Face: `CliView`\n\nIn the CLI version, the `CliView` class is the master of displaying text and reading what you type. It's like a helpful librarian who only communicates by talking and listening, without any fancy visuals.\n\n**`src/main/java/ui/cli/CliView.java` (Simplified)**\n```java\npackage ui.cli;\n\nimport domain.Book;\nimport java.util.List;\nimport java.util.Scanner;\n\npublic class CliView {\n\n    private final Scanner scanner; // A tool to read your keyboard input\n\n    public CliView() {\n        this.scanner = new Scanner(System.in); // Prepare the input reader\n    }\n\n    public void showResults(String query, List<Book> books) {\n        if (books.isEmpty()) {\n            System.out.println(\"\\n\u274c No results found for \\\"\" + query + \"\\\"\");\n            return;\n        }\n        System.out.println(\"\\n\u2705 Showing Top results for \\\"\" + query + \"\\\":\");\n        for (int i = 0; i < books.size() && i < 7; i++) { // Show up to 7 books\n            Book book = books.get(i);\n            System.out.printf(\"  [%d] %s by %s (Rating: %.1f)\\n\",\n                    i + 1, book.getTitle(), book.getAuthor(), book.getRating());\n        }\n    }\n\n    public String getSearchQuery() {\n        System.out.print(\"\\n\ud83d\udd0d Enter search query (or 'exit'): \");\n        return scanner.nextLine().trim(); // Read the entire line you type\n    }\n\n    // ... other methods for showing messages or getting choices ...\n}\n```\n*   The `showResults` method takes a list of `Book` objects (our digital index cards from Chapter 2) and prints their details one by one to the console.\n*   The `getSearchQuery` method prints a message asking for your input and then waits for you to type something and press Enter, returning your typed text.", "mimetype": "text/plain", "start_char_idx": 1960, "end_char_idx": 3952, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "f4bf5bd1-018e-40c7-ad34-c89118764c64", "embedding": null, "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6c816bad-9dcf-4e5f-8fe9-8515f290e64a", "node_type": "4", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "74eaa45f6b8bfd17bfc1106c7a98f9728d85219084d4a91725c434c2d4bbc5f4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "987c144f-632d-4c55-b86d-a1ae65482ff7", "node_type": "1", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "5be060b1ff7be8d0cd098b0fa128968a0bf6e3fd9e6380780e4c2adad83fdf82", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "199a1bda-95df-4f7f-ba88-3de67c50d76d", "node_type": "1", "metadata": {}, "hash": "d177432fcc406aa7f5ff5996ec8ac026a4007a173ba49ca6090896f394bcb67f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "*   The `getSearchQuery` method prints a message asking for your input and then waits for you to type something and press Enter, returning your typed text.\n\n**Example CLI Interaction:**\n\n```\n\ud83d\udd0d Enter search query (or 'exit'): Java\n\n\u2705 Showing Top results for \"Java\":\n  [1] Clean Code by Robert C. Martin (Rating: 4.6)\n  [2] Effective Java by Joshua Bloch (Rating: 4.8)\n  ...\n\n--- Actions ---\n[F]ilter  [S]ort  [R]elated  [L]og Click  [C]lear Filters  [N]ew Search  [E]xit\nEnter command:\n```\nHere, `showResults` displays the books, and `getSearchQuery` (and `getActionPrompt` not shown here) are waiting for your next input.\n\n#### 2. The GUI's Face: JavaFX, FXML, and Controllers\n\nThe GUI version of DevShelf uses a technology called **JavaFX** to create beautiful windows, buttons, and other visual elements. Instead of just printing text, it draws everything.\n\nBuilding a GUI involves two main parts:\n\n1.  **FXML Files (The Blueprints):** These are special text files (like `.fxml` files) that describe *what* visual elements are on the screen and *how* they are arranged. Think of them as blueprints for a house, defining where the walls, windows, and doors go.\n    *   `MainView.fxml`: The blueprint for the main search window.\n    *   `BookCard.fxml`: The blueprint for how a single book entry looks in the search results list.\n    *   `BookDetailView.fxml`: The blueprint for a separate window showing full book details.\n\n2.  **Controller Classes (The Workers):** These are Java classes (like `.java` files in the `ui.gui.controllers` package) that act as the \"brains\" behind the FXML blueprints. They handle *what happens* when you click a button, *how to fill* a text field with data, and *how to respond* to your actions. Each FXML file typically has a corresponding controller.\n    *   `MainViewController.java`: Manages the main search window's behavior.\n    *   `BookCardController.java`: Manages how data from a `Book` object is displayed on a single book card.", "mimetype": "text/plain", "start_char_idx": 3797, "end_char_idx": 5768, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "199a1bda-95df-4f7f-ba88-3de67c50d76d", "embedding": null, "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6c816bad-9dcf-4e5f-8fe9-8515f290e64a", "node_type": "4", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "74eaa45f6b8bfd17bfc1106c7a98f9728d85219084d4a91725c434c2d4bbc5f4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f4bf5bd1-018e-40c7-ad34-c89118764c64", "node_type": "1", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "a0acd099e24253c6525f36fc6e3278cf5c36fbccef55c3c561494c917a7f1aee", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "771f83ca-46d6-4739-8b7d-e275480daa44", "node_type": "1", "metadata": {}, "hash": "e06d30da1a49ef5eb5e066a9251aeebc6d31114296699a7aac6829581f6265c7", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "*   `MainViewController.java`: Manages the main search window's behavior.\n    *   `BookCardController.java`: Manages how data from a `Book` object is displayed on a single book card.\n    *   `BookDetailController.java`: Manages the detailed view of a specific book.\n\nLet's see how these pieces work together to display search results.\n\n```mermaid\nsequenceDiagram\n    participant You\n    participant MainViewController\n    participant DevShelfService\n    participant BookCardController\n    participant GUI Window\n\n    You->>MainViewController: Type \"Java\" in search bar, press Enter\n    MainViewController->>DevShelfService: search(\"Java\")\n    Note over DevShelfService: Finds books matching \"Java\"\n    DevShelfService-->>MainViewController: Returns List<Book> (e.g., Clean Code, Effective Java)\n    loop For each Book in the list\n        MainViewController->>MainViewController: Load BookCard.fxml blueprint\n        MainViewController->>BookCardController: new instance\n        MainViewController->>BookCardController: setData(a Book object)\n        Note over BookCardController: Populates labels, loads cover image\n        BookCardController-->>MainViewController: Ready Book Card UI element\n        MainViewController->>GUI Window: Add Book Card to results list\n    end\n    MainViewController-->>GUI Window: Update status label\n    GUI Window-->>You: Display list of clickable Book Cards\n    You->>GUI Window: Click on \"Clean Code\" card\n    MainViewController->>MainViewController: Open BookDetailView for \"Clean Code\"\n```\n\nThis diagram shows that when you type a query in the GUI, the `MainViewController` (the brain of the main screen) asks the `DevShelfService` (our application's \"brain\" that knows how to search, introduced in Chapter 1) for results. Once it gets the `Book` objects back, it dynamically creates a visual \"card\" for each book using `BookCard.fxml` and `BookCardController`, and then displays these cards in the results area.\n\n### Displaying Search Results and Handling New Search (Code Examples)\n\nLet's look at how the GUI specifically implements the use case of displaying results and preparing for a new search.", "mimetype": "text/plain", "start_char_idx": 5586, "end_char_idx": 7722, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "771f83ca-46d6-4739-8b7d-e275480daa44", "embedding": null, "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6c816bad-9dcf-4e5f-8fe9-8515f290e64a", "node_type": "4", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "74eaa45f6b8bfd17bfc1106c7a98f9728d85219084d4a91725c434c2d4bbc5f4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "199a1bda-95df-4f7f-ba88-3de67c50d76d", "node_type": "1", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "af4118b0c7a10968f34b134f54484f809a5f574dca12336db062a0e0757e76a7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6dd184d9-dc36-424e-a9cd-e56e6b546852", "node_type": "1", "metadata": {}, "hash": "e1ad5800eb74bcefe74b57e41fa1fac36beb428fd1292100ffc1df4359afee3e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "### Displaying Search Results and Handling New Search (Code Examples)\n\nLet's look at how the GUI specifically implements the use case of displaying results and preparing for a new search.\n\n#### The Main Search Screen (`MainView.fxml` & `MainViewController.java`)\n\nThe `MainView.fxml` file defines the layout of our main search window, including the search bar, buttons, and the area where book results will appear.\n\n**`src/main/resources/ui/gui/fxml/MainView.fxml` (Snippet)**\n```xml\n<!-- ... other layout definitions ... -->\n<HBox alignment=\"CENTER\" spacing=\"10.0\">\n    <!-- The text field where you type your search -->\n    <TextField fx:id=\"searchField\" onAction=\"#handleSearch\" promptText=\"Search for books...\" />\n    <!-- The search button you can click -->\n    <Button fx:id=\"searchButton\" onAction=\"#handleSearch\" text=\" Search \ud83d\udd0d\" />\n</HBox>\n\n<!-- This is where our book cards will be displayed -->\n<ScrollPane fitToWidth=\"true\">\n    <VBox fx:id=\"resultsContainer\" spacing=\"10.0\" style=\"-fx-padding: 20;\">\n    </VBox>\n</ScrollPane>\n<!-- ... other layout definitions ... -->\n```\n*   `fx:id=\"searchField\"` gives the search box a name so our Java code can refer to it.\n*   `onAction=\"#handleSearch\"` means \"when the user presses Enter in this text field or clicks the search button, call the `handleSearch` method in the `MainViewController`.\"\n*   `fx:id=\"resultsContainer\"` is a special vertical box (`VBox`) where we will programmatically add all the individual `BookCard` elements.\n\nNow, let's look at the `MainViewController` which brings this FXML blueprint to life.", "mimetype": "text/plain", "start_char_idx": 7535, "end_char_idx": 9110, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "6dd184d9-dc36-424e-a9cd-e56e6b546852", "embedding": null, "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6c816bad-9dcf-4e5f-8fe9-8515f290e64a", "node_type": "4", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "74eaa45f6b8bfd17bfc1106c7a98f9728d85219084d4a91725c434c2d4bbc5f4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "771f83ca-46d6-4739-8b7d-e275480daa44", "node_type": "1", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "0073048269529b89e43562810300fb22bc154f420dbfed106229b184af1b0adf", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "723b2ff8-1c88-4de9-af48-80e658c50c53", "node_type": "1", "metadata": {}, "hash": "af7c3ef5dead2ded32cc3f3e56373d153f3dbde945786ebce0befb681ee34ba2", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Now, let's look at the `MainViewController` which brings this FXML blueprint to life.\n\n**`src/main/java/ui/gui/controllers/MainViewController.java` (Simplified `handleSearch` and `displayBooks`)**\n```java\npackage ui.gui.controllers;\n\nimport domain.Book;\nimport javafx.fxml.FXML;\nimport javafx.fxml.FXMLLoader; // Essential for loading FXML blueprints\nimport javafx.scene.Node;     // A general UI element\nimport javafx.scene.layout.VBox;\nimport ui.gui.services.DevShelfService;\nimport ui.gui.services.DevShelfService.SearchResponse;\n\nimport java.io.IOException;\nimport java.util.List;\n\npublic class MainViewController {\n\n    @FXML private TextField searchField; // Connected to fx:id=\"searchField\" in FXML\n    @FXML private VBox resultsContainer; // Connected to fx:id=\"resultsContainer\"\n\n    private DevShelfService service; // Our application \"brain\" from Chapter 1\n\n    public void setService(DevShelfService service) { this.service = service; }\n\n    @FXML\n    private void handleSearch() {\n        String query = searchField.getText(); // Get text from the search field\n        if (query == null || query.trim().isEmpty()) return;\n\n        // 1. Ask the backend service (DevShelfService) for search results\n        SearchResponse response = service.search(query);\n\n        // 2. Clear old results and display the new ones\n        displayBooks(response.books);\n    }\n\n    private void displayBooks(List<Book> books) {\n        resultsContainer.getChildren().clear(); // Remove all previously displayed books\n\n        // Loop through the books we got back\n        for (Book book : books) {\n            try {\n                // 3. Load the blueprint for a single book card\n                FXMLLoader loader = new FXMLLoader(getClass().getResource(\"/ui/gui/fxml/BookCard.fxml\"));\n                Node card = loader.load(); // Create the visual card element\n\n                // 4. Get the controller for this new card\n                BookCardController cardController = loader.getController();\n\n                // 5. Tell the card controller to display this specific Book's data\n                cardController.setData(book);\n\n                // 6. Make the card clickable to show more details\n                card.setOnMouseClicked(e -> openDetailsView(book));\n\n                // 7.", "mimetype": "text/plain", "start_char_idx": 9025, "end_char_idx": 11306, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "723b2ff8-1c88-4de9-af48-80e658c50c53", "embedding": null, "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6c816bad-9dcf-4e5f-8fe9-8515f290e64a", "node_type": "4", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "74eaa45f6b8bfd17bfc1106c7a98f9728d85219084d4a91725c434c2d4bbc5f4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6dd184d9-dc36-424e-a9cd-e56e6b546852", "node_type": "1", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "b8f12284875f9b85b38c1b8ab9c982e786e40403c60f66ad13efdc9d0ec1e6e4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f19aed0e-b843-4710-a5dc-8d45520c9cd2", "node_type": "1", "metadata": {}, "hash": "46d5e5be3a34d6e5b0f94d9dd1100f445974200f1595ed3dc0beca1921ac04b0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Tell the card controller to display this specific Book's data\n                cardController.setData(book);\n\n                // 6. Make the card clickable to show more details\n                card.setOnMouseClicked(e -> openDetailsView(book));\n\n                // 7. Add the finished card to our results area\n                resultsContainer.getChildren().add(card);\n            } catch (IOException e) {\n                e.printStackTrace(); // Handle errors if the FXML can't be loaded\n            }\n        }\n    }\n\n    // ... other methods like openDetailsView ...\n}\n```\n*   When you type in `searchField` and press Enter, `handleSearch()` is called.\n*   It gets your `query` from the `searchField` and asks our `service` (the app's brain) to `search`.\n*   Then, `displayBooks` takes the list of `Book` objects.\n*   For each `Book`, it uses `FXMLLoader` to create a new \"Book Card\" based on the `BookCard.fxml` blueprint.\n*   It then finds the `BookCardController` for *that specific card* and calls its `setData` method to fill it with the `Book`'s details.\n*   Finally, it adds this newly created and populated card to the `resultsContainer`, making it visible on the screen.\n\n#### The Single Book Card (`BookCard.fxml` & `BookCardController.java`)\n\nEach book displayed in the search results is represented by a `BookCard`.", "mimetype": "text/plain", "start_char_idx": 11040, "end_char_idx": 12368, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "f19aed0e-b843-4710-a5dc-8d45520c9cd2", "embedding": null, "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6c816bad-9dcf-4e5f-8fe9-8515f290e64a", "node_type": "4", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "74eaa45f6b8bfd17bfc1106c7a98f9728d85219084d4a91725c434c2d4bbc5f4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "723b2ff8-1c88-4de9-af48-80e658c50c53", "node_type": "1", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "2ce1a77810f14b12cc58b6978cb39069e7f2c45c5c1e8f94370a74cf5c6a350e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "62b274ba-fc21-4473-bccb-a6f5ba6fa971", "node_type": "1", "metadata": {}, "hash": "ea09d6ee134536f5c2096ff73c9b16ae9bbe4193d140c709757f8a2a32acf6f1", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#### The Single Book Card (`BookCard.fxml` & `BookCardController.java`)\n\nEach book displayed in the search results is represented by a `BookCard`.\n\n**`src/main/resources/ui/gui/fxml/BookCard.fxml` (Snippet)**\n```xml\n<HBox alignment=\"CENTER_LEFT\" spacing=\"15.0\" style=\"...styling for a nice card effect...\"\n      xmlns=\"http://javafx.com/javafx/17\" xmlns:fx=\"http://javafx.com/fxml/1\"\n      fx:controller=\"ui.gui.controllers.BookCardController\">\n\n    <ImageView fx:id=\"coverImage\" fitHeight=\"100.0\" fitWidth=\"70.0\" />\n\n    <VBox spacing=\"5.0\" HBox.hgrow=\"ALWAYS\">\n        <Label fx:id=\"titleLabel\" text=\"Book Title\" />\n        <HBox spacing=\"10.0\" alignment=\"CENTER_LEFT\">\n            <Label fx:id=\"authorLabel\" text=\"Author Name\" />\n            <Label fx:id=\"ratingLabel\" text=\"4.7 \u2605\" />\n        </HBox>\n        <Label fx:id=\"tagsLabel\" text=\"tags: algorithms, java\" />\n    </VBox>\n</HBox>\n```\n*   This FXML describes a horizontal box (`HBox`) containing an image (`ImageView`) for the cover and a vertical box (`VBox`) holding labels for the title, author, rating, and tags.\n*   `fx:id` attributes are used to connect these visual elements to the `BookCardController`.", "mimetype": "text/plain", "start_char_idx": 12222, "end_char_idx": 13391, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "62b274ba-fc21-4473-bccb-a6f5ba6fa971", "embedding": null, "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6c816bad-9dcf-4e5f-8fe9-8515f290e64a", "node_type": "4", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "74eaa45f6b8bfd17bfc1106c7a98f9728d85219084d4a91725c434c2d4bbc5f4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f19aed0e-b843-4710-a5dc-8d45520c9cd2", "node_type": "1", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "eae57dabd0cf03fa035ee3f994a0ba09e5f9616b56e09c136414c4a7e92fb5f1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3c5b83d3-51f4-454b-855b-131239aab46d", "node_type": "1", "metadata": {}, "hash": "4b0d0f6a7398c3bc936dfe9237076ac4edda9c3216aa4f4ee432da1f5a9ff544", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "*   `fx:id` attributes are used to connect these visual elements to the `BookCardController`.\n\n**`src/main/java/ui/gui/controllers/BookCardController.java` (Simplified `setData`)**\n```java\npackage ui.gui.controllers;\n\nimport domain.Book;\nimport javafx.fxml.FXML;\nimport javafx.scene.control.Label;\nimport javafx.scene.image.Image;\nimport javafx.scene.image.ImageView;\nimport java.util.List;\n\npublic class BookCardController {\n\n    @FXML private Label titleLabel;   // Linked to fx:id=\"titleLabel\"\n    @FXML private Label authorLabel;  // Linked to fx:id=\"authorLabel\"\n    @FXML private Label ratingLabel;  // Linked to fx:id=\"ratingLabel\"\n    @FXML private Label tagsLabel;    // Linked to fx:id=\"tagsLabel\"\n    @FXML private ImageView coverImage; // Linked to fx:id=\"coverImage\"\n\n    private static final String DEFAULT_IMG = \"https://via.placeholder.com/150x200?text=No+Cover\";\n\n    // This method is called by MainViewController to fill the card with data\n    public void setData(Book book) {\n        titleLabel.setText(book.getTitle());\n        authorLabel.setText(book.getAuthor() != null ? book.getAuthor() : \"Unknown\");\n        ratingLabel.setText(String.format(\"%.1f \u2605\", book.getRating()));\n\n        List<String> tags = List.of(book.getTag());\n        if (!tags.isEmpty()) {\n            tagsLabel.setText(\"tags: \" + String.join(\", \", tags));\n        } else {\n            tagsLabel.setText(\"\");\n        }\n\n        // Load the book's cover image from its URL\n        String url = (book.getCoverUrl() != null && !book.getCoverUrl().isEmpty())\n                ? book.getCoverUrl() : DEFAULT_IMG;\n        try {\n            coverImage.setImage(new Image(url, true)); // Load image from URL\n        } catch (Exception e) {\n            // If image loading fails, it will just show no image\n        }\n    }\n}\n```\n*   The `setData` method receives a `Book` object (our digital index card).\n*   It then takes the information from that `Book` (like its title, author, rating, and cover image URL) and uses it to update the corresponding `Label` and `ImageView` elements on the card.\n*   This is how the raw `Book` data is transformed into a visually appealing search result entry.", "mimetype": "text/plain", "start_char_idx": 13298, "end_char_idx": 15474, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "3c5b83d3-51f4-454b-855b-131239aab46d", "embedding": null, "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6c816bad-9dcf-4e5f-8fe9-8515f290e64a", "node_type": "4", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "74eaa45f6b8bfd17bfc1106c7a98f9728d85219084d4a91725c434c2d4bbc5f4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "62b274ba-fc21-4473-bccb-a6f5ba6fa971", "node_type": "1", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "94ae74dae23becc51bdd17f03fa444acce9d987435641163281535909f4b5691", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d1d4dd88-de94-4f62-8908-249ae9a9ee9a", "node_type": "1", "metadata": {}, "hash": "dda069ccd0a4f8ab680778081a2eac13bd7a74dd90c587ea84728a3aa10ab18d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "*   This is how the raw `Book` data is transformed into a visually appealing search result entry.\n\n#### The Book Detail View (`BookDetailView.fxml` & `BookDetailController.java`)\n\nWhen you click on a `BookCard`, DevShelf opens a new window (`BookDetailView.fxml`) to show all the details of that specific book.\n\n**`src/main/java/ui/gui/controllers/BookDetailController.java` (Simplified `setBookData`)**\n```java\npackage ui.gui.controllers;\n\nimport domain.Book;\nimport javafx.fxml.FXML;\nimport javafx.scene.control.Label;\nimport javafx.scene.image.ImageView;\nimport javafx.scene.text.Text;\n\npublic class BookDetailController {\n\n    @FXML private ImageView largeCoverImage;\n    @FXML private Label fullTitle;\n    @FXML private Label authors;\n    // ... other labels for category, rating, progLang ...\n    @FXML private Text descriptionText;\n\n    private Book book;\n\n    // This method is called when the details window opens\n    public void setBookData(Book book, /* ... other context ... */) {\n        this.book = book;\n        fullTitle.setText(book.getTitle());\n        authors.setText(book.getAuthor());\n        descriptionText.setText(book.getDescription());\n        // ... set other labels ...\n\n        String url = (book.getCoverUrl() != null && !book.getCoverUrl().isEmpty())\n                     ? book.getCoverUrl()\n                     : \"https://via.placeholder.com/150x200?text=No+Cover\";\n        largeCoverImage.setImage(new Image(url, true)); // Set larger cover image\n    }\n\n    @FXML\n    private void handleBack() {\n        // Code to close this window and go back to the previous screen\n    }\n\n    @FXML\n    private void handleRead() {\n        // Code to open the book's download link in a web viewer\n    }\n}\n```\n*   Similar to `BookCardController`, `BookDetailController.setBookData` takes a `Book` object and populates all the labels and the large cover image on the detailed view.\n*   This provides a richer view of the book information that you saw briefly in the search results.", "mimetype": "text/plain", "start_char_idx": 15377, "end_char_idx": 17376, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "d1d4dd88-de94-4f62-8908-249ae9a9ee9a", "embedding": null, "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6c816bad-9dcf-4e5f-8fe9-8515f290e64a", "node_type": "4", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "74eaa45f6b8bfd17bfc1106c7a98f9728d85219084d4a91725c434c2d4bbc5f4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3c5b83d3-51f4-454b-855b-131239aab46d", "node_type": "1", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "1f74e0fd6dd4d8aca9800e3dd10d978ab48601fff5ec730e34e04f3885f9af31", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4002abd1-a951-4bc3-bbbf-c4cf4c266aac", "node_type": "1", "metadata": {}, "hash": "87bba6d2154318f8d252388f948e51e5804dbc88121225a44ba6b598c66e3c87", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "*   This provides a richer view of the book information that you saw briefly in the search results.\n\n### Comparing CLI and GUI for User Interface Presentation\n\nHere\u2019s a quick comparison of how the two interfaces handle showing information and getting input:\n\n| Feature                     | CLI Version (`CliView.java`)                          | GUI Version (JavaFX FXML & Controllers)                                   |\n| :-------------------------- | :---------------------------------------------------- | :------------------------------------------------------------------------ |\n| **How information is shown** | `System.out.println()` for plain text output          | Graphical elements: `Label`, `ImageView`, `VBox` in FXML files, controlled by Java classes |\n| **How input is gathered**   | `Scanner.nextLine()` reads typed text                 | `TextField` for typing, `Button` for clicking (all defined in FXML, handled by controllers) |\n| **Styling/Appearance**      | Limited to text formatting (bold, color if supported) | Rich visual styling using CSS (Cascading Style Sheets) and FXML attributes |\n| **Core Components**         | `CliView` class                                       | FXML files (blueprints) and Controller classes (brains)                 |\n| **Interaction Flow**        | Sequential: read input, print output, repeat          | Event-driven: user actions (clicks, types) trigger specific methods in controllers |\n\n### Conclusion\n\nIn this chapter, we explored \"User Interface Presentation,\" which is the \"face\" of our DevShelf application. We learned that:\n*   The UI is how DevShelf **shows** information (like search results) and **gathers** input (like your search queries).\n*   DevShelf offers two types of interfaces: the **CLI** (Command Line Interface) for text-based interaction, and the **GUI** (Graphical User Interface) for visual interaction.\n*   In the CLI, the `CliView` class uses `System.out.println()` to display and `Scanner` to read input.\n*   In the GUI, JavaFX uses **FXML files** as \"blueprints\" to define the layout and **Controller classes** (like `MainViewController`, `BookCardController`, `BookDetailController`) as \"workers\" to manage behavior and display [Book (Domain Model)](02_book__domain_model_.md) data visually.\n*   We saw how the GUI dynamically loads individual `BookCard` elements to present search results, linking the `Book` data to visual components.", "mimetype": "text/plain", "start_char_idx": 17277, "end_char_idx": 19706, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "4002abd1-a951-4bc3-bbbf-c4cf4c266aac", "embedding": null, "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6c816bad-9dcf-4e5f-8fe9-8515f290e64a", "node_type": "4", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "74eaa45f6b8bfd17bfc1106c7a98f9728d85219084d4a91725c434c2d4bbc5f4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d1d4dd88-de94-4f62-8908-249ae9a9ee9a", "node_type": "1", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "6e838bd9cf237b1ab2b1f6c88c7bf31c7235bc03381cba7f2364e77900773b2c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "*   We saw how the GUI dynamically loads individual `BookCard` elements to present search results, linking the `Book` data to visual components.\n\nUnderstanding the UI is crucial because it's your primary point of contact with DevShelf. Now that we know how books are presented to you, let's dive into how DevShelf efficiently finds those books in the first place!\n\n[Next Chapter: Search Index Management](04_search_index_management_.md)", "mimetype": "text/plain", "start_char_idx": 19562, "end_char_idx": 19998, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "59bc7d32-828f-431c-a8b7-8d6915269af7", "embedding": null, "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73dab258-d5a6-413a-8bf3-450a6e236fce", "node_type": "4", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "0139795258b42ec3a02280199f5d715b673fecc8c665f5197a6e6fbbc696c73c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0071d974-cec9-4981-8bfd-08de3f7d9f3a", "node_type": "1", "metadata": {}, "hash": "7747ffc06ebc2212c98368927f047b0976bf5edc810262e749e8f118f0d3cf40", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Welcome back to DevShelf! In our last chapter, [User Interface Presentation](03_user_interface_presentation_.md), we explored how DevShelf shows you information and takes your input. You learned how `Book` objects (our digital index cards) are displayed. But before those books can appear, DevShelf needs to *find* them, and find them *quickly*.\n\nImagine you walk into a massive library and ask the librarian, \"Find me all books about 'Python'!\" If the librarian had to physically open and read every single book in the entire library each time someone asked a question, they'd be incredibly slow! You'd be waiting forever for your search results.\n\nThis is exactly the problem that **Search Index Management** solves for DevShelf.\n\n### The \"Librarian's Secret Catalog\"\n\nSearch index management is like the librarian's secret, highly organized system that helps them find books in a flash. It's an **offline process**, meaning it happens *before* DevShelf is ready to answer your search queries. It involves meticulously preparing all the book data so that when you search, DevShelf doesn't have to read all the books again.\n\n**Our central use case:** To provide *instant* search results when a user types a query. Without this pre-computation, every search would feel like DevShelf was reading every book from scratch.\n\n### The `IndexerMain`: Our Master Cataloger\n\nThe `IndexerMain` is a special, separate part of our application that's solely responsible for building this \"secret catalog.\" You don't run it every time you start DevShelf. Instead, you run it **once**, or whenever our collection of [Book (Domain Model)](02_book__domain_model__.md) data changes (e.g., new books are added or old ones are removed).\n\nIt reads all the [Book (Domain Model)](02_book__domain_model__.md) information and creates two super-efficient lookup tables:\n\n1.  **Inverted Index:** This is like the index at the back of a textbook. You look up a specific word (term), and it tells you exactly *which books* contain that word.\n2.  **TF-IDF Scores:** This helps DevShelf understand *how important* a word is to a specific book, compared to its importance across *all* books.", "mimetype": "text/plain", "start_char_idx": 1, "end_char_idx": 2159, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "0071d974-cec9-4981-8bfd-08de3f7d9f3a", "embedding": null, "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73dab258-d5a6-413a-8bf3-450a6e236fce", "node_type": "4", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "0139795258b42ec3a02280199f5d715b673fecc8c665f5197a6e6fbbc696c73c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "59bc7d32-828f-431c-a8b7-8d6915269af7", "node_type": "1", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "7bf00ff6b51a15b3a74185fba64b77dea330079d0cd60308809e3427d86eef8c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "48a796a1-ff13-4e1a-8f85-59de9c6f2620", "node_type": "1", "metadata": {}, "hash": "a6d59449c33ca69175d089b6a92ac85c6505b96ef1864833b1e37b9a587a7591", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "2.  **TF-IDF Scores:** This helps DevShelf understand *how important* a word is to a specific book, compared to its importance across *all* books. It's how we know if \"Java\" is a key topic in a book, or just mentioned briefly.\n\nAfter `IndexerMain` finishes its job, it saves all this prepared data into a special file called `index_data.json`. Later, when DevShelf starts up (as we saw in [Application Startup & Flow Control](01_application_startup___flow_control_.md)), it simply *loads* this `index_data.json` file, and `boom!`, it's ready for fast searches.\n\n### How to Build the Search Index\n\nYou would run the `IndexerMain` program directly. It doesn't have a user interface; it just does its work and tells you what it's doing on the console.\n\n**`src/main/java/core/IndexerMain.java` (Simplified)**\n```java\npackage core;\n\nimport domain.Book;\nimport domain.SearchIndexData;\nimport features.search.IndexBuilder;\nimport storage.BookLoader;\nimport utils.TfIdfCalculator;\n// ... other imports\n\npublic class IndexerMain {\n    private static final String INDEX_FILE_PATH = (\"src/main/resources/data/index_data.json\");\n\n    public static void main(String[] args) {\n        System.out.println(\"--- Starting Offline Indexer ---\");\n        try {\n            // 1. Load the raw book data\n            BookLoader loader = new BookLoader(\"src/main/resources/data/book.json\");\n            List<Book> allBooks = loader.loadBooks();\n            System.out.println(\"Loading and indexing books...\");\n\n            // 2. Build the Inverted Index\n            IndexBuilder indexer = new IndexBuilder(/* ... */);\n            for(Book book : allBooks) {\n                indexer.indexDocument(book); // Add each book to the index\n            }\n\n            // 3. Calculate TF-IDF scores\n            TfIdfCalculator tfIdfCalculator = new TfIdfCalculator();\n            tfIdfCalculator.calculateIdf(indexer.getInvertedIndex(), allBooks.size());\n            tfIdfCalculator.calculateTfIdf(indexer.getInvertedIndex());\n            System.out.println(\"TF-IDF calculation complete.\");\n\n            // 4.", "mimetype": "text/plain", "start_char_idx": 2013, "end_char_idx": 4089, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "48a796a1-ff13-4e1a-8f85-59de9c6f2620", "embedding": null, "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73dab258-d5a6-413a-8bf3-450a6e236fce", "node_type": "4", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "0139795258b42ec3a02280199f5d715b673fecc8c665f5197a6e6fbbc696c73c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0071d974-cec9-4981-8bfd-08de3f7d9f3a", "node_type": "1", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "776062dd6b477cebf8cc3bcb87399da6f7bcee1ad46df23fd57a4123405030cd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c3291528-1a47-4c65-9e1a-d96ba67525f4", "node_type": "1", "metadata": {}, "hash": "e5bebbbb5c940ecfc86c23779e4351b3908b373be6eec167967570684004b04b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\");\n\n            // 4. Save everything to a JSON file\n            SearchIndexData indexData = new SearchIndexData(\n                indexer.getInvertedIndex(),\n                tfIdfCalculator.getTfIdfVectors(),\n                tfIdfCalculator.getIdfScores()\n            );\n            // ... (Use ObjectMapper to write indexData to INDEX_FILE_PATH)\n            System.out.println(\"--- Indexer Finished Successfully! --- \");\n        } catch (Exception e) {\n            System.err.println(\" --- Indexer failed with an error. --- \");\n            e.printStackTrace();\n        }\n    }\n}\n```\nWhen you run this `IndexerMain` class, it will print messages like \"Loading and indexing books...\" and \"Indexer Finished Successfully!\", then it creates or updates the `index_data.json` file. This file contains all the pre-computed magic for fast searching!\n\n#### What the `index_data.json` File Looks Like (Snippet)\n\nThis is a small part of the generated `index_data.json`.", "mimetype": "text/plain", "start_char_idx": 4067, "end_char_idx": 5026, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "c3291528-1a47-4c65-9e1a-d96ba67525f4", "embedding": null, "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73dab258-d5a6-413a-8bf3-450a6e236fce", "node_type": "4", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "0139795258b42ec3a02280199f5d715b673fecc8c665f5197a6e6fbbc696c73c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "48a796a1-ff13-4e1a-8f85-59de9c6f2620", "node_type": "1", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "fa9ba114ec4ea7e7257fe8b7d52fcc5b235ad6f4c4319eb11a8b9609cecd6d80", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "637c69a2-8ed0-4cd8-8e13-d035e20a8e80", "node_type": "1", "metadata": {}, "hash": "4b6eeeda40b7f1e19fef9ad27c704528599e1f8b67a5cc2387446a821666d64d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "This file contains all the pre-computed magic for fast searching!\n\n#### What the `index_data.json` File Looks Like (Snippet)\n\nThis is a small part of the generated `index_data.json`. It looks complicated, but it's just a structured way of storing our \"secret catalog\":\n\n**`src/main/resources/data/index_data.json` (Snippet)**\n```json\n{\n  \"invertedIndex\" : {\n    \"don't\" : [ { \"docId\" : 24, \"freq\" : 1, \"positions\" : [ 1 ] } ],\n    \"analysi\" : [ { \"docId\" : 1, \"freq\" : 1, \"positions\" : [ 19 ] } ],\n    \"python\" : [\n      { \"docId\" : 13, \"freq\" : 1, \"positions\" : [ 18 ] },\n      { \"docId\" : 26, \"freq\" : 4, \"positions\" : [ 0, 11, 16, 17 ] }\n    ]\n  },\n  \"tfIdfVectors\" : {\n    \"1\" : { \"rivest\" : 2.31, \"stein\" : 2.31, \"code\" : 1.01 },\n    \"2\" : { \"profession\" : 1.83, \"engin\" : 0.95, \"practic\" : 0.45 },\n    \"3\" : { \"engin\" : 0.95, \"c\" : 0.84, \"code\" : 1.49 }\n  },\n  \"idfScores\" : {\n    \"don't\" : 1.834, \"straub\" : 2.311, \"opus\" : 2.311, \"analysi\" : 1.357\n  }\n}\n```\n*   `invertedIndex`: Maps a word (like \"python\") to a list of \"postings\". Each \"posting\" tells us which book (`docId`), how many times (`freq`), and where (`positions`) the word appears in that book.\n*   `tfIdfVectors`: For each book (`docId`), it lists all the important words (`term`) in that book and their \"importance score\" (`tfIdf`).\n*   `idfScores`: For each word (`term`), it lists its overall rarity/importance score across *all* books.", "mimetype": "text/plain", "start_char_idx": 4844, "end_char_idx": 6255, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "637c69a2-8ed0-4cd8-8e13-d035e20a8e80", "embedding": null, "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73dab258-d5a6-413a-8bf3-450a6e236fce", "node_type": "4", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "0139795258b42ec3a02280199f5d715b673fecc8c665f5197a6e6fbbc696c73c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c3291528-1a47-4c65-9e1a-d96ba67525f4", "node_type": "1", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "11a5e018fa0c055d1fc11f2e2a18363823bccf4c76baed4754c3cb2f0b2d085c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6906ebfe-b03b-4030-b2f0-89f902232c90", "node_type": "1", "metadata": {}, "hash": "63e498a2ed077782b7c0f924c538c96117262cb9551c9b05f88d3e25aee4e24c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "*   `idfScores`: For each word (`term`), it lists its overall rarity/importance score across *all* books.\n\n### Under the Hood: Building the Search Index Step-by-Step\n\nLet's visualize the `IndexerMain` at work as it builds this powerful index:\n\n```mermaid\nsequenceDiagram\n    participant IndexerMain\n    participant BookLoader\n    participant TextProcessor\n    participant IndexBuilder\n    participant TfIdfCalculator\n    participant index_data.json\n\n    IndexerMain->>BookLoader: \"Load all book details from book.json\"\n    BookLoader-->>IndexerMain: \"Here's a list of all Book objects!\"\n    loop For each Book\n        IndexerMain->>TextProcessor: \"Clean and prepare text from book's title, description, etc.\"\n        Note over TextProcessor: Removes common words (\"the\"), corrects spelling, shortens words (stemming)\n        TextProcessor-->>IndexerMain: \"Here are the important, clean words (tokens)!\"\n        IndexerMain->>IndexBuilder: \"Add these tokens and book ID to the Inverted Index\"\n        Note over IndexBuilder: Records which words are in which book, and where.\n    end\n    IndexerMain->>TfIdfCalculator: \"Calculate overall word importance (IDF) across all books\"\n    IndexerMain->>TfIdfCalculator: \"Calculate word importance for each book (TF-IDF)\"\n    Note over TfIdfCalculator: Combines how often a word appears in a book with how rare it is overall.\n    TfIdfCalculator-->>IndexerMain: \"Here are all the TF-IDF scores!\"\n    IndexerMain->>index_data.json: \"Save Inverted Index, TF-IDF scores to index_data.json\"\n    Note over IndexerMain: This file is used later for fast searching!\n    IndexerMain-->>You: \"Index build complete!\"\n```\n\n### The Tools for Building the Index\n\nLet's look at the key components that `IndexerMain` uses to create the search index.\n\n#### Storing the Index Data: `SearchIndexData`\n\nThis class is like a digital container that holds all the different parts of our pre-computed index.", "mimetype": "text/plain", "start_char_idx": 6150, "end_char_idx": 8073, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "6906ebfe-b03b-4030-b2f0-89f902232c90", "embedding": null, "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73dab258-d5a6-413a-8bf3-450a6e236fce", "node_type": "4", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "0139795258b42ec3a02280199f5d715b673fecc8c665f5197a6e6fbbc696c73c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "637c69a2-8ed0-4cd8-8e13-d035e20a8e80", "node_type": "1", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "d385b416ae7e62eaa5de9a391eb117fff30155533ec23071e8f750978f013390", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1fb3a5b1-9718-49dc-b646-f446bddb149c", "node_type": "1", "metadata": {}, "hash": "10b5064c17c0dc6ae5ff267b69f56c76ff51a928072ee7a8f04c21fe093f946f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#### Storing the Index Data: `SearchIndexData`\n\nThis class is like a digital container that holds all the different parts of our pre-computed index.\n\n**`src/main/java/domain/SearchIndexData.java` (Simplified)**\n```java\npackage domain;\n\nimport lombok.Getter;\nimport java.util.List;\nimport java.util.Map;\n\npublic class SearchIndexData {\n    @Getter\n    private Map<String, List<Posting>> invertedIndex; // Our word-to-book map\n    @Getter\n    private Map<Integer, Map<String, Double>> tfIdfVectors; // Book-to-word-importance map\n    @Getter\n    private Map<String, Double> idfScores; // Overall word importance scores\n\n    // ... constructors (methods to create a SearchIndexData object) ...\n}\n```\nThis simple class acts as a blueprint for the entire search index data that gets saved to `index_data.json`. It clearly shows the three main pieces of information that make up our index.\n\n#### Loading the Index for the Application: `IndexLoader`\n\nOnce `IndexerMain` has created `index_data.json`, the main DevShelf application needs to load it. This is done by the `IndexLoader`.\n\n**`src/main/java/storage/IndexLoader.java` (Simplified)**\n```java\npackage storage;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport domain.SearchIndexData;\nimport java.io.File;\nimport java.io.IOException;\n\npublic class IndexLoader {\n\n    private final String indexFilePath;\n    private final ObjectMapper mapper;\n\n    public IndexLoader(String indexFilePath) {\n        this.indexFilePath = indexFilePath;\n        this.mapper = new ObjectMapper();\n    }\n\n    public SearchIndexData loadIndex() {\n        System.out.println(\"Loading pre-compiled index from: \" + indexFilePath);\n        try {\n            File indexFile = new File(indexFilePath);\n            if (!indexFile.exists()) {\n                throw new IOException(\"Index file not found! Please run IndexerMain first.\");\n            }\n            // This single line reads the JSON file and converts it into a SearchIndexData object!\n            SearchIndexData indexData = mapper.readValue(indexFile, SearchIndexData.class);\n            System.out.println(\"Index loaded successfully.\");\n            return indexData;\n        } catch (IOException e) {\n            // If the index file is missing, the app can't run correctly.\n            System.err.println(\"FATAL ERROR: Could not load index file.", "mimetype": "text/plain", "start_char_idx": 7925, "end_char_idx": 10267, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "1fb3a5b1-9718-49dc-b646-f446bddb149c", "embedding": null, "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73dab258-d5a6-413a-8bf3-450a6e236fce", "node_type": "4", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "0139795258b42ec3a02280199f5d715b673fecc8c665f5197a6e6fbbc696c73c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6906ebfe-b03b-4030-b2f0-89f902232c90", "node_type": "1", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "c8d66d60cacf51d600e3df56febd5c2eada3c61e74c1cdfaf8e9a18b214b20a8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2934dc83-98d8-4d63-a747-c9461be684fd", "node_type": "1", "metadata": {}, "hash": "c00f67e266ed2ce25f9d5b9032f42cffad9bf553ef8ad16560067c1c250ced43", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\");\n            return indexData;\n        } catch (IOException e) {\n            // If the index file is missing, the app can't run correctly.\n            System.err.println(\"FATAL ERROR: Could not load index file.\");\n            throw new RuntimeException(\"Failed to load search index\", e);\n        }\n    }\n}\n```\nThe `IndexLoader` reads the `index_data.json` file. If the file is missing, it stops the application because DevShelf cannot function without its \"secret catalog.\" If it's there, it uses a powerful tool called `ObjectMapper` (from the Jackson library) to quickly turn the JSON text into a `SearchIndexData` object that our Java program can use. This is where the magic of instant search begins when the app starts!\n\n#### Building the Inverted Index: `IndexBuilder`\n\nThis is where the actual \"indexing\" of books happens. For each book, the `IndexBuilder` extracts important words and records where they appear.\n\n**`src/main/java/features/search/IndexBuilder.java` (Simplified `indexDocument` method)**\n```java\npackage features.search;\n\nimport domain.Book;\nimport domain.Posting;\nimport utils.TextProcessor; // Our tool to clean up text\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\npublic class IndexBuilder {\n    private final Map<String, List<Posting>> invertedIndex; // The main index: word -> list of book locations\n    private final TextProcessor textProcessor;\n\n    public IndexBuilder(TextProcessor textProcessor) {\n        this.textProcessor = textProcessor;\n        this.invertedIndex = new HashMap<>();\n    }\n\n    public void indexDocument(Book book) {\n        // Combine all relevant text from the book\n        String bookData = book.getTitle() + \" \" + book.getAuthor() + \" \" + book.getDescription() + \" \" +\n                          book.getCategory() + \" \" + book.getProgLang() + \" \" + String.join(\" \", book.getTag());\n\n        // 1. Clean and normalize the text (e.g., \"Python\" -> \"python\", remove \"the\", shorten \"running\" -> \"run\")\n        List<String> stemmedTokens = textProcessor.process(bookData);\n\n        // 2.", "mimetype": "text/plain", "start_char_idx": 10054, "end_char_idx": 12151, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "2934dc83-98d8-4d63-a747-c9461be684fd", "embedding": null, "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73dab258-d5a6-413a-8bf3-450a6e236fce", "node_type": "4", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "0139795258b42ec3a02280199f5d715b673fecc8c665f5197a6e6fbbc696c73c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1fb3a5b1-9718-49dc-b646-f446bddb149c", "node_type": "1", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "b0acf8099d8e9e7fdf7f9870d30e759ab88f8a82b750b7d2f4b824ea2c29eb84", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1a2f3d84-70ca-43bd-9a52-12336770dad1", "node_type": "1", "metadata": {}, "hash": "7e793f8bd8d17e29d695c53d9af3a2e707c55c674262760e30330829b2d051bb", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Clean and normalize the text (e.g., \"Python\" -> \"python\", remove \"the\", shorten \"running\" -> \"run\")\n        List<String> stemmedTokens = textProcessor.process(bookData);\n\n        // 2. Record term positions and frequencies within THIS book\n        Map<String, List<Integer>> termPositions = new HashMap<>();\n        for (int pos = 0; pos < stemmedTokens.size(); pos++) {\n            String term = stemmedTokens.get(pos);\n            termPositions.computeIfAbsent(term, k -> new ArrayList<>()).add(pos);\n        }\n\n        // 3. Add this book's data to the main inverted index\n        for (Map.Entry<String, List<Integer>> entry : termPositions.entrySet()) {\n            String term = entry.getKey();\n            List<Integer> positions = entry.getValue();\n            Posting posting = new Posting(book.getBookId(), positions.size(), positions); // Store book ID, frequency, positions\n            invertedIndex.computeIfAbsent(term, k -> new ArrayList<>()).add(posting); // Add to global index\n        }\n    }\n    // ... getter for invertedIndex\n}\n```\nThe `indexDocument` method is called for every book.\n1.  It gathers all important text about the book (title, author, description, etc.).\n2.  It uses `TextProcessor` (which we'll explore in [Text Normalization Utilities](08_text_normalization_utilities_.md)) to clean up this text, making words lowercase, removing common \"stop words\" like \"a\" or \"the\", and reducing words to their root form (e.g., \"running\", \"ran\", \"runs\" all become \"run\").\n3.  It then goes through each cleaned word (or \"term\") in the book, noting its `bookId`, how many times it appears (`freq`), and where (`positions`). This information is stored in a `Posting` object.\n4.  Finally, it adds this `Posting` to our main `invertedIndex`. If a word is seen for the first time, it gets a new entry. If it's seen again in another book, that book's `Posting` is added to the word's existing list.\n\n#### Calculating Word Importance: `TfIdfCalculator`\n\nAfter the `InvertedIndex` is built, the `TfIdfCalculator` adds a layer of \"smartness\" by calculating TF-IDF scores.", "mimetype": "text/plain", "start_char_idx": 11967, "end_char_idx": 14051, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "1a2f3d84-70ca-43bd-9a52-12336770dad1", "embedding": null, "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73dab258-d5a6-413a-8bf3-450a6e236fce", "node_type": "4", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "0139795258b42ec3a02280199f5d715b673fecc8c665f5197a6e6fbbc696c73c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2934dc83-98d8-4d63-a747-c9461be684fd", "node_type": "1", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "92ff0581baf89614e168185c8654bc572d6de4dac5ffa4acc72b81c649075b2b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c07e7aea-c849-4cd6-ab80-a04e34bc8e82", "node_type": "1", "metadata": {}, "hash": "e5535aa21b7024e6ef733e6cd3b77d8260216145a8c51abf64c35eb8b0337599", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#### Calculating Word Importance: `TfIdfCalculator`\n\nAfter the `InvertedIndex` is built, the `TfIdfCalculator` adds a layer of \"smartness\" by calculating TF-IDF scores.\n\n**`src/main/java/utils/TfIdfCalculator.java` (Simplified `calculateIdf` and `calculateTfIdf` methods)**\n```java\npackage utils;\n\nimport domain.Posting;\nimport lombok.Getter;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\npublic class TfIdfCalculator {\n    @Getter\n    private Map<Integer, Map<String, Double>> tfIdfVectors = new HashMap<>(); // Book -> (Word -> Score)\n    @Getter\n    private Map<String, Double> idfScores = new HashMap<>(); // Word -> Overall Rarity Score\n\n    public void calculateIdf(Map<String, List<Posting>> invertedIndex, int totalDocCount) {\n        System.out.println(\"Calculating IDF scores for + \" + invertedIndex.size() + \" terms...\");\n        for(String term : invertedIndex.keySet()) {\n            int docFrequency = invertedIndex.get(term).size(); // How many documents contain this term\n            // IDF: Log (Total # of books / # of books containing this term)\n            double idf = Math.log10( (double) totalDocCount / docFrequency );\n            idfScores.put(term, idf); // Store the rarity score for each term\n        }\n    }\n\n    public void calculateTfIdf(Map<String, List<Posting>> invertedIndex) {\n        System.out.println(\"Calculating TF-IDF vectors for all documents...\");\n        for(String term : invertedIndex.keySet()) {\n            double idf = idfScores.get(term); // Get the overall rarity score\n            List<Posting> postings = invertedIndex.get(term);\n            for(Posting posting : postings ) {\n                int docId = posting.getDocId();\n                int termFreq = posting.getFreq(); // How many times this term appears in THIS book\n                // TF: 1 + Log (Term Frequency in this book)\n                double tf = 1 + Math.log10(termFreq);\n                double tfIdf = tf * idf; // Combine TF and IDF\n                tfIdfVectors.computeIfAbsent(docId, k -> new HashMap<>()).put(term,tfIdf); // Store importance score\n            }\n        }\n    }\n}\n```\n1.", "mimetype": "text/plain", "start_char_idx": 13883, "end_char_idx": 16020, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "c07e7aea-c849-4cd6-ab80-a04e34bc8e82", "embedding": null, "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73dab258-d5a6-413a-8bf3-450a6e236fce", "node_type": "4", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "0139795258b42ec3a02280199f5d715b673fecc8c665f5197a6e6fbbc696c73c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1a2f3d84-70ca-43bd-9a52-12336770dad1", "node_type": "1", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "a2b54a3752566e2b503aadbe50df7deea44c954c010965b813b37d887971c7c2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7f4181d1-ff1d-45e8-973f-80cea9975270", "node_type": "1", "metadata": {}, "hash": "9537932b4c1e1f76295b3d741446addb5ba9619fb2c9bf4fb1728c3e8a19c1f8", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "**`calculateIdf`**: This method first calculates the **Inverse Document Frequency (IDF)** for *every unique word* in our entire library. A word that appears in many books (like \"the\" or \"programming\") will have a low IDF score, meaning it's not very discriminating. A word that appears in few books (like \"quantum entanglement\") will have a high IDF score, meaning it's very specific.\n2.  **`calculateTfIdf`**: Then, for each word in each book, it calculates the **Term Frequency-Inverse Document Frequency (TF-IDF)** score.\n    *   **Term Frequency (TF)**: How often a word appears in a *specific book*. More occurrences mean more relevance to *that book*.\n    *   **TF-IDF = TF \\* IDF**: This final score tells us how important a word is to a specific book, taking into account how often it appears *in that book* and how rare it is *across the entire library*. High TF-IDF means a word is very relevant and unique to a document.\n\nThis entire process makes DevShelf incredibly efficient. When you search, it doesn't have to re-read and calculate all this information. It just looks up words and their scores in the pre-built `SearchIndexData`!\n\n### Conclusion\n\nIn this chapter, we delved into **Search Index Management**, the behind-the-scenes magic that makes DevShelf's search incredibly fast. We learned that:\n*   It's an **offline process** performed by `IndexerMain` to prepare book data for quick searching.\n*   The core components are the **Inverted Index** (mapping words to books) and **TF-IDF scores** (measuring word importance).\n*   The `IndexBuilder` populates the inverted index by processing book text and recording word locations.\n*   The `TfIdfCalculator` then assigns importance scores to words within books based on their frequency and rarity.\n*   All this prepared data is saved into `index_data.json` and loaded by the `IndexLoader` when DevShelf starts, turning our digital library into an instant search powerhouse.\n\nThis efficient preparation of data is crucial for the \"brain\" of DevShelf, our search engine. In the next chapter, we'll explore how this pre-computed index is actually used to answer your search queries!", "mimetype": "text/plain", "start_char_idx": 16022, "end_char_idx": 18168, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "7f4181d1-ff1d-45e8-973f-80cea9975270", "embedding": null, "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73dab258-d5a6-413a-8bf3-450a6e236fce", "node_type": "4", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "0139795258b42ec3a02280199f5d715b673fecc8c665f5197a6e6fbbc696c73c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c07e7aea-c849-4cd6-ab80-a04e34bc8e82", "node_type": "1", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "02cb72b8d822af9da7cf55f4c3f594b0b3fc2b9bf61aae5a6578ad38701e95e8", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "This efficient preparation of data is crucial for the \"brain\" of DevShelf, our search engine. In the next chapter, we'll explore how this pre-computed index is actually used to answer your search queries!\n\n[Next Chapter: Core Search Engine](05_core_search_engine_.md)", "mimetype": "text/plain", "start_char_idx": 17964, "end_char_idx": 18231, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "690ee5d4-df98-4fc8-9e4b-f827bac4cfd0", "embedding": null, "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4eb76d44-f06c-4ed4-9687-7fbc29020abc", "node_type": "4", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "6cd2deb2e1f38059bee3c3dbfb51fe532818a1110da3a2db86f1b0f399ca8972", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "324be7c9-b4a8-423a-ae10-54a02d05c438", "node_type": "1", "metadata": {}, "hash": "56661733cdd0cafefff7efa273a3bfe16fe1a54c682b772db9107d7465313e8e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Welcome back to DevShelf! In our last chapter, [Search Index Management](04_search_index_management_.md), we learned how DevShelf meticulously prepares a \"secret catalog\" (our search index) of all its books *before* you even start searching. This pre-computed index makes our library incredibly fast.\n\nNow, imagine you have this amazing, super-organized catalog. How do you actually *use* it to find the books you're looking for? If you ask a question like \"Find me books about clean code in Java,\" what happens next?\n\nThat's where the **Core Search Engine** comes in!\n\n### The \"Finder\" of Our Digital Library\n\nThe Core Search Engine is the primary brain of DevShelf that answers your search queries. It's the \"finder\" in our digital library. It takes your question (your search query), consults the \"secret catalog\" (the search index), and then quickly identifies and presents the initial set of books that are most relevant to what you asked.\n\n**Our central use case:** A user types a search query like \"Python machine learning\" into DevShelf, and the Core Search Engine needs to find and list the most pertinent books on that topic.\n\nLet's break down how it does this magic!\n\n### How the Core Search Engine Works\n\nThe Core Search Engine, primarily handled by the `QueryProcessor` component, performs these key steps:\n\n1.  **Understand Your Query:** It first cleans up your search query and breaks it into important words.\n2.  **Find Potential Books:** It then uses the pre-built \"inverted index\" from [Search Index Management](04_search_index_management_.md) to quickly identify *all* books that contain *any* of your important search words.\n3.  **Score for Relevance:** Not all matching books are equally good! It then calculates a \"relevance score\" for each potential book to your query. This score helps determine which books are the *most* pertinent.\n4.  **Rank and Present:** Finally, it sorts the books from highest score to lowest, ensuring that the best matches rise to the top of your search results.\n\n### Using the Core Search Engine\n\nYou don't directly tell the `QueryProcessor` what to do.", "mimetype": "text/plain", "start_char_idx": 1, "end_char_idx": 2105, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "324be7c9-b4a8-423a-ae10-54a02d05c438", "embedding": null, "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4eb76d44-f06c-4ed4-9687-7fbc29020abc", "node_type": "4", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "6cd2deb2e1f38059bee3c3dbfb51fe532818a1110da3a2db86f1b0f399ca8972", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "690ee5d4-df98-4fc8-9e4b-f827bac4cfd0", "node_type": "1", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "486908a9994a640450fc631106c9e32de16e0a7728a4bc2621c8a5c5e790e4a3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5c4a78f9-e26c-4f7a-88aa-c30a536e8e3a", "node_type": "1", "metadata": {}, "hash": "f1b7767a4e1f6bab940d0bc8fb814d20f9de40add843e4f6b0d75f9294b18717", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "### Using the Core Search Engine\n\nYou don't directly tell the `QueryProcessor` what to do. Instead, when you type into the search bar (in the GUI) or enter a command (in the CLI), our main application logic (like `DevShelfService` for GUI or `BookSearchEngine` for CLI) calls the `QueryProcessor` to do the heavy lifting.\n\nLet's look at how the `DevShelfService` (for the GUI) calls the `QueryProcessor`'s `search` method:\n\n**`src/main/java/ui/gui/services/DevShelfService.java` (Simplified `search` method)**\n```java\npackage ui.gui.services;\n\nimport domain.Book;\nimport domain.SearchResult;\nimport features.search.QueryProcessor; // Our search engine!\n// ... other imports\n\npublic class DevShelfService {\n    // ... other services and bookMap\n    private final QueryProcessor queryProcessor; // The brain of our search\n\n    public DevShelfService( /* ... other services, QueryProcessor queryProcessor ... */ ) {\n        // ... initialize other services\n        this.queryProcessor = queryProcessor; // Get the search engine ready\n    }\n\n    public SearchResponse search(String query) {\n        System.out.println(\"\ud83d\udd0d GUI Processing Query: [\" + query + \"]\");\n\n        // 1. Raw Search: Hand the query to our QueryProcessor\n        List<SearchResult> results = queryProcessor.search(query);\n\n        // ... (further steps like handling no results, re-ranking, converting to Book objects) ...\n\n        // Example output (after re-ranking and conversion):\n        // return new SearchResponse(books, isSuggestion, usedQuery);\n        return null; // Simplified\n    }\n    // ... other methods\n}\n```\nWhen you type \"Python\" and hit Enter, the `search` method in `DevShelfService` gets `query = \"Python\"`. It then simply passes this `query` to `queryProcessor.search(query)`. The `QueryProcessor` then goes to work and returns a list of `SearchResult` objects.\n\nA `SearchResult` object is a simple container that holds two things:\n*   `docId`: The unique ID of the book that matched.\n*   `score`: How relevant that book is to your query. A higher score means more relevant.", "mimetype": "text/plain", "start_char_idx": 2015, "end_char_idx": 4080, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "5c4a78f9-e26c-4f7a-88aa-c30a536e8e3a", "embedding": null, "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4eb76d44-f06c-4ed4-9687-7fbc29020abc", "node_type": "4", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "6cd2deb2e1f38059bee3c3dbfb51fe532818a1110da3a2db86f1b0f399ca8972", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "324be7c9-b4a8-423a-ae10-54a02d05c438", "node_type": "1", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "f963d5f8c00121f66c574ab7e51676288663d86a93a3145f10012ee023111e4d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "36a3288a-f9e6-4538-a968-14b13f0ce95d", "node_type": "1", "metadata": {}, "hash": "dd0c669b8ced0fa3ecce269558478c4392172ef18f719fa5ffe2bc055c9a79b9", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "*   `score`: How relevant that book is to your query. A higher score means more relevant.\n\n**`src/main/java/domain/SearchResult.java` (Simplified)**\n```java\npackage domain;\n\nimport lombok.Getter;\n\npublic class SearchResult implements Comparable<SearchResult> {\n\n    @Getter\n    private final int docId;   // The ID of the matching book\n    @Getter\n    private final double score; // How relevant it is to the query\n\n    public SearchResult(int docId, double score) {\n        this.docId = docId;\n        this.score = score;\n    }\n\n    // This helps us sort results from highest score to lowest\n    @Override\n    public int compareTo(SearchResult other) {\n        return Double.compare(other.score, this.score);\n    }\n    // ... toString() method for debugging ...\n}\n```\nAfter the `QueryProcessor` returns this list of `SearchResult`s, `DevShelfService` (or `BookSearchEngine` in CLI) takes these `docId`s, looks up the full [Book (Domain Model)](02_book__domain_model_.md) objects using our `bookMap` (from [Application Startup & Flow Control](01_application_startup___flow_control_.md) and [Book (Domain Model)](02_book__domain_model_.md)), and then passes them to the [User Interface Presentation](03_user_interface_presentation_.md) to be displayed.", "mimetype": "text/plain", "start_char_idx": 3991, "end_char_idx": 5242, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "36a3288a-f9e6-4538-a968-14b13f0ce95d", "embedding": null, "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4eb76d44-f06c-4ed4-9687-7fbc29020abc", "node_type": "4", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "6cd2deb2e1f38059bee3c3dbfb51fe532818a1110da3a2db86f1b0f399ca8972", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5c4a78f9-e26c-4f7a-88aa-c30a536e8e3a", "node_type": "1", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "0c5a8b74f68fb65442b59cfbb9ca6bf4c7d30e2c8dff78654a4b577aba8e1bd5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "33bc12fc-1a09-4f57-b5c0-f85bcc9b0ccf", "node_type": "1", "metadata": {}, "hash": "0971149d9222c934956fe25f4d2be33de15d60e9653424a613eb9bc6fc6f88cc", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "### Under the Hood: The `QueryProcessor` in Action\n\nLet's visualize what happens inside the `QueryProcessor` when you submit a search for \"Java algorithms\":\n\n```mermaid\nsequenceDiagram\n    participant User\n    participant App Service\n    participant QueryProcessor\n    participant TextProcessor\n    participant Search Index\n    participant Search Results\n\n    User->>App Service: \"Search: Java algorithms\"\n    App Service->>QueryProcessor: search(\"Java algorithms\")\n    QueryProcessor->>TextProcessor: \"Clean and stem 'Java algorithms'\"\n    Note over TextProcessor: \"java\" \"algorithm\"\n    TextProcessor-->>QueryProcessor: Cleaned terms: [\"java\", \"algorithm\"]\n    QueryProcessor->>QueryProcessor: Calculate query's TF-IDF vector\n    QueryProcessor->>Search Index: Find documents with \"java\" or \"algorithm\"\n    Note over Search Index: Uses Inverted Index to get initial doc IDs\n    Search Index-->>QueryProcessor: List of potential Book IDs (e.g., 1, 3, 5, 7)\n    loop For each potential Book ID\n        QueryProcessor->>Search Index: Get book's TF-IDF vector (e.g., for book ID 1)\n        Note over Search Index: Uses tfIdfVectors map\n        Search Index-->>QueryProcessor: Book 1's vector\n        QueryProcessor->>QueryProcessor: Calculate Cosine Similarity (Query Vector vs. Book 1 Vector)\n        Note over QueryProcessor: Assigns a relevance score (e.g., 0.75 for Book 1)\n    end\n    QueryProcessor->>QueryProcessor: Sort results by score (highest first)\n    QueryProcessor-->>Search Results: List<SearchResult> (e.g., (Book 1, 0.75), (Book 3, 0.62)...)\n    Search Results-->>App Service: Ranked Search Results\n    App Service-->>User: Display books\n```\n\n#### The `QueryProcessor` Class: The Search Mastermind\n\nThe `QueryProcessor` is the class that orchestrates the entire search process. It needs access to the tools we built in [Search Index Management](04_search_index_management_.md): the `invertedIndex`, `tfIdfVectors`, and `idfScores`.", "mimetype": "text/plain", "start_char_idx": 5244, "end_char_idx": 7191, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "33bc12fc-1a09-4f57-b5c0-f85bcc9b0ccf", "embedding": null, "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4eb76d44-f06c-4ed4-9687-7fbc29020abc", "node_type": "4", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "6cd2deb2e1f38059bee3c3dbfb51fe532818a1110da3a2db86f1b0f399ca8972", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "36a3288a-f9e6-4538-a968-14b13f0ce95d", "node_type": "1", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "d2aa1ae633250a3a0ff62992f5a5faa236f8234dcb2d94190ce94627a850ac8a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0277eadb-3097-4e01-8262-c30883366f8c", "node_type": "1", "metadata": {}, "hash": "418b4e5ca7f4bbb5a35e138fd06a513c4d3f0006fedf0a3987be9778302e434b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "It needs access to the tools we built in [Search Index Management](04_search_index_management_.md): the `invertedIndex`, `tfIdfVectors`, and `idfScores`. It also uses our `TextProcessor` (which we'll explore in [Text Normalization Utilities](08_text_normalization_utilities_.md)) to clean up the user's query.\n\n**`src/main/java/features/search/QueryProcessor.java` (Simplified Constructor)**\n```java\npackage features.search;\n\nimport domain.Posting;\nimport domain.SearchResult;\nimport utils.TextProcessor; // Our text cleaning tool\nimport java.util.*;\n\npublic class QueryProcessor {\n    private final TextProcessor textProcessor;\n    private final Map<String, List<Posting>> invertedIndex;     // Word -> Books containing it\n    private final Map<Integer, Map<String, Double>> tfIdfVectors; // Book ID -> (Word -> Score)\n    private final Map<String, Double> idfScores;                // Word -> Overall Rarity Score\n\n    public QueryProcessor(TextProcessor textProcessor,\n                          Map<String, List<Posting>> invertedIndex,\n                          Map<Integer, Map<String, Double>> tfIdfVectors,\n                          Map<String, Double> idfScores) {\n        this.textProcessor = textProcessor;\n        this.invertedIndex = invertedIndex;\n        this.tfIdfVectors = tfIdfVectors;\n        this.idfScores = idfScores;\n    }\n    // ... search method and other helper methods\n}\n```\nThe constructor simply takes all the pre-built index components and the `TextProcessor` as \"ingredients\" to do its job.\n\n#### The `search` Method: The Core Logic\n\nThis is the main method that runs when you search.\n\n**`src/main/java/features/search/QueryProcessor.java` (Simplified `search` method)**\n```java\n// Inside QueryProcessor class\npublic List<SearchResult> search(String rawQuery) {\n    // 1. Process the query (clean words, stem them)\n    List<String> queryTerms = textProcessor.process(rawQuery);\n    if (queryTerms.isEmpty()) {\n        return Collections.emptyList(); // No valid terms left to search\n    }\n\n    // 2. Calculate the query's own TF-IDF vector\n    Map<String, Double> queryVector = calculateQueryVector(queryTerms);\n\n    // 3.", "mimetype": "text/plain", "start_char_idx": 7038, "end_char_idx": 9190, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "0277eadb-3097-4e01-8262-c30883366f8c", "embedding": null, "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4eb76d44-f06c-4ed4-9687-7fbc29020abc", "node_type": "4", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "6cd2deb2e1f38059bee3c3dbfb51fe532818a1110da3a2db86f1b0f399ca8972", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "33bc12fc-1a09-4f57-b5c0-f85bcc9b0ccf", "node_type": "1", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "528df7ec818a78cac78102aea1a2fc11a3d7186bca2ac5d34542edeca6f06247", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6d42b3e7-b1ae-4ebc-be5f-5b65ada882a3", "node_type": "1", "metadata": {}, "hash": "edd5ede646289f49e67ba7def1f68fa6c796124e85a7028171a0fde8a40739ef", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Calculate the query's own TF-IDF vector\n    Map<String, Double> queryVector = calculateQueryVector(queryTerms);\n\n    // 3. Find all documents that match *any* query term using the inverted index\n    Set<Integer> matchingDocIds = findMatchingDocuments(queryTerms);\n\n    // 4. Score each matching document using Cosine Similarity\n    List<SearchResult> results = new ArrayList<>();\n    for (int docId : matchingDocIds) {\n        Map<String, Double> docVector = tfIdfVectors.get(docId); // Get book's TF-IDF vector\n        double score = cosineSimilarity(queryVector, docVector); // Calculate relevance!\n        if (score > 0) { // Only add if there's some relevance\n            results.add(new SearchResult(docId, score));\n        }\n    }\n\n    // 5. Rank (sort) the results by score (highest first)\n    Collections.sort(results);\n\n    return results;\n}\n```\nHere's a breakdown of the steps in `search()`:\n1.  **`textProcessor.process(rawQuery)`**: Just like `IndexerMain` processed book text, the `QueryProcessor` uses `TextProcessor` to clean and standardize your search query (e.g., \"Programming Books\" becomes [\"program\", \"book\"]).\n2.  **`calculateQueryVector(queryTerms)`**: It then creates a special numeric representation (a \"vector\") of your query, using the same TF-IDF logic applied to books. This helps us compare your query to books.\n3.  **`findMatchingDocuments(queryTerms)`**: This step is super fast because it uses the `invertedIndex` we built. It quickly gathers a list of all `bookId`s that contain any of the processed query terms.\n4.  **`cosineSimilarity(queryVector, docVector)`**: This is the core of relevance scoring. For each potential book, it compares the query's vector to the book's pre-computed `tfIdfVectors` using a mathematical technique called Cosine Similarity.\n5.  **`Collections.sort(results)`**: Finally, all the `SearchResult`s are sorted from highest relevance score to lowest, putting the best matches at the top.\n\n#### `findMatchingDocuments`: Rapid Document Retrieval\n\nThis method uses the `invertedIndex` to get all books that contain at least one of your query words.", "mimetype": "text/plain", "start_char_idx": 9068, "end_char_idx": 11176, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "6d42b3e7-b1ae-4ebc-be5f-5b65ada882a3", "embedding": null, "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4eb76d44-f06c-4ed4-9687-7fbc29020abc", "node_type": "4", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "6cd2deb2e1f38059bee3c3dbfb51fe532818a1110da3a2db86f1b0f399ca8972", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0277eadb-3097-4e01-8262-c30883366f8c", "node_type": "1", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "9834f5c8d2538f90facdd1f2d85593af0535b91d6ab98892592043eb0e9b45c1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "69c7df10-3b2b-4b33-9234-5f35b7d24708", "node_type": "1", "metadata": {}, "hash": "795e4b4b7e41192b1edac035256fd45fe534b1035f32d1cb96b76ee28a8cfeeb", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#### `findMatchingDocuments`: Rapid Document Retrieval\n\nThis method uses the `invertedIndex` to get all books that contain at least one of your query words.\n\n**`src/main/java/features/search/QueryProcessor.java` (Simplified `findMatchingDocuments` method)**\n```java\n// Inside QueryProcessor class\nprivate Set<Integer> findMatchingDocuments(List<String> queryTerms) {\n    Set<Integer> docIds = new HashSet<>();\n    for(String term : queryTerms) {\n        List<Posting> postings = invertedIndex.get(term); // Look up term in the index!\n        if(postings != null){\n            for(Posting p : postings) {\n                docIds.add(p.getDocId()); // Add all unique book IDs found\n            }\n        }\n    }\n    return docIds;\n}\n```\nFor each word in your query (e.g., \"java\"), it goes to the `invertedIndex` and retrieves all the `Posting` objects associated with \"java\". Each `Posting` tells it which `docId` (book ID) contains that word. It collects all these `docId`s into a `Set` to avoid duplicates, giving us a list of all potential candidate books.\n\n#### `calculateQueryVector`: Understanding the Query's Importance\n\nThis method creates a TF-IDF vector for *your search query itself*. This allows us to treat your query like a small \"document\" and compare it to our books.", "mimetype": "text/plain", "start_char_idx": 11020, "end_char_idx": 12300, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "69c7df10-3b2b-4b33-9234-5f35b7d24708", "embedding": null, "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4eb76d44-f06c-4ed4-9687-7fbc29020abc", "node_type": "4", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "6cd2deb2e1f38059bee3c3dbfb51fe532818a1110da3a2db86f1b0f399ca8972", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6d42b3e7-b1ae-4ebc-be5f-5b65ada882a3", "node_type": "1", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "d5f801f30e9e38fdfb866004e9b4d1d562b11a6b1f9cfc9f7cad177d1973fb76", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e1a1c153-9b3e-4680-8460-1d2c4770861e", "node_type": "1", "metadata": {}, "hash": "7157f90b966d9dcf5f5982c5633dee37dec3b6a697acc37000b769ceaecb64e8", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#### `calculateQueryVector`: Understanding the Query's Importance\n\nThis method creates a TF-IDF vector for *your search query itself*. This allows us to treat your query like a small \"document\" and compare it to our books.\n\n**`src/main/java/features/search/QueryProcessor.java` (Simplified `calculateQueryVector` method)**\n```java\n// Inside QueryProcessor class\nprivate Map<String, Double> calculateQueryVector(List<String> queryTerms) {\n    Map<String, Double> queryVector = new HashMap<>();\n    Map<String, Integer> termCounts = new HashMap<>(); // Count how many times each term appears in YOUR query\n\n    for(String term : queryTerms) {\n        termCounts.put(term, termCounts.getOrDefault(term, 0) + 1);\n    }\n\n    for(String term : termCounts.keySet()) {\n        double tf = 1 + Math.log10(termCounts.get(term)); // Calculate Term Frequency for query term\n        double idf = idfScores.getOrDefault(term, 0.0);    // Get Inverse Document Frequency from our index\n\n        queryVector.put(term, tf * idf); // Store TF-IDF score for query term\n    }\n    return queryVector;\n}\n```\nThis method essentially does the same TF-IDF calculation we saw in [Search Index Management](04_search_index_management_.md), but for the query. It counts how many times each word appears in *your query* (TF) and then multiplies it by the overall rarity of that word (`idfScores`) from our pre-built index.\n\n#### `cosineSimilarity`: Measuring How Alike Things Are\n\nThis is the clever math part! Cosine Similarity measures the \"angle\" between two \"vectors\" (our lists of TF-IDF scores for the query and a book).\n\n**Analogy:** Imagine your query and a book are two arrows in a multi-dimensional space.\n*   If they point in exactly the same direction, they are very similar (score = 1.0).\n*   If they point in completely different directions, they are not similar at all (score = 0.0).\n*   Anything in between is a partial match.", "mimetype": "text/plain", "start_char_idx": 12078, "end_char_idx": 13989, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "e1a1c153-9b3e-4680-8460-1d2c4770861e", "embedding": null, "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4eb76d44-f06c-4ed4-9687-7fbc29020abc", "node_type": "4", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "6cd2deb2e1f38059bee3c3dbfb51fe532818a1110da3a2db86f1b0f399ca8972", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "69c7df10-3b2b-4b33-9234-5f35b7d24708", "node_type": "1", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "c758f9f910fc854eaafd9641b02f7d0f1a2851fd481cc50d3cf656f04bb563e2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bed52443-f519-40da-ab66-c1c1ba83fea8", "node_type": "1", "metadata": {}, "hash": "fce58466fe86c029c31cb7862baef3ddd2d62d1ce4f287c601dbb6e5c80655d1", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "*   If they point in completely different directions, they are not similar at all (score = 0.0).\n*   Anything in between is a partial match.\n\n**`src/main/java/features/search/QueryProcessor.java` (Simplified `cosineSimilarity` method)**\n```java\n// Inside QueryProcessor class\nprivate double cosineSimilarity(Map<String, Double> vec1, Map<String, Double> vec2) {\n    if (vec2 == null) return 0.0; // If book has no TF-IDF data, it can't be similar\n\n    double dotProduct = 0.0;\n    double norm1 = 0.0; // \"Length\" of query vector\n    double norm2 = 0.0; // \"Length\" of document vector\n\n    // Calculate how much the two vectors overlap (dot product)\n    // and the \"length\" of the query vector (norm1)\n    for (String term : vec1.keySet()) {\n        double queryTermScore = vec1.get(term);\n        double bookTermScore = vec2.getOrDefault(term, 0.0);\n\n        dotProduct += queryTermScore * bookTermScore;\n        norm1 += queryTermScore * queryTermScore;\n    }\n\n    // Calculate the \"length\" of the document vector (norm2)\n    for (double score : vec2.values()) {\n        norm2 += score * score;\n    }\n\n    // Avoid division by zero\n    if (norm1 == 0.0 || norm2 == 0.0) {\n        return 0.0;\n    }\n\n    // The final formula: (Overlap) / (Length of Query * Length of Book)\n    return dotProduct / (Math.sqrt(norm1) * Math.sqrt(norm2));\n}\n```\nThis method takes two maps (the query's TF-IDF vector and a book's TF-IDF vector) and computes a score between 0 and 1. A score closer to 1 means the book is highly relevant to the query, while a score closer to 0 means it's not. This score is precisely what determines the book's ranking in your search results!\n\n### Conclusion\n\nIn this chapter, we explored the **Core Search Engine**, which is the \"finder\" of our DevShelf application. We learned that:\n*   The `QueryProcessor` is the main component responsible for taking your search query and finding relevant books.", "mimetype": "text/plain", "start_char_idx": 13849, "end_char_idx": 15761, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "bed52443-f519-40da-ab66-c1c1ba83fea8", "embedding": null, "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4eb76d44-f06c-4ed4-9687-7fbc29020abc", "node_type": "4", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "6cd2deb2e1f38059bee3c3dbfb51fe532818a1110da3a2db86f1b0f399ca8972", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e1a1c153-9b3e-4680-8460-1d2c4770861e", "node_type": "1", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "2b951d55b2c69f2dc82ceeea36c2185fba48a5b7592281bfef294a32d8fec4f7", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "We learned that:\n*   The `QueryProcessor` is the main component responsible for taking your search query and finding relevant books.\n*   It first **processes** your query (cleaning and stemming words).\n*   Then, it uses the pre-built `invertedIndex` from [Search Index Management](04_search_index_management_.md) to quickly **identify matching documents**.\n*   Crucially, it **scores** these books for relevance using techniques like Cosine Similarity, comparing the query's TF-IDF vector to each book's TF-IDF vector (also from [Search Index Management](04_search_index_management_.md)).\n*   Finally, it **ranks** the results, ensuring the most pertinent books are shown first.\n\nThis entire process allows DevShelf to quickly transform your simple search query into a prioritized list of highly relevant books. Now that we know how books are found, let's look at how DevShelf keeps track of what you click on and how you interact with the results!\n\n[Next Chapter: User Interaction & Analytics](06_user_interaction___analytics_.md)", "mimetype": "text/plain", "start_char_idx": 15629, "end_char_idx": 16660, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "cd005c07-a425-4aa7-84ac-2902b486053d", "embedding": null, "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fc82f45a-94bd-4023-86ca-38b5b26554ff", "node_type": "4", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "1a0764ed9a15c6f1286a2f45e7fcc1d528e443ee129f48fed44f286e9f44e789", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ca5519d2-0489-465a-8bef-634bca70efa4", "node_type": "1", "metadata": {}, "hash": "efe6efbbad0a2755252cd7507bd03aa8d73251bc98979b4f923a4a17d58606f4", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Welcome back to DevShelf! In our last chapter, [Core Search Engine](05_core_search_engine_.md), we learned how DevShelf's `QueryProcessor` is a brilliant \"finder,\" quickly sifting through our book catalog to give you relevant results. But what happens *after* you get those results? Do you click on the first one? The fifth one? Do you *always* pick the book with the highest rating, or sometimes a less-known one catches your eye?\n\nKnowing what users actually *do* with the search results is incredibly valuable! It's how DevShelf can become smarter and more adaptive over time, learning what's truly popular and trending. This is exactly what **User Interaction & Analytics** is all about.\n\n### The \"Hidden Assistant\" of DevShelf\n\nImagine DevShelf has a **hidden assistant** who quietly watches over your shoulder (not in a creepy way!) whenever you use the app. This assistant doesn't just see the books DevShelf *suggests* to you; they carefully note down *which books you actually click on* after a search.\n\n**The Problem It Solves:** If DevShelf only relies on things like word matching (TF-IDF scores) and static ratings, it might miss out on real-world trends. A book might have a great rating, but if no one ever clicks on it, maybe it's not as *relevant right now*. Conversely, a newer book might not have many ratings yet, but if everyone is suddenly clicking on it, DevShelf should recognize that it's *trending*!\n\n**Our Central Use Case:** A user searches for \"Java,\" sees a list of books, and then clicks on \"Effective Java.\" DevShelf needs to **record this click**, and later, use these click records to figure out which \"Java\" books (or any books) are currently the most popular, influencing future search results and recommendations.\n\nUser Interaction & Analytics allows DevShelf to learn from real user behavior, making the system feel more dynamic and helpful.\n\n### Part 1: Tracking User Clicks (The \"Logger\")\n\nThe first step in understanding user behavior is to record it. DevShelf has a special service dedicated to logging every time you click on a book.\n\n#### The `LoggingService`: DevShelf's Notebook\n\nThe `LoggingService` is like the hidden assistant's notebook.", "mimetype": "text/plain", "start_char_idx": 1, "end_char_idx": 2188, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "ca5519d2-0489-465a-8bef-634bca70efa4", "embedding": null, "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fc82f45a-94bd-4023-86ca-38b5b26554ff", "node_type": "4", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "1a0764ed9a15c6f1286a2f45e7fcc1d528e443ee129f48fed44f286e9f44e789", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cd005c07-a425-4aa7-84ac-2902b486053d", "node_type": "1", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "aa7f6c814da04b07fb09574ab04900e510fbaa18970365bd5debd12ab44e5796", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "50c837dc-a25f-4418-83e2-791b29f632b6", "node_type": "1", "metadata": {}, "hash": "30f28f18310c9bde15bb239d6e4864a63f9799acb8857ef6bbf7be0fdd387151", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "DevShelf has a special service dedicated to logging every time you click on a book.\n\n#### The `LoggingService`: DevShelf's Notebook\n\nThe `LoggingService` is like the hidden assistant's notebook. Whenever you click a book in the search results (or open its details), the application tells the `LoggingService` to make an entry in its notebook. This entry includes what you searched for (`query`), which book you clicked on (`clickedDocId`), and `when` you clicked it.\n\nAll these notes are saved into a simple text file named `logs.json`.\n\n#### The `LogEntry`: A Single Click Record\n\nBefore saving a click, DevShelf creates a `LogEntry` object. This is a small digital record, like a single line in our assistant's notebook.\n\n**`src/main/java/domain/LogEntry.java` (Simplified)**\n```java\npackage domain;\n\nimport lombok.Getter;\nimport java.time.Instant; // To record the exact time\n\n@Getter\npublic class LogEntry {\n    private String query;         // What the user searched for\n    private int clickedDocId;     // The unique ID of the book they clicked\n    private String timestamp;     // When the click happened\n\n    // A special method to create a new LogEntry\n    public LogEntry(String query, int clickedDocId) {\n        this.query = query;\n        this.clickedDocId = clickedDocId;\n        this.timestamp = Instant.now().toString(); // Record the current time automatically\n    }\n}\n```\nEach `LogEntry` clearly captures the essential details of a user's interaction with a book.", "mimetype": "text/plain", "start_char_idx": 1994, "end_char_idx": 3476, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "50c837dc-a25f-4418-83e2-791b29f632b6", "embedding": null, "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fc82f45a-94bd-4023-86ca-38b5b26554ff", "node_type": "4", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "1a0764ed9a15c6f1286a2f45e7fcc1d528e443ee129f48fed44f286e9f44e789", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ca5519d2-0489-465a-8bef-634bca70efa4", "node_type": "1", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "24858e8ceb4d68d91702bc99852665167228672a30993936fab2b48b5c61f9d1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "878cca16-26c8-4054-8089-6badc68b2ad7", "node_type": "1", "metadata": {}, "hash": "ac6cea77aceb57bc3d5d18cd89bd50ea6bd586b41587219562ea9fa33df8ebfd", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#### How a Click Gets Logged\n\nWhen you click a book (for instance, to see its full details in the GUI), here's the simplified flow:\n\n```mermaid\nsequenceDiagram\n    participant You\n    participant GUI Controller\n    participant DevShelfService\n    participant LoggingService\n    participant logs.json file\n\n    You->>GUI Controller: Click on \"Effective Java\" book card\n    GUI Controller->>DevShelfService: logClick(\"Java\", 89)\n    DevShelfService->>LoggingService: logClick(\"Java\", 89)\n    Note over LoggingService: Creates a LogEntry object and converts it to JSON\n    LoggingService->>logs.json file: Append {\"query\":\"Java\", \"clickedDocId\":89, ...}\n    logs.json file-->>LoggingService: (Data written)\n    LoggingService-->>DevShelfService: (Confirmation)\n    DevShelfService-->>GUI Controller: (Confirmation)\n    GUI Controller-->>You: Show \"Effective Java\" details\n```\n\nThe GUI Controller (like `MainViewController` or `BookDetailController` from [User Interface Presentation](03_user_interface_presentation_.md)) detects your click, tells `DevShelfService` (our main app brain, from [Application Startup & Flow Control](01_application_startup___flow_control_.md)), which then tells the `LoggingService` to record it.\n\nHere's how `LoggingService` writes that entry:\n\n**`src/main/java/utils/LoggingService.java` (Simplified `logClick` method)**\n```java\npackage utils;\n\nimport com.fasterxml.jackson.databind.ObjectMapper; // Tool to convert to JSON\nimport domain.LogEntry;\n\nimport java.io.BufferedWriter;\nimport java.io.FileWriter;\nimport java.io.IOException;\n\npublic class LoggingService {\n\n    private final String logFilePath;\n    private final ObjectMapper mapper;\n\n    public LoggingService(String logFilePath) {\n        this.logFilePath = logFilePath;\n        this.mapper = new ObjectMapper();\n    }\n\n    public void logClick(String query, int clickedDocId) {\n        LogEntry entry = new LogEntry(query, clickedDocId); // Create the LogEntry\n\n        // Convert the LogEntry object into a JSON text string\n        String jsonLogLine;\n        try {\n            jsonLogLine = mapper.writeValueAsString(entry);\n        } catch (IOException e) {\n            System.err.println(\"Failed to convert LogEntry to JSON.", "mimetype": "text/plain", "start_char_idx": 3478, "end_char_idx": 5696, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "878cca16-26c8-4054-8089-6badc68b2ad7", "embedding": null, "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fc82f45a-94bd-4023-86ca-38b5b26554ff", "node_type": "4", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "1a0764ed9a15c6f1286a2f45e7fcc1d528e443ee129f48fed44f286e9f44e789", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "50c837dc-a25f-4418-83e2-791b29f632b6", "node_type": "1", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "4175b1f25e65fb3c224b320417727c60f1867aeafd1577559c1effe142979e41", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "737b80ca-ff5e-46b3-80a2-07c9a7f171da", "node_type": "1", "metadata": {}, "hash": "beda6ff4f8174cab68f83aac3842452ba4ab5f2e2757a2a39c1efef9e09d7d93", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\");\n            return;\n        }\n\n        // Write the JSON string to the logs.json file, adding it at the end\n        try (BufferedWriter writer = new BufferedWriter(new FileWriter(logFilePath, true))) {\n            writer.write(jsonLogLine);\n            writer.newLine(); // Add a new line for the next log entry\n            writer.flush();   // Make sure it's written to disk immediately\n        } catch (IOException e) {\n            System.err.println(\"Failed to write log line to file.\");\n            e.printStackTrace();\n        }\n    }\n}\n```\nThe `logClick` method creates a `LogEntry`, converts it into a JSON string, and then appends this string as a new line to the `logs.json` file. This means `logs.json` grows larger with every user click!\n\n#### What the `logs.json` File Looks Like\n\n`logs.json` is a file where each line is a separate click event:\n\n**`src/main/resources/logs/logs.json` (Snippet)**\n```json\n{\"query\":\"clean\",\"clickedDocId\":58,\"timestamp\":\"2025-11-07T06:55:52.677729400Z\"}\n{\"query\":\"clean\",\"clickedDocId\":58,\"timestamp\":\"2025-11-07T06:55:56.033080Z\"}\n{\"query\":\"develop\",\"clickedDocId\":108,\"timestamp\":\"2025-11-07T18:59:05.735673500Z\"}\n{\"query\":\"The Pragmatic Programmer\",\"clickedDocId\":2,\"timestamp\":\"2025-11-14T14:09:05.605164500Z\"}\n{\"query\":\"The Pragmatic Programmer\",\"clickedDocId\":2,\"timestamp\":\"2025-11-14T14:09:08.471192900Z\"}\n```\nYou can see that book `ID 58` was clicked twice after a \"clean\" search, and book `ID 2` (The Pragmatic Programmer) was clicked several times. This raw data is exactly what our next component needs!\n\n### Part 2: Understanding Popularity (The \"Analyst\")\n\nGathering raw click data is useful, but we need to *process* it to get meaningful insights. This is where the analytics part comes in.", "mimetype": "text/plain", "start_char_idx": 5696, "end_char_idx": 7449, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "737b80ca-ff5e-46b3-80a2-07c9a7f171da", "embedding": null, "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fc82f45a-94bd-4023-86ca-38b5b26554ff", "node_type": "4", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "1a0764ed9a15c6f1286a2f45e7fcc1d528e443ee129f48fed44f286e9f44e789", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "878cca16-26c8-4054-8089-6badc68b2ad7", "node_type": "1", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "c84bf6e574504f5435f056f978a1ecc2257f17dd37650670c1d6f1f41949ec8f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "67387c05-180c-4026-9733-608e21df2120", "node_type": "1", "metadata": {}, "hash": "06158a25c8e34453bf5ac8698be0b5bacb68adafb2693c0384a4b74df4a1d805", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "### Part 2: Understanding Popularity (The \"Analyst\")\n\nGathering raw click data is useful, but we need to *process* it to get meaningful insights. This is where the analytics part comes in.\n\n#### The `LogAnalyzerMain`: Our Offline Popularity Calculator\n\nSimilar to `IndexerMain` (from [Search Index Management](04_search_index_management_.md)) which built our search index, `LogAnalyzerMain` is another **offline tool**. This means you run it separately, usually when the application isn't running, to process the accumulated `logs.json` file.\n\nIts job is simple:\n1.  Read every `LogEntry` from `logs.json`.\n2.  Count how many times each unique book (`clickedDocId`) was clicked.\n3.  Calculate a \"popularity score\" for each book based on its click count.\n4.  Save these popularity scores into a new file: `popularity.json`.\n\nThis `popularity.json` file will then be loaded by the main DevShelf application (just like `index_data.json`) to influence search results and recommendations.\n\n#### How to Run the `LogAnalyzerMain`\n\nYou would run `LogAnalyzerMain` directly, just like `IndexerMain`. It doesn't have a visual interface; it just prints messages as it processes the logs.\n\n**`src/main/java/core/LogAnalyzerMain.java` (Simplified `main` method)**\n```java\npackage core;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport domain.LogEntry;\nimport java.io.BufferedReader;\nimport java.io.FileReader;\nimport java.io.IOException;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class LogAnalyzerMain {\n\n    private static final String LOGS_FILE_PATH = \"src/main/resources/logs/logs.json\";\n    private static final String POPULARITY_OUT_PATH = \"src/main/resources/logs/popularity.json\";\n\n    public static void main(String[] args) {\n        System.out.println(\"--- Starting Log Analyzer ---\");\n        ObjectMapper mapper = new ObjectMapper(); // JSON helper\n\n        Map<Integer, Integer> clickCounts = new HashMap<>(); // Store: <BookID, ClickCount>\n\n        try (BufferedReader reader = new BufferedReader(new FileReader(LOGS_FILE_PATH))) {\n            String line;\n            while ((line = reader.", "mimetype": "text/plain", "start_char_idx": 7261, "end_char_idx": 9377, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "67387c05-180c-4026-9733-608e21df2120", "embedding": null, "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fc82f45a-94bd-4023-86ca-38b5b26554ff", "node_type": "4", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "1a0764ed9a15c6f1286a2f45e7fcc1d528e443ee129f48fed44f286e9f44e789", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "737b80ca-ff5e-46b3-80a2-07c9a7f171da", "node_type": "1", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "a7e12d751b0e644150ab0b03bf0c653ea1519904600c9c7f92a148838a656977", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a4ab157a-7f4d-4f3f-9bf9-9e3f75231bc8", "node_type": "1", "metadata": {}, "hash": "f030b295cb7730bfd542b6fb5408e01a0be0f8aa5cd78f16a56ef9a379afce1a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Integer> clickCounts = new HashMap<>(); // Store: <BookID, ClickCount>\n\n        try (BufferedReader reader = new BufferedReader(new FileReader(LOGS_FILE_PATH))) {\n            String line;\n            while ((line = reader.readLine()) != null) {\n                if (line.trim().isEmpty()) continue;\n                LogEntry entry = mapper.readValue(line, LogEntry.class); // Read each click entry\n                int docId = entry.getClickedDocId();\n                clickCounts.put(docId, clickCounts.getOrDefault(docId, 0) + 1); // Count clicks\n            }\n        } catch (IOException e) {\n            System.err.println(\"Error reading log file: \" + e.getMessage());\n            return;\n        }\n\n        // --- Calculate popularity scores (using a logarithm to soften high counts) ---\n        Map<Integer, Double> popularityScores = new HashMap<>();\n        double maxScore = 0.0;\n        for (Integer docId : clickCounts.keySet()) {\n            double score = Math.log10(1 + clickCounts.get(docId)); // E.g., 9 clicks -> log10(10) = 1.0\n            popularityScores.put(docId, score);\n            if (score > maxScore) maxScore = score; // Find the highest score\n        }\n\n        // --- Normalize all scores between 0 and 1 ---\n        if (maxScore > 0) {\n            for (Integer docId : popularityScores.keySet()) {\n                double normalizedScore = popularityScores.get(docId) / maxScore;\n                popularityScores.put(docId, normalizedScore);\n            }\n        }\n\n        // --- Save the final popularity map to popularity.json ---\n        try {\n            mapper.writerWithDefaultPrettyPrinter().writeValue(new File(POPULARITY_OUT_PATH), popularityScores);\n            System.out.println(\"--- Log Analyzer Finished ---\");\n        } catch (IOException e) {\n            System.err.println(\"Error writing popularity file: \" + e.getMessage());\n        }\n    }\n}\n```\nThis process:\n1.  Reads each line from `logs.json`.\n2.  Converts the JSON line back into a `LogEntry` object.\n3.  Increments a counter for the `clickedDocId`.\n4.", "mimetype": "text/plain", "start_char_idx": 9155, "end_char_idx": 11210, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "a4ab157a-7f4d-4f3f-9bf9-9e3f75231bc8", "embedding": null, "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fc82f45a-94bd-4023-86ca-38b5b26554ff", "node_type": "4", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "1a0764ed9a15c6f1286a2f45e7fcc1d528e443ee129f48fed44f286e9f44e789", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "67387c05-180c-4026-9733-608e21df2120", "node_type": "1", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "279d171ec5f0acd411f529a3518b3f80ea547dd0953c84768cd2af542a780edc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8894a184-3cfb-4dce-9564-eec38f60e98b", "node_type": "1", "metadata": {}, "hash": "dd0415dfd7a4edcd399a3106c5ecfb7a1ad287c7c9cbb73b0137a6290334a1f0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Reads each line from `logs.json`.\n2.  Converts the JSON line back into a `LogEntry` object.\n3.  Increments a counter for the `clickedDocId`.\n4.  After reading all logs, it calculates a raw score using `Math.log10(1 + clicks)`. This \"logarithm\" helps to smooth out the scores; for example, 100 clicks isn't *100 times* better than 1 click, but still significantly better. This prevents super popular books from totally dominating everything else.\n5.  Finally, it normalizes these scores so they all fall between `0.0` and `1.0`, making them easy to use in calculations later. The most popular book will have a score of `1.0`.\n6.  The result is then saved to `popularity.json`.\n\n#### What the `popularity.json` File Looks Like\n\n`popularity.json` contains a map where each book ID is linked to its calculated popularity score:\n\n**`src/main/resources/logs/popularity.json` (Snippet)**\n```json\n{\n  \"194\" : 0.227670248696953,\n  \"2\" : 1.0,           // This is the most popular book (score 1.0)\n  \"3\" : 0.3608488067145302,\n  \"6\" : 0.5286339468194481,\n  \"135\" : 0.7876096569652562,\n  \"72\" : 0.5286339468194481,\n  \"9\" : 0.5286339468194481,\n  \"58\" : 0.8668214419824227, // Second most popular book\n  // ... many more books and their scores ...\n}\n```\nNow, DevShelf has a clear, up-to-date understanding of which books are most frequently clicked by its users.\n\n### Part 3: Using Popularity to Improve DevShelf (The \"Enhancer\")\n\nThe collected and analyzed popularity scores are not just for show! They are directly fed back into DevShelf to make your experience better.\n\n#### 1. Boosting Search Results: The `ReRanker`\n\nIn [Core Search Engine](05_core_search_engine_.md), we learned that the `QueryProcessor` finds initial results.", "mimetype": "text/plain", "start_char_idx": 11067, "end_char_idx": 12786, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "8894a184-3cfb-4dce-9564-eec38f60e98b", "embedding": null, "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fc82f45a-94bd-4023-86ca-38b5b26554ff", "node_type": "4", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "1a0764ed9a15c6f1286a2f45e7fcc1d528e443ee129f48fed44f286e9f44e789", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a4ab157a-7f4d-4f3f-9bf9-9e3f75231bc8", "node_type": "1", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "226e32e6b2315bba5b63eee2b85ab40495ea95782805a26728dcab8e04887853", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "aa50750c-f4fd-48f6-882e-7d095d1691e3", "node_type": "1", "metadata": {}, "hash": "14c39946bc6a27860d0f9df5a7c82c5283956c7a1ccb22a9cd5db327ea3304c0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#### 1. Boosting Search Results: The `ReRanker`\n\nIn [Core Search Engine](05_core_search_engine_.md), we learned that the `QueryProcessor` finds initial results. Then, the `ReRanker` (from [Search Enhancement & Recommendations](07_search_enhancement___recommendations_.md)) steps in to sort those results, ensuring the *best* ones are at the top. The `ReRanker` uses our freshly calculated popularity scores to give a boost to trending books.\n\nWhen DevShelf starts, the `ReRanker` loads the `popularity.json` file:\n\n**`src/main/java/features/search/ReRanker.java` (Simplified Constructor)**\n```java\npackage features.search;\n\nimport com.fasterxml.jackson.core.type.TypeReference;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport domain.Book;\nimport domain.SearchResult;\nimport java.io.File;\nimport java.io.IOException;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\npublic class ReRanker {\n\n    private final Map<Integer, Book> bookMap;\n    private final Map<Integer, Double> popularityMap; // This will hold our popularity scores!\n\n    // Weights to decide how much each factor contributes to the final score\n    private static final double W_TFIDF = 0.7;      // Raw search score\n    private static final double W_POPULARITY = 0.20; // NEW: How popular the book is!\n    private static final double W_RATING = 0.10;     // Book's star rating\n\n    public ReRanker(Map<Integer, Book> bookMap, String popularityFilePath) {\n        this.bookMap = bookMap;\n        this.popularityMap = loadPopularity(popularityFilePath); // Load the popularity scores!\n    }", "mimetype": "text/plain", "start_char_idx": 12626, "end_char_idx": 14213, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "aa50750c-f4fd-48f6-882e-7d095d1691e3", "embedding": null, "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fc82f45a-94bd-4023-86ca-38b5b26554ff", "node_type": "4", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "1a0764ed9a15c6f1286a2f45e7fcc1d528e443ee129f48fed44f286e9f44e789", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8894a184-3cfb-4dce-9564-eec38f60e98b", "node_type": "1", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "627102b14cf1c4a88d05a03732e90f1ce34f318c95eec49fba78d3f5489ff63c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8dcfc01f-d0c9-47d9-a845-498cbed2de26", "node_type": "1", "metadata": {}, "hash": "1431dcea2ac8a5d3782009ea08eea6c490e7758819510ad58b41bfca47312c79", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "private Map<Integer, Double> loadPopularity(String path) {\n        // Reads popularity.json into the popularityMap\n        try { /* ... file reading logic ... */ }\n        catch (IOException e) { /* ... error handling ... */ }\n        return new HashMap<>(); // Return empty if loading fails\n    }\n\n    // ... reRank method ...\n}\n```\nWhen `ReRanker.reRank` is called, it combines the initial search score (`tfIdfScore`), the book's rating, and now also the `popularityScore` to calculate a `finalScore`:\n\n**`src/main/java/features/search/ReRanker.java` (Snippet from `reRank` method)**\n```java\n// Inside ReRanker class\npublic List<SearchResult> reRank(List<SearchResult> tfIdfResults, String query) {\n    List<SearchResult> reRankedResults = new ArrayList<>();\n\n    for (SearchResult oldResult : tfIdfResults) {\n        int docId = oldResult.getDocId();\n        Book book = bookMap.get(docId); // Get the book details\n\n        double tfIdfScore = oldResult.getScore();\n        double normalizedRating = book.getRating() / 5.0; // Scale rating from 0 to 1\n        double popularityScore = popularityMap.getOrDefault(docId, 0.0); // Get our popularity score!\n\n        // --- The MASTER FORMULA now includes popularity! ---\n        double finalScore = (W_TFIDF * tfIdfScore) +\n                            (W_RATING * normalizedRating) +\n                            (W_POPULARITY * popularityScore); // Add popularity weight\n\n        // ... (title boosts and other re-ranking logic) ...\n\n        reRankedResults.add(new SearchResult(docId, finalScore));\n    }\n    // ... (sorting by finalScore) ...\n    return reRankedResults;\n}\n```\nBy adding `W_POPULARITY * popularityScore` to the `finalScore`, DevShelf now makes sure that books that are currently trending (have higher popularity scores) appear higher in the search results, even if their initial `tfIdfScore` wasn't the absolute highest.\n\n#### 2. Providing Trending Recommendations: The `Graph`\n\nThe `Graph` component (from [Search Enhancement & Recommendations](07_search_enhancement___recommendations_.md)) uses this popularity data to provide smarter recommendations.", "mimetype": "text/plain", "start_char_idx": 14219, "end_char_idx": 16340, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "8dcfc01f-d0c9-47d9-a845-498cbed2de26", "embedding": null, "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fc82f45a-94bd-4023-86ca-38b5b26554ff", "node_type": "4", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "1a0764ed9a15c6f1286a2f45e7fcc1d528e443ee129f48fed44f286e9f44e789", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "aa50750c-f4fd-48f6-882e-7d095d1691e3", "node_type": "1", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "d55bb380acc35b8ca5f4c14a171937ba7e92501abd03d7d0379ab14dacaa11d5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3157dcb3-62a2-42ab-822e-9e290ca06552", "node_type": "1", "metadata": {}, "hash": "61c7f7f04c9c5d7b28e8f79ed7b80630d2e4e9efbd05458b975ee3eadf1a0f3e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#### 2. Providing Trending Recommendations: The `Graph`\n\nThe `Graph` component (from [Search Enhancement & Recommendations](07_search_enhancement___recommendations_.md)) uses this popularity data to provide smarter recommendations. When suggesting books related to a specific title, it can now prioritize those related books that are also highly popular.\n\n**`src/main/java/features/recommendation/Graph.java` (Snippet from `recommendPopularBooks` method)**\n```java\npackage features.recommendation;\n\nimport domain.Book;\nimport java.util.*;\n\npublic class Graph {\n\n    // ... graph building logic ...\n\n    public List<String> recommendPopularBooks(String bookTitle, int limit, Map<Integer, Double> popularityMap) {\n        String key = normalize(bookTitle); // Clean the input book title\n        Map<String, Double> relatedBooks = adjList.getOrDefault(key, Collections.emptyMap());\n        List<String> result = new ArrayList<>(relatedBooks.keySet());\n\n        final double ALPHA = 0.7; // How much emphasis on relevance vs. popularity (70% relevance, 30% popularity)\n\n        // Sort the related books based on a combined score\n        result.sort((a, b) -> {\n            double relA = relatedBooks.getOrDefault(a, 0.0); // Relevance score for book A\n            double relB = relatedBooks.getOrDefault(b, 0.0); // Relevance score for book B\n\n            // Get popularity scores from the map\n            double popA = popularityMap != null\n                    ? popularityMap.getOrDefault(titleToId.getOrDefault(a, -1), 0.0)\n                    : 0.0;\n            double popB = popularityMap != null\n                    ? popularityMap.getOrDefault(titleToId.getOrDefault(b, -1), 0.0)\n                    : 0.0;\n\n            // Combine relevance and popularity to get a final recommendation score\n            double scoreA = ALPHA * relA + (1 - ALPHA) * popA;\n            double scoreB = ALPHA * relB + (1 - ALPHA) * popB;\n\n            return Double.compare(scoreB, scoreA); // Sort from highest score to lowest\n        });\n\n        return result.subList(0, Math.min(limit, result.size())); // Return top recommendations\n    }\n}\n```\nHere, the `recommendPopularBooks` method takes the `popularityMap` as an input.", "mimetype": "text/plain", "start_char_idx": 16109, "end_char_idx": 18320, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "3157dcb3-62a2-42ab-822e-9e290ca06552", "embedding": null, "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fc82f45a-94bd-4023-86ca-38b5b26554ff", "node_type": "4", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "1a0764ed9a15c6f1286a2f45e7fcc1d528e443ee129f48fed44f286e9f44e789", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8dcfc01f-d0c9-47d9-a845-498cbed2de26", "node_type": "1", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "1dac69d70373c0dc2b6e566c45de54f72db8652a75f097e7d1b955779deccf54", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5c2f2544-3263-4f8b-946c-7368a07cd1c7", "node_type": "1", "metadata": {}, "hash": "557c21191b4a2320e26f5c98e33437c75a7926c67477f45e429833e35439bf0c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "It calculates a `scoreA` and `scoreB` for two books `A` and `B` by blending their intrinsic \"relevance\" (how strongly they are related to the original book) with their `popularity` score. This means that if two books are equally related, the more popular one will be recommended first!\n\n### Summary of User Interaction & Analytics Components\n\n| Component           | Role                                              | When it runs                                   | Data Processed/Produced                 | Used by                                |\n| :------------------ | :------------------------------------------------ | :--------------------------------------------- | :-------------------------------------- | :------------------------------------- |\n| `LoggingService`    | Records user clicks on books.                     | **Real-time** (during application use)         | `LogEntry` objects -> `logs.json`       | `DevShelfService` (called by UI)       |\n| `LogAnalyzerMain`   | Processes raw click logs to calculate popularity. | **Offline** (run separately, e.g., nightly)    | `logs.json` -> `popularity.json`        | No direct user, prepares data for others |\n| `LogEntry`          | A single data record of a user's click.           | Created by `LoggingService`                    | Stores `query`, `clickedDocId`, `timestamp` | `LoggingService`, `LogAnalyzerMain`    |\n| `popularity.json`   | Stores calculated popularity scores for each book. | Output of `LogAnalyzerMain`                    | Map of `BookID` to `PopularityScore`    | `ReRanker`, `Graph`                    |\n\n### Conclusion\n\nIn this chapter, we explored \"User Interaction & Analytics,\" the hidden assistant that helps DevShelf learn from your behavior. We discovered:\n*   The `LoggingService` actively records your clicks on books, saving them as `LogEntry` objects in the `logs.json` file.\n*   The `LogAnalyzerMain` is an offline tool that processes these raw `logs.json` files, counting clicks and calculating a normalized popularity score for each book, which is then saved to `popularity.json`.\n*   These crucial `popularity.json` scores are then used by other parts of DevShelf, like the `ReRanker` to boost trending books in search results and the `Graph` to provide popularity-aware recommendations.", "mimetype": "text/plain", "start_char_idx": 18321, "end_char_idx": 20617, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "5c2f2544-3263-4f8b-946c-7368a07cd1c7", "embedding": null, "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fc82f45a-94bd-4023-86ca-38b5b26554ff", "node_type": "4", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "1a0764ed9a15c6f1286a2f45e7fcc1d528e443ee129f48fed44f286e9f44e789", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3157dcb3-62a2-42ab-822e-9e290ca06552", "node_type": "1", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "f7d5911928dbfcbdc18c432c8256fb79295a91daaa25cd4e7fdf8d350312223b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "*   These crucial `popularity.json` scores are then used by other parts of DevShelf, like the `ReRanker` to boost trending books in search results and the `Graph` to provide popularity-aware recommendations.\n\nThis dynamic feedback loop ensures that DevShelf isn't just a static library but an intelligent system that adapts to what users are actually interested in, making your next search even more relevant and exciting!\n\nNext, we'll dive deeper into how DevShelf takes all these pieces\u2014search results, popularity, and relationships between books\u2014to enhance your overall search experience.\n\n[Next Chapter: Search Enhancement & Recommendations](07_search_enhancement___recommendations_.md)", "mimetype": "text/plain", "start_char_idx": 20410, "end_char_idx": 21100, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "348a97e3-aad2-4edc-a390-a19c7a78f9a6", "embedding": null, "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ee1bf574-7fb4-4b01-9027-03a50c180ec0", "node_type": "4", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "ca97d476ee0e14a74f8b324ad696d47cb18b6cdba386ea4f4b3c67d12343d8d3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b3226c57-7f18-4a89-961f-8ee61a217233", "node_type": "1", "metadata": {}, "hash": "27e4611a224775b1082c3f9e1e4e4e55c6af565b43e3c489ed8ebc3a2ea8e1a7", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Welcome back to DevShelf! In our last chapter, [User Interaction & Analytics](06_user_interaction___analytics_.md), we learned how DevShelf quietly observes your clicks to understand which books are truly popular. We also saw how this popularity data can already start making search results smarter.\n\nNow, imagine you walk into a library and ask for a book. A good librarian doesn't just point to the shelf. They might:\n1.  **Lead you to the most popular version** if several exist.\n2.  Say, \"**Did you mean** 'Clean Code' instead of 'Clen Cod'?\" if you misspelled.\n3.  Suggest, \"**If you liked** 'Effective Java', you might also enjoy 'Clean Code'!\"\n\nThis is exactly what **Search Enhancement & Recommendations** is about in DevShelf. It's the \"savvy librarian\" intelligence that takes the raw search results and makes them more helpful, intuitive, and personalized.\n\n### The Problem: Basic Search Isn't Enough\n\nThe [Core Search Engine](05_core_search_engine_.md) is excellent at finding books based on keywords, but it only gives us a basic list. What if:\n*   You type a query like \"pyton\" (misspelled)? The basic search might find nothing.\n*   You search for \"Java,\" and there are 20 Java books. Which ones should appear at the very top? Just the ones with the most keyword matches, or also the ones people actually *click on* and highly rate?\n*   You've found a great book, say \"The Pragmatic Programmer.\" How can DevShelf tell you about *other similar great books* you might not have known to search for?\n\nOur \"Search Enhancement & Recommendations\" abstraction solves these problems by adding layers of intelligence on top of the basic search.\n\n**Our central use case:** You type \"python maching learning\" (misspelled \"machine learning\") into DevShelf. We want DevShelf to:\n1.  **Suggest** \"Python Machine Learning\" if your original query yields poor results.\n2.  **Re-rank** the suggested results to show the most popular and highly-rated \"Python Machine Learning\" books first, especially if their titles match perfectly.\n3.  If you click on one of these books, **recommend** other related and popular machine learning books.", "mimetype": "text/plain", "start_char_idx": 1, "end_char_idx": 2132, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "b3226c57-7f18-4a89-961f-8ee61a217233", "embedding": null, "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ee1bf574-7fb4-4b01-9027-03a50c180ec0", "node_type": "4", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "ca97d476ee0e14a74f8b324ad696d47cb18b6cdba386ea4f4b3c67d12343d8d3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "348a97e3-aad2-4edc-a390-a19c7a78f9a6", "node_type": "1", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "a226c883e59038df4867c6b56de7edc32cdae47314fadfbc9ac99946afb8c4b5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "05c22777-a877-4d4d-a2f6-ff8459a3751b", "node_type": "1", "metadata": {}, "hash": "91989bd7e24b998e7a95be7fa4cfc17913774faf966405bc75ddc9a2a3f88b38", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "3.  If you click on one of these books, **recommend** other related and popular machine learning books.\n\n### Key Enhancements from Our Savvy Librarian\n\nDevShelf's savvy librarian has three main tools to enhance your search experience:\n\n1.  **Re-Ranker**: Makes initial search results smarter by blending multiple factors.\n2.  **Suggester**: Offers \"Did you mean?\" suggestions for misspelled queries.\n3.  **Graph**: Recommends related books based on similarities and popularity.\n\nLet's look at each one.\n\n### 1. Making Search Results Smarter: The `ReRanker`\n\nEven after the [Core Search Engine](05_core_search_engine_.md) gives us initial results, the order might not be perfect. The `ReRanker` component is like a special filter that re-sorts the books based on a combination of factors, not just how many times your keywords appear.\n\nIt considers:\n*   **Initial Relevance Score (TF-IDF)**: How well keywords match (from [Core Search Engine](05_core_search_engine_.md)).\n*   **Book's Rating**: How good users rated the book (from [Book (Domain Model)](02_book__domain_model__.md)).\n*   **Popularity**: How many times users have clicked this book (from [User Interaction & Analytics](06_user_interaction___analytics_.md)).\n*   **Exact Title Match**: A special boost if the book's title exactly matches or closely relates to your search query.\n\n#### How `ReRanker` Works (High-Level)\n\nWhen you search, the `QueryProcessor` (our basic search engine) finds an initial list of books. The `ReRanker` then takes this list and for each book, calculates a new \"final score\" by combining all the factors above. Books with higher final scores move to the top!\n\n#### Example: Boosting \"Clean Code\" for a \"clean code\" query\n\nIf you search for \"clean code\", a book titled \"Clean Code\" should definitely appear at the top. Even if another book has many mentions of \"clean\" and \"code\" in its description, an exact title match usually means it's what you're looking for. The `ReRanker` gives a big boost to exact title matches.", "mimetype": "text/plain", "start_char_idx": 2029, "end_char_idx": 4039, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "05c22777-a877-4d4d-a2f6-ff8459a3751b", "embedding": null, "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ee1bf574-7fb4-4b01-9027-03a50c180ec0", "node_type": "4", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "ca97d476ee0e14a74f8b324ad696d47cb18b6cdba386ea4f4b3c67d12343d8d3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b3226c57-7f18-4a89-961f-8ee61a217233", "node_type": "1", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "1973e6611721fd5e34577054bec1b6a4da77efc9fdcc10b2bc33884ed02cfce6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "182ba943-fde5-470a-84c7-ef86e376a583", "node_type": "1", "metadata": {}, "hash": "55eef7c5f7f8443ff5486335325e2ac01f09e115a74d1ab38a331cd7f5bb9cc5", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Even if another book has many mentions of \"clean\" and \"code\" in its description, an exact title match usually means it's what you're looking for. The `ReRanker` gives a big boost to exact title matches.\n\n#### Under the Hood: The `ReRanker` in Action\n\nThe `ReRanker` is used by the `BookSearchEngine` (for CLI) or `DevShelfService` (for GUI) right after the `QueryProcessor` returns its initial results.\n\n```mermaid\nsequenceDiagram\n    participant User\n    participant App Service\n    participant QueryProcessor\n    participant ReRanker\n    participant Search Results\n\n    User->>App Service: \"Search: Clean Code\"\n    App Service->>QueryProcessor: search(\"Clean Code\")\n    Note over QueryProcessor: Returns initial results (Book 3, Book 17, Book 5...) with basic relevance scores\n    QueryProcessor-->>App Service: List<SearchResult> (TF-IDF scores)\n    App Service->>ReRanker: reRank(initialResults, \"Clean Code\")\n    loop For each SearchResult\n        ReRanker->>ReRanker: Calculate combined score (TF-IDF + Rating + Popularity)\n        ReRanker->>ReRanker: Check for \"Clean Code\" in book's title (e.g., Book 3's title is \"Clean Code\")\n        Note over ReRanker: If title matches, apply a HUGE boost to Book 3's score\n    end\n    ReRanker-->>App Service: List<SearchResult> (new, boosted scores, re-sorted)\n    App Service-->>User: Display re-ranked books (Book 3 now at the very top)\n```\n\n#### The `ReRanker` Class: Calculating the Master Score\n\nThe `ReRanker` takes the initial search results and adjusts their scores. Notice the `W_...` values, which are \"weights\" that determine how much each factor contributes, and the `EXACT_TITLE_BOOST`, `STARTS_WITH_BOOST`, `CONTAINS_BOOST` values for title matches.", "mimetype": "text/plain", "start_char_idx": 3837, "end_char_idx": 5548, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "182ba943-fde5-470a-84c7-ef86e376a583", "embedding": null, "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ee1bf574-7fb4-4b01-9027-03a50c180ec0", "node_type": "4", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "ca97d476ee0e14a74f8b324ad696d47cb18b6cdba386ea4f4b3c67d12343d8d3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "05c22777-a877-4d4d-a2f6-ff8459a3751b", "node_type": "1", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "ddf4a046906e272d29961a47dfe1a19990d3971c41bfdd266ced8203195484f8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "15c77077-75d6-44f4-a149-09d24a96c970", "node_type": "1", "metadata": {}, "hash": "137bf613fce552fe351af280a1216f2a833df549ceb0c4852f458377660be901", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Notice the `W_...` values, which are \"weights\" that determine how much each factor contributes, and the `EXACT_TITLE_BOOST`, `STARTS_WITH_BOOST`, `CONTAINS_BOOST` values for title matches.\n\n**`src/main/java/features/search/ReRanker.java` (Simplified `reRank` method)**\n```java\n// Inside ReRanker class\npublic List<SearchResult> reRank(List<SearchResult> tfIdfResults, String query) {\n    List<SearchResult> reRankedResults = new ArrayList<>();\n    String cleanQuery = query.trim().toLowerCase(); // For title matching\n\n    for (SearchResult oldResult : tfIdfResults) {\n        Book book = bookMap.get(oldResult.getDocId()); // Get book details\n        if (book == null) continue;\n\n        double tfIdfScore = oldResult.getScore();\n        double normalizedRating = book.getRating() / 5.0; // Scale rating 0-1\n        double popularityScore = popularityMap.getOrDefault(book.getBookId(), 0.0);\n\n        // 1. Calculate the base score\n        double finalScore = (W_TFIDF * tfIdfScore) +\n                            (W_RATING * normalizedRating) +\n                            (W_POPULARITY * popularityScore);\n\n        // 2. Apply tiered title boosts\n        if (book.getTitle() != null) {\n            String title = book.getTitle().toLowerCase();\n            if (title.equals(cleanQuery)) { finalScore += EXACT_TITLE_BOOST; }\n            else if (title.startsWith(cleanQuery)) { finalScore += STARTS_WITH_BOOST; }\n            else if (title.contains(cleanQuery)) { finalScore += CONTAINS_BOOST; }\n        }\n        reRankedResults.add(new SearchResult(book.getBookId(), finalScore));\n    }\n    Collections.sort(reRankedResults); // Sort by this new finalScore\n    return reRankedResults;\n}\n```\nThis code shows how the `ReRanker` cleverly combines different aspects of a book (relevance, rating, popularity) and then adds a significant boost if the book's title is a strong match to your query. The final list is then sorted by these new `finalScore`s.\n\n### 2. \"Did You Mean?\" Suggestions: The `Suggester`\n\nEver type something quickly and make a typo, only for a search engine to helpfully suggest the correct spelling?", "mimetype": "text/plain", "start_char_idx": 5360, "end_char_idx": 7477, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "15c77077-75d6-44f4-a149-09d24a96c970", "embedding": null, "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ee1bf574-7fb4-4b01-9027-03a50c180ec0", "node_type": "4", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "ca97d476ee0e14a74f8b324ad696d47cb18b6cdba386ea4f4b3c67d12343d8d3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "182ba943-fde5-470a-84c7-ef86e376a583", "node_type": "1", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "2380d3c1e89491c0831ce70958d413286d333891224640f674e0e2ea7b865833", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8f9f27ab-53d4-403d-be68-c8c86bfe7c60", "node_type": "1", "metadata": {}, "hash": "1ddf121d26944d88dd7c5028d2e8a1d0ef8ac33de3c21d79f60dbefc5b332dc5", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "### 2. \"Did You Mean?\" Suggestions: The `Suggester`\n\nEver type something quickly and make a typo, only for a search engine to helpfully suggest the correct spelling? That's what our `Suggester` does! It's like the librarian gently correcting your pronunciation or spelling.\n\n#### How `Suggester` Works (High-Level)\n\nIf the [Core Search Engine](05_core_search_engine_.md) returns very few or no results for your original query, DevShelf will ask the `Suggester` to step in. The `Suggester` compares your misspelled query to all known book titles, looking for titles that are \"very similar\" even with a few errors. It uses a clever algorithm called **Levenshtein Distance** to measure how many changes (insertions, deletions, substitutions) are needed to turn one word into another. A smaller distance means higher similarity.\n\n#### Example: Searching \"pyton\"\n\nIf you type \"pyton\" (intending \"Python\"), the normal search might not find much.\nThe `Suggester` will compare \"pyton\" to \"Python\", \"C++\", \"Java\", etc. It will find that \"pyton\" is very close to \"Python\" (only one letter change needed!). It will then suggest \"Python\" as a possible correction.\n\n#### Under the Hood: `Suggester` in Action\n\nThe `Suggester` is called from `DevShelfService` (GUI) or `BookSearchEngine` (CLI) when the initial search yields empty results.", "mimetype": "text/plain", "start_char_idx": 7312, "end_char_idx": 8637, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "8f9f27ab-53d4-403d-be68-c8c86bfe7c60", "embedding": null, "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ee1bf574-7fb4-4b01-9027-03a50c180ec0", "node_type": "4", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "ca97d476ee0e14a74f8b324ad696d47cb18b6cdba386ea4f4b3c67d12343d8d3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "15c77077-75d6-44f4-a149-09d24a96c970", "node_type": "1", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "250b24eb3e0757cc3372746d1686d19cda8bdef58ce594131c630a3776236486", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2f7acdde-f746-4558-a1f1-53b898db6ba6", "node_type": "1", "metadata": {}, "hash": "5d1194ae15a956437d300a1ead050ae7e1b9966c3ba4d5190f15ad9c51e451ec", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#### Under the Hood: `Suggester` in Action\n\nThe `Suggester` is called from `DevShelfService` (GUI) or `BookSearchEngine` (CLI) when the initial search yields empty results.\n\n```mermaid\nsequenceDiagram\n    participant User\n    participant App Service\n    participant QueryProcessor\n    participant Suggester\n    participant All Book Titles\n    participant Search Results\n\n    User->>App Service: \"Search: pyton\"\n    App Service->>QueryProcessor: search(\"pyton\")\n    QueryProcessor-->>App Service: Returns NO results (empty List<SearchResult>)\n    App Service->>Suggester: suggestSimilar(\"pyton\")\n    Suggester->>All Book Titles: Compare \"pyton\" with every title (e.g., \"Python\", \"Java\", \"C#\")\n    Note over Suggester: Calculates similarity (e.g., Levenshtein Distance)\n    All Book Titles-->>Suggester: Returns best match (e.g., \"Python\")\n    Suggester-->>App Service: \"Python\"\n    App Service->>User: \"Did you mean: Python?\"\n    App Service->>QueryProcessor: search(\"Python\")\n    Note over QueryProcessor: Now returns results for \"Python\"\n    QueryProcessor-->>App Service: List<SearchResult> for \"Python\"\n    App Service->>User: Display books about Python\n```\n\n#### The `Suggester` Class: Finding Close Matches\n\nThe `Suggester` compares your search query to all book titles using a combined similarity score, where a higher score means a better match.", "mimetype": "text/plain", "start_char_idx": 8465, "end_char_idx": 9817, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "2f7acdde-f746-4558-a1f1-53b898db6ba6", "embedding": null, "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ee1bf574-7fb4-4b01-9027-03a50c180ec0", "node_type": "4", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "ca97d476ee0e14a74f8b324ad696d47cb18b6cdba386ea4f4b3c67d12343d8d3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8f9f27ab-53d4-403d-be68-c8c86bfe7c60", "node_type": "1", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "43b4bcaef44ec7243df77bf02e5c733efde67592751c64ce8034960f049b4c1d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6c803b5a-9e9d-4791-9439-a46146349132", "node_type": "1", "metadata": {}, "hash": "111536727c1646fe870363dc0fb1c32132c129a4108051efb0d8a8a8891ff3c5", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "**`src/main/java/features/search/Suggester.java` (Simplified `suggestSimilar` method)**\n```java\n// Inside Suggester class\npublic String suggestSimilar(String query) {\n    if (query == null || query.trim().isEmpty()) return null;\n\n    String cleanedQuery = preprocess(query); // Clean up query first\n    if (cleanedQuery.isEmpty()) return null;\n\n    double bestScore = 0.0;\n    String bestMatch = null;\n\n    for (String title : allTitles) { // Loop through ALL book titles\n        if (title == null || title.trim().isEmpty()) continue;\n\n        String cleanedTitle = preprocess(title);\n        if (cleanedTitle.isEmpty()) continue;\n\n        // Calculate similarity using global (Levenshtein) and word-level methods\n        double globalSim = calculateSimilarity(cleanedQuery, cleanedTitle);\n        double wordSim = wordLevelSimilarity(cleanedQuery, cleanedTitle);\n        double finalScore = 0.65 * wordSim + 0.35 * globalSim; // Combine scores\n\n        if (finalScore > bestScore) {\n            bestScore = finalScore;\n            bestMatch = title;\n        }\n    }\n    // Only suggest if the match is good enough (score >= 0.6)\n    return (bestMatch != null && bestScore >= 0.6) ? bestMatch : null;\n}\n```\nThe `preprocess` method cleans up the text, `calculateSimilarity` uses the Levenshtein distance, and `wordLevelSimilarity` compares words within the query and title. These are combined to find the best suggestion.\n\n### 3. Recommending Related Books: The `Graph`\n\nOnce you've found a book you like, DevShelf can suggest other books that are related. This is like the librarian saying, \"Oh, you liked this? Then you might be interested in these other books too!\"\n\n#### How `Graph` Works (High-Level)\n\nThe `Graph` component builds a \"network\" of books. Imagine each book as a \"node\" (a circle) in this network, and lines (called \"edges\") connect books that are similar. The strength of the connection (the similarity score) depends on shared authors, programming languages, categories, and tags.\n\nWhen you ask for recommendations for a specific book, the `Graph` looks at its immediate neighbors in this network.", "mimetype": "text/plain", "start_char_idx": 9819, "end_char_idx": 11935, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "6c803b5a-9e9d-4791-9439-a46146349132", "embedding": null, "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ee1bf574-7fb4-4b01-9027-03a50c180ec0", "node_type": "4", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "ca97d476ee0e14a74f8b324ad696d47cb18b6cdba386ea4f4b3c67d12343d8d3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2f7acdde-f746-4558-a1f1-53b898db6ba6", "node_type": "1", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "7d0aee0d89603d8ff382f25eab0f4285348bdd6688f1eda920ec48514ba37719", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "41127064-c158-4a0a-b2d4-50729107276c", "node_type": "1", "metadata": {}, "hash": "cd47fa6b5c96edd08eb80ff25634555efbd6b73bbc04845e8c67e4b14b2ab36d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "The strength of the connection (the similarity score) depends on shared authors, programming languages, categories, and tags.\n\nWhen you ask for recommendations for a specific book, the `Graph` looks at its immediate neighbors in this network. It then uses the popularity data (from [User Interaction & Analytics](06_user_interaction___analytics_.md)) to recommend the *most popular* of those related books first.\n\n#### Example: Recommendations for \"Clean Code\"\n\nIf you're viewing \"Clean Code\", the `Graph` might see that:\n*   \"The Pragmatic Programmer\" shares common \"Software Engineering\" tags.\n*   \"Effective Java\" is by a well-known author in the same general domain and is often clicked by people interested in \"Clean Code.\"\n\nThe `Graph` would then recommend these, prioritizing \"The Pragmatic Programmer\" if it's currently more popular than \"Effective Java.\"\n\n#### Under the Hood: `Graph` Building and Recommendations\n\nThe `Graph` is built once when the application starts, using all the available [Book (Domain Model)](02_book__domain_model__.md) objects.", "mimetype": "text/plain", "start_char_idx": 11693, "end_char_idx": 12754, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "41127064-c158-4a0a-b2d4-50729107276c", "embedding": null, "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ee1bf574-7fb4-4b01-9027-03a50c180ec0", "node_type": "4", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "ca97d476ee0e14a74f8b324ad696d47cb18b6cdba386ea4f4b3c67d12343d8d3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6c803b5a-9e9d-4791-9439-a46146349132", "node_type": "1", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "39bf47cc25f5217936a39a3107313e916a87d29d194b3bae406eb9f0065fc2f1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "215e8e0f-7f68-4f57-94a1-4421484caee7", "node_type": "1", "metadata": {}, "hash": "ce2d30f24890a1b02e3f4c37076cd69a8af0a91400ebf09b6961b977572c8e8d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#### Under the Hood: `Graph` Building and Recommendations\n\nThe `Graph` is built once when the application starts, using all the available [Book (Domain Model)](02_book__domain_model__.md) objects.\n\n**`src/main/java/features/recommendation/Graph.java` (Simplified `calculateSimilarityScore` method)**\n```java\n// Inside Graph class\npublic double calculateSimilarityScore(Book b1, Book b2) {\n    if (b1 == null || b2 == null) return 0.0;\n    double score = 0.0;\n    // Add points for matching attributes\n    if (equalsIgnoreCase(b1.getAuthor(), b2.getAuthor())) score += 1.0; // Strong match\n    if (equalsIgnoreCase(b1.getProgLang(), b2.getProgLang())) score += 0.9; // High match\n    \n    // Check for overlapping tags (e.g., \"clean-code\", \"refactoring\")\n    Set<String> tags1 = normalizeTags(b1.getTag());\n    Set<String> tags2 = normalizeTags(b2.getTag());\n    Set<String> intersection = new HashSet<>(tags1);\n    intersection.retainAll(tags2); // Tags that are in BOTH sets\n    Set<String> union = new HashSet<>(tags1);\n    union.addAll(tags2); // All unique tags from EITHER set\n    if (!union.isEmpty()) score += (intersection.size() / (double) union.size()) * 0.5;\n\n    if (equalsIgnoreCase(b1.getCategory(), b2.getCategory()) && score < 0.9) {\n        score += 0.2; // Weak match\n    }\n    return score >= 0.3 ? score : 0.0; // Only consider if score is above a threshold\n}\n```\nThis method is called for many pairs of books to build the graph. It compares their attributes and assigns a similarity score. For instance, if two books share the same author, they get a strong similarity boost.", "mimetype": "text/plain", "start_char_idx": 12558, "end_char_idx": 14154, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "215e8e0f-7f68-4f57-94a1-4421484caee7", "embedding": null, "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ee1bf574-7fb4-4b01-9027-03a50c180ec0", "node_type": "4", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "ca97d476ee0e14a74f8b324ad696d47cb18b6cdba386ea4f4b3c67d12343d8d3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "41127064-c158-4a0a-b2d4-50729107276c", "node_type": "1", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "6bcc50618cc70bc731985bb676b81481151a734a964db783e58dcdef1cea69ea", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b44802f6-54bb-4719-a37f-1c74a32e140a", "node_type": "1", "metadata": {}, "hash": "85b042d804a739de4cdbae488909194291efa9fed9a34a7636bbff8e3fa6b92f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "It compares their attributes and assigns a similarity score. For instance, if two books share the same author, they get a strong similarity boost.\n\nThen, when you ask for recommendations:\n\n```mermaid\nsequenceDiagram\n    participant User\n    participant App Service\n    participant Graph\n    participant ReRanker (Popularity)\n    participant Books\n\n    User->>App Service: \"Show recommendations for 'Clean Code'\"\n    App Service->>Graph: recommendPopularBooks(\"Clean Code\", 5, popularityMap)\n    Graph->>Graph: Find direct neighbors of \"Clean Code\" in the network (e.g., \"Pragmatic Programmer\", \"Effective Java\")\n    Graph->>ReRanker (Popularity): Get popularity scores for these neighbors\n    Note over Graph: Combines intrinsic similarity with popularity to rank recommendations\n    ReRanker (Popularity)-->>Graph: Popularity scores\n    Graph-->>App Service: List of recommended titles (e.g., [\"Pragmatic Programmer\", \"Effective Java\"])\n    App Service->>Books: Get full Book objects for titles\n    Books-->>App Service: List<Book>\n    App Service-->>User: Display recommended books\n```\n\nThe `recommendPopularBooks` method takes the chosen book's title, finds its most similar neighbors in the graph, and then uses the `popularityMap` (from the `ReRanker`) to sort these recommendations, ensuring trending and highly-clicked books are prioritized.\n\n**`src/main/java/features/recommendation/Graph.java` (Simplified `recommendPopularBooks` method)**\n```java\n// Inside Graph class\npublic List<String> recommendPopularBooks(String bookTitle, int limit, Map<Integer, Double> popularityMap) {\n    String key = normalize(bookTitle); // Clean input title\n    Map<String, Double> relatedBooks = adjList.getOrDefault(key, Collections.emptyMap());\n    List<String> result = new ArrayList<>(relatedBooks.keySet());\n\n    final double ALPHA = 0.7; // How much emphasis on relevance vs.", "mimetype": "text/plain", "start_char_idx": 14008, "end_char_idx": 15880, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "b44802f6-54bb-4719-a37f-1c74a32e140a", "embedding": null, "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ee1bf574-7fb4-4b01-9027-03a50c180ec0", "node_type": "4", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "ca97d476ee0e14a74f8b324ad696d47cb18b6cdba386ea4f4b3c67d12343d8d3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "215e8e0f-7f68-4f57-94a1-4421484caee7", "node_type": "1", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "86d2ceb0f1155b88904c1b5f1fe6d3de68a27a889c17f5e01829208e7822fff6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8d7e5543-64e3-42ea-bc79-dcb148b405d3", "node_type": "1", "metadata": {}, "hash": "0f2b699623863acfc988c8329b73bf5e9572933584af822eac32d75d14a0fc0f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "popularity (70% relevance, 30% popularity)\n\n    // Sort related books by a combined score of similarity AND popularity\n    result.sort((a, b) -> {\n        double relA = relatedBooks.getOrDefault(a, 0.0); // Similarity to original book\n        double relB = relatedBooks.getOrDefault(b, 0.0);\n\n        // Get popularity score from the map\n        double popA = popularityMap.getOrDefault(titleToId.getOrDefault(a, -1), 0.0);\n        double popB = popularityMap.getOrDefault(titleToId.getOrDefault(b, -1), 0.0);\n\n        // Combine relevance and popularity for final recommendation score\n        double scoreA = ALPHA * relA + (1 - ALPHA) * popA;\n        double scoreB = ALPHA * relB + (1 - ALPHA) * popB;\n\n        return Double.compare(scoreB, scoreA); // Sort highest score first\n    });\n    return result.subList(0, Math.min(limit, result.size())); // Return top N\n}\n```\nThis method takes a book title and the `popularityMap`. It finds books related to the input title (`relatedBooks`) and then sorts them by a `finalScore` which is a blend of their intrinsic similarity (`relA`, `relB`) and their current popularity (`popA`, `popB`).\n\n### The Savvy Librarian in Action: Putting It All Together\n\nLet's revisit our central use case: searching for \"python maching learning\".\n\n| Step                               | Component Involved | What Happens                                                                     | User Experience                                       |\n| :--------------------------------- | :----------------- | :------------------------------------------------------------------------------- | :---------------------------------------------------- |\n| **1. Initial Search**              | `QueryProcessor`   | Tries to find books for \"python maching learning\", finds few/none.               | \"No results found for 'python maching learning'.\"     |\n| **2. Suggestion**                  | `Suggester`        | Compares \"maching learning\" to titles, finds it's very close to \"machine learning\". | \"Did you mean: Python Machine Learning?\"              |\n| **3. Re-Search with Suggestion**   | `QueryProcessor`   | Runs search for \"Python Machine Learning\". Finds many books.                     | (System automatically searches for the suggestion)    |\n| **4.", "mimetype": "text/plain", "start_char_idx": 15881, "end_char_idx": 18160, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "8d7e5543-64e3-42ea-bc79-dcb148b405d3", "embedding": null, "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ee1bf574-7fb4-4b01-9027-03a50c180ec0", "node_type": "4", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "ca97d476ee0e14a74f8b324ad696d47cb18b6cdba386ea4f4b3c67d12343d8d3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b44802f6-54bb-4719-a37f-1c74a32e140a", "node_type": "1", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "cb29352484ee441ba48bf5f9b475ebca44221cd934509db6213ce9b2ce26df7c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Re-Search with Suggestion**   | `QueryProcessor`   | Runs search for \"Python Machine Learning\". Finds many books.                     | (System automatically searches for the suggestion)    |\n| **4. Enhance Search Results**      | `ReRanker`         | Takes results for \"Python Machine Learning\", boosts exact title matches (\"Python Machine Learning\"), and pushes up popular/highly-rated books. | Top results are the best, most relevant, and popular \"Python Machine Learning\" books. |\n| **5. Get Recommendations**         | `Graph`            | If you click on a \"Python Machine Learning\" book, it finds related books (e.g., \"Deep Learning\", \"Data Science Handbook\") and prioritizes those that are currently popular. | \"If you liked this, you might also like: Deep Learning, Data Science Handbook...\" |\n\n### Conclusion\n\nIn this chapter, we explored \"Search Enhancement & Recommendations,\" the intelligent layer that refines DevShelf's core search. We learned how:\n*   The `ReRanker` takes raw search results and makes them smarter by combining initial relevance, book ratings, user popularity, and powerful title boosting.\n*   The `Suggester` acts as our helpful librarian, correcting misspelled queries with \"Did you mean?\" suggestions using advanced similarity algorithms.\n*   The `Graph` builds a network of related books based on shared attributes and, combined with popularity data, provides personalized and trending recommendations.\n\nTogether, these components transform DevShelf from a basic search tool into a truly savvy digital librarian, making your search experience much more intuitive, helpful, and enjoyable!\n\nNext, we'll dive into the foundational tools that underpin many of these intelligent features: the \"Text Normalization Utilities\" that ensure all our text is clean and consistent.\n\n[Next Chapter: Text Normalization Utilities](08_text_normalization_utilities_.md)", "mimetype": "text/plain", "start_char_idx": 17962, "end_char_idx": 19850, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "c3405965-3835-4862-9028-a82d4102bec1", "embedding": null, "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "b2dc9d6c-4c98-42c5-9ebc-99a008254820", "node_type": "4", "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "hash": "39654890a2379ae3b4d9f1a61cec235b2dd0a88bd362763fb1a1cdcda3e8a888", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6e9c5c1d-37fc-4736-81eb-d37847daa968", "node_type": "1", "metadata": {}, "hash": "a45fc330e9aa76816e7c850bfa8f85278dd42a4bf81c382e93e6846b733ef38a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Welcome back to DevShelf! In our last chapter, [Search Enhancement & Recommendations](07_search_enhancement___recommendations_.md), we saw how DevShelf becomes a \"savvy librarian,\" offering intelligent suggestions and smart recommendations to improve your search experience. But all that intelligence relies on a fundamental, behind-the-scenes hero: making sure all text is clean and consistent.\n\nImagine asking a librarian for \"books on running,\" and they can only find books that specifically contain the word \"running.\" They might miss great books that use \"ran,\" \"runs,\" or \"jogging\"! Or what if you typed \"Python books,\" but a book's description said \"PYTHON programming guide\"? Without some clever pre-processing, these wouldn't match perfectly.\n\nThis is the problem that **Text Normalization Utilities** solve. It's like having a meticulous editor who pre-processes *all* text in the library \u2013 every book description and every search query you type \u2013 to make it uniform and easy for the search engine to understand.\n\n#### The Problem Our Utilities Solve\n\nText comes in all shapes and sizes. Sometimes it's all uppercase, sometimes it has punctuation, and often it contains very common words that don't help us find specific books. If DevShelf tries to match \"Python\" (capital P) from your query with \"python\" (lowercase p) in a book description, it won't work perfectly unless both are standardized.\n\n**Our central use case:** You search for \"How to write **Clean Code** in **Java**\". DevShelf needs to understand that you're looking for books on \"clean,\" \"code,\" and \"java,\" regardless of capitalization, common words like \"to\" or \"how,\" or even if the book says \"java programs\" instead of just \"java.\" This utility ensures your query matches the book's content accurately.\n\n### The Text Processor: Our Digital Editor\n\nThe main tool for text normalization in DevShelf is the `TextProcessor`. Think of it as our digital editor. Its job is to take any raw text (from book descriptions, titles, or your search query) and put it through a series of cleaning steps.\n\nWhen you give the `TextProcessor` some text, it does four main things:\n\n1.  **Tokenization**: Breaks down a sentence into individual \"words\" or \"tokens.\"\n2.  **Lowercasing**: Converts all text to lowercase.\n3.", "mimetype": "text/plain", "start_char_idx": 1, "end_char_idx": 2280, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "6e9c5c1d-37fc-4736-81eb-d37847daa968", "embedding": null, "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "b2dc9d6c-4c98-42c5-9ebc-99a008254820", "node_type": "4", "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "hash": "39654890a2379ae3b4d9f1a61cec235b2dd0a88bd362763fb1a1cdcda3e8a888", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c3405965-3835-4862-9028-a82d4102bec1", "node_type": "1", "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "hash": "dc7b83a48f571e808ebdf1efb7fa85b43b68880fe9a83f700dd793bea1a1e41d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1e47bb23-2b94-4cee-991d-ca2fa4b671cf", "node_type": "1", "metadata": {}, "hash": "5c442cb93028a2a9a20bedf9f31abea5d2688144bda6c95be17faa058fad9d6b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "**Tokenization**: Breaks down a sentence into individual \"words\" or \"tokens.\"\n2.  **Lowercasing**: Converts all text to lowercase.\n3.  **Stop Word Removal**: Filters out common, uninformative words.\n4.  **Stemming**: Reduces words to their basic \"root\" form.\n\n#### How `TextProcessor` is Used\n\nThe `TextProcessor` is a foundational utility. It's used by critical components like the `IndexBuilder` (from [Search Index Management](04_search_index_management_.md)) to process book content *before* indexing, and by the `QueryProcessor` (from [Core Search Engine](05_core_search_engine_.md)) to clean up your search queries.\n\nLet's see a simple example of how you'd use it:\n\n```java\n// Assuming 'textProcessor' is ready to use\nString rawText = \"The best BOOKS for running CODE in Python!\";\nList<String> cleanedWords = textProcessor.process(rawText);\nSystem.out.println(cleanedWords);\n```\n\n**Output:**\n```\n[best, book, run, code, python]\n```\n\nAs you can see, the original sentence `\"The best BOOKS for running CODE in Python!\"` has been transformed into a concise list of important, standardized words: `[\"best\", \"book\", \"run\", \"code\", \"python\"]`. \"The,\" \"for,\" \"in\" are gone (stop words), \"BOOKS\" became \"book\" (lowercasing, stemming), and \"running\" became \"run\" (stemming).\n\n### Under the Hood: The `TextProcessor`'s Workflow\n\nLet's visualize the `TextProcessor` at work when it cleans a piece of text:\n\n```mermaid\nsequenceDiagram\n    participant Raw Text\n    participant TextProcessor\n    participant StopWordLoader\n    participant Stemmer\n    participant Cleaned Words\n\n    Raw Text->>TextProcessor: \"Process 'The best BOOKS for running CODE in Python!'\"\n    TextProcessor->>TextProcessor: Tokenize & Lowercase\n    Note over TextProcessor: \"the\", \"best\", \"books\", \"for\", \"running\", \"code\", \"in\", \"python\"\n    TextProcessor->>StopWordLoader: \"Are 'the', 'for', 'in' stopwords?\"\n    StopWordLoader-->>TextProcessor: \"Yes, they are.\"", "mimetype": "text/plain", "start_char_idx": 2147, "end_char_idx": 4077, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "1e47bb23-2b94-4cee-991d-ca2fa4b671cf", "embedding": null, "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "b2dc9d6c-4c98-42c5-9ebc-99a008254820", "node_type": "4", "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "hash": "39654890a2379ae3b4d9f1a61cec235b2dd0a88bd362763fb1a1cdcda3e8a888", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6e9c5c1d-37fc-4736-81eb-d37847daa968", "node_type": "1", "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "hash": "311c085f1739a60d59157b940fbb70359b6c46938dfb49b0d6452367b0b1139a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "492c8d61-9fce-4146-abfc-56b199600184", "node_type": "1", "metadata": {}, "hash": "0b8995c1281d9e2a174cac5c5a3ebbd285a34d8b957f3fdd00171e88f59d0d35", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "StopWordLoader-->>TextProcessor: \"Yes, they are.\"\n    TextProcessor->>TextProcessor: Remove stopwords\n    Note over TextProcessor: \"best\", \"books\", \"running\", \"code\", \"python\"\n    TextProcessor->>Stemmer: \"Stem 'books', 'running'\"\n    Stemmer-->>TextProcessor: \"book\", \"run\"\n    TextProcessor->>TextProcessor: Collect stemmed words\n    TextProcessor-->>Cleaned Words: [\"best\", \"book\", \"run\", \"code\", \"python\"]\n```\n\n#### The `TextProcessor` Class: The Orchestrator\n\nThe `TextProcessor` class ties together all the individual cleaning steps. It takes a `Set` of stopwords (common words to ignore) and uses a `Stemmer` (a tool to find root words) when it's created.\n\n**`src/main/java/utils/TextProcessor.java` (Simplified Constructor)**\n```java\npackage utils;\n\nimport org.tartarus.snowball.ext.englishStemmer;\nimport java.util.Set;\n\npublic class TextProcessor {\n\n   private final Set<String> stopWords;           // Our list of uninformative words\n   private final englishStemmer stemmer = new englishStemmer(); // Our root-word finder\n\n   // When TextProcessor is created, it needs the list of stop words\n   public TextProcessor(Set<String> stopWords) {\n       this.stopWords = stopWords;\n   }\n\n   // ... process method ...\n}\n```\nThe constructor makes sure our `TextProcessor` is equipped with the necessary tools (`stopWords` and `stemmer`) to do its job effectively.\n\n#### The `process` Method: Step-by-Step Cleaning\n\nThis is the core method that performs all the normalization steps.\n\n**`src/main/java/utils/TextProcessor.java` (Simplified `process` method)**\n```java\n// Inside TextProcessor class\npublic List<String> process(String text) {\n\n    if (text == null || text.isBlank()) {\n        return Collections.emptyList(); // Handle empty or null text\n    }\n\n    // 1. Tokenization and Lowercasing\n    // Splits text by anything that's not a letter/number/apostrophe\n    String[] rawTokens = text.toLowerCase().split(\"[^a-zA-Z0-9']+\");\n    List<String> tokens = Arrays.asList(rawTokens);\n\n    // 2.", "mimetype": "text/plain", "start_char_idx": 4028, "end_char_idx": 6028, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "492c8d61-9fce-4146-abfc-56b199600184", "embedding": null, "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "b2dc9d6c-4c98-42c5-9ebc-99a008254820", "node_type": "4", "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "hash": "39654890a2379ae3b4d9f1a61cec235b2dd0a88bd362763fb1a1cdcda3e8a888", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1e47bb23-2b94-4cee-991d-ca2fa4b671cf", "node_type": "1", "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "hash": "c8fbb85447e35f8ad111683af85bdbe658a261ff9c114ccac93cd3715d14bcaa", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3fda8d3a-d756-469f-80cd-c3b2934de0e9", "node_type": "1", "metadata": {}, "hash": "9cd12b8c811703b899fe173e15c78831cf100f4cee2a21e1eb6fc5530cb25840", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Stop Word Removal\n    List<String> filteredTokens = new ArrayList<>();\n    for(String token : tokens) {\n        if (token.isEmpty()) continue; // Skip empty strings from splitting\n        if(!stopWords.contains(token)) { // If it's NOT a stop word\n            filteredTokens.add(token);\n        }\n    }\n\n    // 3. Stemming\n    List<String> stemmedTokens = new ArrayList<>();\n    for (String token : filteredTokens) {\n        stemmer.setCurrent(token); // Give the stemmer the word\n        stemmer.stem();            // Ask it to find the root\n        stemmedTokens.add(stemmer.getCurrent()); // Get the root word\n    }\n\n    return stemmedTokens;\n}\n```\nLet's break down these steps:\n\n1.  **Tokenization & Lowercasing**:\n    *   `text.toLowerCase()`: Converts the entire text to lowercase. \"BOOKS\" becomes \"books\", \"Python\" becomes \"python\".\n    *   `.split(\"[^a-zA-Z0-9']+\")`: This is a \"regular expression\" that tells Java to break the sentence into words wherever it finds characters that are *not* letters (a-z, A-Z), numbers (0-9), or apostrophes ('). So, \"running CODE!\" becomes [\"running\", \"code\"].\n\n2.  **Stop Word Removal**:\n    *   It loops through all the `tokens` (words) found in the previous step.\n    *   `!stopWords.contains(token)`: It checks if the current word is present in our `stopWords` list. If it's *not* a stop word (meaning it's an important word), it's added to `filteredTokens`.\n    *   This is how words like \"the,\" \"for,\" \"is\" are removed, as they generally don't help in understanding the core topic.\n\n3.  **Stemming**:\n    *   It takes each word from `filteredTokens` and hands it to our `stemmer`.\n    *   `stemmer.setCurrent(token)`: Loads the word into the stemmer.\n    *   `stemmer.stem()`: This is the magic! The stemmer uses linguistic rules to find the root form. \"running\" becomes \"run,\" \"developers\" becomes \"develop,\" \"algorithms\" becomes \"algorithm.\"", "mimetype": "text/plain", "start_char_idx": 6029, "end_char_idx": 7921, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "3fda8d3a-d756-469f-80cd-c3b2934de0e9", "embedding": null, "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "b2dc9d6c-4c98-42c5-9ebc-99a008254820", "node_type": "4", "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "hash": "39654890a2379ae3b4d9f1a61cec235b2dd0a88bd362763fb1a1cdcda3e8a888", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "492c8d61-9fce-4146-abfc-56b199600184", "node_type": "1", "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "hash": "33d0e27db2dd3cfd12120eceb2d0a2e93c1f274b31e138fdf3db6bcf398dce0f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "aa5b905f-228b-4932-b91a-6ef25521682f", "node_type": "1", "metadata": {}, "hash": "22faf98629cc53dedd1e1eea033c552a26fb3c2c763ce8f8cd180f4a8142f718", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "*   `stemmer.stem()`: This is the magic! The stemmer uses linguistic rules to find the root form. \"running\" becomes \"run,\" \"developers\" becomes \"develop,\" \"algorithms\" becomes \"algorithm.\"\n    *   `stemmedTokens.add(stemmer.getCurrent())`: The root word is then added to our final list.\n\n#### Loading Stop Words: `StopWordLoader`\n\nBut where do the `stopWords` come from? DevShelf has a special list of common English words in a file called `stopword.txt`. The `StopWordLoader`'s job is to read this file and provide the `TextProcessor` with the set of words to ignore.\n\n**`src/main/resources/data/stopword.txt` (Snippet)**\n```\n\"a\",\"an\",\"the\",\"and\",\"or\",\"but\",\"if\",\"then\",\"else\",\"on\",\"in\",\"at\",\"by\",\"for\",\"with\",\"about\",\"against\",\n\"between\",\"into\",\"through\",\"during\",\"before\",\"after\",\"above\",\"below\",\"to\",\"from\",\"up\",\"down\",\"of\",\"is\",\n\"are\",\"was\",\"were\",\"be\",\"been\",\"being\",\"as\",\"that\",\"this\",\"these\",\"those\",\"it\",\"its\",\"I\",\"you\",\"he\",\"she\",\"they\"\n```\nEach of these words will be considered \"unimportant\" by our `TextProcessor`.", "mimetype": "text/plain", "start_char_idx": 7733, "end_char_idx": 8760, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "aa5b905f-228b-4932-b91a-6ef25521682f", "embedding": null, "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "b2dc9d6c-4c98-42c5-9ebc-99a008254820", "node_type": "4", "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "hash": "39654890a2379ae3b4d9f1a61cec235b2dd0a88bd362763fb1a1cdcda3e8a888", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3fda8d3a-d756-469f-80cd-c3b2934de0e9", "node_type": "1", "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "hash": "e852e34d0a6fa1bf86a122197e15ac621b6bedd3d88af39ebd4d0d1be26e11b5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "377302f2-4c85-45ec-bd6a-38e0eeb6cce9", "node_type": "1", "metadata": {}, "hash": "3992ab7cef4c7612053d8d160a614ede98bf769be3a2fa00fa37634f4bba8233", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "**`src/main/java/utils/StopWordLoader.java` (Simplified `loadStopWords` method)**\n```java\npackage utils;\n\nimport java.io.BufferedReader;\nimport java.io.FileReader;\nimport java.io.IOException;\nimport java.util.HashSet;\nimport java.util.Set;\n\npublic class StopWordLoader {\n\n    // This method can be called directly without creating an object\n    public static Set<String> loadStopWords(String filePath) {\n       Set<String> stopWords = new HashSet<>();\n       try(BufferedReader reader = new BufferedReader(new FileReader(filePath))) {\n           String line;\n           while( (line = reader.readLine()) != null ) {\n               String word = line.trim().toLowerCase();\n               if(!word.isEmpty()) {\n                   stopWords.add(word); // Add each word from the file to our set\n               }\n           }\n       } catch (IOException e) {\n           System.err.println(\"Error loading stopwords file: \" + e.getMessage());\n       }\n       return stopWords;\n    }\n}\n```\nThe `loadStopWords` method simply reads each line from the `stopword.txt` file, cleans it up a bit (removes extra spaces, makes it lowercase), and adds it to a `HashSet`. A `HashSet` is perfect for fast \"contains\" checks later.\n\n#### The `Stemmer` Class: Finding Root Words\n\nThe `Stemmer` class (`src/main/java/utils/Stemmer.java`) in DevShelf acts as a convenient wrapper for an existing powerful library called \"Snowball Stemmer.\" This library knows the complex rules of English grammar to reduce words to their base form.\n\nFor instance, if you give it \"programming,\" it will return \"program.\" If you give it \"configured,\" it will return \"configur.\" This ensures that a search for \"program\" will match books containing \"programming,\" \"programs,\" \"programmer,\" or \"programmed.\"\n\n### Why Text Normalization is So Important\n\nText normalization is a silent hero in our search engine. Without it, DevShelf's search capabilities would be severely limited:\n\n| Feature                   | WITHOUT Text Normalization                                   | WITH Text Normalization                                                |\n| :------------------------ | :----------------------------------------------------------- | :--------------------------------------------------------------------- |\n| **Search Accuracy**       | Misses matches due to capitalization, punctuation, or different word endings. | Finds more relevant matches by standardizing all text.", "mimetype": "text/plain", "start_char_idx": 8762, "end_char_idx": 11193, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "377302f2-4c85-45ec-bd6a-38e0eeb6cce9", "embedding": null, "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "b2dc9d6c-4c98-42c5-9ebc-99a008254820", "node_type": "4", "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "hash": "39654890a2379ae3b4d9f1a61cec235b2dd0a88bd362763fb1a1cdcda3e8a888", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "aa5b905f-228b-4932-b91a-6ef25521682f", "node_type": "1", "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "hash": "fc1f0308c90106c5274e54a9519ec4858ce7bf1f5d325e8857d9ff0e822320bc", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "| Finds more relevant matches by standardizing all text.                 |\n| **Search Efficiency**     | The index (from [Search Index Management](04_search_index_management_.md)) would be much larger (e.g., storing \"Run\", \"Runs\", \"Running\" as separate terms). | Smaller index (only stores \"run\"), leading to faster lookups.         |\n| **User Experience**       | Frustrating, as users expect \"Java\" to match \"java\" and \"develop\" to match \"developer\". | Intuitive, forgiving search that \"understands\" what the user means. |\n| **Relevance Scoring**     | Scores might be skewed by common words or inconsistent spellings. | Clearer, more precise relevance scores.                                |\n\nThis table clearly shows why this seemingly simple step is absolutely crucial for DevShelf to function as an intelligent and user-friendly digital library.\n\n### Conclusion\n\nIn this chapter, we explored **Text Normalization Utilities**, the essential behind-the-scenes processes that make all our text clean, consistent, and easy for the search engine to understand. We learned that:\n*   The `TextProcessor` is our digital editor, performing **tokenization, lowercasing, stop word removal, and stemming** on all text inputs.\n*   It relies on a `Set` of `stopWords` loaded by the `StopWordLoader` from `stopword.txt` to filter out uninformative words.\n*   It uses a `Stemmer` to reduce words to their root form, allowing searches to match variations of words.\n*   This consistency is vital for the search engine (the [Core Search Engine](05_core_search_engine_.md)) to accurately match queries with book content and generate relevant results.\n\nBy ensuring all text is normalized, DevShelf provides a much more accurate, efficient, and user-friendly search experience, forming the bedrock for all its intelligent features.\n\nThis marks the end of our tutorial chapters for DevShelfGUI. We hope you've enjoyed this journey through the application's architecture and learned a lot about how a modern search engine works!", "mimetype": "text/plain", "start_char_idx": 11137, "end_char_idx": 13148, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}]}, "c1a46b39d0cc4d3ae470c6459dbb5dd92a0a31bd680489823fe00ac5a22904ca": {"nodes": [{"__data__": {"id_": "4a768108-aa1a-45c4-990f-0c8fa131787d", "embedding": [-0.08026563376188278, 0.03412580117583275, -0.0017976689850911498, 0.022398637607693672, 0.0743401050567627, -0.052413225173950195, -0.033864665776491165, 0.027329472824931145, -0.02287154085934162, -0.008099268190562725, 0.0016789162764325738, 0.018270952627062798, 0.01847260259091854, 0.010476779192686081, -0.043206747621297836, -0.012974976561963558, 0.008050982840359211, 0.02306397631764412, -0.051934149116277695, -0.008881433866918087, 0.09544112533330917, 0.014542577788233757, -0.023169944062829018, -0.0955318808555603, -0.035609424114227295, 0.07079844176769257, 0.004618580918759108, -0.045815035700798035, -0.010800444521009922, -0.12952417135238647, 0.012594464235007763, 0.018923241645097733, 0.06251490861177444, 0.004841079004108906, -0.024633143097162247, -0.05509402975440025, 0.03330571576952934, -0.027945242822170258, 0.03346824645996094, 0.018040258437395096, -0.005771923810243607, 0.053237687796354294, -0.029048828408122063, 0.08086133748292923, 0.015949632972478867, -0.024547619745135307, -0.0911608636379242, 0.00995610374957323, -0.05444493144750595, -0.05634156987071037, -0.11023019999265671, -0.02649478055536747, 0.013761444017291069, -0.003707496216520667, 0.01789291948080063, 0.03973722830414772, 0.013130661100149155, 0.025220049545168877, -0.02159549482166767, 0.024071989580988884, 0.04618026316165924, -0.06164127588272095, -0.11178448051214218, 0.08772888034582138, -0.0012762532569468021, 0.03514060005545616, 0.013156360946595669, -0.09880910068750381, 0.01940392702817917, -0.010710818693041801, 0.013416456989943981, 0.038906030356884, 0.0021055815741419792, 0.027141662314534187, 0.035023801028728485, -0.0006587181123904884, 0.023336002603173256, -0.019748525694012642, 0.043949805200099945, 0.024666475132107735, 0.019024590030312538, -0.03636261820793152, 0.010854331776499748, -0.013632829301059246, -0.0009637341136112809, -0.013620119541883469, 0.04374666512012482, -0.02267504297196865, 0.004245886113494635, -0.010569494217634201, 0.055749136954545975, -0.012808168306946754, 0.0335623100399971, 0.037649884819984436, -0.04280051589012146, -0.02362774685025215, 0.00979270413517952, 0.007039614021778107, -0.012357888743281364, 0.33263975381851196, -0.031898412853479385, 0.02019958198070526, 0.02125127799808979, -0.048817601054906845, 0.03624675050377846, -0.02928605116903782, 0.023681001737713814, 0.01877227984368801, 0.012408310547471046, -0.025601010769605637, 0.003604823024943471, -0.03541526943445206, 0.05106418579816818, -0.017207905650138855, 0.007815473712980747, -0.005818977952003479, -0.0773562341928482, 0.04568630829453468, 0.02303905040025711, 0.004696715157479048, -0.024002639576792717, 0.009557032026350498, 0.0033770010340958834, 0.038011323660612106, 0.06915903091430664, 0.011934886686503887, -0.04837336018681526, 0.1004762127995491, -0.02216952107846737, 0.008077055215835571, -0.014029459096491337, 0.014751550741493702, -0.06480535864830017, 0.00340480194427073, 0.03473778814077377, 0.04219711571931839, -0.04942488670349121, -0.020863983780145645, -0.016538305208086967, 0.02437962405383587, -0.026809267699718475, 0.08162438124418259, 0.03730091080069542, 0.01146083977073431, -0.07443668693304062, 0.06927089393138885, 0.0024188209790736437, 0.032641008496284485, -0.04368039220571518, 0.014732198789715767, 0.01844741590321064, 0.042901113629341125, -0.022173810750246048, -0.06124101206660271, 0.00930121261626482, 0.008761371485888958, 0.11234888434410095, 0.03493804857134819, -0.04236884415149689, -0.015964342281222343, -0.06518185138702393, -0.033195603638887405, -0.004379883408546448, 0.040482014417648315, -0.0326034314930439, -0.09439180046319962, -0.05200420692563057, 0.03908918797969818, -0.1444157510995865, -0.05390310287475586, -0.013138911686837673, -0.030941180884838104, -0.0590851791203022, 0.022247759625315666, -0.008800903335213661, -0.021887419745326042, -0.03215795010328293, 0.03281274437904358, 0.057651061564683914, -0.014074353501200676, 0.03230293095111847, -0.045126549899578094, -0.02526615560054779, 0.02442472241818905, -0.04928266629576683, 0.0006353569333441556, -0.04123346507549286, -0.03191344067454338, -0.0003808762412518263, 0.02985738031566143, -0.03365087881684303, -0.003418284934014082, 0.04698048159480095, 0.0010283967712894082, 0.03475627675652504, -0.007546506822109222, -0.0033938500564545393, 0.011278216727077961, -0.03893580660223961, 0.008395499549806118, 0.06443946063518524, 0.027576548978686333, -0.012814677320420742, 0.015470322221517563, -0.050931885838508606, -0.027850182726979256, -0.03582656383514404, -0.07982029765844345, 0.05327562987804413, -0.011553051881492138, -0.03288640081882477, 0.027372760698199272, -0.003908763639628887, -0.049095574766397476, -0.024559983983635902, 0.018197759985923767, -0.04523317888379097, 0.07289466261863708, -0.047921426594257355, 0.07731172442436218, -0.06067923828959465, -0.038136471062898636, -0.016628626734018326, -0.30843809247016907, 0.050253547728061676, -0.0426105335354805, -0.008144921623170376, 0.0071021378971636295, -0.024187954142689705, 0.0566997304558754, -0.0071762939915061, -0.025295056402683258, 0.04421352595090866, 0.10323381423950195, 0.0021053352393209934, -0.0039698658511042595, 0.02919524721801281, -0.011755125597119331, 0.028503507375717163, 0.047554899007081985, -0.06948679685592651, -0.0908152237534523, -0.01324943732470274, 0.05764327198266983, 0.003583992598578334, -0.005542018450796604, -0.08524983376264572, -0.01877466030418873, 0.013944325968623161, 0.07618515938520432, 0.06498769670724869, 0.07862338423728943, -0.04190697893500328, 0.09441930800676346, 0.07948044687509537, -0.05238449573516846, -0.10648950189352036, -0.015239303931593895, 0.0700429230928421, 0.03996600583195686, 0.015164407901465893, 0.03318159282207489, 0.016440756618976593, 0.014124691486358643, 0.003930416889488697, 0.03468300402164459, -0.009938935749232769, -0.044039130210876465, -0.04785556346178055, 0.03173767030239105, -0.058842480182647705, -0.017378054559230804, 0.06167677417397499, -0.037978556007146835, 0.04733557999134064, 0.050667911767959595, 0.05081546679139137, -0.02453184500336647, -0.0126454783603549, -0.08911910653114319, -0.0715160071849823, -0.02930452860891819, -0.08336976915597916, 0.023506637662649155, 0.008873563259840012, 0.010916990227997303, -0.03985670953989029, 0.03973323106765747, -0.0030363237019628286, -0.04998980462551117, -0.01370185799896717, 0.047419749200344086, -0.03266506269574165, -0.039183057844638824, 0.0194951593875885, -0.04864973574876785, 0.06270834058523178, 0.023782189935445786, 0.039991818368434906, 0.06353065371513367, 0.01433299109339714, -0.034588366746902466, -0.04503392055630684, -0.009815669618546963, 0.024192610755562782, 0.08597446978092194, -0.03074631839990616, 0.0012164602521806955, -0.024436643347144127, 0.02245803363621235, -0.017275448888540268, 0.03783126175403595, 0.034701984375715256, -0.0601411908864975, -0.009947797283530235, 0.005702565424144268, -0.06028839945793152, 0.05043387413024902, 0.063666932284832, -0.26424217224121094, 0.031075095757842064, 0.023527206853032112, 0.019888782873749733, 0.0034358149860054255, -0.019452521577477455, 0.044895317405462265, -0.04769287630915642, 0.0612042136490345, -0.04230065271258354, -0.04531051591038704, 0.005531913135200739, -0.015155159868299961, -0.07536408305168152, 0.04587904363870621, 0.0573875792324543, 0.08548708260059357, -0.012595848180353642, 0.02016449347138405, 0.06557535380125046, 0.03351660445332527, 0.02202957309782505, 0.1460108757019043, 0.03363855555653572, 0.006393503397703171, 0.021898183971643448, -0.01311582326889038, -0.04018065333366394, -0.023606697097420692, 0.07095730304718018, 0.0231394674628973, -0.05343146249651909, 0.07607713341712952, -0.026001693680882454, -0.033126138150691986, -0.017218559980392456, -0.014989931136369705, -0.0007205779547803104, 0.06481979042291641, -0.05745512247085571, -0.0291338711977005, 0.06843840330839157, -0.05863622575998306, 0.014452182687819004, 0.048852305859327316, -0.02917601354420185, -0.039380721747875214, -0.04739375039935112, -0.01310095377266407, -0.007817422039806843, 0.022922642529010773, 0.028861122205853462, 0.03329649567604065, 0.016387704759836197, 0.027552684769034386, 0.032860640436410904, 0.06111285835504532, 0.025358185172080994, 0.01500757411122322, -0.005349612329155207, -0.0035003582015633583, -0.029383733868598938, 0.06735611706972122, 0.015755504369735718, 0.04332270845770836], "metadata": {"file_name": "Chapter 0 Overview of DevShelf.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f97213e-2033-40d4-a34e-34b2b5a83687", "node_type": "4", "metadata": {"file_name": "Chapter 0 Overview of DevShelf.md"}, "hash": "6d2a36b37f261aa0147e0cfc07d130c8e9d8e9d1ec11c9a6c69b6bdfc6db393f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7290e2ef-a727-4a87-ac48-a2b171c8dab8", "node_type": "1", "metadata": {}, "hash": "c19a9cb1a9836dfecc6f27596d00059ba3f9037c6f9b8e9479ae5162034f471c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# Tutorial: DevShelfGUI\n\nDevShelfGUI is a **digital library search engine** that helps users *discover and read programming books*.\nIt offers an intuitive interface (both command-line and graphical) to **search for books**, provides *intelligent recommendations*,\nand allows users to *view book details and read PDFs*. The system also tracks user interactions to improve recommendations.", "mimetype": "text/plain", "start_char_idx": 1, "end_char_idx": 388, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "7290e2ef-a727-4a87-ac48-a2b171c8dab8", "embedding": [-0.06472420692443848, -0.023198887705802917, 0.007602914702147245, 0.018060877919197083, 0.03294211998581886, 0.0007404244970530272, -0.048836011439561844, 0.01633549854159355, -0.004881206899881363, 0.010633587837219238, 0.029439652338624, -0.0017822907539084554, -0.007526536472141743, 0.004103765822947025, -0.00919127743691206, 0.022530656307935715, 0.007036619819700718, -0.031198855489492416, 0.019121751189231873, -0.022179758176207542, 0.057003527879714966, 0.009007229469716549, 0.006322440691292286, -0.052630238234996796, -0.019437497481703758, 0.05901006981730461, -0.015484687872231007, -0.04992050305008888, -0.007180148269981146, -0.22903120517730713, -0.028201615437865257, -0.004200833849608898, 0.0768265351653099, 0.03452397510409355, -0.042609814554452896, -0.009239445440471172, 0.021291455253958702, 0.031015602871775627, 0.009125818498432636, -5.417276770458557e-05, -0.04260474443435669, -0.020423991605639458, -0.05360574275255203, 0.03437899425625801, 0.022952603176236153, -0.04288032650947571, 0.016049250960350037, -0.017146358266472816, -0.04429931193590164, -0.02001125179231167, -0.08076326549053192, -0.06127920374274254, 0.008886179886758327, 0.0415792353451252, 0.020157640799880028, 0.01274990476667881, 0.052612319588661194, 0.05889395624399185, -0.025744855403900146, 0.02574012614786625, 0.06294463574886322, -0.007992999628186226, -0.09779864549636841, 0.11441374570131302, 0.02646559663116932, 0.012102581560611725, -0.0522712804377079, 0.0012066697236150503, 0.012559107504785061, 0.028670061379671097, -0.04466022178530693, 0.011940589174628258, -0.02651437744498253, 0.029123567044734955, 0.03306679055094719, 0.015124104917049408, -0.020023899152874947, -0.013377243652939796, 0.008358650840818882, -0.04395856708288193, -0.0046140281483531, -0.001744549022987485, 0.020788412541151047, -0.026080213487148285, 0.03243299946188927, 0.006845684722065926, 0.018385479226708412, 0.009866110980510712, 0.025157079100608826, -0.04026589170098305, -0.043110571801662445, -0.05604924261569977, -0.025232531130313873, 0.004517713561654091, -0.031595125794410706, 0.026025325059890747, -0.00952727161347866, -0.019344953820109367, 0.024873964488506317, 0.39872393012046814, 0.0252644345164299, 0.03178490325808525, 0.012761418707668781, -0.023247811943292618, 0.029803499579429626, 0.00495413551107049, 0.04572247341275215, -0.044391125440597534, 0.05150017887353897, 0.02458474412560463, 0.013508711941540241, -0.022542109712958336, 0.0626944750547409, -0.06610023230314255, 0.03469814360141754, 0.01759125106036663, -0.013846802525222301, -0.0012289510341361165, 0.009026522748172283, 0.0023517704103142023, -0.013179296627640724, -0.0007242063875310123, 0.036454152315855026, -0.018995651975274086, 0.03522127866744995, 0.009779594838619232, 0.05613800510764122, 0.07161881774663925, -0.010768873617053032, -0.019026512280106544, 0.06685484945774078, 0.07361704111099243, -0.07440324127674103, 0.008343995548784733, 0.03199272230267525, 0.001178657985292375, -0.025911981239914894, -0.012153471820056438, 0.019390825182199478, 0.03274093568325043, -0.05423932522535324, 0.025002598762512207, 0.013342085294425488, -0.08033270388841629, -0.06227661296725273, 0.15402968227863312, 0.060328997671604156, -0.025868479162454605, -0.034478992223739624, -0.02904154360294342, 0.0357840470969677, 0.06345261633396149, 0.023872630670666695, -0.024170298129320145, -0.01441205758601427, 0.04767667129635811, 0.007984161376953125, 0.03190240263938904, -0.08555818349123001, -0.010391231626272202, -0.02457617036998272, 8.709778194315732e-05, -0.026176245883107185, 0.08911978453397751, 0.03269213065505028, -0.1190524771809578, 0.009981210343539715, 0.01659444347023964, -0.10359787195920944, 0.013946439139544964, -0.040214553475379944, -0.008812053129076958, -0.027322160080075264, 0.034605104476213455, 0.003398127155378461, -0.016110388562083244, -0.02248903177678585, -0.003587726503610611, 0.01120781246572733, 0.02815556526184082, 0.027301698923110962, -0.06470782309770584, -0.03151087462902069, 0.036422036588191986, -0.03188227489590645, -0.0014477678341791034, -0.018443481996655464, 0.023669403046369553, -0.015965433791279793, 0.03235655277967453, -0.04548921063542366, -0.020270835608243942, -0.03473804518580437, 0.05458565056324005, -0.002739001763984561, -0.0349394790828228, 0.003450173418968916, -0.017601294443011284, -0.023589199408888817, -0.0439426489174366, 0.09200721979141235, 0.002952341455966234, -0.01855114847421646, 0.008259459398686886, -0.02449178323149681, 0.07435568422079086, -0.036288000643253326, -0.03362077847123146, 0.06509087979793549, -0.04740986227989197, -0.056071531027555466, 0.012019817717373371, -0.01004590094089508, -0.006078192498534918, 0.02538810670375824, -0.03855501860380173, 0.05824640393257141, 0.03432711586356163, -0.012924936600029469, 0.05473363399505615, 0.010953215882182121, 0.02808883972465992, -0.05265597999095917, -0.3156316876411438, -0.023302236571907997, -0.024853991344571114, -0.029974505305290222, -0.023072414100170135, -0.0390184111893177, -0.012795059010386467, 0.013775515370070934, 0.042297620326280594, 0.02896604873239994, 0.07093008607625961, -0.04445146024227142, -0.020515982061624527, -0.051441971212625504, -0.000437159527791664, -0.009463420137763023, 0.031735166907310486, -0.03260256350040436, -0.05822140723466873, 0.0007601168472319841, 0.02296603098511696, 0.04320894181728363, 0.03823211416602135, -0.06772728264331818, -0.020417554304003716, -0.000327323010424152, 0.10010118782520294, -0.025805316865444183, 0.028062039986252785, -0.04854569211602211, 0.007023385260254145, 0.04126325622200966, -0.05384255573153496, -0.05060199648141861, 0.011739262379705906, 0.01396207045763731, -0.0035864701494574547, 0.009996147826313972, -0.04342503845691681, -0.032671015709638596, -0.01356537640094757, 0.003459763713181019, -0.002100177574902773, -0.04464154690504074, -0.02223827876150608, -0.015494806692004204, 0.0020351277198642492, -0.044062573462724686, -0.029064828529953957, 0.04720930755138397, -0.036014165729284286, 0.029862642288208008, -0.0018321225652471185, -0.001993974670767784, 0.006826619151979685, -0.002453896915540099, -0.05734013766050339, -0.039190638810396194, -0.05846422538161278, -0.007796157151460648, 0.024438412860035896, -0.021158307790756226, -0.030597930774092674, -0.05453716963529587, 0.005689712241292, -0.04459002614021301, -0.03965238109230995, -0.01035689003765583, 0.027975505217909813, -0.0639662966132164, -0.10112874209880829, 0.0073604825884103775, 0.0015183354262262583, 0.043435774743556976, 0.012783532030880451, 0.0452532097697258, 0.00029401242500171065, -0.02418135479092598, -0.005782053340226412, 0.003067319979891181, 0.037534199655056, 0.03661538287997246, 0.07981310784816742, 0.012398662976920605, -0.012572955340147018, 0.012588798999786377, 0.022382715716958046, -0.12289466708898544, 0.04529254510998726, 0.021058911457657814, -0.01592911034822464, 0.0037797330878674984, -0.016701117157936096, -0.044933661818504333, 0.04165392369031906, 0.08263776451349258, -0.29554665088653564, 0.00618651881814003, 0.014020399190485477, 0.09238741546869278, -0.004265246447175741, 0.04465527459979057, 0.049870461225509644, -0.07664736360311508, 0.024217603728175163, -0.001980749424546957, -0.02630988322198391, 0.03858499228954315, 0.027418218553066254, -0.06457410007715225, -0.011045270599424839, -0.006076574791222811, 0.09222104400396347, -0.02782270312309265, 0.03938501328229904, 0.03626731410622597, 0.03988005965948105, 0.007454285863786936, 0.1609237939119339, 0.017263023182749748, -0.011887526139616966, 0.010325232520699501, -0.009962228126823902, -0.017115790396928787, 0.029998740181326866, 0.029519204050302505, 0.02231251820921898, 0.012737022712826729, 0.12387456744909286, 0.01783951185643673, 0.01926771178841591, 0.00362773216329515, 0.04593273252248764, 0.007326858583837748, 0.01225057989358902, -0.00559921795502305, 0.010258923284709454, 0.03802511468529701, -0.0347835049033165, 0.056538231670856476, -0.009850464761257172, 0.01677788235247135, 0.020776160061359406, -0.024254489690065384, -0.03748307749629021, 0.01739189587533474, -0.04975954443216324, -0.04115479439496994, -0.0023223983589559793, 0.013361094519495964, 0.06038995832204819, 0.049768656492233276, -0.009665613062679768, 0.029929269105196, -0.018226567655801773, -0.04610541835427284, 0.027746960520744324, -0.020200148224830627, 0.08480819314718246, 0.03433294966816902, 0.036814846098423004], "metadata": {"file_name": "Chapter 0 Overview of DevShelf.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f97213e-2033-40d4-a34e-34b2b5a83687", "node_type": "4", "metadata": {"file_name": "Chapter 0 Overview of DevShelf.md"}, "hash": "6d2a36b37f261aa0147e0cfc07d130c8e9d8e9d1ec11c9a6c69b6bdfc6db393f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4a768108-aa1a-45c4-990f-0c8fa131787d", "node_type": "1", "metadata": {"file_name": "Chapter 0 Overview of DevShelf.md"}, "hash": "16082477163b54c349f81c97c3c31b98e45a56f843f4691c34fd918d647843b0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "## Visual Overview\n\n```mermaid\nflowchart TD\n    A0[\"Book (Domain Model)\n\"]\n    A1[\"Search Index Management\n\"]\n    A2[\"Core Search Engine\n\"]\n    A3[\"Search Enhancement & Recommendations\n\"]\n    A4[\"User Interaction & Analytics\n\"]\n    A5[\"Application Startup & Flow Control\n\"]\n    A6[\"User Interface Presentation\n\"]\n    A7[\"Text Normalization Utilities\n\"]\n    A5 -- \"Loads Books\" --> A0\n    A5 -- \"Loads Index\" --> A1\n    A5 -- \"Loads Text Processors\" --> A7\n    A5 -- \"Initializes Search\" --> A2\n    A5 -- \"Initializes Enhancements\" --> A3\n    A5 -- \"Initializes Analytics\" --> A4\n    A5 -- \"Initializes UI\" --> A6\n    A1 -- \"Indexes Books\" --> A0\n    A1 -- \"Uses for Indexing\" --> A7\n    A2 -- \"Uses Index Data\" --> A1\n    A2 -- \"Processes Query\" --> A7\n    A2 -- \"Delegates Refinement\" --> A3\n    A3 -- \"Uses Book Data\" --> A0\n    A3 -- \"Uses Popularity\" --> A4\n    A3 -- \"Normalizes for Suggestions\" --> A7\n    A4 -- \"Provides Popularity Data\" --> A3\n    A4 -- \"Records Clicks\" --> A0\n    A6 -- \"Requests Services\" --> A5\n    A6 -- \"Displays Books\" --> A0\n```\n\n## Chapters\n\n1. [Application Startup & Flow Control\n](01_application_startup___flow_control_.md)\n2. [Book (Domain Model)\n](02_book__domain_model__.md)\n3. [User Interface Presentation\n](03_user_interface_presentation_.md)\n4. [Search Index Management\n](04_search_index_management_.md)\n5. [Core Search Engine\n](05_core_search_engine_.md)\n6. [User Interaction & Analytics\n](06_user_interaction___analytics_.md)\n7. [Search Enhancement & Recommendations\n](07_search_enhancement___recommendations_.md)\n8. [Text Normalization Utilities\n](08_text_normalization_utilities_.md)", "mimetype": "text/plain", "start_char_idx": 391, "end_char_idx": 2019, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "e20c6bc2-a0f2-4f34-9356-668a965dafef", "embedding": [-0.06791245192289352, 0.05175997316837311, -0.0015089594526216388, -0.039611198008060455, 0.03126459941267967, -0.008768389001488686, -0.025482945144176483, 0.004748553037643433, -0.029343629255890846, -0.051493335515260696, -0.010187259875237942, 0.027377953752875328, 0.03538427874445915, -0.0017239971784874797, 0.012076188810169697, -0.041170135140419006, 0.0053642624989151955, 0.02226504124701023, -0.05652386695146561, -0.008636284619569778, 0.07202845811843872, 0.028101621195673943, 0.006347007118165493, -0.0873914361000061, -0.027943773195147514, 0.0523671880364418, 0.0019159556832164526, -0.03442361205816269, -0.023767489939928055, -0.1909199208021164, -0.0087315384298563, -0.0105362543836236, 0.03677462413907051, 0.002313729142770171, -0.04333381727337837, -0.022012585774064064, 0.033002857118844986, 0.02273598127067089, -0.0043154433369636536, -0.06322375684976578, 0.01631634123623371, 0.03269100561738014, 0.0027234440203756094, 0.021909108385443687, -0.009061144664883614, -0.03478546440601349, -0.04132579267024994, 0.008504481986165047, -0.015124774537980556, -0.005545642226934433, -0.09321580082178116, 0.022531749680638313, 0.007317462470382452, -0.029062919318675995, -0.009736415930092335, 0.01846255175769329, 0.06923497468233109, 0.0778837725520134, -0.0033846006263047457, -0.013862553052604198, 0.0007078947965055704, -0.03819175064563751, -0.07147999107837677, 0.10825169086456299, 0.012546505779027939, 0.033339422196149826, 0.0664370059967041, -0.06365103274583817, 0.00203848909586668, 0.0023738236632198095, -0.03676457703113556, 0.06763435155153275, 0.007382558658719063, 0.05318376049399376, 0.0072374846786260605, -0.05814993381500244, 8.260836330009624e-05, -0.022515946999192238, 0.052726034075021744, -0.00464927963912487, -0.029208820313215256, -0.0319732204079628, 0.00962641928344965, 0.0014682087348774076, -0.02415885217487812, 0.02323402836918831, 0.05289565399289131, -0.01083905529230833, 0.0045942203141748905, 0.03169098123908043, 0.06666887551546097, 0.0026274502743035555, 0.04222337529063225, 0.0033864884171634912, -0.048724107444286346, -0.0010737646371126175, 0.0020441787783056498, -0.01046554185450077, -0.027463117614388466, 0.43345990777015686, -0.0004989749286323786, -0.0013861876213923097, 0.03659574314951897, 0.03613423556089401, 0.0008024258422665298, -0.0318758524954319, 0.04187317192554474, 0.00208982452750206, 0.009516144171357155, 0.009358014911413193, -0.009269621223211288, -0.059415873140096664, 0.022372402250766754, -0.056403543800115585, 0.01983160711824894, -0.0014081178233027458, -0.02375834248960018, 0.0006933729746378958, -0.018572410568594933, -0.0011860029771924019, 0.06305770576000214, 0.0031458393204957247, -0.023384995758533478, 0.02847028523683548, 0.05293600261211395, -0.033247802406549454, -0.017879148945212364, 0.02619105577468872, 0.0022167295683175325, 0.03347596153616905, -0.008439415134489536, 0.003688286757096648, -0.10800762474536896, -0.004598207306116819, 0.03173729404807091, 0.06583352386951447, -0.0585971437394619, -0.01622014492750168, 0.00301173934713006, -0.022762633860111237, 0.004365153610706329, 0.04908502846956253, -0.009888175874948502, -0.018998119980096817, -0.06366809457540512, 0.024397561326622963, 0.011590658687055111, 0.04540378600358963, -0.03248951956629753, -0.01845148392021656, 0.02106660231947899, 0.03577757254242897, -0.05141282081604004, -0.059973880648612976, 0.029648322612047195, -0.006927582900971174, 0.08086665719747543, 0.02132527343928814, -0.034890640527009964, -0.027424966916441917, -0.0863468125462532, -0.024347079917788506, 0.0007982193492352962, 0.05528188869357109, -0.011297237128019333, -0.03584011271595955, -0.023475725203752518, 0.02146160788834095, -0.08333871513605118, -0.02679930068552494, -0.01126155536621809, -0.0025796976406127214, -0.050773926079273224, -0.027003856375813484, 0.032395172864198685, -0.035498134791851044, -0.0259046982973814, 0.002311510732397437, 0.03136122599244118, 0.01934165507555008, 0.03564498573541641, -0.00097882398404181, -0.014833916909992695, -0.0249620508402586, -0.015741417184472084, -0.06279418617486954, -0.054516926407814026, -0.008603914640843868, -0.011420255526900291, 0.0180258359760046, -0.06808754801750183, 0.02736370824277401, -0.00745137594640255, -0.00044617115054279566, 0.012997799552977085, 0.010838174261152744, -0.02247508056461811, -0.022075295448303223, -0.031711187213659286, 0.026283593848347664, 0.04411200061440468, 0.05606100335717201, -0.04074852541089058, 0.07609893381595612, -0.053629495203495026, -0.0225810743868351, 0.0022199421655386686, -0.05638377368450165, 0.11829815059900284, -0.009273393079638481, -0.03105119615793228, 0.013223699294030666, -0.0016445285873487592, -0.0352473258972168, -0.03888346254825592, 0.04276076331734657, 0.00048793404130265117, 0.020731687545776367, -0.006965420674532652, 0.07472973316907883, -0.008519014343619347, -0.007034097798168659, 0.0075831240974366665, -0.31441447138786316, 0.06551555544137955, -0.024419577792286873, -0.0811387374997139, 0.0005651861429214478, -0.033013030886650085, 0.046575360000133514, -0.05818895250558853, -0.03449182212352753, -0.017681067809462547, 0.12441976368427277, -0.09419196099042892, 0.010578331537544727, -0.010002480819821358, 0.021399766206741333, 0.029618656262755394, 0.004327315837144852, -0.014829734340310097, -0.044025588780641556, 0.02220792882144451, 0.015077425166964531, -0.06066050007939339, 0.002522944938391447, -0.06891394406557083, -0.0014947494491934776, 0.05266620218753815, 0.04480349272489548, 0.024116406217217445, 0.09342040866613388, -0.05281585827469826, 0.05810108035802841, 0.05181432142853737, -0.08120023459196091, -0.09958774596452713, -0.05085418373346329, -0.0014828500570729375, 0.014153541065752506, -0.03213460370898247, 0.014747725799679756, 0.04429317265748978, 0.029047127813100815, 0.016985014081001282, 0.011353205889463425, 0.008712475188076496, -0.050296351313591, -0.030035991221666336, -0.04791605845093727, -0.04161777347326279, 0.02189941704273224, -0.007362851407378912, -0.015706663951277733, 0.014779968187212944, -0.017570624127984047, 0.022487368434667587, -0.01437237299978733, -0.05392298474907875, -0.01470847800374031, -0.031117964535951614, 0.006987543310970068, -0.02717103622853756, 0.0231438260525465, 0.03338554874062538, -0.0184139683842659, 0.023273788392543793, 0.0038789561949670315, -0.04128259792923927, -0.025484468787908554, 0.001068200683221221, 0.04739970713853836, -0.03879379481077194, -0.04969312250614166, -0.015886161476373672, -0.056329093873500824, 0.012371002696454525, 0.05343838781118393, 0.06034989282488823, 0.025447111576795578, -0.00876528862863779, 0.03353264555335045, -0.031946685165166855, 0.0004922145162709057, 0.010142604820430279, 0.06997130811214447, -0.02104003354907036, -0.001172304735518992, 0.012613347731530666, 0.04407976195216179, 0.013102535158395767, 0.009917305782437325, 0.003673276398330927, -0.03400788828730583, 0.016838673502206802, 0.04908300191164017, 0.01981409825384617, 0.015346483327448368, 0.06607689708471298, -0.2995465099811554, 0.012266846373677254, 0.009986238554120064, 0.01827939786016941, 0.019458096474409103, -0.044093966484069824, 0.043815966695547104, -0.03597491234540939, 0.06705424934625626, -0.05291474610567093, 0.0014226571656763554, -0.010745550505816936, -0.03530197590589523, -0.010665874928236008, 0.06594151258468628, 0.05317404866218567, 0.11542850732803345, 0.008819867856800556, 0.028082935139536858, 0.0009764082496985793, 0.042329564690589905, 0.009815254248678684, 0.1538400948047638, -0.01566358655691147, 0.042011864483356476, 0.0365387462079525, 0.033162813633680344, -0.013229652307927608, 0.01064627431333065, 0.07614441961050034, 0.04124397784471512, -0.05211732164025307, 0.042900558561086655, -0.018331056460738182, 0.002586423186585307, -0.024277573451399803, -6.244642281671986e-05, 0.01692603901028633, 0.03361091390252113, -0.01636887528002262, 0.029334211722016335, 0.04374556988477707, 0.007407076191157103, 0.02662663161754608, 0.03812945634126663, -0.04976437985897064, 0.005262257996946573, -0.0204694215208292, -0.037108950316905975, 0.01696162298321724, -0.042641930282115936, -0.02133500762283802, 0.05895674228668213, 0.0021042716689407825, 0.0006156729650683701, 0.007983826100826263, 0.031015124171972275, 0.034761279821395874, -0.05594587326049805, 0.01495110522955656, 0.05190664529800415, -0.047086652368307114, 0.11002259701490402, 0.03487000614404678, 0.05035348981618881], "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5cfdfefc-54fc-4217-9c5c-5ef7fc254fbd", "node_type": "4", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "47d033e1e332cb782b477f9b93f1a04fb2370fea0d267cdb98480cc8f9739cf8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "543501d2-6571-49f2-ba8c-235e4e29f55f", "node_type": "1", "metadata": {}, "hash": "5ab538d46bc02850adbcc5c4e29a17cbd6c8959ae5c1beec4affeacf7128eede", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Welcome to DevShelf! This tutorial will guide you through how our digital library application works, starting from the very beginning: how it wakes up and gets ready to serve you.\n\n### The Application's \"Main Director\"\n\nImagine our DevShelf application as a grand play. For any play to begin, you need a **Main Director**. This director doesn't act in the play, but they are crucial for making sure everything is in place before the curtain rises. They:\n\n1.  **Gather the Props:** Load all the books and the special \"search index\" (a magical guide that helps find books quickly).\n2.  **Assemble the Actors:** Bring together all the specialized \"services\" or \"smart tools\" like the `QueryProcessor` (who understands your search), the `ReRanker` (who makes sure the best books appear first), and the `Suggester` (who helps with typos).\n3.  **Set the Stage:** Prepare the user interface, whether it's a simple text-based command line (CLI) or a fancy graphical window (GUI).\n4.  **Signal the Start:** Once everything is ready, they tell the play to begin, allowing you, the user, to interact with the application.\n\nThis \"Main Director\" role is exactly what \"Application Startup & Flow Control\" is all about in DevShelf. It's the brain that orchestrates the entire application, making sure it initializes correctly and manages the overall sequence of operations.\n\n### Your First Interaction: Starting DevShelf\n\nBefore you can search for your favorite book, DevShelf needs to start. We offer two ways to use DevShelf: a Command Line Interface (CLI) where you type commands, and a Graphical User Interface (GUI) with buttons and windows.\n\nLet's see how you'd typically start each version:\n\n#### Starting the CLI Version\n\nTo start the CLI version, you would run the `Main` class.\n\n**`src/main/java/core/Main.java` (Simplified)**\n```java\npackage core;\n\nimport storage.BookLoader;\nimport storage.IndexLoader;\nimport ui.cli.CliView;\n// ... other imports\n\npublic class Main {\n    public static void main(String[] args) {\n        System.out.println(\"\ud83d\udcd6 Assembling DevShelf Engine...\");\n\n        // 1.", "mimetype": "text/plain", "start_char_idx": 2, "end_char_idx": 2089, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "543501d2-6571-49f2-ba8c-235e4e29f55f", "embedding": [-0.052260395139455795, 0.031030813232064247, -0.006307446863502264, -0.04067947342991829, -0.011378778144717216, 0.020796120166778564, -0.08405307680368423, 0.016372324898838997, 0.015566235408186913, -0.020115049555897713, -0.01635718159377575, -0.002686631167307496, 0.0015177016612142324, 0.01803780347108841, 0.04807344451546669, -0.01572788879275322, 0.0069596488028764725, 0.010517118498682976, -0.01632067933678627, -0.03730541467666626, 0.025203529745340347, 0.002700916724279523, -0.0062488955445587635, -0.05664430558681488, 0.01420683041214943, 0.06163884326815605, -0.015848325565457344, -0.040248334407806396, 0.0009455879335291684, -0.1896953582763672, 0.0008569816127419472, -0.08481157571077347, 0.05076611042022705, 0.028410151600837708, -0.04020310565829277, 0.01546601764857769, 0.06086525693535805, 0.03250463679432869, -0.0016093360027298331, -0.0025965224485844374, 0.01671871356666088, -0.00938776321709156, -0.014705892652273178, 0.019653256982564926, 0.0067568495869636536, -0.034056831151247025, 0.04282253980636597, -0.02003791742026806, 0.0736670196056366, -0.008881596848368645, -0.06316519528627396, -0.010965917259454727, 0.014279183000326157, -0.0314551517367363, -0.004705796018242836, -0.011886121705174446, 0.04246301203966141, 0.055015746504068375, -0.019588325172662735, 0.006217355839908123, -0.00016119953943416476, -0.044374242424964905, -0.12032020837068558, 0.12343905866146088, -0.01792049966752529, -0.013830550014972687, 0.02008778601884842, -0.008627294562757015, 0.0264311283826828, 0.06437304615974426, -0.04939322918653488, 0.09067604690790176, -0.011026008985936642, 0.0687204897403717, -0.013340096920728683, -0.03342725709080696, -0.031631458550691605, 0.03230370581150055, 0.03247297555208206, -0.04420539736747742, -0.09559532254934311, -0.05780003219842911, 0.017879636958241463, -0.008370005525648594, -0.01919517293572426, 0.027848603203892708, -0.0016024332726374269, -0.0025941962376236916, 0.038125988095998764, 0.03945686295628548, 0.033925220370292664, -0.056264352053403854, -0.0015258643543347716, 0.02053721807897091, -0.034830447286367416, 0.02177131362259388, -0.0546368844807148, 0.04116456210613251, -0.0013183301780372858, 0.33212774991989136, -0.0317625068128109, -0.018250152468681335, 0.007743142545223236, 0.011460238136351109, -0.03941643238067627, -0.061395179480314255, 0.028407061472535133, -0.017589177936315536, -0.035123348236083984, -0.01744430512189865, 0.012854430824518204, -0.030273795127868652, 0.026886140927672386, -0.03696407377719879, -0.0292068924754858, -0.017639460042119026, -0.060091983526945114, -0.01809973455965519, -0.05718858540058136, 0.02572103962302208, 0.03461289778351784, -0.026206234470009804, -0.039880864322185516, 0.010472102090716362, 0.05423859879374504, -0.002557526808232069, -0.022688603028655052, 0.021453848108649254, -0.03475353121757507, -0.007785945665091276, 0.010255898348987103, 0.016659967601299286, -0.0973319336771965, -0.006416278891265392, 0.03211851045489311, 0.04839674383401871, 0.012054353021085262, -0.02651146985590458, 0.02012404054403305, 0.015402997843921185, -0.04552275687456131, -0.008472763933241367, 0.0020602617878466845, -0.051495473831892014, -0.07367522269487381, 0.10062932223081589, -0.008220752701163292, -0.012623249553143978, -0.008949699811637402, -0.07723254710435867, 0.04152083024382591, 0.045429181307554245, -0.021249163895845413, -0.04055959731340408, -0.006365912966430187, 0.08454205095767975, 0.031342409551143646, 0.049327123910188675, -0.050418585538864136, -0.10102329403162003, -0.063349150121212, 0.009342111647129059, -0.02176447957754135, 0.06846512854099274, 0.028789769858121872, -0.03994632884860039, -0.015305489301681519, 0.03819837048649788, -0.07429633289575577, -0.002264371607452631, -0.04529057815670967, 0.07114782184362411, -0.04770847037434578, 0.05469316989183426, 0.038355499505996704, 0.012579540722072124, -0.007467955816537142, 0.02112516760826111, 0.06051475182175636, 0.05714138224720955, 0.0062656095251441, 0.006695254240185022, -0.028149323537945747, -0.0019002027111127973, -0.033523574471473694, -0.006767043843865395, -0.06119299307465553, -0.02516637183725834, -0.021606994792819023, -0.02229573205113411, -0.04046851769089699, 0.026028035208582878, -0.0019379539880901575, -0.005315225105732679, 0.031156223267316818, -0.03385854512453079, 0.0022037671878933907, -0.03135879337787628, 0.05573483929038048, -0.009976216591894627, 0.08684776723384857, 0.052465662360191345, -0.026046859100461006, 0.07567275315523148, -0.02329423278570175, 0.022642968222498894, -0.021959111094474792, -0.036461375653743744, 0.08677703887224197, -0.044343240559101105, -0.03126796707510948, -0.015177454799413681, 0.01656928099691868, -0.04293231666088104, -0.049682293087244034, -0.042530760169029236, 2.339105776627548e-05, 0.04931109398603439, 0.01991215907037258, 0.07060085982084274, -0.04238263517618179, -0.031239625066518784, -0.005966617725789547, -0.3103543519973755, 0.0005506501183845103, 0.015702880918979645, -0.008080501109361649, -0.02918785996735096, 0.007561845704913139, 0.05448018014431, -0.01047974731773138, -0.036022983491420746, 0.01460177730768919, 0.12840406596660614, -0.060120727866888046, 0.000992228975519538, -0.023123404011130333, -0.03169756010174751, -0.007953641004860401, -0.002750362968072295, -7.48286911402829e-05, -0.07643468677997589, -0.028973890468478203, 0.037590064108371735, -0.0004129817243665457, 0.04282255843281746, -0.04903266578912735, 0.03930084407329559, 0.027294481173157692, 0.10830822587013245, -0.01427319087088108, 0.051334477961063385, -0.07800839841365814, 0.06889383494853973, 0.02612541802227497, -0.07896589487791061, -0.09400111436843872, -0.019530951976776123, 0.011673983186483383, -0.043659403920173645, 0.02870584838092327, -0.02689806930720806, 0.08697658032178879, 0.018940262496471405, 0.0151304816827178, 0.020428495481610298, -0.042492225766181946, -0.010252725332975388, 0.012820291332900524, 0.045113492757081985, -0.09543714672327042, -0.007510863710194826, -0.004727139137685299, -0.010676678270101547, 0.013398576527833939, 0.002599937841296196, 0.0402119942009449, -0.02745097316801548, -0.0378064401447773, 0.012850472703576088, -0.018510982394218445, -0.00553107587620616, -0.0007245516171678901, 0.05485200881958008, 0.04831146076321602, -0.016511820256710052, -0.004258110653609037, -0.022158734500408173, -0.01785648800432682, 0.017130328342318535, 0.022555036470294, 0.024364538490772247, -0.06829628348350525, -0.11869171261787415, -0.030186157673597336, -0.026764199137687683, 0.05740642920136452, 0.04840109497308731, 0.06281979382038116, -0.005469399504363537, -0.027598965913057327, 0.009504435583949089, -0.0031968753319233656, -0.00959901511669159, 0.020051542669534683, 0.06411010026931763, 0.046276193112134933, -0.025692539289593697, 0.004455514717847109, 0.03106200136244297, 0.006042233668267727, -0.007328859064728022, 0.03605014085769653, -0.019218148663640022, 0.004232698120176792, -0.0019285597372800112, 0.034659646451473236, 0.06541360169649124, 0.025482671335339546, -0.2682025134563446, 0.010972419753670692, -0.007492921780794859, 0.07575394958257675, 0.0009601330966688693, -0.0574377104640007, 0.0638953372836113, -0.024561844766139984, 0.043614085763692856, 0.00587026122957468, 0.0420953668653965, 0.0027106404304504395, -0.011189811863005161, -0.04348846152424812, 0.05358736589550972, 0.03371848538517952, 0.07357820123434067, -0.0041727907955646515, 0.06052657216787338, 0.03601778298616409, 0.027630705386400223, -0.011793253943324089, 0.18820151686668396, 0.011056726798415184, 0.0522758774459362, 0.047298792749643326, -0.012474218383431435, -0.05406496301293373, 0.02517750859260559, 0.05548325553536415, 0.05594053491950035, -0.05518458038568497, 0.14114512503147125, -0.022290630266070366, 0.00988275557756424, 0.002925410633906722, 0.04445929825305939, 0.0499439463019371, 0.012950698845088482, -0.017733091488480568, -0.03820176422595978, 0.07253968715667725, -0.022397464141249657, 0.026511304080486298, 0.06194498762488365, -0.03358869254589081, -0.019475646317005157, -0.07268403470516205, -0.06136709824204445, -0.0019278053659945726, -0.018876876682043076, -0.06883975863456726, 0.026307860389351845, -0.0063725486397743225, 0.019958822056651115, 0.045267242938280106, -0.00738557381555438, 0.015829479321837425, -0.06571303308010101, 0.024838952347636223, 0.018208477646112442, 0.0018572781700640917, 0.08582299947738647, 0.003953808918595314, 0.020249174907803535], "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5cfdfefc-54fc-4217-9c5c-5ef7fc254fbd", "node_type": "4", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "47d033e1e332cb782b477f9b93f1a04fb2370fea0d267cdb98480cc8f9739cf8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e20c6bc2-a0f2-4f34-9356-668a965dafef", "node_type": "1", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "eb68ce486bf00935f759e3b24ec73162f2fc47d6145fd9e2c688b8f5eeec911e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8802875b-9dc7-4352-8f53-b442d8475b92", "node_type": "1", "metadata": {}, "hash": "47e0bce94a1de3164d6bdb3e277ddd1e43555e28f736234be01632ea2b322e05", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Load All Data (e.g., books and search index)\n        // BookLoader bookLoader = new BookLoader(...);\n        // List<Book> allBooks = bookLoader.loadBooks();\n        // IndexLoader indexLoader = new IndexLoader(...);\n        // SearchIndexData loadedData = indexLoader.loadIndex();\n\n        // 2. Build All Services (our smart tools)\n        // QueryProcessor queryProcessor = new QueryProcessor(...);\n        // ReRanker reRanker = new ReRanker(...);\n        // Suggester suggester = new Suggester(...);\n        // ... and other services\n\n        // 3. Build The UI (the CLI view)\n        CliView view = new CliView();\n\n        // 4. Assemble the Controller & Start\n        // BookSearchEngine engine = new BookSearchEngine(bookMap, queryProcessor, ...);\n        // engine.run(); // This starts the main loop!\n        System.out.println(\"...Assembly complete. Starting application.\");\n    }\n}\n```\nWhen you run `Main.java`, it prints messages like \"\ud83d\udcd6 Assembling DevShelf Engine...\" as it prepares everything. Then, it will present you with the command-line interface, ready for your search queries.\n\n#### Starting the GUI Version\n\nFor the GUI version, we use a special `Launcher` class to make sure JavaFX (the GUI technology) starts correctly.\n\n**`src/main/java/core/Launcher.java`**\n```java\npackage core;\n\npublic class Launcher {\n    public static void main(String[] args) {\n        // We delegate to the real JavaFX class.\n        // This tricks the JVM into loading the classpath correctly first.\n        GuiMain.main(args);\n    }\n}\n```\nThis `Launcher` simply calls `GuiMain.main(args)`. The `GuiMain` class then does the actual work of setting up the graphical window:\n\n**`src/main/java/core/GuiMain.java` (Simplified)**\n```java\npackage core;\n\nimport javafx.application.Application;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Scene;\nimport javafx.stage.Stage;\nimport ui.gui.controllers.MainViewController;\nimport ui.gui.services.DevShelfService;\n// ... other imports\n\npublic class GuiMain extends Application { // Extends Application for JavaFX\n\n    @Override\n    public void start(Stage stage) throws Exception {\n        System.out.println(\"\ud83d\ude80 Starting DevShelf GUI...\");\n\n        // 1.", "mimetype": "text/plain", "start_char_idx": 2090, "end_char_idx": 4289, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "8802875b-9dc7-4352-8f53-b442d8475b92", "embedding": [-0.09052690118551254, -0.006302759982645512, -0.01753191091120243, -0.010581713169813156, -0.031232589855790138, 0.021596314385533333, -0.0509026013314724, -0.011560711078345776, 0.033590372651815414, -0.05799952149391174, -0.05473891645669937, -0.0010612652404233813, 0.036815378814935684, 0.023587778210639954, 0.003526730230078101, -0.059953175485134125, 0.001982450485229492, 0.017424749210476875, -0.027184482663869858, -0.04452500864863396, 0.03334226459264755, -0.0072506084106862545, -0.006339305080473423, -0.060336995869874954, -0.0449662059545517, 0.03962896019220352, -0.008787790313363075, -0.045914649963378906, 0.0068810428492724895, -0.16077080368995667, 0.028084471821784973, -0.03588685765862465, 0.04193777218461037, -0.00778688071295619, -0.030783096328377724, 0.021517930552363396, 0.07110988348722458, 0.0005654763663187623, 0.02246340736746788, -0.0210164375603199, 0.050260983407497406, 0.01625870354473591, -0.02121637389063835, 0.06682243943214417, 0.033166833221912384, -0.02665017731487751, 0.004207417368888855, 0.014316514134407043, 0.04465062916278839, 0.02657674439251423, -0.042389966547489166, -0.016680171713232994, -0.00974008347839117, -0.017998017370700836, 0.0008729093242436647, 0.058882489800453186, 0.05151746794581413, 0.04489888623356819, 0.01833498477935791, -0.0011580884456634521, -0.0023159298580139875, -0.0444190688431263, -0.1108701303601265, 0.10669358819723129, 0.013122078962624073, 0.010649772360920906, -0.005628134123980999, -0.027124416083097458, 0.03231741860508919, 0.01595539040863514, -0.037760306149721146, 0.0690387710928917, 0.04550771415233612, 0.06782914698123932, 0.03521072119474411, -0.03258688375353813, 0.0024650353007018566, 0.006056903395801783, 0.028501782566308975, -0.048114173114299774, -0.02929108776152134, -0.04100251942873001, 0.012136144563555717, 0.019529497250914574, -0.0436636358499527, 0.0444127656519413, 0.03565750643610954, -0.010030166245996952, 0.00913119874894619, 0.02568652108311653, 0.012691064737737179, -0.035900380462408066, 0.032739173620939255, 0.0094595393165946, -0.07014848291873932, -0.012260091491043568, -0.013412131927907467, 0.016620133072137833, -0.0024991848040372133, 0.3738904595375061, -0.01254440750926733, 0.010211462154984474, 0.02883431501686573, -0.004583172500133514, 0.009786657057702541, -0.04154624417424202, -0.0020685044582933187, -0.004590471740812063, -0.01885090582072735, 0.022999146953225136, -0.010841301642358303, 0.005603906232863665, 0.03194865211844444, -0.06304354220628738, -0.04283643513917923, -0.04095928743481636, -0.06851452589035034, -0.004517562221735716, -0.06640465557575226, -0.005068609025329351, 0.07553660124540329, -0.023403866216540337, -0.024069223552942276, -0.003250631270930171, 0.0350923016667366, 0.009677496738731861, -0.0033001061528921127, 0.038918960839509964, -0.054513998329639435, -0.004227560944855213, 0.010385051369667053, -0.008039871230721474, -0.08793628960847855, -0.0021753855980932713, 0.027576856315135956, 0.05144708603620529, -0.007754312362521887, -0.041947461664676666, -0.02467760629951954, 0.04550820589065552, 0.017705345526337624, 0.008286870084702969, 0.046958766877651215, -0.04667825251817703, -0.04929584264755249, 0.0789143517613411, 0.04014395922422409, 0.040983397513628006, -0.05010348930954933, -0.048518311232328415, -0.010279851034283638, 0.08496911078691483, -0.025732191279530525, -0.0231026578694582, 0.006488712038844824, 0.05446835607290268, 0.049781929701566696, 0.03491872176527977, -0.0409390963613987, -0.028503797948360443, -0.033120047301054, -0.012123813852667809, 0.018630318343639374, 0.08600126951932907, 0.02201899327337742, -0.06728116422891617, -0.010730312205851078, 0.03198293596506119, -0.09280845522880554, -0.008785327896475792, -0.04255742207169533, 0.0019276324892416596, -0.04772268980741501, -0.01656673103570938, 0.048750683665275574, -0.010279173031449318, -0.04641173407435417, 0.026433946564793587, 0.05311020091176033, 0.015294179320335388, -0.028287338092923164, -0.03457000479102135, -0.007761713117361069, -0.0024249644484370947, -0.044959571212530136, -0.05720973014831543, -9.868905181065202e-05, -0.04104382172226906, -0.019429650157690048, -0.05883844941854477, -0.053774088621139526, 0.030288461595773697, -0.010606775060296059, 0.03596343472599983, 0.05175085365772247, -0.022308213636279106, -0.042499106377363205, -0.015514552593231201, 0.034563541412353516, -0.025879310443997383, 0.06891242414712906, 0.08165635168552399, -0.07151767611503601, 0.08806054294109344, -0.04089061915874481, -0.0009752061450853944, -0.011401680298149586, -0.05951932072639465, 0.09437248855829239, -0.02396325394511223, -0.018889984115958214, 0.025317875668406487, 0.04177771881222725, -0.032390616834163666, -0.05324413254857063, -0.002136200899258256, -0.019793476909399033, 0.02222086675465107, -0.003425553208217025, 0.03967396542429924, 0.009600345976650715, -0.02534022182226181, -0.012648395262658596, -0.3302869498729706, 0.027399826794862747, -0.021908214315772057, -0.047594103962183, -0.010860423557460308, -0.020677201449871063, 0.058379191905260086, 0.015080939047038555, -0.046754319220781326, 0.004048898350447416, 0.12589246034622192, -0.03468494117259979, -0.00023799945483915508, 0.02289498969912529, -0.013822860084474087, 0.012185780331492424, 0.006026557646691799, -0.020630547776818275, -0.06394777446985245, -0.019408145919442177, 0.03171795979142189, -0.04863285273313522, 0.0050012897700071335, -0.04155055060982704, 0.024112563580274582, 0.039091311395168304, 0.1147775650024414, -0.020552050322294235, 0.0797678604722023, -0.08773589134216309, 0.06708955019712448, 0.05287759006023407, -0.048412103205919266, -0.08095744252204895, -0.03182793781161308, 0.004524633754044771, 0.015774410218000412, 0.016149088740348816, 0.025579217821359634, 0.050996702164411545, -0.008367106318473816, 0.008828647434711456, 0.005625345278531313, -0.06281985342502594, -0.02444530464708805, -0.016768870875239372, -0.005961380898952484, -0.08008547127246857, -0.0031644641421735287, -0.008781439624726772, -0.06433212012052536, -0.03374837711453438, -0.03862924501299858, 0.05676274001598358, 0.011118398047983646, -0.02654138021171093, 0.004736229311674833, -0.035168133676052094, -0.028945278376340866, -0.04977085441350937, 0.03809235617518425, 0.04696156084537506, -0.0034161729272454977, 0.016124770045280457, 0.032264530658721924, -0.0006167959072627127, 0.010948249138891697, -0.042011164128780365, -0.003280566306784749, -0.05441327393054962, -0.06169413402676582, -0.006830866914242506, -0.01660776510834694, 0.04512503370642662, 0.07722780853509903, 0.04462709277868271, 0.0007303458987735212, -0.03919479623436928, 8.297098247567192e-05, 0.024729257449507713, 0.0009530973038636148, 0.007743853144347668, 0.08052748441696167, -0.013487275689840317, -0.011755694635212421, 0.022671597078442574, -0.0010651868069544435, -0.018413325771689415, -0.005565067753195763, -0.007288291584700346, -0.02060866355895996, 0.049477215856313705, -0.01795317232608795, 0.012155568227171898, 0.0666714608669281, 0.03847707435488701, -0.27326878905296326, 0.019367702305316925, 0.025897378101944923, 0.06492536514997482, 0.00844070315361023, -0.02151763252913952, 0.042600199580192566, -0.050879571586847305, 0.03687077760696411, -0.07411570847034454, -0.009149320423603058, -0.011076029390096664, 0.016492674127221107, -0.061229292303323746, 0.043619781732559204, 0.052084971219301224, 0.10793329775333405, -0.0350760892033577, 0.06112563610076904, 0.01617862842977047, -0.007820546627044678, -0.010001563467085361, 0.15840555727481842, 0.07978781312704086, 0.051676422357559204, 0.03510995954275131, -0.007643590681254864, -0.035573024302721024, 0.02658664435148239, 0.07916877418756485, 0.04430806264281273, -0.05324593186378479, 0.05716352537274361, 0.011152145452797413, 0.0007827747613191605, -0.07576483488082886, 0.05092871934175491, 0.05101851373910904, 0.022601598873734474, -0.007992174476385117, -0.009676060639321804, 0.08535483479499817, -0.03291967883706093, 0.044462624937295914, 0.04043564200401306, -0.03881419450044632, -0.0035787252709269524, -0.06036059558391571, -0.052713848650455475, -0.016670789569616318, -0.018576687201857567, -0.031080955639481544, 0.0066745164804160595, 0.007485787849873304, 0.010626866482198238, 0.05291559547185898, 0.03946017846465111, 0.03337135165929794, -0.058008380234241486, 0.01993989571928978, 0.055763065814971924, -0.026919174939393997, 0.10803619027137756, 0.015832943841814995, 0.025738291442394257], "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5cfdfefc-54fc-4217-9c5c-5ef7fc254fbd", "node_type": "4", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "47d033e1e332cb782b477f9b93f1a04fb2370fea0d267cdb98480cc8f9739cf8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "543501d2-6571-49f2-ba8c-235e4e29f55f", "node_type": "1", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "e24928e0c99a18109119bd350ab44be55263d4e2b93548b8dd1dc4df82e24b25", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b090fa2f-b81d-46e6-b0a0-a589336a46e7", "node_type": "1", "metadata": {}, "hash": "afdeaa150b340b9bd58e2085f4d2efcb2c62645b01f91567db8f9f8c7bcf192d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Load Backend Services (Same idea as CLI: books, index, etc.)\n        // BookLoader bookLoader = new BookLoader(...);\n        // Map<Integer, Book> bookMap = ...;\n        // QueryProcessor queryProcessor = ...;\n        // ... and other services\n\n        // 2. Create the App Brain (a special service for the GUI)\n        // DevShelfService service = new DevShelfService(bookMap, queryProcessor, ...);\n\n        // 3. Load the UI (from an FXML file, which describes the window layout)\n        // FXMLLoader loader = new FXMLLoader(getClass().getResource(\"/ui/gui/fxml/MainView.fxml\"));\n        // Parent root = loader.load();\n\n        // 4. Inject the Brain into the Controller (connects UI to logic)\n        // MainViewController controller = loader.getController();\n        // controller.setService(service);\n\n        // 5. Show Window\n        // Scene scene = new Scene(root);\n        // stage.setScene(scene);\n        // stage.setTitle(\"DevShelf - Library Search Engine\");\n        // stage.show();\n\n        System.out.println(\"\u2705 GUI Started successfully.\");\n    }\n\n    public static void main(String[] args) {\n        launch(args); // This calls the start method above\n    }\n}\n```\nWhen `GuiMain` runs, you'll see messages like \"\ud83d\ude80 Starting DevShelf GUI...\" and then a beautiful DevShelf window will pop up on your screen, ready for you to type in the search bar.\n\n### Under the Hood: The Startup Sequence\n\nWhether you launch the CLI or GUI, the core steps for getting DevShelf ready are very similar. Let's visualize this process like a coordinated dance:\n\n```mermaid\nsequenceDiagram\n    participant You\n    participant Launcher/Main App\n    participant Storage Loaders\n    participant Core Services\n    participant User Interface\n    participant Search Engine\n\n    You->>Launcher/Main App: \"Start DevShelf!\"\n    Launcher/Main App->>Storage Loaders: \"Load all books & search index data\"\n    Note over Storage Loaders: Reads data from `book.json` and `index_data.json`\n    Storage Loaders-->>Launcher/Main App: \"Here's the data!\"\n    Launcher/Main App->>Core Services: \"Create smart tools (QueryProcessor, ReRanker, etc.)\"", "mimetype": "text/plain", "start_char_idx": 4290, "end_char_idx": 6411, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "b090fa2f-b81d-46e6-b0a0-a589336a46e7", "embedding": [-0.06806080788373947, 0.013229032047092915, -0.03740914165973663, -0.014759218320250511, -0.010164412669837475, 0.02782069332897663, 0.0031929179094731808, -0.008714842610061169, 0.002938379067927599, -0.045911092311143875, -0.016765804961323738, -0.017706749960780144, 0.06498423963785172, -0.004028849769383669, 0.022721759974956512, -0.021573124453425407, 0.004573414567857981, -0.010741309262812138, -0.017826251685619354, -0.002666512504220009, 0.04932532459497452, 0.024458562955260277, -0.005807919427752495, -0.07874411344528198, 0.005260713864117861, 0.06910402327775955, 0.006399829871952534, 0.0052690342999994755, 0.024359911680221558, -0.1596604287624359, 0.014233028516173363, -0.030349865555763245, 0.020159253850579262, -0.010012061335146427, -0.032775137573480606, 0.013808315619826317, 0.06397455930709839, 0.02483682706952095, -0.02239210531115532, -0.00882013700902462, 0.024784564971923828, 0.016154030337929726, 0.004774999804794788, 0.017133837565779686, -0.004018495324999094, -0.043134257197380066, 0.03820738196372986, -0.036638349294662476, -0.021605635061860085, -0.008571219630539417, -0.02311386726796627, -0.011800366453826427, -0.023449070751667023, -0.0031389042269438505, 0.040896937251091, 0.01685909368097782, 0.06006423756480217, 0.08063746243715286, -0.02083970420062542, -0.0009131637052632868, -0.032828833907842636, -0.06646428257226944, -0.1314396858215332, 0.1361226737499237, -0.010947201400995255, -0.04275811091065407, 0.03963036835193634, -0.05696886405348778, 0.04177871346473694, -0.0073942756280303, -0.008786442689597607, 0.06349549442529678, 0.014664050191640854, 0.036953624337911606, -0.0029774827416986227, -0.06783736497163773, -0.029741493985056877, 0.004014374688267708, -0.00307275983504951, -0.03478780761361122, -0.05698730796575546, -0.014593087136745453, 0.003776222001761198, 0.049178753048181534, -0.058562763035297394, 0.013462555594742298, 0.04250118508934975, 0.02073538489639759, 0.026315387338399887, -0.006128144450485706, 0.03676837310194969, -0.10330487042665482, 0.024794502183794975, -0.0020565299782902002, -0.07299455255270004, 0.06110929325222969, -0.009263860993087292, -0.0037568414118140936, -0.027302317321300507, 0.33768537640571594, 0.008801770396530628, 0.006601461209356785, 0.00919957086443901, -0.00432246457785368, 0.04006025195121765, -0.011537742801010609, -0.011965278536081314, 0.009814989753067493, -0.007085777819156647, 0.017861928790807724, -0.00659351609647274, -0.019309151917696, 0.02551618404686451, -0.01862194761633873, -0.046516988426446915, -0.04995431378483772, -0.019401496276259422, -0.04817496985197067, 0.023048726841807365, -0.0018881801515817642, 0.03744911029934883, -0.037747953087091446, -0.033167753368616104, -0.045180924236774445, 0.06387742608785629, 0.03907841071486473, 0.010124015621840954, 0.015798429027199745, -0.05844509229063988, 0.0016374404076486826, 0.029425697401165962, 0.024218447506427765, -0.06764048337936401, 0.014404249377548695, -0.009212986566126347, 0.061001989990472794, -0.0343964509665966, -0.02063569612801075, 0.010945246554911137, 0.01633882150053978, -0.05283737927675247, 0.0009936433052644134, 0.06904672831296921, -0.05617712438106537, -0.06565039604902267, 0.09888952225446701, -0.018117334693670273, 0.023166809231042862, -0.034561268985271454, -0.05356072261929512, -0.06100573390722275, 0.04216941073536873, -0.012543568387627602, -0.013152381405234337, -0.045937977731227875, 0.01792515069246292, 0.0021145669743418694, 0.014525567181408405, -0.029311856254935265, -0.027942894026637077, -0.02971423976123333, -0.008179963566362858, -0.012417885474860668, 0.05896073952317238, 0.004113898612558842, -0.07854695618152618, -0.028637096285820007, 0.050877537578344345, -0.07681658118963242, 0.022568730637431145, -0.02227776125073433, 0.03608975559473038, -0.05137717351317406, -0.02517937868833542, 0.00045154604595154524, -0.050308506935834885, -0.016479939222335815, 0.016569020226597786, 0.04734759032726288, 0.045567966997623444, 0.0729176476597786, -0.025899821892380714, -0.0020709701348096132, -0.017072653397917747, -0.030126279219985008, -0.033134594559669495, -0.023946870118379593, -0.011625471524894238, 0.032728683203458786, -0.03880080580711365, -0.08048131316900253, 0.03139334172010422, 0.014215064235031605, 0.06109034642577171, 0.008601252920925617, 0.00988687388598919, 0.005564308259636164, -0.05981246381998062, 0.02070513740181923, 0.005987128708511591, 0.08387244492769241, 0.09968748688697815, -0.022598715499043465, 0.034627120941877365, -0.05029788985848427, 0.031139275059103966, -0.018906226381659508, -0.04790613055229187, 0.13664326071739197, -0.0751352459192276, -0.05809023231267929, 0.01310249138623476, 0.03968452289700508, -0.01662362739443779, -0.001728951116092503, -0.028920914977788925, -0.0059243859723210335, 0.0040305848233401775, 0.019563088193535805, 0.10078975558280945, -0.01640394516289234, 0.07562895864248276, -0.019594883546233177, -0.31965741515159607, 0.016446927562355995, -0.002656148048117757, -0.006783586926758289, -0.010133577510714531, -0.01937141641974449, 0.07535647600889206, 0.010254401713609695, 0.0034948019310832024, -0.011991648003458977, 0.1210901290178299, -0.023483091965317726, -0.00711609935387969, -0.004156865179538727, -0.0033492378424853086, -0.008908542804419994, -0.008429436013102531, -0.015866879373788834, -0.020315278321504593, -0.017878420650959015, 0.048659928143024445, -0.05065247789025307, 0.011698327027261257, -0.07982058823108673, -0.027504170313477516, 0.03248344734311104, 0.09492866694927216, 0.023007310926914215, 0.06670400500297546, -0.07111199200153351, 0.04805704578757286, 0.020221445709466934, -0.09026966243982315, -0.1031569167971611, 0.04100589081645012, 0.021883096545934677, -0.018617426976561546, 0.012538005597889423, -0.022343667224049568, 0.050995130091905594, 0.022648874670267105, 0.010521555319428444, 0.007382188457995653, -0.054166123270988464, -0.02029215544462204, -0.032320380210876465, -0.016107499599456787, -0.06810323148965836, -0.02949748933315277, -0.010958815924823284, -0.017057819291949272, -0.006543186027556658, 0.011679433286190033, -0.0018846193561330438, -0.004367853049188852, -0.05229391157627106, -0.022487448528409004, -0.03655616566538811, -0.011899675242602825, -0.03491915389895439, 0.07274112850427628, 0.03686341270804405, -0.03903390094637871, -0.006286866031587124, 0.004597550258040428, -0.0029202266596257687, 0.004954556934535503, -0.035408541560173035, -0.0014302991330623627, -0.05231199041008949, -0.10220427811145782, -0.0013023648643866181, -0.0466139055788517, 0.026890065521001816, 0.02726825326681137, 0.04680763930082321, 0.028040684759616852, 0.0039885761216282845, 0.05364711210131645, -0.023984013125300407, 0.0066381050273776054, 0.024845702573657036, 0.09969069808721542, 0.008992486633360386, -0.01984761841595173, 0.04218645021319389, 0.06376034766435623, -0.03388300538063049, -0.010452218353748322, 0.0026712827384471893, -0.01841563731431961, 0.01798342913389206, 0.040908582508563995, -0.07079204171895981, 0.044207923114299774, 0.054823342710733414, -0.2881888151168823, 0.05255705863237381, 0.02288004942238331, 0.050658516585826874, -0.00573809863999486, -0.04052354395389557, 0.03981176018714905, -0.04287809133529663, -0.008803479373455048, -0.009134583175182343, -0.008748426102101803, -0.016050852835178375, 0.022854413837194443, -0.04313245043158531, 0.03451777994632721, 0.036539752036333084, 0.09099536389112473, -0.06076003983616829, 0.05484320968389511, -0.01973113976418972, 0.036007899791002274, -0.02081141248345375, 0.1504082828760147, 0.040088534355163574, 0.057783957570791245, 0.04008205235004425, 0.05483872443437576, -0.04951036721467972, 0.039902057498693466, 0.06970273703336716, 0.049268461763858795, -0.07777033746242523, 0.09131918847560883, 0.049841463565826416, 0.009662873111665249, 0.000415151851484552, 0.018377341330051422, 0.021021317690610886, 0.014848919585347176, 0.03027625009417534, -0.018906379118561745, 0.05313277244567871, -0.03289571404457092, 0.036051660776138306, 0.05542958155274391, -0.06677427142858505, 0.015615321695804596, -0.04820864275097847, -0.03697727620601654, -0.03864949941635132, -0.025803690776228905, -0.036819469183683395, 0.01055955607444048, -0.006439350079745054, 0.02949676290154457, 0.010502269491553307, 0.012014862149953842, 0.028638919815421104, -0.060048315674066544, 0.05742007493972778, 0.06962437182664871, 0.019824018701910973, 0.10384971648454666, 0.0004045412642881274, 0.050299473106861115], "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5cfdfefc-54fc-4217-9c5c-5ef7fc254fbd", "node_type": "4", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "47d033e1e332cb782b477f9b93f1a04fb2370fea0d267cdb98480cc8f9739cf8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8802875b-9dc7-4352-8f53-b442d8475b92", "node_type": "1", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "c7ea6e7f94fb81a0fff6d24ae904ea4a23ba60d8550c26caec6bbcc3458a801e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0cc42647-c493-4e10-acbc-beb5a01588b9", "node_type": "1", "metadata": {}, "hash": "13d50fda1429d6e1bfc656656b8d7479cfbc3194fbbfca7c7319b2289da10472", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Launcher/Main App->>Core Services: \"Create smart tools (QueryProcessor, ReRanker, etc.)\"\n    Note over Core Services: These tools understand queries, rank results, suggest typos\n    Core Services-->>Launcher/Main App: \"Tools are ready!\"\n    Launcher/Main App->>User Interface: \"Prepare the display (CLI text or GUI window)\"\n    User Interface-->>Launcher/Main App: \"Display is ready!\"\n    Launcher/Main App->>Search Engine: \"Assemble the main 'engine' with data, tools, and UI\"\n    Search Engine->>User Interface: \"Show welcome message / main search screen\"\n    User Interface-->>You: \"DevShelf is ready to use!\"\n    You->>User Interface: \"Type a search query...\"\n```\n\nThis sequence shows how the \"Application Startup & Flow Control\" layer (`Launcher/Main App` and `Search Engine` in the diagram) brings together different parts of the system.\n\n### Comparing CLI and GUI Startup\n\nWhile the core steps are similar, there are some differences in how the CLI and GUI versions set things up:\n\n| Feature                   | CLI Version (`core/Main.java`)                                    | GUI Version (`core/GuiMain.java`)                                |\n| :------------------------ | :---------------------------------------------------------------- | :--------------------------------------------------------------- |\n| **Main Entry Point**      | `public static void main(String[] args)` directly in `Main.java`  | `main` in `Launcher.java` calls `GuiMain.main(args)`, which uses `start()` method |\n| **User Interface Class**  | `CliView` ([User Interface Presentation](03_user_interface_presentation_.md))                                 | JavaFX FXML (`MainView.fxml`), managed by `MainViewController` ([User Interface Presentation](03_user_interface_presentation_.md)) |\n| **Core Logic Controller** | `BookSearchEngine` ([Core Search Engine](05_core_search_engine_.md))                                      | `DevShelfService` (a dedicated service for the GUI)              |\n| **Interaction Flow**      | `BookSearchEngine.run()` contains a `while(true)` loop for user input | UI events (e.g., button clicks) call methods in `DevShelfService` |\n\nNotice how both versions load the same underlying data (books, search index) and create the same smart tools (like `QueryProcessor` and `ReRanker`). The main difference is how they connect these tools to their specific user interface.", "mimetype": "text/plain", "start_char_idx": 6323, "end_char_idx": 8709, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "0cc42647-c493-4e10-acbc-beb5a01588b9", "embedding": [-0.0860002413392067, 0.016745535656809807, -0.02828170172870159, 0.033595237880945206, -0.011706913821399212, -0.03820597752928734, 0.024090906605124474, -0.01993836835026741, 0.08060910552740097, -0.02938968501985073, -0.0076741683296859264, 0.02356124483048916, 0.02021797187626362, -0.018617482855916023, -0.0005202480824664235, -0.04981066659092903, -0.04160083085298538, -0.048148058354854584, -0.018253931775689125, 0.002850497141480446, 0.02196025289595127, 0.04368770122528076, -0.002475499175488949, -0.057694584131240845, -0.030651148408651352, 0.07577171176671982, -0.010614550672471523, -0.0488140843808651, 0.006543638650327921, -0.22012603282928467, -0.006697774864733219, 0.03162730112671852, 0.052849628031253815, -0.02562076225876808, -0.02198396436870098, 0.01690785400569439, 0.06984234601259232, 0.011931627988815308, -0.025170274078845978, -0.0083994772285223, 0.02283182367682457, 0.03526091203093529, 0.017759380862116814, 0.021092141047120094, -0.019604524597525597, -0.04603006690740585, 0.02081349678337574, -0.023608461022377014, 0.020794223994016647, 0.00791652500629425, -0.01609267294406891, 0.007161530666053295, 0.05615518242120743, -0.025524910539388657, 0.007205250672996044, 0.016292313113808632, 0.052405945956707, 0.09224618226289749, -0.04181446135044098, 0.009958435781300068, 0.021992333233356476, -0.0309327132999897, -0.13165608048439026, 0.09861046820878983, -0.012153626419603825, 0.014599153771996498, 0.02555541880428791, -0.03961050882935524, -0.02379818819463253, 0.02781027741730213, -0.022081052884459496, 0.023966895416378975, -0.020800750702619553, 0.05208888649940491, 0.030732491984963417, -0.05655018612742424, -0.05391945689916611, -0.001180189661681652, 0.007886633276939392, -0.025456326082348824, -0.049141597002744675, -0.023785710334777832, 0.031564515084028244, -0.02293982170522213, -0.009992053732275963, 0.010906494222581387, 0.0026817945763468742, 0.009158484637737274, 0.04768998175859451, -0.041741322726011276, -0.004553530365228653, -0.11181340366601944, -0.009567184373736382, 0.04043007269501686, -0.042154427617788315, 0.011474423110485077, 0.008851778693497181, 0.035383619368076324, 0.020675934851169586, 0.3847162425518036, 0.023440266028046608, 0.002945805201306939, -0.009955251589417458, 0.035981543362140656, 0.029375184327363968, -0.011112296022474766, 0.004994587507098913, 0.008241122588515282, -0.005411295220255852, -0.002068205736577511, 0.018307149410247803, 0.0038998168893158436, 0.02622905932366848, -0.011330842971801758, -0.08008068054914474, 0.01461845263838768, -0.0363282673060894, -0.023642539978027344, 0.0029055215418338776, 0.04963411018252373, 0.007338842377066612, -0.03884734585881233, 0.007029679138213396, -0.01363031379878521, 0.038479819893836975, -0.015517126768827438, -0.0004926492110826075, -0.00442264461889863, -0.026206938549876213, -0.028977973386645317, 0.07118257135152817, -0.009046901017427444, -0.09282901883125305, 0.02956331893801689, -0.014498032629489899, 0.039741236716508865, -0.04359011724591255, 0.0036753674503415823, -0.015602764673531055, -0.01952817104756832, -0.02115950547158718, 0.01648601144552231, 0.026073390617966652, -0.05052832514047623, -0.054139308631420135, 0.08969900757074356, -0.023184362798929214, 0.009447254240512848, -0.04409090802073479, -0.05504128336906433, -0.011520620435476303, 0.04839679226279259, -0.0469224713742733, -0.035837750881910324, -0.04222544655203819, 0.06274969130754471, 0.028984155505895615, 0.025787288323044777, -0.0480901300907135, -0.04125314950942993, -0.015956098213791847, 0.03951764479279518, -0.040595315396785736, 0.07756395637989044, 0.036356013268232346, -0.05078081786632538, -0.0075669195502996445, 0.019376365467905998, -0.08949990570545197, 0.024885887280106544, -0.04203054681420326, 0.03637252002954483, -0.025867415592074394, 0.007481589913368225, 0.04346810653805733, -0.031351570039987564, -0.04009806364774704, 0.02301495335996151, 0.026430165395140648, 0.030047329142689705, 0.007079442497342825, 0.016177086159586906, -0.0003734192287083715, 0.02441156841814518, 0.011090248823165894, -0.0323215089738369, -0.04115583747625351, -0.01970278099179268, 0.03977557271718979, 0.04020676761865616, -0.0373101532459259, 0.034730903804302216, -0.00030949528445489705, 0.054006852209568024, 0.004501466639339924, -0.01756279170513153, -0.03052453137934208, -0.03606434166431427, 0.002817900385707617, -0.001251504640094936, 0.05067724362015724, 0.08243818581104279, -0.015255872160196304, 0.019095558673143387, 0.00751517154276371, 0.03061690554022789, -0.02365955151617527, -0.05486088991165161, 0.06118977442383766, -0.0258250143378973, -0.08304870873689651, 0.018773073330521584, -0.026825521141290665, -0.04271446913480759, -0.02042008750140667, -0.06891168653964996, -0.0004661907732952386, 0.009410139173269272, 0.030695466324687004, 0.03681818023324013, -0.05192778632044792, 0.016674436628818512, 0.0568561926484108, -0.3079599440097809, -0.03764744848012924, -0.03487155959010124, 0.01728791929781437, 0.03769600763916969, -0.09587583690881729, 0.012629460543394089, -0.02939162403345108, -0.056120678782463074, 0.03411715105175972, 0.08599671721458435, -0.056375499814748764, -0.029170816764235497, -0.02188236080110073, 0.05513668432831764, 0.019123809412121773, 0.03679776191711426, 0.022166943177580833, -0.04555433988571167, 0.004716613329946995, 0.05825734883546829, -0.031124822795391083, -0.004631684627383947, -0.057242099195718765, -0.06402606517076492, 0.027125002816319466, 0.07370593398809433, -0.06865783035755157, 0.05381119251251221, 0.0012678608763962984, 0.0015797375235706568, 0.0180754866451025, -0.09360404312610626, -0.09821723401546478, -0.031123965978622437, 0.0024573514237999916, -0.04342689737677574, -0.03622119128704071, -0.0067835659720003605, 0.03443072363734245, -0.01399019081145525, -0.006916316691786051, 0.010156572796404362, -0.00779931154102087, 0.022328773513436317, -0.002437757793813944, 0.013612834736704826, -0.09465167671442032, -0.002870459808036685, -0.0018050712533295155, -0.07344744354486465, 0.02640465460717678, 0.016492649912834167, 0.024416154250502586, -0.007596350274980068, -0.03956921026110649, -0.006118326913565397, -0.03618510439991951, -0.05061081796884537, -0.010158298537135124, 0.047123752534389496, 0.04097205400466919, 0.03749674931168556, 0.00578340096399188, 0.005074368789792061, -0.024062559008598328, 0.01821269281208515, 0.030506081879138947, 0.04282422363758087, -0.054514773190021515, -0.0816153883934021, 0.03466615453362465, -0.040518619120121, 0.01173078827559948, -0.01068891305476427, 0.04519007354974747, 0.027357781305909157, -0.01062688883394003, 0.0071283807046711445, 0.010302584618330002, 0.016870548948645592, -0.00016030768165364861, 0.08084477484226227, 0.04079677537083626, -0.014081382192671299, 0.003077043453231454, 0.06239129975438118, -0.033865682780742645, 0.018229631707072258, -0.007433631923049688, -0.023202599957585335, 0.05286693572998047, 0.004504698794335127, -0.039507847279310226, 0.008363358676433563, 0.06845393031835556, -0.27551594376564026, 0.014126323163509369, 0.0003519604215398431, 0.04063411429524422, 0.02246072329580784, 0.028895672410726547, 0.03369113802909851, -0.05914096534252167, -0.004437143914401531, 0.014487998560070992, 0.013081696815788746, 0.02241702564060688, -9.814049553824589e-05, -0.04652075096964836, 0.04215085878968239, 0.09170698374509811, 0.11847294867038727, 0.009612335823476315, 0.02531522326171398, 0.030555587261915207, -0.003684941679239273, 0.016503581777215004, 0.1654549241065979, 0.019388524815440178, 0.07415872067213058, 0.021556438878178596, 0.049153607338666916, 0.0024743967223912477, 0.04010031744837761, 0.038797471672296524, 0.017691461369395256, -0.02431175671517849, 0.10007696598768234, 0.023391366004943848, 0.04586079344153404, -0.042634267359972, 0.008273514918982983, 0.05974704027175903, -0.008822758682072163, 0.03057699277997017, -0.04514060169458389, 0.019155966117978096, -0.06642892211675644, -0.021256407722830772, 0.10142102092504501, -0.0030329658184200525, -0.028454046696424484, -0.04744790866971016, -0.028211267665028572, 0.020117569714784622, -0.06404014676809311, -0.09072364866733551, 0.031386375427246094, 0.0049467021599411964, 0.028479542583227158, 0.030490223318338394, -0.030481893569231033, 0.008540158160030842, -0.039896849542856216, 0.03468344360589981, 0.09068295359611511, -0.014945355243980885, 0.09953120350837708, 0.0345572791993618, 0.020276706665754318], "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5cfdfefc-54fc-4217-9c5c-5ef7fc254fbd", "node_type": "4", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "47d033e1e332cb782b477f9b93f1a04fb2370fea0d267cdb98480cc8f9739cf8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b090fa2f-b81d-46e6-b0a0-a589336a46e7", "node_type": "1", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "814c25a45d23dcc1253e84ffb49e02de13da7efe7cf731a85aad067af6d951d5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d1f74d09-70ef-44a8-9d28-938b0f4136f6", "node_type": "1", "metadata": {}, "hash": "68d018dca4f36880a5454b6815c8d9a5954a5f96d136f14391011fc0bd5ec942", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "The main difference is how they connect these tools to their specific user interface.\n\n#### The CLI's Main Loop\n\nOnce the CLI version starts, its `BookSearchEngine` takes over. It enters a continuous loop, waiting for your commands:\n\n**`src/main/java/core/BookSearchEngine.java` (Simplified `run` method)**\n```java\npackage core;\n\nimport ui.cli.CliView;\n// ... other imports\n\npublic class BookSearchEngine {\n    private final CliView view; // Our CLI display tool\n    // ... other services and state\n\n    public BookSearchEngine( /* ... services, CliView view */ ) {\n        this.view = view;\n        // ... initialize state\n    }\n\n    public void run() {\n        view.showWelcomeMessage(bookMap.size()); // Greet the user\n        while (true) { // This loop keeps the application running\n            String query = view.getSearchQuery(); // Ask the user for a search\n            if (query.equalsIgnoreCase(\"exit\")) { // User wants to quit\n                view.showExitMessage();\n                break; // Exit the loop\n            }\n            if (query.isEmpty()) continue; // Skip empty queries\n\n            processQuery(query); // Handle the search request\n        }\n    }\n    // ... other methods like processQuery, applyFilters, handleFilterMenu etc.\n}\n```\nThis `run()` method is the heart of the CLI application's \"flow control.\" It continuously:\n1.  **Gets Input:** `view.getSearchQuery()` asks you what you want to search for.\n2.  **Processes:** Calls `processQuery(query)` to handle the actual search.\n3.  **Repeats:** Goes back to step 1 until you type \"exit.\"\n\nThe `processQuery` method then orchestrates the search:\n\n**`src/main/java/core/BookSearchEngine.java` (Simplified `processQuery` method)**\n```java\n// Inside BookSearchEngine class\nprivate void processQuery(String query) {\n    // 1. Search! Ask the QueryProcessor (our smart search tool)\n    // List<SearchResult> tfIdfResults = queryProcessor.search(query);\n\n    // 2. Re-rank results (make sure the best ones are on top)\n    // List<SearchResult> rankedResults = reRanker.reRank(tfIdfResults, query);\n\n    // 3.", "mimetype": "text/plain", "start_char_idx": 8624, "end_char_idx": 10709, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "d1f74d09-70ef-44a8-9d28-938b0f4136f6", "embedding": [-0.06870022416114807, -0.005879497621208429, -0.014471041038632393, -0.012342371046543121, 0.021067656576633453, -0.006838631350547075, -0.022632230073213577, -0.014007914811372757, 0.04800724983215332, 0.007254261523485184, 0.009708949364721775, 0.0361655056476593, 0.04726262763142586, 0.03672889247536659, -0.03182486072182655, -0.003181306179612875, 0.000558802392333746, 0.02935468964278698, -0.0310786422342062, -0.02939874492585659, 0.002378078643232584, 0.05287192016839981, -0.04397067800164223, -0.014444626867771149, 0.037357427179813385, 0.005257130600512028, -0.01387419831007719, -0.05256202444434166, -0.020311366766691208, -0.2138466238975525, 0.005703452508896589, -0.04402923956513405, 0.011263972148299217, -0.01211574487388134, -0.0073582809418439865, -0.005858184304088354, -0.02033000811934471, 0.01901143603026867, -0.027933042496442795, 0.010546705685555935, 0.033424947410821915, -0.015315038152039051, -0.02515449933707714, -0.01288570649921894, -0.02505936473608017, 0.006370509043335915, 0.03649962320923805, -0.03205229341983795, 0.03303122520446777, 0.02247384376823902, -0.03314903751015663, -0.03223906457424164, -0.0266802329570055, 0.07199704647064209, 0.018621776252985, -0.019970403984189034, 0.08260232955217361, 0.06079498305916786, -0.02184486761689186, 0.011069796048104763, 0.07445671409368515, -0.0435226708650589, -0.11314564943313599, 0.06086592748761177, -0.014867683872580528, -0.008998852223157883, -0.01577986776828766, -0.04931863024830818, -0.007593490183353424, 0.08699898421764374, -0.026296386495232582, 0.054586008191108704, -0.0028751399368047714, 0.08312872797250748, -0.005824392661452293, 0.007570099085569382, -0.024672361090779305, -0.02667783945798874, 0.030197596177458763, 0.023707889020442963, -0.060900017619132996, -0.020512208342552185, 0.015561308711767197, -0.002310018287971616, 0.0030274007003754377, 0.014187080785632133, 0.0026004693936556578, 0.014496066607534885, 0.08883698284626007, 0.03564734756946564, 0.055370960384607315, -0.06273442506790161, -0.009886314161121845, 0.04009440913796425, -0.04652227461338043, 0.012621053494513035, -0.026588035747408867, 0.07260116934776306, 0.0517805777490139, 0.36057886481285095, -0.005501264240592718, 0.04109561815857887, -0.012142838910222054, 0.019565951079130173, -0.032262977212667465, -0.06704283505678177, 0.015050255693495274, 0.022427108138799667, -0.010295645333826542, 0.05319235846400261, -0.0001893147564260289, -6.627589027630165e-05, 0.06858546286821365, -0.056195203214883804, -0.019340509548783302, 0.07719256728887558, -0.0024312599562108517, 0.04886343330144882, 0.011150719597935677, -0.002416872186586261, -0.030202923342585564, -0.018903573974967003, -0.014577263966202736, -0.07426644116640091, 0.06464230269193649, 0.051149360835552216, 0.002443922683596611, 0.08298838883638382, -0.08774091303348541, 0.003926393110305071, 0.028362436220049858, -0.044435735791921616, -0.10108693689107895, 0.04445357993245125, -0.018279626965522766, 0.02220514416694641, -0.011309015564620495, -0.03459620103240013, 0.0036353881005197763, 0.004512605722993612, -0.021812982857227325, 0.010008607991039753, 0.0032305652275681496, -0.06709408760070801, -0.09222456812858582, 0.19013141095638275, -0.05925797298550606, -0.018987037241458893, -0.05577448382973671, -0.06658472120761871, -0.033005308359861374, 0.041449036449193954, -0.03443429619073868, -0.07572828978300095, 0.00882013514637947, 0.06766317039728165, 0.0366530567407608, 0.001155514968559146, -0.03168310597538948, -0.05456114187836647, -0.04110781475901604, 0.008690394461154938, -0.04290398955345154, 0.0666610449552536, 0.043709646910429, -0.0668947622179985, -0.042447399348020554, 0.03654719144105911, -0.08237828314304352, 0.029678210616111755, -0.025193363428115845, 0.014309411868453026, -0.05401758477091789, 0.012159537523984909, 0.009114005602896214, -0.02223013900220394, -0.017406169325113297, -0.04899365454912186, 0.040873248130083084, 0.0018297535134479403, 0.043890856206417084, -0.06328330188989639, -0.0017076913500204682, 0.009997233748435974, -0.023488912731409073, 0.008660334162414074, -0.027068117633461952, -0.01408966351300478, 0.020471595227718353, -0.005105983931571245, -0.07676832377910614, -0.05807528644800186, -0.009001022204756737, 0.02623812109231949, 0.03206922113895416, -0.05109438672661781, 0.00758197158575058, -0.021083950996398926, 0.03923356533050537, 0.007916743867099285, 0.054122842848300934, -0.00800627376884222, 0.028128722682595253, 0.0016795669216662645, 0.010251790285110474, 0.034515418112277985, -0.018768010661005974, -0.0546589195728302, 0.06579634547233582, -0.008400700986385345, -0.08718115836381912, -0.004061937797814608, -0.00800746213644743, -0.03381809964776039, 0.004894279409199953, -0.07070189714431763, -0.029170574620366096, 0.031845707446336746, -0.024718469008803368, 0.011400993913412094, 0.004482865799218416, -0.01574922911822796, 0.008801985532045364, -0.29743343591690063, -0.041416510939598083, -0.015677163377404213, 0.0006062961183488369, -0.00942701194435358, -0.04300403222441673, -0.007001302670687437, 0.013770491816103458, -0.016626637428998947, 0.07041972875595093, 0.0930199846625328, -0.006873892620205879, -0.014145792461931705, 0.017099255695939064, 0.010097086429595947, -0.045768287032842636, -0.024032700806856155, -0.016020692884922028, -0.04723905399441719, -0.057837266474962234, 0.082178995013237, -0.04490314796566963, 0.05891622602939606, -0.0668099969625473, 0.03620848059654236, 0.012212957255542278, 0.10858937352895737, -0.01820765808224678, 0.05919322744011879, 0.005045614670962095, 0.06209264695644379, 0.04992324113845825, -0.043448884040117264, -0.03400328755378723, 0.018370872363448143, 0.05213375762104988, -0.04313415661454201, 0.01307710912078619, -0.04200206324458122, 0.00528297945857048, 0.020703909918665886, -0.013182183727622032, 0.03246637433767319, -0.033165931701660156, -0.004045753739774227, -0.006982269696891308, 0.001948962570168078, -0.012356987223029137, 0.00016730293282307684, 0.01992957293987274, -0.06863299012184143, -0.010610726661980152, 0.014561840333044529, 0.03967584669589996, -0.02281402423977852, -0.013375801965594292, -0.03236842155456543, -0.04701728746294975, -0.03858290612697601, -0.03491111844778061, 0.03439093381166458, -0.013006225228309631, 0.002666606567800045, -0.003255651332437992, -0.009557174518704414, -0.004544767551124096, 0.048199087381362915, 0.0024649337865412235, 0.0427984818816185, -0.009426030330359936, -0.07025071978569031, -0.05479523912072182, -0.023526350036263466, 0.0554153174161911, 0.029760170727968216, 0.07910087704658508, 0.006679354701191187, -0.03255316987633705, -0.007411162368953228, -0.03830084949731827, 0.013973677530884743, 0.016872763633728027, 0.09950928390026093, 0.008085125125944614, 0.02990051917731762, -0.011457059532403946, 0.05086802691221237, 0.0059684342704713345, -0.003975354600697756, 0.04856935888528824, -0.02646440640091896, 0.00497124157845974, -0.0388682596385479, 0.02300715260207653, 0.019891049712896347, 0.05252009630203247, -0.23878391087055206, 0.0037198374047875404, -0.006897725630551577, 0.02103731781244278, 0.02423081547021866, -0.011961265467107296, 0.060993168503046036, -0.014490252360701561, 0.006412518676370382, 0.009137667715549469, 0.00998690165579319, 0.08203745633363724, -0.003704501548781991, -0.06851644068956375, 0.006868967320770025, 0.03384873643517494, 0.01955379545688629, 0.005041585769504309, 0.09419085085391998, 0.06541000306606293, 0.024679401889443398, 0.017465081065893173, 0.18519392609596252, 0.06740598380565643, 0.03473468869924545, -0.002527700737118721, -0.0019938740879297256, -0.06337793171405792, -0.007112582214176655, 0.04876288026571274, 0.03977710008621216, -0.04575318098068237, 0.12547403573989868, 0.031712714582681656, -0.003430719021707773, -0.04242042452096939, 0.028809787705540657, 0.05166461318731308, 0.0171221736818552, -0.021983934566378593, -0.040385402739048004, 0.045937519520521164, -0.05884014442563057, -0.0510295033454895, 0.07042887806892395, -0.042291801422834396, -0.023833097890019417, -0.03801455348730087, -0.10260768979787827, 0.04322692006826401, -0.048702143132686615, -0.02974010817706585, 0.023388104513287544, -0.04453979805111885, 0.03582247346639633, 0.031312085688114166, -0.014360067434608936, 0.04125143587589264, 0.009519918821752071, 0.012457355856895447, 0.006570843979716301, -0.04139552637934685, 0.06562539935112, 0.004633666016161442, 0.032289378345012665], "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5cfdfefc-54fc-4217-9c5c-5ef7fc254fbd", "node_type": "4", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "47d033e1e332cb782b477f9b93f1a04fb2370fea0d267cdb98480cc8f9739cf8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0cc42647-c493-4e10-acbc-beb5a01588b9", "node_type": "1", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "4361c8599485c47a3ab642bdd4457a494eb8752f56ebfa6484576cfdc748788a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b785fa9d-d79d-41b1-8c41-061280736120", "node_type": "1", "metadata": {}, "hash": "056f20cc5b6b8e54b262e1c524fee08665b3713ef0f7776f17d0fa2f3c85214a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Re-rank results (make sure the best ones are on top)\n    // List<SearchResult> rankedResults = reRanker.reRank(tfIdfResults, query);\n\n    // 3. Prepare books for display\n    // final List<Book> initialBooks = rankedResults.stream()...;\n\n    // This nested loop lets you filter/sort results for the *current* query\n    while (true) {\n        // A. Apply any filters or sorting you've set\n        // List<Book> filteredBooks = applyFilters(initialBooks);\n        // applySort(filteredBooks);\n\n        // B. Display the results\n        // view.showResults(query, filteredBooks);\n\n        // C. Get your next action (filter, sort, new search, etc.)\n        // String choice = view.getActionPrompt();\n        // switch (choice) {\n        //     case \"f\": handleFilterMenu(); break;\n        //     case \"n\": return; // Go back to the main search loop\n        //     // ... other actions\n        // }\n    }\n}\n```\nInside `processQuery`, there's another loop that allows you to refine your search results (filter, sort) before going back to the main `run()` loop for a brand new search. This shows a clear flow of control, moving from getting a query to processing it, displaying results, and then asking for the next action.\n\n#### The GUI's Service Approach\n\nThe GUI works a bit differently. Instead of a `while(true)` loop, the `DevShelfService` handles specific requests from the user interface.", "mimetype": "text/plain", "start_char_idx": 10566, "end_char_idx": 11955, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "b785fa9d-d79d-41b1-8c41-061280736120", "embedding": [-0.05343003198504448, 0.03574512153863907, -0.026571035385131836, -0.00988989882171154, 0.02084718458354473, -0.04475069046020508, -0.016138575971126556, -0.005239632446318865, 0.05781235918402672, -0.014103180728852749, -0.016690539196133614, 0.013232230208814144, 0.020033828914165497, 0.027799151837825775, -0.002113010035827756, -0.03582504764199257, 0.0017961469711735845, 0.0004889779957011342, -0.031667474657297134, -0.01092064380645752, 0.08433251827955246, 0.015663012862205505, -0.02694154530763626, -0.04822252690792084, -0.010935272090137005, 0.010805022902786732, -0.015578998252749443, -0.038047075271606445, 0.008151588030159473, -0.18245497345924377, 0.01080238912254572, -0.009946415200829506, 0.030677635222673416, -0.019945532083511353, -0.04707411304116249, 0.010444742627441883, 0.03162433207035065, 0.0014821618096902966, 0.014054047875106335, 0.02082943357527256, 0.019483085721731186, -0.02063569612801075, -0.004586200229823589, 0.03119780868291855, -0.0333925262093544, -0.0035637367982417345, 0.021433882415294647, -0.011411448940634727, -0.002781951567158103, -0.029010439291596413, -0.08741588145494461, 0.00976826623082161, 0.009245570749044418, 0.027157815173268318, 0.011509815230965614, 0.007728660479187965, 0.06744671612977982, 0.05954601615667343, -0.03243393450975418, 0.026523733511567116, 0.0572643019258976, -0.0916786938905716, -0.12120930850505829, 0.07926285266876221, 0.015877405181527138, -0.018582360818982124, 0.044622600078582764, -0.08546231687068939, 0.015790369361639023, 0.04379398748278618, 0.018674233928322792, 0.05982781946659088, -0.012482892721891403, 0.0737084299325943, -0.0061918748542666435, 0.001446532434783876, 0.009074537083506584, -0.014346004463732243, 0.024554792791604996, -0.015001984313130379, -0.0754125714302063, -0.04844484105706215, 0.026004154235124588, 0.01733252964913845, -0.03578915819525719, 0.00633058650419116, 9.225821850122884e-05, -0.011750996112823486, 0.05771514028310776, 0.027039803564548492, 0.053143858909606934, -0.03645601123571396, -0.017250224947929382, 0.003999704960733652, -0.05835622176527977, -0.020690439268946648, -0.042226165533065796, 0.055804383009672165, -0.025676274672150612, 0.37548530101776123, 0.010734455659985542, 0.01728210784494877, 0.00030881742713972926, -0.01338326558470726, -0.019697031006217003, -0.05757841095328331, -0.014384189620614052, 0.0018163876375183463, 0.0238846093416214, 0.044434208422899246, 0.004234886262565851, 0.0008994452655315399, 0.05158308148384094, -0.007237258367240429, -0.06930693238973618, 0.011282135732471943, -0.05976076424121857, 0.02915373630821705, -0.018430080264806747, -0.024538032710552216, 0.03000331111252308, -0.02934902347624302, -0.004620421212166548, -0.03615877032279968, 0.042119771242141724, 0.019011124968528748, -0.050178661942481995, 0.054764989763498306, -0.09326403588056564, -0.017864439636468887, 0.010346339084208012, -0.05740554258227348, -0.0938413143157959, 0.015971679240465164, 0.013601266779005527, 0.046791497617959976, 0.01629694737493992, -0.02822699584066868, -0.011669814586639404, 0.009985489770770073, -0.02845580503344536, 0.015166954137384892, 0.03735409677028656, -0.05202626809477806, -0.06727003306150436, 0.14595109224319458, -0.02207033336162567, 0.01075038779526949, -0.028529467061161995, -0.024480052292346954, -0.00821937806904316, 0.09186138212680817, -0.051486000418663025, -0.06051614135503769, -0.006605829577893019, 0.08215627074241638, 0.07155259698629379, 0.042105402797460556, -0.043181534856557846, -0.050976917147636414, -0.023597590625286102, 0.01065039075911045, 0.008902328088879585, 0.07253367453813553, 0.02343008667230606, -0.0568709522485733, -0.06604849547147751, 0.013940148055553436, -0.11576778441667557, -0.0004711895016953349, -0.04210042580962181, 0.0399041622877121, -0.061206795275211334, 0.03036089800298214, 0.009696204215288162, -0.00370394391939044, -0.007830888964235783, 0.0067315357737243176, 0.0770004615187645, 0.0326772965490818, -0.0016384284244850278, -0.018175950273871422, -0.0070577808655798435, 0.0281372107565403, -0.01817040517926216, -0.019419101998209953, -0.043139245361089706, -0.028124993667006493, -0.006387721747159958, -0.049608342349529266, -0.038561418652534485, -0.019541611894965172, 0.013686449266970158, 0.03078741580247879, 0.07192286849021912, -0.03897241875529289, 0.007312556263059378, -0.020163793116807938, 0.03712959215044975, 0.05525635927915573, 0.08811095356941223, 0.07073836773633957, -0.004051689058542252, -0.024537907913327217, -0.01002076268196106, -0.00920091848820448, -0.02189001441001892, -0.036094337701797485, 0.05473700910806656, -0.01890937052667141, -0.07564402371644974, 0.00466922577470541, -0.007460839580744505, -0.0011017584474757314, -0.01586666889488697, -0.007417154964059591, -0.010417034849524498, 0.07560667395591736, -0.01604311540722847, 0.03633018210530281, -0.025462137535214424, -0.004914880730211735, 0.014405458234250546, -0.3063998222351074, -0.018266797065734863, -0.011921283788979053, -0.031649328768253326, 0.003296655835583806, -0.02432098053395748, 0.06213055178523064, -0.010169094428420067, -0.03320890665054321, 0.02637193724513054, 0.10660365223884583, -0.02828339673578739, 0.012724507600069046, -0.002227268647402525, 0.008361203595995903, -0.02870672382414341, -0.00882876105606556, -0.048230912536382675, -0.046776920557022095, -0.03213385120034218, 0.05559322237968445, -0.022013245150446892, 0.06602954119443893, -0.06677549332380295, -0.006779603660106659, 0.013014758005738258, 0.09410131722688675, -0.005966095253825188, 0.07627364248037338, -0.0766894593834877, 0.08839530497789383, 0.05091063305735588, -0.05960103124380112, -0.07878949493169785, 0.026083124801516533, 0.030036576092243195, -0.002394932322204113, 0.013511693105101585, -0.013670206069946289, 0.03719351440668106, 0.006666595581918955, -0.011113989166915417, 0.015404547564685345, 0.005513486452400684, -0.023886172100901604, -0.010684230364859104, 0.03550270199775696, -0.07983514666557312, 0.005577053874731064, 0.01164039596915245, -0.07609864324331284, -0.0031624408438801765, -0.005070727318525314, 0.04176926985383034, 0.006512134335935116, -0.05495515465736389, -0.0013192626647651196, -0.06061946973204613, -0.01656673662364483, -0.058843594044446945, 0.0646786019206047, 0.05067596957087517, 0.02288532815873623, 0.004481720272451639, 0.009371352382004261, -0.026208464056253433, 0.007638215087354183, 0.04469820857048035, 0.0306425578892231, -0.03542942553758621, -0.08436015993356705, 0.0020282864570617676, -0.048507075756788254, 0.056438084691762924, 0.06367915868759155, 0.06571464985609055, 0.03497447073459625, -0.012595534324645996, -0.038946762681007385, -0.04723823070526123, -0.001967958640307188, 0.02717636525630951, 0.0944318175315857, -0.00138185010291636, -0.0066469511948525906, -0.02394896000623703, 0.01962793990969658, 0.007167508825659752, 0.0117125753313303, -0.005359821021556854, -0.048861075192689896, -0.009985542856156826, -0.0185167845338583, 0.017850151285529137, 0.035368695855140686, 0.03678558021783829, -0.2634584605693817, 0.0020023169927299023, -0.01586071588099003, 0.02341252751648426, -0.008743362501263618, -0.006309337913990021, 0.03265141695737839, -0.028729934245347977, 0.019352221861481667, -0.007195109501481056, 0.03420668840408325, 0.0007304305909201503, -0.009635910391807556, -0.077701136469841, 0.03431286662817001, 0.06111239641904831, 0.06551124900579453, -0.0089308712631464, 0.07450789213180542, 0.037789057940244675, 0.03967847302556038, -0.00018723522953223437, 0.17039990425109863, 0.033377137035131454, 0.06755382567644119, 0.004578184336423874, 0.010676070116460323, -0.055302560329437256, 0.027818022295832634, 0.054016441106796265, 0.038766004145145416, -0.06917444616556168, 0.10107491165399551, 0.01951834186911583, 0.004945253022015095, -0.06103908643126488, 0.042989909648895264, 0.024269437417387962, 0.007234277203679085, -0.034813590347766876, -0.05732005089521408, 0.06963544338941574, -0.032344963401556015, 0.007692789193242788, 0.05345040559768677, -0.023425854742527008, -0.030631743371486664, -0.052786096930503845, -0.05745204538106918, 0.009597188793122768, 0.021730950102210045, -0.06708431988954544, 0.016260234639048576, -0.005298731382936239, 0.04796537384390831, 0.03836731240153313, -0.01783021166920662, -0.0038334366399794817, -0.025619978085160255, 0.048343438655138016, 0.044947393238544464, -0.03753374144434929, 0.07268545031547546, -0.001098506967537105, 0.04735496640205383], "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5cfdfefc-54fc-4217-9c5c-5ef7fc254fbd", "node_type": "4", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "47d033e1e332cb782b477f9b93f1a04fb2370fea0d267cdb98480cc8f9739cf8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d1f74d09-70ef-44a8-9d28-938b0f4136f6", "node_type": "1", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "6d1271989242473e85779d1940c25d0a17b2dfa0a0cedf295666ab27098698e6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9874b0f0-209f-4a27-8e76-5bfc64d7b616", "node_type": "1", "metadata": {}, "hash": "37378609c1ba2cf147cf128fd212dbbb7186a4c0c60d8885b40e928d9d058b2a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#### The GUI's Service Approach\n\nThe GUI works a bit differently. Instead of a `while(true)` loop, the `DevShelfService` handles specific requests from the user interface. When you type in the search bar and press Enter, the GUI controller calls the `search` method of `DevShelfService`:\n\n**`src/main/java/ui/gui/services/DevShelfService.java` (Simplified `search` method)**\n```java\npackage ui.gui.services;\n\nimport domain.Book;\nimport domain.SearchResult;\nimport features.search.QueryProcessor;\nimport features.search.ReRanker;\nimport features.search.Suggester;\n// ... other imports\n\npublic class DevShelfService {\n    private final QueryProcessor queryProcessor;\n    private final ReRanker reRanker;\n    private final Suggester suggester;\n    // ... other services and bookMap\n\n    public DevShelfService( /* ... services and bookMap */ ) {\n        this.queryProcessor = queryProcessor;\n        this.reRanker = reRanker;\n        this.suggester = suggester;\n        // ... initialize other services\n    }\n\n    public SearchResponse search(String query) {\n        System.out.println(\"\ud83d\udd0d GUI Processing Query: [\" + query + \"]\");\n\n        // 1. Raw Search (using our smart QueryProcessor tool)\n        // List<SearchResult> results = queryProcessor.search(query);\n\n        // 2. Handle No Results / Typos (ask the Suggester if needed)\n        // if (results.isEmpty()) {\n        //     String suggestion = suggester.suggestSimilar(query);\n        //     if (suggestion != null) { /* ... search with suggestion ... */ }\n        // }\n\n        // 3. Re-Rank (using our ReRanker tool to sort by popularity/relevance)\n        // List<SearchResult> rankedResults = reRanker.reRank(results, usedQuery);\n\n        // 4. Convert to Books (so the UI can display them nicely)\n        // List<Book> books = new ArrayList<>();\n        // for (SearchResult res : rankedResults) { /* ... add book to list ... */ }\n\n        // return new SearchResponse(books, isSuggestion, usedQuery);\n        return null; // Simplified return\n    }\n    // ... other methods like getRecommendationsFor, logClick etc.\n}\n```\nThis `search` method is called each time you submit a query in the GUI.", "mimetype": "text/plain", "start_char_idx": 11784, "end_char_idx": 13942, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "9874b0f0-209f-4a27-8e76-5bfc64d7b616", "embedding": [-0.07234100252389908, 0.037176862359046936, -0.019862214103341103, -0.0027228703256696463, 0.004850311670452356, -0.020382657647132874, 0.01732640340924263, -0.00598781555891037, 0.02934889867901802, 0.0028636138886213303, -0.035229042172431946, 0.03382827714085579, 0.022530393674969673, 5.4497792007168755e-05, -0.034529611468315125, -0.02495199628174305, -0.031095143407583237, 0.014449229463934898, -0.023639073595404625, -0.02728288248181343, 0.05478878691792488, 0.019141240045428276, -0.015431377105414867, -0.03648018091917038, -0.022192200645804405, 0.0388377346098423, -0.0068438113667070866, -0.03489351272583008, -0.01099130418151617, -0.2155347317457199, 0.04079555347561836, 0.007088541053235531, 0.052048467099666595, -0.008482744917273521, -0.023348962888121605, -0.004360379185527563, 0.02470199391245842, 0.004488102160394192, -0.024978021159768105, -0.006711328402161598, 0.03580617159605026, 0.028464971110224724, -0.01855386607348919, 0.049468837678432465, 0.0025531910359859467, -0.011875917203724384, -0.00027231176500208676, -0.00504413852468133, -0.02958238311111927, -0.008505468256771564, -0.06700918078422546, -0.020225489512085915, -0.01166526135057211, -0.010987766087055206, 0.03064299002289772, 0.045403823256492615, 0.07759245485067368, 0.03881874680519104, 0.005410993937402964, -0.007213689386844635, 0.05319110304117203, -0.06015219911932945, -0.08483734726905823, 0.10860449075698853, -0.019450709223747253, 0.013148723170161247, 0.04666059464216232, -0.0862615555524826, 0.028976712375879288, 0.03296123445034027, -0.007335982751101255, 0.05001401901245117, -0.010074906051158905, 0.07027628272771835, 0.04110901057720184, -0.02472182922065258, -0.006187920458614826, 0.007365945726633072, 0.02611408196389675, -0.018242210149765015, -0.01268134918063879, -0.03264389932155609, 0.03594594821333885, 0.00787427555769682, -0.049669794738292694, -0.013441843912005424, 0.010581482201814651, -0.0030318547505885363, 0.06634874641895294, 0.00285166478715837, 0.05464307591319084, -0.06653650850057602, -0.0004470344865694642, 0.027690235525369644, -0.03683536499738693, -0.007838313467800617, -0.025404054671525955, 0.046485576778650284, -0.017144253477454185, 0.42036324739456177, 0.021717386320233345, 0.043614476919174194, 0.01030848640948534, -0.0059282067231833935, -0.019891198724508286, -0.023035187274217606, 0.01362136472016573, 0.009830252267420292, -0.013607981614768505, -0.011794150806963444, 0.004554733633995056, -0.017278868705034256, 0.06404859572649002, -0.04758436232805252, -0.039432093501091, 0.0019297273829579353, -0.07613720744848251, 0.010615608654916286, -0.03242016211152077, -0.0005787588888779283, 0.02695411816239357, -0.0359579361975193, 0.003466313472017646, 0.015245852060616016, 0.06339863687753677, -0.007867481559515, 0.0013212173944339156, 0.02618231065571308, -0.06061180308461189, -0.00593797629699111, 0.017246657982468605, -0.0003544403880368918, -0.10821712017059326, 0.025445016101002693, -0.0055421339347958565, 0.026868969202041626, -0.036561135202646255, -0.04020628333091736, -0.025365421548485756, -3.3541200537001714e-05, -0.046316638588905334, 0.04426659271121025, 0.04418376460671425, -0.056888747960329056, -0.06272568553686142, 0.1232677474617958, -0.018931088969111443, 0.004031491931527853, -0.037123169749975204, -0.07956895977258682, -0.03242858871817589, 0.06602068245410919, -0.015656037256121635, -0.08342299610376358, -0.008741009049117565, 0.057185087352991104, 0.07880441099405289, 0.03761443495750427, -0.049740031361579895, -0.052578095346689224, -0.08103400468826294, 0.004763910546898842, 0.010093806311488152, 0.10099328309297562, -0.008806122466921806, -0.09279821068048477, -0.060059983283281326, 0.016512330621480942, -0.11330311000347137, -0.010077240876853466, -0.029385270550847054, -0.014400477521121502, -0.07221170514822006, -0.03378614783287048, -0.004782750736922026, -0.040832679718732834, -0.0331641286611557, 0.00134725880343467, 0.05395536124706268, 0.035322483628988266, 0.013973170891404152, -0.009665516205132008, 0.014026397839188576, -0.006747707258909941, -0.044867340475320816, -0.03813660517334938, -0.038484420627355576, -0.01975378952920437, -0.02732817269861698, -0.024385133758187294, -0.07185427844524384, -0.026223400607705116, 0.015389054082334042, 0.03378072753548622, 0.02964569628238678, -0.03678237274289131, -0.008143180049955845, -0.01672765240073204, 0.02471112087368965, 0.05339884012937546, 0.049290601164102554, 0.05402623116970062, -0.006818413734436035, 0.031328678131103516, -0.01717689260840416, 0.02228926494717598, -0.011341073550283909, -0.022322533652186394, 0.07801961153745651, 0.015463770367205143, -0.047946635633707047, 0.03184198588132858, -0.00475177401676774, -0.01682872511446476, -0.015065981075167656, -0.02791304886341095, -0.03446335718035698, 0.04374397546052933, -0.021743251010775566, 0.022225022315979004, -0.006359828636050224, 0.028478849679231644, 0.0411454439163208, -0.2969210743904114, -0.0042170691303908825, -0.012925437651574612, 0.002289345022290945, 0.028396649286150932, -0.05578956753015518, 0.026524759829044342, -0.01069913525134325, -0.023852229118347168, -0.0067591676488518715, 0.113105408847332, -0.007648821920156479, 0.012271682731807232, 0.021327020600438118, 0.019630111753940582, 0.004050516989082098, 0.038627639412879944, -0.019469628110527992, -0.05650824308395386, -0.004689239431172609, 0.05735238641500473, -0.06124703958630562, 0.04347166046500206, -0.10821998119354248, -0.02442299760878086, 0.008549931459128857, 0.08356277644634247, 0.013805464841425419, 0.10047759860754013, -0.04139144346117973, 0.08625857532024384, 0.011766837909817696, -0.08364135771989822, -0.08661892265081406, -0.0067771002650260925, 0.008542792871594429, -0.003354276530444622, 0.02613021992146969, 0.011641728691756725, 0.05408922955393791, 0.03240445256233215, -0.024471083655953407, 0.005171171389520168, -0.00908322911709547, -0.034155335277318954, 0.010743825696408749, 0.0030082922894507647, -0.043876197189092636, -0.022803697735071182, 0.012408183887600899, -0.047692395746707916, 0.030901223421096802, 0.009746195748448372, 0.0056311991065740585, -0.017384910956025124, -0.04806330054998398, -0.03136346861720085, -0.0833183079957962, -0.03920440375804901, -0.05041736736893654, 0.05827849730849266, 0.047545839101076126, -0.010853798128664494, 0.008085175417363644, 0.05284518003463745, -0.017367733642458916, 0.015623422339558601, -0.024290192872285843, 0.03459491208195686, -0.054221756756305695, -0.05242186784744263, 0.006958703976124525, -0.04639425873756409, 0.03369561582803726, 0.053014740347862244, 0.04991322010755539, 0.023546626791357994, -0.017375748604536057, -0.017591185867786407, -0.025146231055259705, 0.037674978375434875, 0.02080843783915043, 0.06304731965065002, -0.01865519769489765, -0.016117941588163376, 0.03389252349734306, 0.04857754334807396, -0.009202121756970882, 0.015727946534752846, -0.008258792571723461, -0.04350340738892555, -0.020236702635884285, 0.0174198467284441, -0.03050757572054863, 0.009894398972392082, 0.04832007363438606, -0.2802620828151703, 0.013461990281939507, -0.011355527676641941, 0.01654292643070221, 0.01790592074394226, 0.0035551106557250023, 0.06272759288549423, -0.03809907287359238, 0.03306015580892563, -0.018956569954752922, -0.01946621760725975, 0.03225371614098549, -0.01774289831519127, -0.025708140805363655, 0.039850350469350815, 0.05788927152752876, 0.06884562224149704, -0.009924851357936859, 0.049580201506614685, 0.010559356771409512, 0.016046961769461632, 0.03738512471318245, 0.15961585938930511, 0.023346804082393646, 0.04099568724632263, -0.004053864162415266, 0.018318410962820053, -0.05547493323683739, 0.0016023148782551289, 0.058272890746593475, 0.053091004490852356, -0.07113596796989441, 0.06884772330522537, 0.010623264126479626, 0.0230906642973423, -0.04094446450471878, 0.02970728650689125, 0.027829958125948906, 0.014216341078281403, -0.01871640793979168, -0.02451343648135662, 0.0609944649040699, -0.0025624334812164307, 0.016788186505436897, 0.0423857606947422, -0.021239038556814194, 0.008332728408277035, -0.05062426999211311, -0.041210439056158066, 0.030475884675979614, -0.018146080896258354, -0.03229872137308121, 0.04280395433306694, -0.008433879353106022, 0.041467227041721344, 0.01077293325215578, 0.005505256354808807, -0.014525840990245342, -0.018282903358340263, 0.05624298378825188, 0.05662674084305763, -0.0012897446285933256, 0.10552674531936646, 0.006037968210875988, 0.05429762974381447], "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5cfdfefc-54fc-4217-9c5c-5ef7fc254fbd", "node_type": "4", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "47d033e1e332cb782b477f9b93f1a04fb2370fea0d267cdb98480cc8f9739cf8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b785fa9d-d79d-41b1-8c41-061280736120", "node_type": "1", "metadata": {"file_name": "Chapter 1 Application Startup & Flow Control.md"}, "hash": "ceeb7dfe7916a38774027e95cfcbab682b72565d6abf0c706b12b57d9d78ef7f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "```\nThis `search` method is called each time you submit a query in the GUI. It performs the same core steps as `processQuery` in the CLI: search, re-rank, and handle suggestions. However, instead of looping for more actions, it returns a `SearchResponse` object containing the results directly to the GUI controller, which then updates the display.\n\n### Conclusion\n\nIn this chapter, we learned that \"Application Startup & Flow Control\" is like the main director of our DevShelf application. It handles the critical tasks of:\n*   **Initialization:** Loading all essential data like books and the search index.\n*   **Service Assembly:** Creating and preparing all the specialized tools (like `QueryProcessor`, `ReRanker`, `Suggester`) that make DevShelf smart.\n*   **User Interface Setup:** Getting either the Command Line Interface (CLI) or the Graphical User Interface (GUI) ready for you.\n*   **Orchestration:** Managing the overall flow, whether it's a continuous command loop in the CLI or handling specific requests from the GUI.\n\nThis entire process ensures that when you finally see DevShelf, everything is perfectly set up and ready for your search adventure!\n\nNext, we'll dive into the most important \"prop\" in our play: the `Book` itself, which is our core piece of data.\n\n[Next Chapter: Book (Domain Model)](02_book__domain_model__.md)", "mimetype": "text/plain", "start_char_idx": 13867, "end_char_idx": 15212, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "db32ac44-ceef-4047-a739-973ee588b5fa", "embedding": [-0.06651132553815842, 0.03565341606736183, -3.36354823957663e-05, -0.02362728677690029, 0.02355295792222023, -0.019956672564148903, -0.03996339440345764, 0.029905399307608604, -0.007250677794218063, 0.022998807951807976, -0.022100914269685745, -0.014691394753754139, 0.006550260353833437, -0.007215481251478195, -0.029899412766098976, -0.0509767048060894, 0.01666363514959812, -0.013944513164460659, -0.058042820543050766, -0.005129572935402393, 0.09253408759832382, 0.0014363490045070648, -0.000792543578427285, -0.0712234228849411, 0.010693859308958054, 0.07019112259149551, -0.01956738345324993, 0.0019609173759818077, 0.00802004337310791, -0.21675966680049896, -0.007294237148016691, 0.029235918074846268, 0.04819285124540329, 0.009009943343698978, -0.003809072310104966, -0.035408828407526016, 0.013890954665839672, -0.0026386785320937634, -0.01761959306895733, 0.003735259408131242, 0.013632490299642086, 0.04127401486039162, -0.01005744282156229, 0.07182549685239792, 0.028932122513651848, -0.01184754353016615, -0.03466681391000748, 0.005135758779942989, -0.025669287890195847, -0.02025333046913147, -0.10558732599020004, 0.024887073785066605, 0.021809209138154984, 0.0093345046043396, -0.008873910643160343, 0.016767030581831932, 0.059360191226005554, 0.06395871192216873, 0.023355381563305855, -0.03409881144762039, 0.02709556370973587, -0.06273985654115677, -0.06576433777809143, 0.09654734283685684, 0.023425333201885223, 0.024242132902145386, 0.007711089216172695, -0.07409599423408508, 0.05109512433409691, 0.012893229722976685, -0.01985836587846279, 0.02869679406285286, -0.006849328521639109, 0.05765752121806145, 0.042133454233407974, -0.06248423084616661, 0.02270881086587906, -0.019448308274149895, 0.04524935781955719, -0.012585088610649109, -0.03731352835893631, -0.026360081508755684, 0.0167897529900074, 0.012818318791687489, -0.046169463545084, 0.041255682706832886, 0.04373935982584953, -0.01616605557501316, 0.015844982117414474, 0.02327069267630577, 0.023846598342061043, -0.0263361819088459, 0.05603189766407013, 0.03761044889688492, -0.03605171665549278, 0.02053692191839218, -0.018913300707936287, 0.020030589774250984, 0.012992934323847294, 0.45760098099708557, -0.02357064187526703, 0.041504912078380585, 0.010385068133473396, 0.005850926972925663, 0.010912351310253143, -0.061623889952898026, 0.0589900016784668, -0.020381586626172066, -0.01861042156815529, 0.003428253810852766, 0.012898367829620838, -0.028237327933311462, 0.02801111340522766, -0.06725845485925674, 0.07091083377599716, -0.03518522530794144, -0.030717693269252777, 0.01668679155409336, -0.011189448647201061, 0.01052015833556652, 0.02630988508462906, 0.06005809083580971, -0.0059438664466142654, 0.05235159769654274, 0.04555247724056244, -0.034330811351537704, -0.025995932519435883, 0.05168381705880165, -0.035932719707489014, 0.05675395950675011, 0.019204381853342056, 0.020147351548075676, -0.07989098131656647, -0.011659551411867142, 0.057714659720659256, 0.01865317113697529, -0.039135586470365524, -0.012448649853467941, 0.0003216273325961083, -0.007591060362756252, 0.008341126143932343, 0.06401052325963974, 0.012904222123324871, 0.0037627974525094032, -0.08145302534103394, 0.07476402074098587, 0.042515069246292114, 0.013875419273972511, -0.0194658562541008, -0.019522350281476974, 0.016596322879195213, 0.05516126751899719, -0.007588050793856382, -0.0646694153547287, 0.034270744770765305, 0.00088687235256657, 0.067270927131176, 0.010427726432681084, -0.0271630696952343, -0.050224509090185165, -0.06866724044084549, 0.01789887063205242, -0.017238439992070198, 0.056164272129535675, -0.06237490475177765, -0.09402880817651749, -0.04617675766348839, 0.037983570247888565, -0.08827777951955795, -0.030556000769138336, -0.01410620380192995, -0.030429741367697716, -0.04843336343765259, 0.020456528291106224, 0.033628325909376144, -0.031705304980278015, -0.03894009813666344, -0.008512234315276146, 0.020886756479740143, 0.00010023266804637387, 0.005962647497653961, -0.03028172254562378, -0.03466736897826195, -0.011211349628865719, -0.04188069328665733, -0.05373513326048851, -0.0960247665643692, -0.007068418897688389, 0.0001579382224008441, 0.05283043906092644, -0.041666314005851746, 0.021939018741250038, 0.015335281379520893, -0.01279938593506813, -0.019198790192604065, -0.004101986531168222, -0.015830783173441887, -0.019697735086083412, -0.027248617261648178, -0.011600546538829803, -0.0027744935359805822, 0.03220773860812187, -0.06077800691127777, 0.06650890409946442, -0.025529056787490845, -0.024681761860847473, 0.008915631100535393, -0.04512087255716324, 0.054378118366003036, -0.010165824554860592, -0.02695542946457863, -0.007698358967900276, -0.022698359563946724, -0.04340006783604622, -0.04770777001976967, -0.01307989377528429, 0.006406985688954592, 0.015928592532873154, -0.03786781430244446, 0.024195563048124313, -0.021210595965385437, -0.05562957748770714, -0.016831493005156517, -0.3106979429721832, 0.044796835631132126, -0.028592314571142197, -0.07988375425338745, 0.005285285878926516, -0.039844710379838943, 0.008219015784561634, 0.010916409082710743, -0.031371913850307465, 0.030052296817302704, 0.11815009266138077, -0.07873978465795517, -0.01881878450512886, -0.0077989958226680756, -0.0047095525078475475, 0.006051834672689438, 0.019840233027935028, -0.010297813452780247, -0.09880885481834412, 0.01318333763629198, -0.012996775098145008, -0.014180420897901058, -0.03167785331606865, -0.041845716536045074, 0.0053511615842580795, -0.018487730994820595, 0.07730662822723389, 0.010774252936244011, 0.06481605768203735, -0.009548950009047985, 0.04382254183292389, 0.049894530326128006, -0.09116705507040024, -0.09045125544071198, -0.017802059650421143, -0.016998469829559326, -0.0077260746620595455, 0.041920196264982224, 0.031274404376745224, 0.04024147242307663, 0.0490015409886837, 0.04091480374336243, 0.03663640469312668, 0.028918130323290825, -0.024536028504371643, 0.008346285670995712, -0.016462482511997223, -0.043624911457300186, 0.009201590903103352, 0.04903777316212654, -0.024136148393154144, 0.015951430425047874, -0.006411505397409201, 0.03941018506884575, -0.017392951995134354, -0.026781124994158745, 0.011886386200785637, -0.045131485909223557, 0.0138089032843709, 0.0022626419086009264, 0.006132347043603659, 0.027036160230636597, -0.035631611943244934, 0.0011441041715443134, 0.04004887863993645, -0.05596564710140228, -0.031141145154833794, -0.022257458418607712, 0.054468147456645966, -0.01418610941618681, -0.04131876677274704, 0.011218827217817307, -0.012656218372285366, -0.025008905678987503, 0.05401244014501572, 0.04493726044893265, 0.057772018015384674, 0.036116085946559906, 0.03380594402551651, -0.026091348379850388, -0.024653106927871704, -0.023025039583444595, 0.05610811710357666, -0.03055530972778797, 0.007676415145397186, 0.006470792926847935, 0.014743966981768608, -0.02298681251704693, -0.01523862686008215, 0.02535535953938961, -0.038327407091856, -0.015437580645084381, 0.03256109356880188, -0.02335897460579872, 0.040407296270132065, 0.055961452424526215, -0.27576225996017456, 0.024776771664619446, 0.02352835051715374, 0.05530008673667908, 0.022986629977822304, -0.025644928216934204, 0.02757660299539566, -0.007281554397195578, 0.042308155447244644, -0.04625663906335831, 0.014751617796719074, -0.007189161144196987, 0.015977153554558754, -0.05288098007440567, 0.024862727150321007, 0.07259869575500488, 0.1360933631658554, -0.039933327585458755, 0.020796122029423714, 0.05490443855524063, 0.033031005412340164, 0.005502014886587858, 0.11789198964834213, 0.0164190623909235, 0.03604285418987274, -0.00016080978093668818, -0.015552970580756664, 0.022867143154144287, -0.007590022403746843, 0.1095118522644043, 0.03037976287305355, -0.05070748180150986, 0.004198175389319658, 0.019338499754667282, -0.039392732083797455, -0.04079757258296013, -0.0026902388781309128, -0.007637180853635073, 0.05896803364157677, -0.01062933262437582, 0.029203996062278748, -0.00607365882024169, -0.04910990968346596, 0.012145129963755608, 0.028838546946644783, -0.022919317707419395, -0.011008717119693756, -0.04445109888911247, -0.021473068743944168, 0.02077789045870304, 0.008197077549993992, -0.03011872060596943, 0.0007793410331942141, -0.038046643137931824, 0.05046629533171654, 0.012007870711386204, 0.017048850655555725, 0.041453443467617035, -0.02864375151693821, 0.027041234076023102, 0.011132759042084217, -0.007259178441017866, 0.08691346645355225, 0.04641056805849075, 0.04483945667743683], "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "603f2ddf-c446-43e1-95f6-e87da098a97b", "node_type": "4", "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "hash": "f806c2bba655b5f8b0509976832bbf51af6f3f5a84e5719edaacdeab988c1912", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "71d90193-3746-40cc-9ad2-ed5f192f2d03", "node_type": "1", "metadata": {}, "hash": "1f8f7cb5f3f0196891a796e065a6aaa972f153f1ba5dd31d3dd4ef5c34c46479", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Welcome back! In our last chapter, [Application Startup & Flow Control](01_application_startup___flow_control_.md), we learned how DevShelf wakes up and gets all its \"actors\" and \"props\" ready. Now, it's time to meet the most important \"prop\" of our entire digital library: the `Book` itself!\n\n### What is a \"Book\" in DevShelf?\n\nImagine DevShelf as a digital library. What's the main thing a library stores? Books, of course! But in a computer program, a \"book\" isn't a physical object you can touch. Instead, it's a collection of information, a \"data unit,\" that tells us everything important about one particular book.\n\nThink of it like a **detailed index card** for each book in a physical library. Each card has spaces for the title, author, a short summary, and so on. In DevShelf, each `Book` object is one of these digital index cards. It holds all the essential details about a single book, making it easy for the application to display and search for them.\n\n#### The Problem Our `Book` Solves\n\nIf you search for \"Python\" in DevShelf, the application needs to find specific books and show you their details. Without a clear way to represent *what* a book is and *what information it contains*, this would be impossible! The `Book` object gives us a standard way to store and share all that information throughout the application.\n\nLet's look at an example use case: **Displaying book details after a search.**\nWhen you type \"Clean Code\" and press Enter, DevShelf needs to:\n1.  Find the \"Clean Code\" book.\n2.  Grab all its details (title, author, description, rating, etc.).\n3.  Show those details to you on the screen.\n\nThe `Book` domain model is the key to step 2!\n\n### What Information Does a `Book` Hold?\n\nOur `Book` \"index card\" has several important slots for information. These are called \"properties\" in programming. Here are the main properties of a `Book` in DevShelf:\n\n*   **`bookId`**: A unique number for each book. Like a library's unique call number.\n*   **`title`**: The name of the book (e.g., \"Clean Code\").", "mimetype": "text/plain", "start_char_idx": 2, "end_char_idx": 2034, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "71d90193-3746-40cc-9ad2-ed5f192f2d03", "embedding": [-0.06842964142560959, 0.02635129913687706, -0.018898112699389458, -0.01930861361324787, 0.008326467126607895, -0.043426595628261566, -0.026915008202195168, 0.027233170345425606, -0.016829822212457657, 0.0302913635969162, -0.039659444242715836, 0.03723547235131264, -0.009309181943535805, -0.00038833057624287903, -0.0255589559674263, 0.0013890457339584827, 0.03723209351301193, -0.028355922549962997, -0.06550446152687073, -0.051097508519887924, 0.12254568189382553, -0.007436217740178108, 0.007452478166669607, -0.07817931473255157, 0.015288621187210083, 0.06521495431661606, -0.03657280281186104, -0.009324065409600735, -0.004681449383497238, -0.18483273684978485, -0.03401167318224907, 0.018271751701831818, 0.06610384583473206, 0.03141138330101967, -0.027579572051763535, -0.015348013490438461, 0.028322959318757057, 0.007040440104901791, 0.02216009609401226, 0.02855052426457405, -0.0013398878509178758, 0.006532343104481697, -0.009945281781256199, 0.09419244527816772, 0.03252323716878891, 0.018814539536833763, -0.03661837801337242, -0.02047538571059704, -0.03223573416471481, -0.036851610988378525, -0.08876236528158188, -0.023570161312818527, 0.024706512689590454, 0.020115504041314125, 0.025158267468214035, -0.004303894937038422, 0.05997520685195923, 0.047228407114744186, 0.03374578431248665, -0.00873950868844986, 0.03985073044896126, -0.03926506265997887, -0.11107483506202698, 0.12912800908088684, 0.03622883930802345, 0.05750398337841034, -0.032276738435029984, -0.026576276868581772, 0.036033935844898224, -0.0008724190411157906, -0.012111564166843891, 0.026892749592661858, 0.017920874059200287, 0.061561401933431625, 0.03659120202064514, -0.0004056520410813391, 0.01320597156882286, 0.006402067374438047, 2.4413982828264125e-05, -0.012576126493513584, -0.02266608737409115, -0.049853574484586716, -0.0014092946657910943, -0.01851293444633484, -0.008058886975049973, 0.028150063008069992, 0.050099343061447144, 0.05319474637508392, 0.045057009905576706, -0.0003987282980233431, 0.028645191341638565, -0.017396535724401474, 0.044902700930833817, 0.04084239900112152, -0.06500399857759476, -0.0007349126972258091, -0.0051756324246525764, 0.03190644457936287, -0.0059547750279307365, 0.3657402992248535, -0.07038994878530502, 0.006747643928974867, -0.0030989814549684525, -0.0013065513921901584, 0.014957613311707973, -0.09526316821575165, 0.0533284954726696, -0.049816928803920746, -0.015300450846552849, -0.008849321864545345, -0.02082972601056099, -0.01221474353224039, 0.021660443395376205, -0.08492166548967361, 0.07474027574062347, 0.026497825980186462, 0.004063962027430534, 0.006172467488795519, -0.016471369192004204, -0.010155519470572472, 0.04108229652047157, 0.007009170483797789, -0.04568350687623024, 0.005036045331507921, 0.014485358260571957, 0.02946920320391655, 0.005433329381048679, 0.05061417818069458, 0.0027560677845031023, 0.013539168052375317, 0.056041866540908813, 0.0059219528920948505, -0.07104633748531342, -0.025008736178278923, 0.040781114250421524, 0.01708819903433323, -0.0457184836268425, 0.03686746209859848, 0.0010636826045811176, -0.007938606664538383, 0.017597749829292297, 0.022466102614998817, -0.03811090439558029, 0.02481074444949627, -0.09055472165346146, 0.08113124966621399, 0.022019298747181892, 0.05653364583849907, -0.015875523909926414, 0.006714669521898031, 0.03716283664107323, 0.05361826717853546, 0.018164122477173805, -0.06883951276540756, 0.03488750383257866, 0.010787981562316418, 0.06652861088514328, 0.031481191515922546, -0.03929854556918144, -0.055788230150938034, 0.010414943099021912, 0.00992383249104023, -0.0011237072758376598, 0.08966334164142609, -0.015174989588558674, -0.06737003475427628, -0.006581621244549751, 0.023654446005821228, -0.10845080763101578, -0.026552943512797356, -0.009396917186677456, -0.01806308515369892, -0.04748251661658287, 0.06295377761125565, 0.027573395520448685, -0.000808146724011749, -0.03655000403523445, -0.0350884385406971, 0.04583389312028885, -0.007381179835647345, 0.0011441687820479274, -0.05163274705410004, -0.031407956033945084, -0.002006240887567401, -0.017811903730034828, -0.054243817925453186, -0.05802233889698982, -0.017683710902929306, 0.015505041927099228, 0.018813716247677803, -0.04864227771759033, 0.01929144747555256, 0.04965197294950485, 0.016656238585710526, -0.008186286315321922, -0.00040826635085977614, -0.01084176916629076, -0.030670199543237686, -0.0514419823884964, -0.026437750086188316, -0.003236254910007119, 0.05280829966068268, -0.06505782902240753, 0.0691874623298645, -0.0057540335692465305, -0.019991734996438026, 0.0214396920055151, -0.05675777792930603, 0.08958788961172104, 0.0039770351722836494, -0.02462785318493843, -0.012347990646958351, -0.07766875624656677, -0.042153116315603256, -0.03095829300582409, 0.0027498179115355015, -0.01457685325294733, 0.0008602400775998831, -0.041870057582855225, 0.005422282498329878, -0.07021547853946686, -0.09256067126989365, -0.047893088310956955, -0.32997095584869385, 0.050115492194890976, -0.011021623387932777, -0.06200333312153816, -0.021634304895997047, -0.032888513058423996, 0.023347273468971252, -0.024247651919722557, -0.009828991256654263, 0.04663487523794174, 0.11419323831796646, -0.05918380245566368, -0.03515782579779625, -0.014769119210541248, -0.0016678081592544913, 0.052324093878269196, -0.0015071791131049395, -0.033197157084941864, -0.080962173640728, 0.022008754312992096, 0.015300246886909008, 0.003744808491319418, -0.023204181343317032, -0.02378847450017929, -0.012045040726661682, -0.015320828184485435, 0.07951800525188446, -0.011177954263985157, 0.048059217631816864, -0.019068246707320213, 0.037368591874837875, 0.03860845789313316, -0.037224967032670975, -0.08512730151414871, 0.024095913395285606, -0.003919714130461216, 0.029268702492117882, 0.03064645826816559, -0.024485740810632706, 0.02455655299127102, 0.03135164827108383, 0.022177154198288918, 0.014764095656573772, 0.01867781952023506, -0.04141916334629059, 0.010007825680077076, -0.0044439854100346565, -0.0760851725935936, 0.00582882622256875, 0.03707214817404747, -0.03822081536054611, 0.08143042773008347, -0.0018162090564146638, 0.035473454743623734, 7.824490603525192e-05, 0.010094564408063889, -0.02754082717001438, -0.03666229546070099, -0.050144750624895096, -0.029260139912366867, 0.0012794341892004013, 0.013626066967844963, 0.004936744458973408, 0.001815348514355719, 0.025852693244814873, -0.0644477978348732, -0.03018316812813282, 0.00832320749759674, 0.029546797275543213, -0.010370944626629353, -0.05282360315322876, -0.006116058211773634, -0.018732504919171333, -0.0009913360700011253, 0.07057531923055649, 0.07061952352523804, 0.05184946209192276, -0.013993016444146633, 0.009785856120288372, -0.01298114750534296, -0.021434685215353966, 0.0337035171687603, 0.04051462933421135, -0.008276142179965973, -0.008310502395033836, -0.03646906092762947, -0.00876089371740818, -0.011113500222563744, -0.004218483809381723, 0.04998926818370819, -0.05150841921567917, 0.023948462679982185, 0.019894180819392204, -0.01796397939324379, 0.03275096416473389, 0.07327935844659805, -0.29225343465805054, 0.004294983576983213, 0.008955768309533596, 0.04640406370162964, 0.05186310037970543, -0.02478974126279354, 0.024221820756793022, -0.017185401171445847, 0.045419108122587204, -0.04344459995627403, 0.031792864203453064, -0.007415214087814093, -0.0049602859653532505, -0.08091229945421219, 0.02279803715646267, 0.056743841618299484, 0.12673938274383545, -0.0475817434489727, 0.018059203401207924, 0.06398899108171463, 0.014316549524664879, -0.02564743347465992, 0.15410253405570984, 0.014675718732178211, 0.038911230862140656, 0.012180414982140064, -0.00418898556381464, 0.010053061880171299, -0.008672336116433144, 0.06289070099592209, 0.020913459360599518, -0.029795298352837563, 0.08705845475196838, 0.008148523047566414, -0.05204140022397041, -0.030660638585686684, 0.05001942068338394, -0.00442101527005434, 0.03266359120607376, -0.03844074904918671, 0.031059766188263893, 0.006431508809328079, -0.03602810949087143, -0.012128809466958046, 0.055654000490903854, -0.046780336648225784, -0.0341329425573349, -0.05764096975326538, -0.012846475467085838, 0.0025941338390111923, 0.022798718884587288, -0.017709147185087204, 9.055995906237513e-05, -0.04170508310198784, 0.040222108364105225, 0.047305330634117126, 0.06223704293370247, 0.03951650485396385, -0.06748750805854797, 0.01964191533625126, -0.015622208826243877, -0.041774652898311615, 0.0846351683139801, 0.04011710733175278, 0.031796347349882126], "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "603f2ddf-c446-43e1-95f6-e87da098a97b", "node_type": "4", "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "hash": "f806c2bba655b5f8b0509976832bbf51af6f3f5a84e5719edaacdeab988c1912", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "db32ac44-ceef-4047-a739-973ee588b5fa", "node_type": "1", "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "hash": "12c0b582ba5835d7f3998a9c51ffdca630de40d7bab153477f99dbf6c56615ef", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9797bc48-ebee-47c0-9399-0c76dacdfc49", "node_type": "1", "metadata": {}, "hash": "960bc531e7d5427749566ec804f9cded5f4fde1fb635e7814a183176d0bda201", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Like a library's unique call number.\n*   **`title`**: The name of the book (e.g., \"Clean Code\").\n*   **`author`**: Who wrote the book (e.g., \"Robert C. Martin\").\n*   **`description`**: A short summary of what the book is about.\n*   **`progLang`**: The main programming language discussed in the book (e.g., \"Java\", \"Python\").\n*   **`category`**: The general topic of the book (e.g., \"Software Engineering\", \"Algorithms\").\n*   **`tag`**: Keywords or topics associated with the book (e.g., [\"clean-code\", \"refactoring\"]). These help with more specific searches.\n*   **`rating`**: How highly the book is rated (e.g., 4.6 out of 5).\n*   **`coverUrl`**: A link to an image of the book's cover.\n*   **`downLink`**: A link to download the book (if available).\n\n### Getting Our Hands on `Book` Objects\n\nBefore DevShelf can display a book, it first needs to load the book's information into memory. This happens right when the application starts up, as we briefly saw in Chapter 1.\n\nThe `BookLoader` is like the library assistant who takes all the physical books (or, in our case, a digital list of book details) and meticulously creates one index card (a `Book` object) for each.\n\nLet's see how DevShelf gets these `Book` objects:\n\n```mermaid\nsequenceDiagram\n    participant You\n    participant Main App\n    participant BookLoader\n    participant book.json file\n\n    You->>Main App: \"Start DevShelf!\"\n    Main App->>BookLoader: \"Load all book details\"\n    Note over BookLoader: Uses a special tool to read JSON\n    BookLoader->>book.json file: \"Read contents of book.json\"\n    book.json file-->>BookLoader: \"Here's all the book data (as text)!\"\n    BookLoader->>BookLoader: \"Convert text data into Book objects\"\n    BookLoader-->>Main App: \"Here's a list of all Book objects!\"\n    Main App-->>You: \"Books are loaded, ready for your search!\"\n```\n\nThis diagram shows the journey from starting the app to having all `Book` objects ready.", "mimetype": "text/plain", "start_char_idx": 1938, "end_char_idx": 3864, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "9797bc48-ebee-47c0-9399-0c76dacdfc49", "embedding": [-0.03326386213302612, 0.000984468962997198, -0.009759838692843914, -0.0299784354865551, -0.021566318348050117, -0.05989474803209305, -0.06029236316680908, 0.0012772099580615759, 0.018341919407248497, 0.009196988306939602, 0.02923676371574402, -0.02229348011314869, -0.006870337296277285, 0.01900697685778141, 0.01793784648180008, -0.03607583045959473, 0.03753943368792534, -0.03643336147069931, -0.05143285170197487, -0.012010677717626095, 0.07317493110895157, 0.06831732392311096, 0.018011918291449547, -0.0912388265132904, 0.023962128907442093, 0.0866672545671463, 0.004867986310273409, -0.00246360688470304, 0.00220945430919528, -0.17057153582572937, -0.027088362723588943, -0.04711476340889931, 0.056464485824108124, 0.07976391166448593, -0.05062197148799896, 0.019019735977053642, 0.02803523652255535, 0.00760614313185215, 0.009364276193082333, -0.0012699513463303447, -0.014485533349215984, 0.004929488059133291, -0.019179431721568108, 0.015670187771320343, 0.017050905153155327, -0.021783141419291496, 0.023803744465112686, -0.011243243701756, 0.010434059426188469, -0.04195050895214081, -0.043035950511693954, 0.0022676417138427496, -0.004090337082743645, -0.01831401139497757, -0.024763882160186768, -0.02127637341618538, 0.055203016847372055, 0.06693058460950851, -0.012072385288774967, 0.013624679297208786, 0.01011107861995697, -0.04169316217303276, -0.09503958374261856, 0.13184097409248352, -0.017801135778427124, 0.020976679399609566, -0.008437961339950562, 0.012500220909714699, 0.05145065858960152, 0.06873777508735657, 0.01232602633535862, 0.06729181855916977, 0.03635649383068085, 0.07632213085889816, 0.039491768926382065, -0.03217412903904915, 0.009765731170773506, 0.0023854144383221865, 0.021866651251912117, -0.03796057403087616, -0.030705299228429794, -0.06288111209869385, 0.01749386079609394, -0.006949997507035732, -0.041750505566596985, 0.014559521339833736, 0.007572353817522526, -0.03883034363389015, 0.02859184704720974, 0.01172989048063755, 0.0324869342148304, -0.025353016331791878, 0.03871108964085579, 0.010394657962024212, -0.08530139178037643, -0.0047601074911653996, -0.05830233171582222, 0.019954102113842964, -0.010495639406144619, 0.36825239658355713, -0.014689192175865173, 0.0017761628841981292, 0.01695946790277958, -0.01262631919234991, -0.023987574502825737, -0.08694476634263992, 0.06386759132146835, -0.04940429702401161, -0.03418174386024475, -0.02123570628464222, -0.01574033871293068, -0.026023734360933304, -0.008837287314236164, -0.03492036461830139, 0.020906928926706314, -0.024862518534064293, -0.013155482709407806, -0.004059591330587864, -0.006677678786218166, 0.0010982267558574677, 0.06190194934606552, 0.005997444037348032, -0.07872552424669266, 0.007393371779471636, 0.028007909655570984, -0.03674283251166344, -0.01621624268591404, 0.0832306519150734, -0.014928791671991348, 0.01944495365023613, 0.03383950889110565, 0.028669359162449837, -0.12016955018043518, -0.028662119060754776, 0.018402965739369392, 0.022535789757966995, -0.03715842217206955, 0.03638094663619995, 0.006600324995815754, 0.01574910804629326, 0.009544803760945797, 0.035645999014377594, -0.0037999937776476145, -0.032029032707214355, -0.1056620180606842, 0.042965784668922424, 0.0318051315844059, 0.037538476288318634, 0.019746093079447746, -0.038007695227861404, 0.009652434848248959, 0.011503074318170547, -0.030359618365764618, -0.057430632412433624, 0.008335001766681671, 0.006086761597543955, 0.062235940247774124, 0.031150756403803825, -0.04448119178414345, -0.10358218848705292, -0.008944953791797161, 0.03623669967055321, -0.04646272957324982, 0.04976572096347809, -0.045506563037633896, -0.06295947730541229, 0.044483065605163574, 0.019645553082227707, -0.09931891411542892, -0.018840262666344643, -0.02220865897834301, 0.0546378567814827, -0.05020974576473236, 0.09446132928133011, 0.07164807617664337, 0.04800890013575554, -0.029307976365089417, 0.02058319002389908, 0.02894330583512783, 0.039119504392147064, 0.0013345127226784825, -0.005487436894327402, -0.03324221819639206, -0.002217042725533247, -0.026075737550854683, -0.04698282480239868, -0.06648240983486176, -0.015944385901093483, 0.022839371114969254, 0.037933140993118286, -0.01118272915482521, -0.0025693669449537992, -0.0216149240732193, -0.00040571304270997643, -0.03741971775889397, -0.014821252785623074, -0.008155113086104393, -0.028526030480861664, -0.004914363846182823, -0.031176868826150894, 0.011307955719530582, 0.06525768339633942, -0.03570452705025673, 0.05783265456557274, -0.004334639757871628, 0.04426713287830353, 0.005548653192818165, -0.06767088174819946, 0.04779635742306709, -0.0028132214210927486, -0.049028895795345306, -0.010062786750495434, -0.03399759531021118, -0.02845747396349907, -0.06322961300611496, -0.008554152213037014, 0.014214052818715572, 0.009597225114703178, 0.007338444236665964, 0.01608896069228649, -0.045992571860551834, -0.10709061473608017, 0.03628121688961983, -0.3109932541847229, 0.037331003695726395, -0.007267247419804335, -0.054246872663497925, -0.017853863537311554, -0.025328369811177254, 0.006270962301641703, 0.004121688660234213, -0.02156727947294712, -0.0042706686072051525, 0.10937071591615677, -0.10477632284164429, -0.02626875787973404, -0.011991720646619797, -0.0021773548796772957, 0.02007550373673439, -0.010714570060372353, -0.05190001428127289, -0.03283175453543663, 0.03748951479792595, 0.011947376653552055, -0.00608936557546258, -0.006541212555021048, -0.0228757094591856, 0.04415300861001015, 0.04550766572356224, 0.07326497882604599, -0.01702822744846344, 0.005947214085608721, -0.06486742943525314, 0.06885208934545517, 0.055740803480148315, -0.08292970806360245, -0.08855560421943665, -0.0088262390345335, -0.015711698681116104, -0.02904614433646202, -0.008538609370589256, -0.014230135828256607, 0.04273312911391258, 0.0063404724933207035, 0.03534829616546631, 0.02682981826364994, -0.020960945636034012, -0.02726912871003151, 0.017778821289539337, 0.0425528921186924, -0.052719876170158386, 0.01664065569639206, 0.03164146468043327, -0.04274377226829529, -0.010546295903623104, -0.008880863897502422, 0.06676233559846878, -0.01605890691280365, -0.019241034984588623, -0.011385438963770866, -0.0023010894656181335, -0.00241876021027565, 0.027940820902585983, -0.008927801623940468, -0.0028463415801525116, 0.00727058993652463, 0.012289730831980705, 0.024660268798470497, -0.0481688529253006, -0.028410043567419052, 0.07005275040864944, 0.02551237680017948, -0.04115840792655945, -0.07316353172063828, -0.008098206482827663, 0.016902435570955276, 0.04350104555487633, 0.08549071103334427, 0.0458228662610054, 0.051085006445646286, -0.022415462881326675, 0.010564468801021576, 0.0178363099694252, -0.0075249881483614445, -0.018796345219016075, 0.05553995817899704, 0.04864263907074928, -0.0018974710255861282, 0.036520641297101974, -0.008133374154567719, -0.007368103135377169, -0.014777855016291142, 0.023872077465057373, -0.03886253014206886, 0.045110780745744705, 0.010392522439360619, -0.012856120243668556, 0.053182389587163925, -0.0011927103623747826, -0.29222917556762695, 0.0335053876042366, 0.004066589288413525, 0.12215661257505417, 0.02266232669353485, -0.008993356488645077, 0.041946105659008026, 0.0002102402941090986, 0.045192211866378784, 0.001350696780718863, 0.010984360240399837, -0.007277570199221373, 0.014790254645049572, -0.06884113699197769, 0.015896465629339218, 0.057657599449157715, 0.1087837964296341, -0.0068517508916556835, 0.031121473759412766, 0.009129784069955349, 0.0195455402135849, -0.02591942809522152, 0.18325094878673553, 0.024067983031272888, 0.04026586189866066, 0.008627749979496002, 0.01606045290827751, -0.030259955674409866, 0.027112238109111786, 0.06192030385136604, 0.04795107990503311, 0.011959785595536232, 0.10273942351341248, 0.039729710668325424, -0.0021148021332919598, -0.02916051633656025, 0.025595786049962044, 0.02396205998957157, 0.004135739058256149, -0.008195876143872738, 0.007781440857797861, 0.024707714095711708, -0.057062964886426926, 0.030386606231331825, 0.04207349568605423, -0.03683178126811981, -0.08250640332698822, -0.034778207540512085, -0.04545349255204201, -0.0266393031924963, 0.007031723391264677, -0.08361902087926865, -0.014396090991795063, -0.0192462969571352, 0.01270502619445324, 0.02389167807996273, -0.013182740658521652, 0.039379362016916275, -0.07252669334411621, 0.033733855932950974, 0.007594936527311802, -0.016130421310663223, 0.08878464996814728, 0.05290369316935539, 0.004674599971622229], "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "603f2ddf-c446-43e1-95f6-e87da098a97b", "node_type": "4", "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "hash": "f806c2bba655b5f8b0509976832bbf51af6f3f5a84e5719edaacdeab988c1912", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "71d90193-3746-40cc-9ad2-ed5f192f2d03", "node_type": "1", "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "hash": "a30f5e0eee97f312993b8b0152ae2ae45bbbb9c9876c80487e24f30fe2ab7577", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "29ef174d-0d8b-40fb-83b5-a8e83f600e1a", "node_type": "1", "metadata": {}, "hash": "8533933d498a5fe9e8e553c0f3af6f8a481bb65d1b8a37a092730f7496f48cee", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Main App-->>You: \"Books are loaded, ready for your search!\"\n```\n\nThis diagram shows the journey from starting the app to having all `Book` objects ready. The `BookLoader` does the heavy lifting of reading from a file named `book.json` and turning that raw text into usable `Book` objects.\n\n#### The `Book` Class: Our Digital Index Card\n\nIn Java, we define what a `Book` looks like using a `class`. This `Book` class acts like a blueprint for all our individual book objects.\n\n**`src/main/java/domain/Book.java` (Simplified)**\n```java\npackage domain;\n\nimport lombok.Getter; // A helper tool that automatically adds 'get' methods\nimport lombok.Setter; // A helper tool that automatically adds 'set' methods\n\n@Getter // Automatically creates methods like getBookId(), getTitle(), etc.\n@Setter // Automatically creates methods like setBookId(id), setTitle(title), etc.\npublic class Book {\n    private int bookId;\n    private String title;\n    private String author;\n    private String description;\n    private String progLang;\n    private String category;\n    private String[] tag; // An array for multiple tags\n    private float rating;\n    private String coverUrl;\n    private String downLink;\n\n    // A special method to create a new empty Book object\n    public Book() {}\n\n    // A special method to create a new Book object with all details at once\n    public Book(int bookId, String title, String author, String description, String progLang,\n                String category, String[] tag, float rating, String coverUrl, String downLink) {\n        this.bookId = bookId;\n        this.title = title;\n        this.author = author;\n        this.description = description;\n        this.progLang = progLang;\n        this.category = category;\n        this.tag = tag;\n        this.rating = rating;\n        this.coverUrl = coverUrl;\n        this.downLink = downLink;\n    }\n}\n```\nIn this code:\n*   `@Getter` and `@Setter` are special tools (from a library called Lombok) that automatically create the \"get\" and \"set\" methods for each property. For example, you can say `book.getTitle()` to get the title or `book.setRating(4.5f)` to change the rating. This keeps our code cleaner.", "mimetype": "text/plain", "start_char_idx": 3711, "end_char_idx": 5882, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "29ef174d-0d8b-40fb-83b5-a8e83f600e1a", "embedding": [-0.05980251729488373, 0.035346925258636475, 0.029367690905928612, 0.0027928706258535385, 0.025966310873627663, -0.017009960487484932, -0.028478773310780525, 0.019184214994311333, 0.028693830594420433, 0.021488329395651817, -0.013655530288815498, 0.030477797612547874, 0.0032328860834240913, 0.007387945428490639, -0.009127579629421234, -0.020984675735235214, -0.005079849157482386, 0.00784566905349493, -0.07768061012029648, -0.008731303736567497, 0.10718659311532974, 0.019291996955871582, 0.04220423102378845, -0.06789343804121017, 0.01871763914823532, 0.04087129980325699, -0.05781552195549011, 0.0035536617506295443, -0.03234570845961571, -0.17261871695518494, -0.01013204175978899, -0.041094712913036346, 0.016851622611284256, 0.025419525802135468, -0.016905969008803368, 0.015005534514784813, 0.007232206407934427, -0.018700482323765755, -0.0031445298809558153, 0.051705628633499146, 0.006690154317766428, 0.028506441041827202, -0.03248748183250427, 0.05135991424322128, -0.03479386121034622, 0.00348616112023592, -0.009005255997180939, -0.03360586613416672, -0.008937202394008636, 0.027400944381952286, -0.09362954646348953, -0.018286356702446938, 0.019495105370879173, 0.0009682959062047303, 0.011694209650158882, -0.01048007421195507, 0.026040587574243546, 0.08466348052024841, 0.0006250331643968821, 0.00297529180534184, -0.0019440288888290524, -0.021869806572794914, -0.09213630110025406, 0.0855497196316719, 0.03520175442099571, 0.046971481293439865, -0.023587172850966454, -0.03610970079898834, -0.025587385520339012, 0.050309278070926666, -0.002012146869674325, 0.04084160551428795, -0.0077486587688326836, 0.07452186942100525, 0.011105743236839771, 0.0010009773541241884, 0.0032393382862210274, 0.019759058952331543, 0.023414675146341324, -0.010930672287940979, -0.03690267354249954, -0.07518768310546875, 0.02225823886692524, -0.009870819747447968, -0.01861930452287197, 0.03228650987148285, 0.033934809267520905, 0.02833569422364235, 0.0775679424405098, 0.021247277036309242, -0.0039276559837162495, -0.08084306120872498, 0.0505034513771534, 0.04039277881383896, -0.043072205036878586, 0.02146187610924244, -0.05419255793094635, 0.04102962091565132, 0.011294916272163391, 0.32550060749053955, -0.06502353399991989, -0.005162079352885485, -0.023815492168068886, -0.010258615016937256, -0.008750921115279198, -0.08268135040998459, 0.04893433302640915, -0.007652494590729475, 0.002196327783167362, -0.03526292368769646, -0.02823571301996708, 0.01084157358855009, -0.008363966830074787, -0.06260398775339127, 0.03631492331624031, 0.008743226528167725, -0.018502935767173767, 0.02474665828049183, -0.01304054819047451, -0.04680170863866806, 0.05533629283308983, 0.03182913735508919, -0.05746001377701759, 0.028779366984963417, 0.05205714702606201, 0.018797876313328743, 0.005339477211236954, 0.04549184441566467, 0.014657724648714066, 0.02540436200797558, 0.0373394712805748, -0.004760834854096174, -0.10214930772781372, -0.03129244223237038, -0.015218093991279602, 0.03406843915581703, -0.05812457576394081, 0.019896434620022774, 0.023260651156306267, 0.0020662189926952124, 0.0019888808019459248, 0.025987477973103523, -0.026885373517870903, 0.02993864007294178, -0.08922141790390015, 0.08391968160867691, -0.006843389477580786, 0.08930985629558563, 0.014836212620139122, -0.028593434020876884, 0.02822740748524666, 0.07474663853645325, -0.017823917791247368, -0.07005477696657181, 0.020072393119335175, 0.008704026229679585, 0.03729068487882614, -0.022753991186618805, -0.02729663997888565, -0.0605553537607193, -0.013725797645747662, 0.06384717673063278, -0.009965898469090462, 0.06749536842107773, -0.021763714030385017, -0.04306498542428017, -0.002514727646484971, 0.015593760646879673, -0.06004945561289787, -0.04399659484624863, -0.03147716075181961, 0.0227300226688385, -0.050779975950717926, 0.05486392602324486, 0.050725482404232025, 0.0198292825371027, -0.051613446325063705, -0.016084641218185425, 0.04530049487948418, -0.005052267573773861, -0.0014573876978829503, -0.028741218149662018, -0.10566587001085281, 0.014272794127464294, -0.023475661873817444, -0.011584723368287086, -0.08220404386520386, -0.027259018272161484, -0.005912482272833586, 0.058110881596803665, -0.06416580826044083, 0.021057026460766792, -0.01586136221885681, 0.03153657540678978, 0.008889477699995041, -0.0033902223221957684, 0.008011977188289165, -0.011945487931370735, -0.03575703129172325, 0.007748354226350784, 0.009989472106099129, 0.08335591852664948, -0.02547501027584076, 0.06934291869401932, -0.030608300119638443, 0.03758225589990616, 0.022141801193356514, -0.032688453793525696, 0.07225657254457474, 0.013585367240011692, -0.06253279745578766, -0.036364950239658356, -0.07705517113208771, -0.033838700503110886, -0.06247584894299507, -0.0033590425737202168, -0.00849963165819645, -0.007004243321716785, 0.009617541916668415, 0.005921066738665104, -0.05937258526682854, -0.07969463616609573, 0.008926039561629295, -0.32069480419158936, 0.023459257557988167, 0.008623179979622364, -0.08126825094223022, 0.013235795311629772, -0.05061522498726845, 0.0016872093547135592, -0.005384470336139202, -0.05269365385174751, 0.03846840187907219, 0.11616974323987961, -0.08386819064617157, -0.02480015717446804, -0.05126696825027466, -0.014336816035211086, 0.002176620764657855, 0.002380495658144355, -0.017070654779672623, -0.0535416305065155, 0.029990069568157196, 0.019975880160927773, -0.012358885258436203, -0.03440012037754059, -0.08311620354652405, 0.034310419112443924, 0.018906986340880394, 0.12299363315105438, -0.04028896987438202, 0.06533649563789368, -0.056406810879707336, 0.038731832057237625, 0.03224611654877663, -0.03866713121533394, -0.09787209331989288, 0.014621065929532051, -0.02963469922542572, -0.0464978963136673, 0.0317094549536705, -0.023436453193426132, 0.028470609337091446, 0.07437314838171005, 0.023139987140893936, 0.05834284424781799, -0.003736137645319104, -0.031218500807881355, -0.028102247044444084, 0.008691573515534401, -0.04997222125530243, -0.013725380413234234, 0.044399444013834, -0.04874262586236, 0.014705619774758816, 0.006127428729087114, 0.03522588312625885, -0.01303895190358162, -0.022297555580735207, 0.014314363710582256, -0.053786635398864746, -0.017853358760476112, 0.013082796707749367, 0.044386398047208786, 0.021169912070035934, -0.0019154150504618883, -0.019183579832315445, 0.026980461552739143, -0.06056063994765282, 0.005426082760095596, 0.027268026024103165, 0.037490542978048325, -0.004090034868568182, -0.08041103929281235, -0.0061918217688798904, 0.017778251320123672, 0.025653935968875885, 0.06270885467529297, 0.057942166924476624, 0.007974982261657715, 0.018996423110365868, -0.01905238628387451, 0.014547038823366165, -0.009106540121138096, 0.047370150685310364, 0.04052799940109253, 0.007918947376310825, -0.003147123847156763, -0.02612999640405178, -0.028202954679727554, 0.010062115266919136, -0.013359933160245419, 0.03543040528893471, -0.08922829478979111, 0.031107310205698013, -0.006894750986248255, 0.007882300764322281, 0.04708758741617203, 0.06015929952263832, -0.2917172610759735, -0.0043652174063026905, -0.004430979490280151, 0.05346887558698654, 0.05097781494259834, 0.011744987219572067, 0.030080333352088928, -0.029945606365799904, 0.02625316195189953, -0.015928182750940323, 0.0002168737119063735, 0.00382837001234293, -0.02470271848142147, -0.10038290917873383, 0.02149781584739685, 0.07256391644477844, 0.11314794421195984, -0.016686895862221718, 0.08097141236066818, 0.02944120764732361, 0.06197616830468178, -0.0017722987104207277, 0.22227166593074799, 0.04908917099237442, 0.01480508130043745, 0.01863867975771427, 0.04100462421774864, 0.009395938366651535, 0.03989678993821144, 0.05697502940893173, 0.04039842262864113, 0.0013573517790064216, 0.10139616578817368, 0.05350134149193764, -0.041313786059617996, -0.044998638331890106, 0.02012835629284382, 0.009635962545871735, 0.03708028048276901, -0.004963582381606102, -0.002918050391599536, 0.004757896065711975, -0.058912552893161774, -0.010934961028397083, 0.056816279888153076, -0.022232545539736748, -0.041723281145095825, -0.053277723491191864, -0.020372627303004265, -0.006145277991890907, -0.006971644703298807, -0.030768554657697678, -0.0027691111899912357, -0.04583815485239029, 0.012311276979744434, 0.013943140394985676, 0.026226287707686424, 0.030269945040345192, -0.037934888154268265, 0.01919005624949932, -0.018877549096941948, -0.030464908108115196, 0.05581340938806534, 0.028282787650823593, -0.006237564608454704], "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "603f2ddf-c446-43e1-95f6-e87da098a97b", "node_type": "4", "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "hash": "f806c2bba655b5f8b0509976832bbf51af6f3f5a84e5719edaacdeab988c1912", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9797bc48-ebee-47c0-9399-0c76dacdfc49", "node_type": "1", "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "hash": "b3f0debecab2ce248511ef41f781f4ac72a21ff08de5703f847b18fc1d8c1b58", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3051e7a5-564c-42f9-8377-a53aab88635e", "node_type": "1", "metadata": {}, "hash": "e50f89d5e6fccc5ac090698e20ef1438da876b9cf1ec4651bd48fa070feade8d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "For example, you can say `book.getTitle()` to get the title or `book.setRating(4.5f)` to change the rating. This keeps our code cleaner.\n*   Each `private` line defines one of the properties we discussed (like `bookId`, `title`, `author`).\n*   The `Book()` and `Book(...)` parts are \"constructors,\" which are like initial setup instructions for creating new `Book` objects.\n\n#### Loading Books from a File\n\nAll the book information for DevShelf is stored in a file called `book.json`. This is a special type of text file that stores data in a structured way that computers can easily understand.\n\nHere's a tiny peek at what `book.json` looks like:\n\n**`src/main/resources/data/book.json` (Snippet)**\n```json\n[\n  {\n    \"bookId\": 1,\n    \"title\": \"Introduction to Algorithms\",\n    \"author\": \"Thomas H. Cormen, Charles E. Leiserson, Ronald L. Rivest, Clifford Stein\",\n    \"description\": \"Comprehensive algorithms textbook...\",\n    \"progLang\": \"Pseudo-code\",\n    \"category\": \"Algorithms\",\n    \"tag\": [ \"algorithms\", \"data-structures\" ],\n    \"rating\": 4.7,\n    \"coverUrl\": \"...\",\n    \"downLink\": \"...\"\n  },\n  {\n    \"bookId\": 2,\n    \"title\": \"The Pragmatic Programmer\",\n    \"author\": \"Andrew Hunt, David Thomas\",\n    \"description\": \"Practical advice and philosophies...\",\n    \"progLang\": \"Multiple\",\n    \"category\": \"Software Engineering\",\n    \"tag\": [ \"best-practices\", \"career\" ],\n    \"rating\": 4.6,\n    \"coverUrl\": \"...\",\n    \"downLink\": \"...\"\n  }\n]\n```\nAs you can see, it's a list of book details, where each book's details match the properties we defined in our `Book.java` class.\n\nThe `BookLoader` class's job is to read this `book.json` file and turn its text into actual `Book` objects that our Java program can use.", "mimetype": "text/plain", "start_char_idx": 5746, "end_char_idx": 7462, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "3051e7a5-564c-42f9-8377-a53aab88635e", "embedding": [-0.06971422582864761, 0.0045224763453006744, 0.004913027863949537, -0.042732324451208115, 0.020655028522014618, -0.03896822780370712, -0.02251928299665451, 0.022370191290974617, -0.01278295461088419, 0.0022407735232263803, 0.013834553770720959, -0.0342300683259964, -0.013655305840075016, 0.0068601761013269424, 0.006916109472513199, -0.06044606491923332, -0.016012122854590416, -0.026261402294039726, -0.05313790217041969, -0.0069350204430520535, 0.03506956249475479, 0.013972916640341282, -0.021787554025650024, -0.06465347111225128, 0.06101745739579201, 0.06756465882062912, -0.02875109389424324, -0.014610878191888332, -0.045512210577726364, -0.17758676409721375, -0.02658604271709919, -0.13152693212032318, -0.0022337576374411583, 0.027986863628029823, -0.022648710757493973, 0.03406059741973877, 0.08224370330572128, 0.02090953290462494, 0.029076896607875824, -0.003275560913607478, 0.016167674213647842, 0.001633565523661673, -0.06273966282606125, 0.025910712778568268, -0.007576785981655121, -0.0003779522085096687, 0.009008816443383694, -0.016432667151093483, 0.04067190736532211, -0.04318693280220032, -0.07806701213121414, 0.01654229685664177, 0.03514484316110611, -0.011138408444821835, -0.008451198227703571, 0.01344699040055275, 0.055941805243492126, 0.09421598166227341, -0.002598886378109455, 0.0038450644351541996, 0.016844402998685837, -0.035475123673677444, -0.10650449246168137, 0.0789826363325119, 0.005558529868721962, 0.046161990612745285, -0.024282509461045265, -0.02636227384209633, -0.009698254987597466, 0.027112754061818123, -0.03142395615577698, 0.038235824555158615, -0.004785281606018543, 0.08927421271800995, 0.015168881043791771, -0.02353033423423767, -0.01052679494023323, 0.020081685855984688, 0.043722379952669144, -0.013679190538823605, -0.06709739565849304, -0.038526758551597595, 0.06215642765164375, -0.005993457976728678, -0.03657621517777443, 0.027708742767572403, 0.012137955985963345, -0.03148920089006424, 0.05528795346617699, 0.0011863213730975986, 0.016758926212787628, 0.007238073740154505, 0.03605816513299942, 0.07050930708646774, -0.053182244300842285, 0.03876563161611557, -0.07555973529815674, 0.03221439942717552, 0.03496812656521797, 0.33090659976005554, -0.033268291503190994, -0.00960276648402214, -0.020594501867890358, 0.01698746532201767, -0.028728390112519264, -0.08532015979290009, 0.031226826831698418, -0.0401993989944458, -0.011989139020442963, 0.005336605478078127, 0.0030175154097378254, -0.053312141448259354, -0.022447094321250916, -0.04633445292711258, -0.003265116596594453, -0.03193086013197899, -0.016088031232357025, -0.0019374070689082146, -0.12231014668941498, 0.029493076726794243, 0.018467742949724197, -0.00488942489027977, -0.058400485664606094, 0.04675092548131943, 0.04353050887584686, -0.01825033873319626, 0.013661044649779797, 0.05054030194878578, 0.0363415963947773, 0.01136696431785822, 0.025121744722127914, -0.006651661824434996, -0.09799493849277496, -0.0279241893440485, 0.04239464923739433, 0.03339329734444618, -0.0227372869849205, 0.004470330197364092, 0.0349033921957016, -0.013417945243418217, 0.038536105304956436, -0.009923029690980911, -0.026349006220698357, -0.015614251606166363, -0.06360899657011032, 0.06458133459091187, 0.002152833854779601, 0.02109845168888569, 0.011862842366099358, -0.01778879389166832, 0.009387083351612091, 0.06021557003259659, -0.04123071953654289, -0.039504047483205795, 0.02474585548043251, 0.026511993259191513, 0.053741369396448135, 0.018913600593805313, -0.003581276163458824, -0.07779648900032043, -0.024710316210985184, 0.007763821166008711, -0.017832186073064804, 0.033129964023828506, -0.01598227396607399, -0.009265473112463951, 0.053380515426397324, -0.024575743824243546, -0.0616658516228199, -0.029130904003977776, -0.03268713131546974, 0.0825776532292366, -0.003055477747693658, 0.0702463835477829, 0.06110307574272156, 0.0626140832901001, -0.04271947965025902, -0.045341797173023224, 0.005142442416399717, -0.0013711622450500727, -0.008967950008809566, 0.006006336770951748, -0.021844858303666115, 0.021571479737758636, 0.014996866695582867, -0.011111289262771606, -0.023994186893105507, -0.015095662325620651, 0.025277921929955482, 0.04986700415611267, 0.023270415142178535, 0.009000114165246487, -0.018231747671961784, -0.037598904222249985, 0.023903071880340576, -0.0002482305862940848, 0.024879762902855873, -0.00810383353382349, -0.0012859533308073878, -0.015898047015070915, 0.0420956164598465, 0.08060586452484131, 0.021876666694879532, 0.05818688124418259, -0.029582228511571884, 0.010214156471192837, 0.018608130514621735, -0.0435214526951313, 0.007860264740884304, -0.017314059659838676, -0.06841333210468292, -0.0366336815059185, -0.05996520817279816, -0.057391148060560226, -0.07469061762094498, 0.00384792173281312, 0.014334099367260933, 0.04168785363435745, 0.04008137062191963, 0.006524589378386736, -0.05715243145823479, -0.1027032881975174, 0.03209324926137924, -0.3268643915653229, 0.01773802749812603, -0.0038777035661041737, -0.040745809674263, -0.03446689993143082, -0.012962915934622288, -0.007761917542666197, -0.0022443775087594986, -0.026138365268707275, -0.029978787526488304, 0.07852944731712341, -0.12371618300676346, -0.021870752796530724, -0.048539623618125916, -0.022072043269872665, 0.015921344980597496, -0.07094229757785797, -0.05319661274552345, -0.09927459061145782, 0.018608901649713516, 0.015843220055103302, -0.010355609469115734, -0.05188896507024765, -0.02849039062857628, 0.06999583542346954, 0.03320286422967911, 0.06967134773731232, -0.05719851329922676, 0.04200897738337517, -0.029914868995547295, 0.049906130880117416, 0.058305829763412476, -0.05570216849446297, -0.04254688322544098, -0.04380743205547333, -0.005457340739667416, -0.04407532140612602, -0.005446277558803558, 0.009157043881714344, 0.0616118460893631, -0.01558011770248413, 0.04266698658466339, 0.007573456037789583, -0.037993114441633224, -0.010749580338597298, 0.006507743615657091, 0.04283599555492401, -0.07957536727190018, 0.020621320232748985, 0.012581800110638142, -0.029293233528733253, 0.007414055522531271, 0.028038041666150093, 0.06719973683357239, 0.004402655176818371, -0.012907547876238823, 0.049164023250341415, -0.0027092769742012024, -0.018614839762449265, 0.07391418516635895, 0.028997961431741714, 0.015923693776130676, 0.028314737603068352, 0.0535922646522522, -0.014475862495601177, -0.0328524112701416, 0.02762211672961712, 0.06016284227371216, -0.012427226640284061, -0.030898157507181168, -0.0857372134923935, 0.01919434405863285, -0.036947380751371384, 0.06889726966619492, 0.07529853284358978, 0.08655891567468643, 0.004800884518772364, -0.02695116214454174, 0.00429222546517849, 0.0525895394384861, -0.02572491578757763, 0.03418651968240738, 0.08309058845043182, 0.023983145132660866, 0.006289287935942411, 0.010997805744409561, -0.020339857786893845, -0.01763606257736683, 0.0010299418354406953, -0.007135473191738129, -0.061224181205034256, 0.019698921591043472, -0.00874142162501812, 0.04302503913640976, 0.04039805009961128, 0.07050740718841553, -0.2379651814699173, 0.01615462824702263, 0.026813460513949394, 0.08496762067079544, 0.05758492276072502, -0.02634485252201557, 0.0071840304881334305, -0.013589344918727875, 0.06280235946178436, 0.02017061598598957, 0.028937485069036484, -0.010543202981352806, -0.015594858676195145, -0.0363682359457016, 0.024302611127495766, 0.06704295426607132, 0.10424581170082092, 0.025315208360552788, 0.05469546839594841, 0.006437730509787798, 0.024781132116913795, -0.012515831738710403, 0.15819008648395538, 0.052365243434906006, 0.03026094287633896, 0.039975155144929886, 0.048258621245622635, -0.019823318347334862, 0.03537709638476372, -0.013869420625269413, 0.040392011404037476, 0.015249934047460556, 0.12959980964660645, 0.022374087944626808, 0.007809523027390242, -0.051968060433864594, -0.01940634846687317, 0.045376334339380264, 0.020535357296466827, 0.014759200625121593, -0.0334804467856884, 0.04729066789150238, -0.03865658864378929, -0.02319471910595894, 0.06143869459629059, -0.028476977720856667, -0.06657012552022934, -0.11205922067165375, -0.04111436381936073, -0.037903305143117905, 0.02444455400109291, -0.09833269566297531, 0.00715692900121212, -0.050515465438365936, -0.001869131694547832, 0.03713354095816612, -0.03670806437730789, 0.024355221539735794, -0.07062434405088425, -0.003965857904404402, 0.028344523161649704, 0.004160447511821985, 0.07716555148363113, 0.05315732583403587, -0.012263039126992226], "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "603f2ddf-c446-43e1-95f6-e87da098a97b", "node_type": "4", "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "hash": "f806c2bba655b5f8b0509976832bbf51af6f3f5a84e5719edaacdeab988c1912", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "29ef174d-0d8b-40fb-83b5-a8e83f600e1a", "node_type": "1", "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "hash": "144387c7a8a52ab58e6885d6c5990bcc1352e05c0480caf7ebaa3fda1bd85849", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f29d1ce5-0ea0-4f04-b7da-04b6f2116bcd", "node_type": "1", "metadata": {}, "hash": "a73bad8a248f3cff243012288510525a8fc202033aa459d8759b64d6c5c0be63", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "The `BookLoader` class's job is to read this `book.json` file and turn its text into actual `Book` objects that our Java program can use.\n\n**`src/main/java/storage/BookLoader.java` (Simplified)**\n```java\npackage storage;\n\nimport com.fasterxml.jackson.core.type.TypeReference; // Helps read lists of objects\nimport com.fasterxml.jackson.databind.ObjectMapper; // The \"magic tool\" for JSON\nimport domain.Book; // Our Book blueprint\n\nimport java.io.File; // To work with files on the computer\nimport java.io.IOException; // To handle errors when reading files\nimport java.util.Collections; // To return an empty list if something goes wrong\nimport java.util.List; // To store a list of Book objects\n\npublic class BookLoader {\n\n    private final ObjectMapper mapper = new ObjectMapper(); // Our JSON reading tool\n    private final String jsonFilePath; // Where the book.json file is located\n\n    // When we create a BookLoader, we tell it where to find the book.json file\n    public BookLoader(String jsonFilePath) {\n        this.jsonFilePath = jsonFilePath;\n    }\n\n    // This method does the actual work of loading books\n    public List<Book> loadBooks() {\n        try {\n            File jsonBooks = new File(jsonFilePath); // Find the book.json file\n            // Use the 'mapper' to read the file and turn it into a List of Book objects\n            return mapper.readValue(jsonBooks, new TypeReference<List<Book>>() {});\n        } catch (IOException e) {\n            // If something goes wrong (e.g., file not found), print an error\n            System.err.println(\"Failed to Load Books from JSON file: \" + e.getMessage());\n            return Collections.emptyList(); // Return an empty list to avoid crashing\n        }\n    }\n}\n```\nHere's what happens in `BookLoader.loadBooks()`:\n1.  It creates an `ObjectMapper`, which is a powerful \"translator\" that knows how to convert between Java objects and JSON text.\n2.  It points to the `book.json` file.\n3.  The `mapper.readValue(...)` line is the key! It reads all the text from `book.json` and, because we tell it to expect a `List<Book>`, it magically creates a Java `List` filled with `Book` objects, each populated with the data from the JSON.\n4.  If there's any problem (like the file not being there), it catches the error and prints a message.", "mimetype": "text/plain", "start_char_idx": 7325, "end_char_idx": 9621, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "f29d1ce5-0ea0-4f04-b7da-04b6f2116bcd", "embedding": [-0.0734848901629448, 0.003471626667305827, -0.003181279404088855, -0.018615281209349632, 0.016771266236901283, -0.03864455223083496, -0.015104802325367928, 0.012293937616050243, 0.020596429705619812, -0.003984671086072922, 0.023683350533246994, -0.0037856600247323513, 0.03884211555123329, -0.002750995336100459, -0.05101051554083824, -0.0401591956615448, 0.008667823858559132, -0.02860800176858902, -0.028904348611831665, -0.04895833134651184, 0.03620325028896332, -0.0003160245541948825, -0.0024273130111396313, -0.024119017645716667, 0.029457421973347664, 0.05664912611246109, -0.03848294913768768, -0.034950003027915955, -0.03483031317591667, -0.22761057317256927, -0.05325254425406456, -0.03007173351943493, 0.02993871085345745, -0.002960280980914831, -0.019328657537698746, 0.018060078844428062, 0.05896872654557228, 0.028013741597533226, 0.07141518592834473, 0.03193116933107376, 0.03679956868290901, 0.026527900248765945, -0.012700104154646397, 0.040745895355939865, 0.015308970585465431, 0.002123460406437516, 0.003360761795192957, -0.017501037567853928, 0.06606269627809525, -0.04573319852352142, -0.11572036147117615, 0.017546463757753372, 0.02183210849761963, -0.0027512679807841778, -0.025066934525966644, 0.025885265320539474, 0.059440381824970245, 0.07195568829774857, -0.036462631076574326, 0.011588224209845066, 0.033764179795980453, -0.04554898291826248, -0.09754293411970139, 0.08088698238134384, 0.060812246054410934, 0.019600844010710716, 0.0023769729305058718, -0.05023830756545067, 0.04478197917342186, 0.03525814786553383, -0.0012035893741995096, 0.024912932887673378, 0.004245225340127945, 0.0949772372841835, 0.0248385239392519, -0.011021138168871403, 0.0406029187142849, 0.025222333148121834, 0.00889107771217823, -0.024498095735907555, -0.048483483493328094, -0.03386770188808441, 0.038101620972156525, -0.0022387306671589613, -0.030647076666355133, 0.014604189433157444, 0.017374208196997643, 0.0024658478796482086, 0.06743627041578293, 0.002071681898087263, 0.07671444863080978, -0.044219207018613815, 0.05505215749144554, 0.045927729457616806, -0.07684194296598434, -0.0022296530660241842, -0.05788080394268036, 0.07929697632789612, 0.01603599265217781, 0.3785971701145172, -0.03696401044726372, -0.008020949549973011, -0.01080054510384798, 0.020882101729512215, -0.01717296801507473, -0.07220886647701263, 0.0338716097176075, 0.0072195022366940975, -0.01771629974246025, 0.007174429949373007, -0.007322055287659168, -0.04816323146224022, 0.013524592854082584, -0.02534562349319458, 0.001087475218810141, 0.029673010110855103, -0.02593553252518177, 0.0007589971064589918, -0.07318302243947983, -0.0053295656107366085, 0.027820641174912453, 0.01789620891213417, -0.02276124432682991, 0.01154171209782362, 0.01705406792461872, 0.006455766037106514, 0.007612209767103195, 0.07186885923147202, -0.037533149123191833, -0.00999344140291214, 0.0233432799577713, -0.03676767647266388, -0.0581137090921402, -0.015953978523612022, 0.04129108786582947, 0.003563167992979288, -0.00099387567024678, 0.006005215458571911, -0.0136767802760005, -0.018713586032390594, 0.03562711179256439, 0.028229044750332832, 0.005140756256878376, 0.02091866172850132, -0.08037332445383072, 0.10581503063440323, 0.010261628776788712, 0.013196052983403206, 0.01810261234641075, -0.06800830364227295, 0.06415149569511414, 0.08733567595481873, -0.05876312777400017, -0.021071657538414, 0.039453454315662384, 0.041195131838321686, 0.03670133277773857, 0.06006018817424774, -0.023080017417669296, -0.07297182828187943, 0.006444862578064203, -0.012003106996417046, -0.05045616999268532, 0.06752242892980576, -0.011560658924281597, -0.008870648220181465, 0.00972046796232462, 0.028181664645671844, -0.07129279524087906, -0.027351202443242073, -0.043132491409778595, 0.03301583603024483, -0.03051770105957985, 0.05438718572258949, -0.015273879282176495, -0.019848810508847237, -0.04569622501730919, 0.022578829899430275, 0.014908230863511562, 0.023483410477638245, -0.05273832008242607, -0.01902785338461399, -0.042494434863328934, 0.010774482041597366, -0.022269418463110924, -0.046940043568611145, -0.07406013458967209, -0.019730715081095695, 0.02151208557188511, 0.0007247361936606467, -0.024169987067580223, -0.01989450491964817, -0.03126051649451256, -0.02591872774064541, -0.006967308931052685, -0.02574883960187435, -0.018634172156453133, -0.04020163416862488, 0.01766914874315262, -0.009441621601581573, 0.08005937933921814, 0.04566093534231186, -0.0299996305257082, 0.022086454555392265, 0.007932106964290142, 0.01244491245597601, -0.008652335964143276, -0.06994949281215668, 0.018836190924048424, -0.014350269921123981, -0.007257012650370598, -0.0031571038998663425, -0.04621194675564766, -0.04851251095533371, -0.05300289765000343, -0.0013427287340164185, 0.029780099168419838, 0.04898246377706528, -0.02731919474899769, 0.024117354303598404, -0.054603852331638336, -0.0659291222691536, 0.012382380664348602, -0.33305829763412476, -0.021936828270554543, -0.023272493854165077, -0.028681902214884758, -0.04547635838389397, -0.02059691958129406, 0.021000469103455544, -0.003171751042827964, -0.043681550770998, -0.006228804122656584, 0.08573941886425018, -0.08425374329090118, -0.05711759999394417, -0.019635509699583054, -0.008406850509345531, -0.0018400170374661684, -0.009075405076146126, -0.0426168255507946, -0.07201292365789413, 0.02215106599032879, 0.01960252784192562, -0.02685728296637535, -0.038373589515686035, -0.03423154354095459, 0.02333780750632286, 0.013800740242004395, 0.0772048681974411, -0.019094811752438545, 0.030614182353019714, -0.03651998192071915, 0.024889618158340454, 0.059646476060152054, -0.06575611978769302, -0.08853933960199356, 0.045320555567741394, 0.009612484835088253, -0.07220198959112167, -0.007556553464382887, 0.013434190303087234, 0.051182884722948074, 0.025739654898643494, 0.00849023275077343, 0.04191906750202179, 0.004740469623357058, -0.0060142334550619125, -0.005688961129635572, 0.039686135947704315, -0.08370489627122879, -0.01588466204702854, 0.05841725692152977, -0.02104547992348671, 0.03463730216026306, 0.01315237581729889, 0.08403901010751724, 0.01839451864361763, -0.01666865311563015, -0.002736729569733143, -0.030324304476380348, -0.004147720523178577, 0.005952589679509401, 0.05139520391821861, 0.02587694115936756, 0.024884160608053207, 0.010486030019819736, 0.013914259150624275, -0.017769575119018555, -0.010905812494456768, 0.011726493015885353, 0.052115339785814285, -0.03169628232717514, -0.041416991502046585, 0.02782301791012287, -0.04214952141046524, 0.035682033747434616, 0.013214455917477608, 0.0365438237786293, 0.040235113352537155, -0.03778992220759392, 0.014317531138658524, -0.0063334256410598755, -0.017717797309160233, 0.005136121995747089, 0.0930163711309433, -0.00450279051437974, 0.005255896598100662, 0.01666143164038658, -0.01601853035390377, -0.0066963196732103825, -0.021322006359696388, -0.024942710995674133, -0.0197037011384964, 0.04822045564651489, -0.0077199386432766914, -0.042413245886564255, 0.018057456240057945, 0.05671846494078636, -0.25325191020965576, 0.03820011764764786, 0.005760056897997856, 0.07824978977441788, 0.031058678403496742, -0.03680593520402908, 0.06288016587495804, -0.0016034896252676845, 0.0669960305094719, -0.04144524037837982, 0.04114075005054474, 0.0008954693330451846, -0.06355743110179901, -0.10666616261005402, 0.013082250952720642, 0.07216490805149078, 0.08124104142189026, -0.0020846985280513763, 0.04129030182957649, 0.07936224341392517, 0.039219483733177185, 0.017202584072947502, 0.1903468668460846, 0.05469652637839317, 0.0033731115981936455, 0.008469806984066963, 0.03296253830194473, -0.030391106382012367, 0.02780325338244438, 0.054272282868623734, 0.03983587026596069, -0.04880467802286148, 0.09808966517448425, 0.0135599784553051, -0.008961228653788567, -0.027951011434197426, 0.014139163307845592, 0.03262844681739807, 0.0306438859552145, -0.01773218996822834, -0.033135928213596344, 0.019896667450666428, -0.08540575206279755, -0.03605519235134125, 0.04244647175073624, -0.03036539815366268, -0.048259638249874115, -0.028410734608769417, -0.04631935805082321, 0.01015351340174675, 0.01501405704766512, -0.05573246255517006, -0.006524502765387297, -0.027286401018500328, 0.041774991899728775, 0.03314989432692528, 0.017720475792884827, 0.031020499765872955, -0.060448478907346725, 0.023440459743142128, 0.02384284697473049, 0.010850351303815842, 0.0886545479297638, -0.0036560443695634604, -0.012644502334296703], "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "603f2ddf-c446-43e1-95f6-e87da098a97b", "node_type": "4", "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "hash": "f806c2bba655b5f8b0509976832bbf51af6f3f5a84e5719edaacdeab988c1912", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3051e7a5-564c-42f9-8377-a53aab88635e", "node_type": "1", "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "hash": "2e1c516ab593c01b88925a2e0b5a57c676322a6c604baf5f71a6ea387bcb3992", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5300c45d-aac0-4436-bce0-f11b6b7df000", "node_type": "1", "metadata": {}, "hash": "bf2738ca09f18eeebc23bd4a6de0a5390c4b8d9965a157aa087771b34f24b2f0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "4.  If there's any problem (like the file not being there), it catches the error and prints a message.\n\n#### Using Loaded Books\n\nOnce the `BookLoader` has done its job, the `Main` or `GuiMain` application stores these `Book` objects, typically in a `Map` where each book's unique `bookId` is used to quickly find it. This `Map` is then passed to important parts of the application, like the `BookSearchEngine` (for CLI) or `DevShelfService` (for GUI), so they can access book details when needed.\n\nFor example, when the search engine finds a `bookId` that matches your query, it can then easily fetch the full `Book` object from this map and display its details:\n\n```java\n// Simplified code snippet from BookSearchEngine or DevShelfService\n// Imagine 'bookMap' is a Map<Integer, Book> containing all our loaded books\n\n// ... after a search, we get a list of relevant book IDs ...\n// List<Integer> foundBookIds = /* ... results from search logic ... */ ;\n\n// Let's say we found Book with ID 3\nint foundBookId = 3;\n\n// Retrieve the actual Book object using its ID\nBook foundBook = bookMap.get(foundBookId);\n\nif (foundBook != null) {\n    // Now we can easily access its details!\n    System.out.println(\"Title: \" + foundBook.getTitle());\n    System.out.println(\"Author: \" + foundBook.getAuthor());\n    System.out.println(\"Rating: \" + foundBook.getRating());\n    System.out.println(\"Download: \" + foundBook.getDownLink());\n    // The UI will then take these details and show them nicely to the user\n}\n```\nThe output of this snippet would be:\n```\nTitle: Clean Code\nAuthor: Robert C. Martin\nRating: 4.6\nDownload: https://ptgmedia.pearsoncmg.com/images/9780132350884/samplepages/9780132350884.pdf\n```\nThis is how a `Book` object, acting as our digital index card, helps DevShelf organize and present information effectively.\n\n### Conclusion\n\nIn this chapter, we unpacked the `Book` domain model, which is the core unit of data in our DevShelf library.", "mimetype": "text/plain", "start_char_idx": 9519, "end_char_idx": 11462, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "5300c45d-aac0-4436-bce0-f11b6b7df000", "embedding": [-0.009613978676497936, 0.04665966331958771, 0.010355831123888493, -0.029142923653125763, 0.0339689627289772, -0.02731660194694996, -0.04410884156823158, 0.010473188012838364, 0.013319580815732479, 0.011938849464058876, -0.022690845653414726, -0.009421777911484241, 0.023474829271435738, 0.014894198626279831, -0.02448938600718975, -0.03714573383331299, -0.001424770918674767, -0.005910797044634819, -0.03872623294591904, -0.0028471662662923336, 0.0868597999215126, -0.009354925714433193, -0.02673451416194439, -0.07087451964616776, -0.022093895822763443, 0.08534644544124603, -0.021629465743899345, -0.0007180545362643898, -0.01897650584578514, -0.21387864649295807, -0.008214871399104595, -0.021201305091381073, 0.03480854257941246, 0.02832624316215515, -0.021600179374217987, -0.04703637957572937, 0.0513097420334816, -0.027643710374832153, 0.02676725946366787, 0.002271209843456745, -0.004885922186076641, 0.008707994595170021, -0.030990418046712875, 0.04996652156114578, 0.03953796997666359, 0.001116839237511158, -0.021619634702801704, 0.011406540870666504, -0.04168658331036568, -0.019109388813376427, -0.09413754940032959, 0.015124702826142311, 0.015243325382471085, 0.01784316636621952, 0.007043361198157072, 0.04059804603457451, 0.06244654208421707, 0.06421887874603271, 0.0006009804783388972, 0.008418348617851734, 0.05005700886249542, -0.031671661883592606, -0.10161101073026657, 0.09010874480009079, 0.04381636902689934, 0.07116483151912689, -0.027438288554549217, -0.06930352002382278, 0.001570228603668511, 0.019785409793257713, 0.006584134418517351, 0.03742481395602226, 0.004446795210242271, 0.04017506167292595, 0.0363779217004776, -0.014368774369359016, -0.0011802342487499118, -0.016070542857050896, 0.02599792368710041, -0.016431448981165886, 1.0981655577779748e-05, -0.05495920032262802, 0.02913033962249756, 0.003567533800378442, -0.03516517952084541, 0.0007590677705593407, 0.025927603244781494, -0.05482004955410957, 0.007241336163133383, 0.011715500615537167, 0.00833378080278635, -0.0015219844644889235, 0.04244838282465935, 0.056536294519901276, -0.04558534547686577, 0.015154884196817875, -0.03271307796239853, 0.029959462583065033, 0.011550686322152615, 0.3994141221046448, -0.005350145976990461, -0.014577627182006836, 0.004921888932585716, -0.05428609251976013, -0.02799305133521557, -0.04886748269200325, 0.051712945103645325, -0.027898771688342094, 0.01779709756374359, 0.04579279571771622, 0.013721412979066372, -0.032106149941682816, -0.01414696779102087, -0.05664730444550514, 0.054548170417547226, -0.051343027502298355, -0.0183552298694849, 0.008264848031103611, -0.029678797349333763, -0.020656708627939224, 0.018598701804876328, 0.04128162935376167, -0.021409885957837105, 0.0447501577436924, 0.021504772827029228, -0.005524304695427418, 0.009742647409439087, 0.0687829777598381, -0.01710749976336956, 0.041026823222637177, 0.00957657303661108, -0.0017168259946629405, -0.10235544294118881, -0.03285117447376251, 0.038698289543390274, 0.015258260071277618, -0.030445827171206474, -0.0038141689728945494, -0.024477209895849228, 0.02171175926923752, -0.01467215083539486, 0.06503686308860779, 0.005430052988231182, 0.016564596444368362, -0.09294059127569199, 0.10132406651973724, 0.059668030589818954, 0.011548612266778946, -0.002492075553163886, 0.015379538759589195, 0.0321718268096447, 0.10177120566368103, 0.005524858366698027, -0.06600196659564972, 0.01409168541431427, 0.025270529091358185, 0.05163395777344704, -0.009522578679025173, -0.04212525114417076, -0.05791846290230751, -0.022815821692347527, 0.009309535846114159, -0.010862777940928936, 0.0844041183590889, -0.05408504977822304, -0.0890626609325409, 0.008662343956530094, 0.02195865474641323, -0.07453661412000656, -0.042016610503196716, -0.00036221789196133614, -0.02947496995329857, -0.042929936200380325, 0.05225641280412674, 0.012778716161847115, -0.0015336835058405995, -0.03665126487612724, -0.012122164480388165, 0.013710571452975273, -0.01157817617058754, 0.0021300127264112234, -0.05738125741481781, -0.04353107511997223, 0.02081061527132988, -0.0350191593170166, -0.037002500146627426, -0.08608905971050262, 0.006937861908227205, 0.010758694261312485, 0.02744302526116371, -0.05375036597251892, 0.01250037644058466, 0.007903223857283592, 0.01755221001803875, -0.00167650799266994, -0.006106318905949593, -0.02083262987434864, 0.013400950469076633, -0.04907817021012306, 0.01919656991958618, 0.029035842046141624, 0.0760277584195137, -0.04805054888129234, 0.03243695944547653, -0.04018199071288109, -0.0017347862012684345, 0.01191550400108099, -0.02837083674967289, 0.025970514863729477, -0.031494688242673874, -0.024472830817103386, 0.011677362956106663, -0.06082647666335106, -0.050553228706121445, -0.019889716058969498, 0.004483981989324093, 0.04411894083023071, 0.010848942212760448, -0.018034132197499275, 0.047521915286779404, -0.03158409893512726, -0.05112498626112938, -0.0036909577902406454, -0.32519304752349854, 0.039109859615564346, -0.021834706887602806, -0.0701894462108612, -0.018095556646585464, -0.03719961270689964, 0.03265197575092316, 0.03465055674314499, -0.010213727131485939, 0.02035025879740715, 0.07594744861125946, -0.06466858088970184, -0.059424661099910736, -0.006369778886437416, -0.03401239961385727, -0.0009794337674975395, 0.025372348725795746, -0.054451946169137955, -0.1501457840204239, 0.01817166432738304, -0.01553969457745552, -0.023800134658813477, -0.02189134620130062, -0.08145683258771896, 0.04197315871715546, -0.0019844199996441603, 0.08917180448770523, -0.009529657661914825, 0.057683296501636505, -0.03560085967183113, 0.06704513728618622, 0.05032971873879433, -0.08225864171981812, -0.07044104486703873, 0.013983628712594509, -0.021935706958174706, -0.009436538442969322, 0.00807869341224432, 0.009800110012292862, 0.009375072084367275, 0.03596224635839462, 0.03282785415649414, 0.06249506026506424, -0.014576482586562634, -0.034227944910526276, 0.00939996913075447, 0.021887481212615967, -0.06919216364622116, -0.0007811522227711976, 0.07477111369371414, -0.04210799187421799, 0.0024970537051558495, 0.030876537784934044, 0.06620676070451736, -0.020601244643330574, -0.007367400918155909, -0.018238713964819908, -0.04069283977150917, -0.018642380833625793, 0.026259232312440872, 0.016249489039182663, 0.008412083610892296, -0.016587283462285995, -0.0006862597656436265, 0.04861464351415634, -0.05876302719116211, -0.04061385989189148, -0.006840962450951338, 0.02346760593354702, -0.0576750785112381, -0.057039037346839905, 0.00957408081740141, -0.032497208565473557, 0.04735792428255081, 0.058895401656627655, 0.05764726549386978, 0.029176227748394012, 0.006135972216725349, -0.021035756915807724, 0.032711584120988846, -0.006678199861198664, 0.0067407661117613316, 0.08288278430700302, -0.02116919681429863, 0.022461680695414543, 0.0022104382514953613, 0.02180631272494793, -0.024954039603471756, -0.007753016892820597, 0.009254777804017067, -0.05558956041932106, -0.0032832403667271137, -0.0055412426590919495, -0.04684838280081749, 0.019105128943920135, 0.04019845649600029, -0.28968048095703125, 0.02553105354309082, 0.01799723319709301, 0.09569890797138214, 0.05434522405266762, -0.019894294440746307, 0.008925049565732479, 0.0014021708630025387, 0.05169706046581268, -0.04815458878874779, 0.01961316540837288, 0.03138601407408714, -6.8607678258558735e-06, -0.054001584649086, 0.00951214786618948, 0.07974589616060257, 0.11619547754526138, -0.02795572765171528, 0.02507397159934044, 0.047036074101924896, 0.036793190985918045, 0.009997684508562088, 0.14877274632453918, 0.03465136140584946, 0.02481999062001705, 0.008441229350864887, -0.004849064629524946, -0.014589943923056126, -0.03155984356999397, 0.05280785262584686, 0.010467282496392727, -0.02298802323639393, 0.0676003023982048, 0.04785287752747536, -0.04175739362835884, -0.012335097417235374, 0.021248113363981247, 0.028620203956961632, 0.06942809373140335, -0.023188192397356033, 0.02540087141096592, 0.0018576706061139703, -0.030337832868099213, 0.016736863180994987, 0.023499995470046997, -0.0028074653819203377, -0.0508386492729187, -0.04703029617667198, -0.00509579386562109, -0.005396631080657244, 0.056924931704998016, -0.05764037370681763, 0.01071555819362402, -0.01279444620013237, 0.050193410366773605, -0.0014876474160701036, -0.0006334996432997286, 0.0426325723528862, -0.03501441702246666, 0.005370364058762789, 0.009992345236241817, 0.024511516094207764, 0.049641627818346024, 0.02395499125123024, 0.023571642115712166], "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "603f2ddf-c446-43e1-95f6-e87da098a97b", "node_type": "4", "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "hash": "f806c2bba655b5f8b0509976832bbf51af6f3f5a84e5719edaacdeab988c1912", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f29d1ce5-0ea0-4f04-b7da-04b6f2116bcd", "node_type": "1", "metadata": {"file_name": "Chapter 2 Book (Domain Model).md"}, "hash": "3c0c7569437bc21897a2923fd16d72c04d605dbb0d3974ab332e2d5285aa5293", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "### Conclusion\n\nIn this chapter, we unpacked the `Book` domain model, which is the core unit of data in our DevShelf library. We learned that:\n*   Each `Book` object is like a detailed digital index card, holding all the essential information about a single book.\n*   It has properties like `bookId`, `title`, `author`, `description`, `rating`, `coverUrl`, and more.\n*   The `BookLoader` is responsible for reading book data from a `book.json` file and transforming it into usable `Book` objects when the application starts.\n*   These `Book` objects are then stored in a way that allows other parts of the application, like the search engine, to easily find and retrieve their details.\n\nUnderstanding the `Book` object is fundamental because it's what our users are ultimately searching for and interacting with. In the next chapter, we'll explore how DevShelf actually displays these `Book` objects to you, the user, through its interface.\n\n[Next Chapter: User Interface Presentation](03_user_interface_presentation_.md)", "mimetype": "text/plain", "start_char_idx": 11337, "end_char_idx": 12358, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "b9781c38-148a-4d22-8eeb-59db7c8ac386", "embedding": [-0.06288599222898483, 0.041952189058065414, 0.02073696255683899, 0.01749289780855179, 0.019203683361411095, -0.013241426087915897, -0.011010370217263699, 0.004012400284409523, -0.006554984487593174, -0.003115060506388545, -0.03473426774144173, -0.00930999219417572, 0.020721951499581337, 0.0005954347434453666, 0.005044629797339439, -0.03690294548869133, -0.0075917355716228485, -0.02938872203230858, -0.03183339536190033, 0.002872894750908017, 0.08112769573926926, 0.01612139120697975, -0.011564226821064949, -0.0834798514842987, -0.03901934251189232, 0.08839944750070572, -0.004046657122671604, -0.010696928948163986, 0.03121187910437584, -0.20213951170444489, 0.034576356410980225, 0.039606835693120956, 0.06536034494638443, -0.002105603227391839, -0.03710072860121727, -0.03991072252392769, 0.018411042168736458, -0.008587813004851341, 0.010820460505783558, -0.00034005107590928674, 0.008657149039208889, 0.017840879037976265, -0.004849900491535664, 0.05631812661886215, 0.019973063841462135, -0.02067667618393898, -0.049151524901390076, 0.01031141635030508, -0.025970308110117912, -0.04681864380836487, -0.09237707406282425, 0.004060246981680393, 0.03478390723466873, 0.006003419402986765, 0.011904682964086533, 0.03504122048616409, 0.056461088359355927, 0.060516711324453354, -0.019005700945854187, -0.0179179385304451, 0.024379201233386993, -0.03281213715672493, -0.07964318245649338, 0.10857754200696945, 0.021701117977499962, 0.017994189634919167, 0.008820769377052784, -0.07534763962030411, 0.018856478855013847, -0.016271105036139488, -0.014309074729681015, -0.0028880129102617502, -0.019103538244962692, 0.010369623079895973, 0.012331714853644371, -0.04870090261101723, 0.017125656828284264, -0.029394708573818207, 0.056643903255462646, -0.023657288402318954, -0.02524653822183609, 0.030249806120991707, 0.0049493215046823025, -0.012437752448022366, -0.008552268147468567, 0.001545142731629312, 0.025395087897777557, -0.000676351657602936, -0.002954789437353611, 0.0026451083831489086, 0.021526362746953964, -0.04893166571855545, 0.01956995390355587, 0.017463695257902145, -0.010975023731589317, 0.027282215654850006, 0.016246924176812172, 0.01723780296742916, -0.002979975426569581, 0.42012426257133484, -0.024730000644922256, -0.0012591483537107706, 0.02492811530828476, -0.025180727243423462, 0.029641831293702126, -0.03369412571191788, 0.04180644452571869, -0.016594938933849335, -0.003874925198033452, 0.02550954930484295, -0.011568604968488216, -0.04135648533701897, 0.02303987555205822, -0.03599664941430092, 0.013319617137312889, -0.02613655850291252, -0.04878402128815651, 0.008583365939557552, 0.019971750676631927, -0.06149519979953766, 0.038855597376823425, 0.025740647688508034, -0.02269449457526207, 0.012321511283516884, 0.06521063297986984, -0.008559858426451683, 0.0015608760295435786, 0.061932917684316635, -0.04017229378223419, 0.020334498956799507, 0.01449222955852747, 0.0067677851766347885, -0.07525864243507385, 0.01883689872920513, 0.03407330811023712, 0.021075615659356117, -0.05999916419386864, -0.001213328680023551, 0.010013178922235966, 0.017969300970435143, 0.025762438774108887, 0.04002860188484192, 0.01455668918788433, -0.012564304284751415, -0.06506172567605972, 0.10571528971195221, 0.03262544423341751, -0.006963320076465607, -0.03278179094195366, -0.004633044358342886, 0.02721790410578251, 0.0682016983628273, -0.02027561329305172, -0.034308772534132004, -0.001732553355395794, 0.01604834944009781, 0.07744669169187546, 0.02598997764289379, -0.02933247946202755, -0.025412805378437042, -0.050679102540016174, -0.00037923059426248074, -0.007223585154861212, 0.06903515011072159, -0.034875061362981796, -0.10391080379486084, -0.03960784524679184, 0.03347712755203247, -0.10307636857032776, -0.0481262281537056, -0.028211427852511406, -0.0370955690741539, -0.029975730925798416, 0.02103406749665737, 0.031200384721159935, -0.007020130287855864, -0.047164298593997955, 0.0009725277195684612, 0.04105477035045624, 0.02624085173010826, -0.0012273316970095038, -0.04807870090007782, -0.04804973676800728, -0.01287180557847023, -0.04966583475470543, -0.02394009195268154, -0.04873841628432274, -0.00039873880450613797, 0.019980793818831444, 0.023650163784623146, -0.027791447937488556, 0.008195904083549976, -0.016415400430560112, 0.0297970250248909, -0.015531114302575588, -0.015752729028463364, -0.009197872132062912, -0.027823256328701973, -0.03819754719734192, 0.024090884253382683, 0.007505315355956554, 0.02576398104429245, -0.05101632699370384, 0.03777112811803818, -0.021856483072042465, -0.02236793003976345, 0.006997079122811556, -0.052104201167821884, 0.09952849894762039, -0.02944081462919712, -0.04845767840743065, 0.01528661698102951, 0.01028083823621273, -0.03631499409675598, -0.018158243969082832, -0.01667574793100357, 0.042688142508268356, 0.02265714481472969, -0.03564906865358353, 0.018486524000763893, -0.032213419675827026, -0.025814488530158997, -0.044441450387239456, -0.3185799717903137, 0.04970065876841545, -0.006924201734364033, -0.042440902441740036, -0.008475380018353462, -0.06783302873373032, 0.04696043208241463, 0.031449031084775925, 0.03488782420754433, 0.029839789494872093, 0.12511278688907623, -0.04683315381407738, -0.03988291323184967, -0.015098518691956997, -0.013823111541569233, -0.0005264484789222479, 0.029779188334941864, -0.008104585111141205, -0.10341800004243851, -0.03189865127205849, 0.007124290335923433, -0.01681871898472309, 0.0151827996596694, -0.08124040812253952, -0.022193970158696175, 0.02162194438278675, 0.08069487661123276, 0.022899987176060677, 0.07093770802021027, -0.008402668870985508, 0.07158182561397552, 0.07676573842763901, -0.09505195915699005, -0.11610056459903717, -0.013438285328447819, 0.03191212937235832, -0.004287035670131445, 0.01558627001941204, 0.002060821745544672, 0.0027902252040803432, 0.043023526668548584, 0.004896339029073715, 0.0764283537864685, -0.0045611802488565445, -0.04091828688979149, 0.003094046376645565, 0.02362443506717682, -0.06766680628061295, -0.012359345331788063, 0.05550229549407959, -0.011280638165771961, 0.02431996911764145, -0.0013847830705344677, 0.048661187291145325, -0.04488391429185867, -0.058748047798871994, -0.026915330439805984, -0.0743335485458374, -0.02819681167602539, 0.0015496904961764812, -0.0015436516841873527, 0.03291987255215645, -0.04032927751541138, -0.04460715502500534, 0.03328263759613037, 0.010240103118121624, -0.05939241498708725, -0.018324032425880432, 0.07623201608657837, -0.016917819157242775, -0.03766016289591789, 0.021755289286375046, -0.03389183431863785, -0.00025377917336300015, 0.042600199580192566, 0.0454745888710022, 0.07834751904010773, 0.04054282233119011, -0.01251495722681284, -0.002758700167760253, -0.024010946974158287, 0.025746606290340424, 0.0843777060508728, -0.02329346537590027, 0.005998687352985144, -0.0043209511786699295, 0.016007492318749428, -0.04494813457131386, 0.01144992746412754, -0.020689986646175385, -0.06311880052089691, 0.001127342227846384, 0.04001883789896965, -0.05921035632491112, 0.012569788843393326, 0.07193617522716522, -0.28990644216537476, 0.026395419612526894, 0.024011578410863876, 0.057942330837249756, -0.007175481412559748, -0.025228917598724365, 0.039308927953243256, -0.03323691338300705, 0.02878483384847641, -0.06158324331045151, -0.023915737867355347, -0.018677158281207085, 0.026179460808634758, -0.06174568831920624, 0.04862118139863014, 0.05833345651626587, 0.12858803570270538, -0.042033810168504715, 0.025102335959672928, 0.06456677615642548, 0.018929289653897285, 0.004230518825352192, 0.12106265127658844, 0.008232043124735355, 0.05145825073122978, -0.0032234080135822296, 0.013368838466703892, -0.02930636703968048, 0.013029403984546661, 0.10240577161312103, 0.026547448709607124, -0.07569491863250732, 0.024127380922436714, 0.024444904178380966, -0.0397881455719471, -0.018912071362137794, -0.024030860513448715, -0.00861393753439188, 0.049465958029031754, -0.011322764679789543, 0.025331608951091766, 0.031093863770365715, -0.03537048026919365, 0.02816610597074032, 0.04699892923235893, -0.027993200346827507, 0.01410400215536356, -0.012651967816054821, 0.023134371265769005, 0.00729100639000535, 0.008752775378525257, -0.03348935768008232, 0.014464573003351688, -0.017140304669737816, 0.04380360245704651, 0.022799182683229446, 0.038787733763456345, 0.05233683064579964, -0.01638145186007023, 0.019701635465025902, 0.024730350822210312, 0.0028335386887192726, 0.08942394703626633, 0.00467004394158721, 0.03862781450152397], "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6c816bad-9dcf-4e5f-8fe9-8515f290e64a", "node_type": "4", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "74eaa45f6b8bfd17bfc1106c7a98f9728d85219084d4a91725c434c2d4bbc5f4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "987c144f-632d-4c55-b86d-a1ae65482ff7", "node_type": "1", "metadata": {}, "hash": "d9c6aaa0c881342f0286093ec9dea7eefb39a3cd98fcfc4d847d363349d80440", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Welcome back to DevShelf! In our last chapter, [Book (Domain Model)](02_book__domain_model_.md), we got to know the most important \"prop\" in our digital library: the `Book` itself, a digital index card holding all its details. Now, imagine you've found the perfect book \u2013 how does DevShelf actually *show* you that book? And how do you tell DevShelf what you're looking for?\n\nThat's where **User Interface Presentation** comes in!\n\n### The \"Face\" of DevShelf\n\nThink of the \"User Interface Presentation\" as the **face** of our DevShelf application. It's everything you see and interact with on your screen. Just like your face shows your expressions and allows you to speak and listen, DevShelf's UI (User Interface) is how it displays information (like search results or welcome messages) and how it gathers your input (like your search queries or clicks).\n\nIt takes all the internal data and clever logic (like finding books) and translates it into something you can easily understand and use. A good \"face\" makes the digital library feel friendly and easy to navigate!\n\n#### The Problem Our UI Solves\n\nImagine you've searched for \"Python\" in DevShelf. The application's core logic has found many Python books. But how do you *see* them? How do you type \"Python\" in the first place? Without a UI, DevShelf would be a powerful brain with no way to communicate with you!\n\nOur User Interface Presentation solves this by providing:\n1.  **Display:** Ways to show books, messages, and options.\n2.  **Input:** Ways for you to type, click, and interact.\n\nLet's focus on a central use case: **Displaying search results and letting the user type a new search query.** We want to see the books and then easily search again.\n\n### Two Ways DevShelf Shows Its Face: CLI vs. GUI\n\nAs we briefly touched on in Chapter 1, DevShelf has two different \"faces\":\n\n*   **CLI (Command Line Interface):** A simple text-based interface where you type commands and read text responses.\n*   **GUI (Graphical User Interface):** A visual interface with windows, buttons, text fields, and images that you interact with using your mouse and keyboard.", "mimetype": "text/plain", "start_char_idx": 1, "end_char_idx": 2119, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "987c144f-632d-4c55-b86d-a1ae65482ff7", "embedding": [-0.046333592385053635, 0.01950688101351261, -0.013032162562012672, 0.03603822737932205, 0.024484511464834213, -0.03511364012956619, 0.03854135423898697, 0.0007989757577888668, 0.02974477782845497, 0.004678312689065933, -0.05327939614653587, -0.039796870201826096, 0.014814268797636032, 0.014519460499286652, 0.013327330350875854, -0.06144094467163086, -0.010610794648528099, -0.061263564974069595, -0.020121607929468155, -0.017720459029078484, 0.06449773907661438, 0.032066673040390015, -0.03106626495718956, -0.06860294938087463, -0.026159530505537987, 0.06085631251335144, 0.011022478342056274, -0.07535533607006073, 0.018098456785082817, -0.16577517986297607, -0.03802672028541565, 0.01963883638381958, 0.07348025590181351, -0.011889771558344364, -0.05958652123808861, 0.004789090249687433, 0.039072733372449875, -0.010691886767745018, -0.04330220818519592, -0.014156531542539597, -0.0003799380792770535, 0.02493828907608986, 0.003579316893592477, 0.005269673187285662, 0.014067119918763638, -0.09433522075414658, -0.02434234879910946, -0.020783908665180206, 0.007302731275558472, -0.002930876100435853, -0.006150026340037584, 0.015484782867133617, 0.05527116358280182, -0.02030918002128601, 0.016570905223488808, -0.002387931803241372, 0.05948629602789879, 0.03116791322827339, -0.06598911434412003, -0.0196535624563694, -0.010656525380909443, -0.011146395467221737, -0.12576059997081757, 0.07816790789365768, -0.010283821262419224, -0.010953430086374283, 0.014102070592343807, -0.004090508911758661, 0.017947277054190636, -0.007121667265892029, 0.023151496425271034, -0.030785134062170982, -0.03395144268870354, 0.03356464207172394, 0.0495888814330101, -0.10589239746332169, -0.0009878387209028006, 0.00035615640808828175, -0.004726203624159098, -0.011784455738961697, -0.05974879860877991, 0.010855777189135551, 0.026624105870723724, 0.0019218127708882093, -0.011849547736346722, 0.022671304643154144, 0.014039073139429092, -0.0008610565564595163, 0.02194291725754738, -0.02527622878551483, -0.0021820564288645983, -0.07823850959539413, 0.008300898596644402, 0.02071131207048893, 0.017497114837169647, 0.014277459122240543, 0.017012154683470726, 0.004617456812411547, 0.002123780082911253, 0.38856151700019836, -0.002882800530642271, -0.03616171330213547, -0.004879466257989407, -0.013684604316949844, 0.07165955752134323, 9.584175131749362e-05, 0.020370636135339737, -0.008426804095506668, -0.06809276342391968, 0.02569076605141163, -0.01693119667470455, -0.01410107221454382, -0.001343905576504767, 0.043088704347610474, -0.0472039170563221, -0.024365359917283058, -0.013277700170874596, 0.015310797840356827, 0.04023852199316025, -0.0014751171693205833, 0.004245225805789232, -0.013293931260704994, -0.018553344532847404, -0.0054049426689744, 0.07924685627222061, -0.05453700199723244, -0.0007812374969944358, 0.03620273992419243, -0.037738241255283356, -0.008742143400013447, 0.047664474695920944, 0.009356082417070866, -0.04373583942651749, 0.04886544123291969, 0.006554816849529743, 0.035566169768571854, -0.010433880612254143, -0.01450947392731905, -0.00459568714722991, -0.008998088538646698, 0.010572688654065132, -0.00502864271402359, 0.023743608966469765, -0.040604475885629654, -0.05625414475798607, 0.055791065096855164, -0.03066898323595524, 0.026255829259753227, -0.015187200158834457, -0.00822557881474495, 0.01727481372654438, 0.030431663617491722, -0.05657128989696503, 0.017558623105287552, -0.024751076474785805, 0.03062061034142971, 0.056249186396598816, 0.034605368971824646, -0.01411387324333191, -0.03929958492517471, -0.050878528505563736, 0.019680935889482498, -0.059157345443964005, 0.03755997493863106, 0.0209739301353693, -0.05905388295650482, 0.004151103552430868, 0.05488431081175804, -0.07922641932964325, -0.031028656288981438, -0.04830995202064514, 0.02022131159901619, -0.02266661822795868, 0.03100019507110119, 0.028945311903953552, 0.02206001803278923, -0.044336870312690735, 0.0016674327198415995, 0.0305267795920372, 0.07899986952543259, -0.01692025363445282, -0.05041154474020004, -0.04175455495715141, 0.024074111133813858, -0.01771383173763752, 0.0099289920181036, -0.03634916990995407, -0.039612285792827606, 0.00934672262519598, 0.026848217472434044, 0.0018297829665243626, 0.01717679388821125, -0.05299171432852745, 0.03061947599053383, -0.03410749509930611, -0.052270837128162384, 0.002297687577083707, -0.04060600325465202, 0.015595774166285992, 0.009727290831506252, 0.006589571945369244, 0.03373359143733978, -0.0033862260170280933, 0.01261266227811575, -0.02993081323802471, 0.0036213845014572144, -0.021928919479250908, -0.047862160950899124, 0.0998835563659668, -0.03687315434217453, -0.09021633863449097, 0.009426076896488667, 0.008701360784471035, -0.004400657489895821, -0.01857365109026432, -0.065203458070755, -0.001195461954921484, 0.0230086799710989, 0.00866665504872799, 0.019011901691555977, -0.06700661778450012, -0.04869070276618004, -0.0066873193718492985, -0.3181382715702057, -0.001012591295875609, -0.004946399480104446, -0.014366934075951576, -0.022565552964806557, -0.058438193053007126, 0.03761006146669388, -0.024907760322093964, 0.005402701441198587, -0.0027055551763623953, 0.11426518857479095, -0.039224978536367416, -0.0356876365840435, -0.028602235019207, 0.015620585530996323, 0.02601253055036068, 0.013222272507846355, -0.03172255679965019, -0.09993138909339905, 0.0029984188731759787, 0.0754118263721466, 0.027874751016497612, -0.01212451234459877, -0.04730358347296715, -0.046296376734972, 0.02276233769953251, 0.07065372169017792, -0.0040408531203866005, 0.10178070515394211, 0.03222132846713066, 0.0753144845366478, 0.03560663014650345, -0.0806536078453064, -0.08266839385032654, -0.005601353943347931, 0.032765623182058334, -0.08363033831119537, -0.006158994976431131, -0.06379655748605728, 0.03992045670747757, -0.036641888320446014, 0.006991772446781397, 0.0399291068315506, 0.005202689673751593, -0.0015163792995736003, -0.0034327185712754726, 0.03865837678313255, -0.08430884033441544, -0.03461731597781181, 0.0495477020740509, -0.05388423800468445, 0.02500523254275322, 0.006440485827624798, 0.06807373464107513, -0.008988010697066784, 0.004889180883765221, -0.01197242271155119, -0.0322226956486702, -0.026853905990719795, -0.021868504583835602, 0.09695896506309509, 0.027345940470695496, 0.014115958474576473, -0.029351023957133293, -0.013577272184193134, 0.017278572544455528, -0.03131594508886337, -0.007887380197644234, 0.08205658942461014, -0.022522620856761932, -0.08347547799348831, 0.06328023225069046, -0.015304803848266602, -0.010085820220410824, 0.008997663855552673, 0.025656666606664658, 0.059414058923721313, 0.009119365364313126, -0.007826708257198334, 0.015954099595546722, -0.019890010356903076, 0.030356507748365402, 0.10235104709863663, 0.03842596709728241, -0.005057093221694231, -0.020318690687417984, 0.06415871530771255, -0.05403731390833855, 0.025052420794963837, -0.020698342472314835, -0.04409419000148773, 0.046719636768102646, 0.021799808368086815, -0.029124392196536064, -0.016415121033787727, 0.06024927273392677, -0.287159264087677, 0.017574390396475792, 0.03134356811642647, 0.06166622415184975, 0.02570854127407074, -0.0030852556228637695, 0.01179846003651619, -0.07823250442743301, -0.013313913717865944, 0.011093562468886375, 0.0443284772336483, 0.006984187755733728, -0.0008281317423097789, -0.04323343560099602, 0.04086684063076973, 0.08224376291036606, 0.12703770399093628, -0.00562171870842576, 0.006699823774397373, 0.0811304971575737, 0.0591626912355423, -0.011271975934505463, 0.15608033537864685, 0.05820315703749657, 0.06831806153059006, 0.0028090772684663534, 0.04052836075425148, -0.023703061044216156, 0.05432724207639694, 0.07048559188842773, 0.019431818276643753, -0.06308344751596451, 0.11264150589704514, 0.04438064619898796, -0.0011089848121628165, 0.009020774625241756, 0.01670464128255844, 0.06221834197640419, -0.010554707609117031, 0.016620637848973274, -0.021913431584835052, 0.05954444408416748, -0.046044182032346725, -0.05290849134325981, 0.037498150020837784, -0.007642864249646664, 0.013054229319095612, -0.04656139016151428, 0.01874789409339428, 0.016479695215821266, -0.046085868030786514, -0.0633237287402153, 0.014759457670152187, -0.022991716861724854, 0.018140261992812157, -0.00672680651769042, -0.011898815631866455, 0.0123268011957407, -0.014664439484477043, 0.03811463713645935, 0.05178309231996536, -0.04082433134317398, 0.09285656362771988, 0.032242488116025925, 0.032218098640441895], "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6c816bad-9dcf-4e5f-8fe9-8515f290e64a", "node_type": "4", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "74eaa45f6b8bfd17bfc1106c7a98f9728d85219084d4a91725c434c2d4bbc5f4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b9781c38-148a-4d22-8eeb-59db7c8ac386", "node_type": "1", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "95486bc2ff2d544123b431233a4429be2ce2fff58f80403d55573e8a108eb448", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f4bf5bd1-018e-40c7-ad34-c89118764c64", "node_type": "1", "metadata": {}, "hash": "175b5c4a9c1d4aceef6c39cb7615612697bfe6619cd29e432590ea96a7ec076b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "*   **GUI (Graphical User Interface):** A visual interface with windows, buttons, text fields, and images that you interact with using your mouse and keyboard.\n\nBoth serve the same purpose \u2013 showing information and getting input \u2013 but they do it in very different ways.\n\n#### 1. The CLI's Face: `CliView`\n\nIn the CLI version, the `CliView` class is the master of displaying text and reading what you type. It's like a helpful librarian who only communicates by talking and listening, without any fancy visuals.\n\n**`src/main/java/ui/cli/CliView.java` (Simplified)**\n```java\npackage ui.cli;\n\nimport domain.Book;\nimport java.util.List;\nimport java.util.Scanner;\n\npublic class CliView {\n\n    private final Scanner scanner; // A tool to read your keyboard input\n\n    public CliView() {\n        this.scanner = new Scanner(System.in); // Prepare the input reader\n    }\n\n    public void showResults(String query, List<Book> books) {\n        if (books.isEmpty()) {\n            System.out.println(\"\\n\u274c No results found for \\\"\" + query + \"\\\"\");\n            return;\n        }\n        System.out.println(\"\\n\u2705 Showing Top results for \\\"\" + query + \"\\\":\");\n        for (int i = 0; i < books.size() && i < 7; i++) { // Show up to 7 books\n            Book book = books.get(i);\n            System.out.printf(\"  [%d] %s by %s (Rating: %.1f)\\n\",\n                    i + 1, book.getTitle(), book.getAuthor(), book.getRating());\n        }\n    }\n\n    public String getSearchQuery() {\n        System.out.print(\"\\n\ud83d\udd0d Enter search query (or 'exit'): \");\n        return scanner.nextLine().trim(); // Read the entire line you type\n    }\n\n    // ... other methods for showing messages or getting choices ...\n}\n```\n*   The `showResults` method takes a list of `Book` objects (our digital index cards from Chapter 2) and prints their details one by one to the console.\n*   The `getSearchQuery` method prints a message asking for your input and then waits for you to type something and press Enter, returning your typed text.", "mimetype": "text/plain", "start_char_idx": 1960, "end_char_idx": 3952, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "f4bf5bd1-018e-40c7-ad34-c89118764c64", "embedding": [-0.09115353226661682, 0.01668218895792961, -0.05467068776488304, 0.04604698717594147, -0.014817491173744202, -0.00933702103793621, 0.014113732613623142, 0.02829241007566452, 0.014008530415594578, -0.04192875698208809, -0.03451631963253021, 0.027813443914055824, 0.03238654136657715, -0.008660953491926193, 0.006925745867192745, -0.009564965963363647, -0.027266966179013252, -0.04006073251366615, -0.01834203489124775, -0.03839278221130371, 0.04751836135983467, 0.036522917449474335, -0.01532819028943777, -0.08203757554292679, -0.035022422671318054, 0.04422608017921448, 0.011118574999272823, -0.0497862808406353, -0.03681180626153946, -0.18162943422794342, -0.01732703112065792, 0.02328234538435936, 0.09895157814025879, -0.019537007436156273, -0.04362298548221588, 0.007008891087025404, 0.012890182435512543, 0.0018904067110270262, -0.010209214873611927, -0.012702114880084991, 0.01913384348154068, 0.03714786097407341, -0.02191479504108429, 0.05349880829453468, -0.011630992405116558, -0.04452190548181534, 0.003456221194937825, -0.039495594799518585, 0.022566774860024452, 0.004994884133338928, -0.08612021803855896, -0.006063706241548061, 0.030319087207317352, -0.04919273406267166, 0.07065238058567047, 0.01301808375865221, 0.06751301139593124, 0.07639431208372116, -0.045056458562612534, -0.03035099431872368, 0.010257449932396412, -0.011535752564668655, -0.08319506794214249, 0.09932362288236618, 0.01298019289970398, 0.022639693692326546, 0.021288670599460602, -0.053031548857688904, 0.04621325433254242, 0.03504136949777603, -0.0023450031876564026, 0.0367758572101593, -0.027540890499949455, 0.061486199498176575, 0.049247633665800095, -0.05277790129184723, 0.0033477365504950285, -0.0190056711435318, 0.028818724676966667, -0.029539035633206367, -0.057257335633039474, -0.019456107169389725, 0.04657982289791107, -0.001282618730328977, -0.03586360067129135, 0.0305045023560524, 0.002584170550107956, 0.009688501246273518, 0.05327113717794418, -0.001309684244915843, 0.010306056588888168, -0.05118781700730324, -0.011274946853518486, 0.02733013778924942, -0.05211895704269409, -0.0119277099147439, -0.014033574610948563, 0.06922045350074768, 0.028474271297454834, 0.36291688680648804, -0.01678718626499176, 0.010039489716291428, 0.012903444468975067, -0.02365361526608467, -0.0028700607363134623, -0.023103918880224228, -0.0053836326114833355, 0.01782195456326008, -0.029440680518746376, -0.017553890123963356, -0.018547501415014267, -0.03496594354510307, 0.061249565333127975, -0.006918236147612333, -0.06768357753753662, 0.004934989381581545, -0.0015614267904311419, -0.008517224341630936, 0.012959671206772327, -0.01104664709419012, 4.196358713670634e-05, -0.03299636021256447, -0.004024206660687923, 0.010809930972754955, 0.04365331679582596, -0.02246425859630108, -0.04351712018251419, 0.03311698138713837, -0.0280900988727808, -0.023238226771354675, 0.020832952111959457, -0.03123663365840912, -0.08226364850997925, 0.01488022692501545, -0.008603748865425587, 0.034425195306539536, -0.030892938375473022, 0.006321858149021864, -0.0011790915159508586, 0.0027895024977624416, 0.012579018250107765, 0.021128777414560318, 0.053531158715486526, -0.03729844465851784, -0.09820698201656342, 0.07698594033718109, 0.022678742185235023, -0.007040250580757856, -0.03549494594335556, -0.07912734150886536, -0.025479871779680252, 0.07475394010543823, 0.00486826291307807, -0.021656319499015808, 0.014910542406141758, 0.07150143384933472, 0.08448886126279831, 0.05666878819465637, -0.048208124935626984, -0.05584324151277542, -0.08022624254226685, 0.005880740936845541, -0.024741830304265022, 0.10895559191703796, 0.0326075404882431, -0.08125898987054825, -0.061602719128131866, 0.028640728443861008, -0.10144124180078506, -0.02813357301056385, -0.024092163890600204, 0.03187587857246399, -0.07800190895795822, -0.011966753751039505, -0.005846236366778612, -0.00981108844280243, -0.06982318311929703, 0.04855692386627197, 0.054113756865262985, 0.01042575016617775, -0.012530995532870293, -0.04802319407463074, -0.013789313845336437, 0.023622771725058556, -0.011915094219148159, -0.01073196716606617, -0.034340012818574905, -0.02530493587255478, 0.005143749061971903, -0.005360078066587448, 0.002141352742910385, -0.0050803665071725845, 0.005822046659886837, 0.05547396093606949, 0.008388262242078781, -0.04684160649776459, -0.009896782226860523, -0.03349389135837555, 0.011389289051294327, -0.012581443414092064, 0.07508765161037445, 0.04389151185750961, -0.0362716019153595, 0.020017437636852264, -0.03374343365430832, 0.017024921253323555, 0.01761479675769806, -0.05116601660847664, 0.09911845624446869, -0.050647567957639694, -0.07400504499673843, 0.03075590543448925, 0.025728462263941765, -0.035508450120687485, -0.054777421057224274, -0.03692220523953438, -0.0035416327882558107, 0.02379962056875229, 0.0007254026713781059, 0.01784433051943779, -0.0648907795548439, -0.052309755235910416, -0.0067856572568416595, -0.3053189218044281, -0.0031128351110965014, -0.05496309697628021, 0.019360003992915154, 0.019009551033377647, -0.05513790622353554, 0.029033062979578972, -0.03537680581212044, 0.010349445976316929, 0.02800516039133072, 0.08262161910533905, -0.02993292734026909, -0.012898449786007404, -0.023061171174049377, -0.027060775086283684, -0.01744757778942585, 0.01679852232336998, -0.004938536789268255, -0.02122819796204567, -0.020528342574834824, 0.05289006233215332, -0.032442882657051086, 0.04223448038101196, -0.08767103403806686, 0.006883196998387575, 0.03693123906850815, 0.12282483279705048, 0.010333153419196606, 0.058572907000780106, -0.06494434922933578, 0.043217986822128296, 0.04366886243224144, -0.0754266008734703, -0.06469625234603882, 0.011582869105041027, 0.044682614505290985, -0.011563964188098907, 0.045041199773550034, 0.006177032832056284, 0.03206760808825493, 0.0009844336891546845, -0.010624472983181477, 0.031460706144571304, -0.026891173794865608, 0.013994869776070118, -0.014423591084778309, 0.011381716467440128, -0.10458529740571976, -0.006787555757910013, 0.0563846081495285, -0.02264971286058426, 0.035874515771865845, 0.023195946589112282, -0.008388086222112179, -0.011195491999387741, -0.04621982201933861, -0.011161806993186474, -0.05459432676434517, -0.017477083951234818, -0.06781400740146637, 0.08675259351730347, 0.01652449555695057, 0.0007544225081801414, -0.017485272139310837, 0.02105775848031044, -0.001053343410603702, -0.01987210474908352, 0.004856154788285494, 0.03828015178442001, -0.05656001344323158, -0.07171176373958588, 0.053323082625865936, 0.007399712689220905, 0.00504238810390234, 0.021743526682257652, 0.0715787410736084, 0.058795277029275894, -0.008548899553716183, -0.002510078251361847, -0.03837015479803085, 0.015107406303286552, 0.04568830877542496, 0.10048259794712067, -0.027929414063692093, -0.003344907658174634, 0.03727920353412628, 0.03962882608175278, -0.04095287621021271, 0.012558359652757645, -0.006461535580456257, -0.03361431881785393, 0.05032190680503845, 0.008142576552927494, -0.018238132819533348, 0.0022054193541407585, 0.03864721953868866, -0.2727409601211548, 0.00554128410294652, 0.0036179074086248875, 0.032300110906362534, -0.015613562427461147, -0.006116359960287809, 0.040990643203258514, -0.07302699238061905, 0.054703179746866226, 0.0023775286972522736, 0.013328319415450096, 0.027723683044314384, -0.014338547363877296, -0.0633925348520279, 0.03151663765311241, 0.0695931613445282, 0.07761608809232712, 0.021061843261122704, 0.033443633466959, 0.03241850808262825, 0.005481677129864693, 0.018084250390529633, 0.1659521460533142, -0.001357239088974893, 0.048583023250103, 0.011076556518673897, 0.017763793468475342, -0.04320494085550308, 0.07386714220046997, 0.02575804851949215, 0.0690334364771843, -0.059313733130693436, 0.12738379836082458, 0.010532526299357414, 0.011100196279585361, -0.044098109006881714, 0.006399261765182018, 0.050394147634506226, -0.042703449726104736, -0.022303324192762375, -0.018511610105633736, 0.050610437989234924, -0.04301838576793671, -0.002283056965097785, 0.037496183067560196, 0.013099897652864456, 0.011468100361526012, -0.027734052389860153, -0.028032779693603516, 0.04619942605495453, -0.0416092574596405, -0.02334822155535221, 0.04305616766214371, -0.004142557270824909, 0.03144965320825577, 0.02919805981218815, 0.00015338050434365869, 0.00021080259466543794, -0.03239468112587929, 0.0661361888051033, 0.03928207606077194, -0.007971818558871746, 0.12532366812229156, 0.04173403978347778, 0.030231602489948273], "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6c816bad-9dcf-4e5f-8fe9-8515f290e64a", "node_type": "4", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "74eaa45f6b8bfd17bfc1106c7a98f9728d85219084d4a91725c434c2d4bbc5f4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "987c144f-632d-4c55-b86d-a1ae65482ff7", "node_type": "1", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "5be060b1ff7be8d0cd098b0fa128968a0bf6e3fd9e6380780e4c2adad83fdf82", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "199a1bda-95df-4f7f-ba88-3de67c50d76d", "node_type": "1", "metadata": {}, "hash": "d177432fcc406aa7f5ff5996ec8ac026a4007a173ba49ca6090896f394bcb67f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "*   The `getSearchQuery` method prints a message asking for your input and then waits for you to type something and press Enter, returning your typed text.\n\n**Example CLI Interaction:**\n\n```\n\ud83d\udd0d Enter search query (or 'exit'): Java\n\n\u2705 Showing Top results for \"Java\":\n  [1] Clean Code by Robert C. Martin (Rating: 4.6)\n  [2] Effective Java by Joshua Bloch (Rating: 4.8)\n  ...\n\n--- Actions ---\n[F]ilter  [S]ort  [R]elated  [L]og Click  [C]lear Filters  [N]ew Search  [E]xit\nEnter command:\n```\nHere, `showResults` displays the books, and `getSearchQuery` (and `getActionPrompt` not shown here) are waiting for your next input.\n\n#### 2. The GUI's Face: JavaFX, FXML, and Controllers\n\nThe GUI version of DevShelf uses a technology called **JavaFX** to create beautiful windows, buttons, and other visual elements. Instead of just printing text, it draws everything.\n\nBuilding a GUI involves two main parts:\n\n1.  **FXML Files (The Blueprints):** These are special text files (like `.fxml` files) that describe *what* visual elements are on the screen and *how* they are arranged. Think of them as blueprints for a house, defining where the walls, windows, and doors go.\n    *   `MainView.fxml`: The blueprint for the main search window.\n    *   `BookCard.fxml`: The blueprint for how a single book entry looks in the search results list.\n    *   `BookDetailView.fxml`: The blueprint for a separate window showing full book details.\n\n2.  **Controller Classes (The Workers):** These are Java classes (like `.java` files in the `ui.gui.controllers` package) that act as the \"brains\" behind the FXML blueprints. They handle *what happens* when you click a button, *how to fill* a text field with data, and *how to respond* to your actions. Each FXML file typically has a corresponding controller.\n    *   `MainViewController.java`: Manages the main search window's behavior.\n    *   `BookCardController.java`: Manages how data from a `Book` object is displayed on a single book card.", "mimetype": "text/plain", "start_char_idx": 3797, "end_char_idx": 5768, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "199a1bda-95df-4f7f-ba88-3de67c50d76d", "embedding": [-0.021597573533654213, 0.011600539088249207, -0.0054051512852311134, 0.02131866291165352, -0.0024914590176194906, -0.013345463201403618, 0.0013122657546773553, 0.02155032567679882, 0.000479522772366181, 0.014103667810559273, -0.026317067444324493, -0.00075574591755867, 0.0005199701408855617, 0.04635141044855118, -0.01575063169002533, -0.04950312525033951, 0.0027441582642495632, 0.0225739236921072, 0.0170348659157753, 0.016186565160751343, 0.0382821261882782, 0.014949221163988113, -0.014845531433820724, -0.05582142993807793, -0.009014619514346123, 0.04646589607000351, -0.01873655430972576, -0.034330517053604126, -0.036308128386735916, -0.1766595095396042, -0.03167606145143509, -0.03976402431726456, 0.07637263834476471, 0.027062954381108284, -0.052185963839292526, -0.033949676901102066, 0.020813768729567528, 0.0350111685693264, 0.0224272720515728, -0.013232175260782242, 0.013292067684233189, -0.02891942858695984, 0.003750489791855216, 0.046173159033060074, 0.03259976953268051, 0.011176502332091331, 0.023088883608579636, -0.04424575716257095, 0.02641035057604313, -0.04261617362499237, -0.06643464416265488, -0.029079660773277283, 0.023074695840477943, -0.015252996236085892, -0.0023326699156314135, 0.013680847361683846, 0.048661909997463226, 0.04565855488181114, -0.057214293628931046, 0.0013286495814099908, 0.018447978422045708, -0.0459754504263401, -0.11258859932422638, 0.07303823530673981, -0.01060960441827774, 0.024476224556565285, 0.0022106191609054804, -0.030041716992855072, 0.04284196346998215, 0.04586010426282883, 0.003477005986496806, 0.053812287747859955, 0.008935609832406044, 0.042642831802368164, 0.03962200507521629, -0.0642441138625145, -0.007471243850886822, 0.021669995039701462, 0.011669636704027653, -0.025221243500709534, -0.05459453910589218, -0.04146691411733627, 0.0360640250146389, -0.029447967186570168, 0.014668469317257404, 0.037439487874507904, 0.017758216708898544, -0.024056509137153625, 0.03606504946947098, -0.0009048458305187523, 0.023049741983413696, -0.04347529262304306, -0.017438283190131187, 0.002743661869317293, -0.10059290379285812, -0.014761070720851421, -0.0030163030605763197, 0.014216948300600052, 0.02557562291622162, 0.35889604687690735, 0.018869347870349884, 0.02473825216293335, 0.005629140418022871, -0.02152935229241848, -0.02023405209183693, -0.06262518465518951, 0.03257608041167259, -0.024743670597672462, -0.04081866890192032, 0.038467176258563995, -0.014277284033596516, -0.03606972470879555, 0.02327592484652996, -0.030003495514392853, -0.023414475843310356, -0.010214248672127724, -0.03636131435632706, 0.016389556229114532, 0.01944192685186863, 0.03236369043588638, 0.029275992885231972, -0.012761933729052544, 0.014408819377422333, 0.03191232681274414, 0.05421266704797745, -0.018979471176862717, -0.019975319504737854, 0.06097956746816635, -0.045004963874816895, -0.031383439898490906, 0.05599771440029144, 0.006480836775153875, -0.10819102078676224, -0.004510767292231321, 0.005942994263023138, 0.04660499840974808, 0.0006466384511440992, 0.016607580706477165, 0.014599297195672989, -0.0018081809394061565, -0.008686365559697151, 0.05050143226981163, 0.0609806552529335, -0.04557792842388153, -0.08944293856620789, 0.10119500011205673, -0.006176887080073357, -0.03168141096830368, -0.015007011592388153, -0.006865331903100014, -0.009932169690728188, 0.10152582824230194, 0.008014457300305367, -0.021055687218904495, -0.01361098513007164, 0.045098140835762024, 0.02374212071299553, 0.01228957250714302, 0.006965300068259239, -0.0672157034277916, -0.047239936888217926, 0.05431399866938591, 0.004222839139401913, 0.08364251255989075, 0.03808887302875519, -0.09291023761034012, -0.02737285941839218, 0.02932916209101677, -0.11306332796812057, -0.025382505729794502, -0.050032783299684525, 0.02754686214029789, -0.07521751523017883, 0.0794680193066597, 0.03716794773936272, -0.024965401738882065, -0.03238721191883087, 0.09068182855844498, 0.01625112257897854, 0.02571175992488861, 0.02120671421289444, -0.05451597273349762, -0.03586390241980553, 0.015481909736990929, -0.004440306220203638, -0.03659212589263916, -0.021494433283805847, -0.0037571918219327927, -0.02018195204436779, -0.02011910453438759, -0.030984219163656235, -0.009502368047833443, -0.027868324890732765, 0.03070421889424324, -0.002046714536845684, -0.04875473305583, -0.015552249737083912, -0.032041698694229126, -0.01017433125525713, 0.04374071955680847, 0.047376733273267746, 0.07200666517019272, -0.055398546159267426, 0.03588622063398361, 0.01630178466439247, 0.008648292161524296, -0.02380269020795822, -0.03518003597855568, 0.014561341144144535, -0.06008385866880417, -0.05737858638167381, 0.005925171542912722, -0.04248419404029846, -0.05445461347699165, -0.039189960807561874, -0.02020544372498989, 0.013153532519936562, 0.06943201273679733, -0.0014927415177226067, 0.08941824734210968, 0.006508553400635719, -0.004554337356239557, 0.05407561734318733, -0.3363455533981323, 0.01034835446625948, -0.06727921962738037, -0.049598269164562225, 0.006047929171472788, -0.025260180234909058, -0.01097642071545124, -0.01074213720858097, -0.029601898044347763, -0.03433513268828392, 0.0728382021188736, -0.06389071047306061, -0.03201927989721298, 0.001489031477831304, -0.013849682174623013, 0.01000489667057991, 0.025528619065880775, -0.04209928214550018, -0.051799241453409195, -0.01760619878768921, 0.05061093717813492, -0.04578506201505661, 0.049595948308706284, -0.03580045700073242, 0.009819954633712769, 0.00091636145953089, 0.14552246034145355, 0.020163964480161667, 0.06818526238203049, -0.037696320563554764, 0.013089556246995926, 0.0730481669306755, -0.11506859213113785, -0.07628791034221649, -0.0035487839486449957, 0.003284207545220852, -0.07135297358036041, 0.0019313080701977015, -0.01135727297514677, 0.024834830313920975, 0.016261456534266472, 0.02540898695588112, 0.024045994505286217, -0.02970103733241558, -0.025635264813899994, -0.04342913627624512, 0.029288399964571, -0.07538365572690964, 0.021939294412732124, 0.0027968017384409904, -0.012235010042786598, -0.011538751423358917, -0.034849703311920166, 0.07019921392202377, 0.00549238920211792, -0.03909562900662422, -0.020775839686393738, -0.06045953184366226, -0.023075271397829056, 0.0104503920301795, 0.007697883993387222, 0.0812269076704979, -0.0067299725487828255, -0.0013130451552569866, 0.02603263221681118, -0.0027841583359986544, -0.016673823818564415, 0.03424776345491409, 0.057177115231752396, -0.04265143349766731, -0.06563270092010498, -0.014329982921481133, -0.01245169434696436, -0.0012588788522407413, 0.060138266533613205, 0.054295554757118225, 0.05264955759048462, -0.050517674535512924, 0.0362517274916172, -0.006021760404109955, -0.011870169080793858, 0.016577336937189102, 0.08645687252283096, 0.05333371460437775, 0.014989676885306835, 0.014500566758215427, 0.025448840111494064, -0.018909528851509094, 0.018694745376706123, -0.02477134019136429, -0.01906554214656353, 0.024969832971692085, 0.011959598399698734, 0.013614743016660213, 0.017800820991396904, 0.12214917689561844, -0.2702413499355316, 0.03514906391501427, -0.021487588062882423, 0.05414227768778801, -0.01865500584244728, -0.01605457067489624, 0.014415917918086052, -0.024772346019744873, 0.00255396100692451, -0.03333136811852455, -0.00988045334815979, -0.000935958931222558, 0.011117124930024147, -0.052015017718076706, 0.007426798809319735, 0.06308336555957794, 0.07106812298297882, 0.0011878306977450848, 0.06276535242795944, 0.04152807593345642, 0.02646167390048504, 0.04141809046268463, 0.14847812056541443, 0.018546704202890396, 0.03486613184213638, 0.010371294803917408, -0.008616073988378048, -0.025237098336219788, 0.05445809289813042, 0.045370765030384064, 0.05838657170534134, -0.05624418705701828, 0.1328093409538269, 0.01682046800851822, 0.0037226262502372265, -0.03487827628850937, 0.01955917850136757, 0.023870155215263367, 0.011093501932919025, -0.0035824317019432783, -0.0062247347086668015, 0.06043550744652748, -0.07490985840559006, -0.04855683818459511, 0.050068192183971405, -0.018122456967830658, -0.06260666251182556, 0.012498862110078335, -0.07744506001472473, -0.02447155863046646, -0.003848025342449546, -0.08031059801578522, 0.009290387853980064, -0.008623681962490082, 0.06480704993009567, 0.025928305462002754, -0.03811411187052727, -0.004605565685778856, -0.05467168986797333, 0.03945012390613556, 0.040032267570495605, 0.01806139387190342, 0.08128726482391357, 0.026325443759560585, 0.03500133007764816], "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6c816bad-9dcf-4e5f-8fe9-8515f290e64a", "node_type": "4", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "74eaa45f6b8bfd17bfc1106c7a98f9728d85219084d4a91725c434c2d4bbc5f4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f4bf5bd1-018e-40c7-ad34-c89118764c64", "node_type": "1", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "a0acd099e24253c6525f36fc6e3278cf5c36fbccef55c3c561494c917a7f1aee", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "771f83ca-46d6-4739-8b7d-e275480daa44", "node_type": "1", "metadata": {}, "hash": "e06d30da1a49ef5eb5e066a9251aeebc6d31114296699a7aac6829581f6265c7", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "*   `MainViewController.java`: Manages the main search window's behavior.\n    *   `BookCardController.java`: Manages how data from a `Book` object is displayed on a single book card.\n    *   `BookDetailController.java`: Manages the detailed view of a specific book.\n\nLet's see how these pieces work together to display search results.\n\n```mermaid\nsequenceDiagram\n    participant You\n    participant MainViewController\n    participant DevShelfService\n    participant BookCardController\n    participant GUI Window\n\n    You->>MainViewController: Type \"Java\" in search bar, press Enter\n    MainViewController->>DevShelfService: search(\"Java\")\n    Note over DevShelfService: Finds books matching \"Java\"\n    DevShelfService-->>MainViewController: Returns List<Book> (e.g., Clean Code, Effective Java)\n    loop For each Book in the list\n        MainViewController->>MainViewController: Load BookCard.fxml blueprint\n        MainViewController->>BookCardController: new instance\n        MainViewController->>BookCardController: setData(a Book object)\n        Note over BookCardController: Populates labels, loads cover image\n        BookCardController-->>MainViewController: Ready Book Card UI element\n        MainViewController->>GUI Window: Add Book Card to results list\n    end\n    MainViewController-->>GUI Window: Update status label\n    GUI Window-->>You: Display list of clickable Book Cards\n    You->>GUI Window: Click on \"Clean Code\" card\n    MainViewController->>MainViewController: Open BookDetailView for \"Clean Code\"\n```\n\nThis diagram shows that when you type a query in the GUI, the `MainViewController` (the brain of the main screen) asks the `DevShelfService` (our application's \"brain\" that knows how to search, introduced in Chapter 1) for results. Once it gets the `Book` objects back, it dynamically creates a visual \"card\" for each book using `BookCard.fxml` and `BookCardController`, and then displays these cards in the results area.\n\n### Displaying Search Results and Handling New Search (Code Examples)\n\nLet's look at how the GUI specifically implements the use case of displaying results and preparing for a new search.", "mimetype": "text/plain", "start_char_idx": 5586, "end_char_idx": 7722, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "771f83ca-46d6-4739-8b7d-e275480daa44", "embedding": [-0.05356917157769203, 0.042586348950862885, -0.014128686860203743, 0.06979282200336456, 0.01620492897927761, 0.027217352762818336, -0.026344796642661095, 0.0027871199417859316, 0.023430800065398216, 0.008892321959137917, 0.014056773856282234, -0.007191764190793037, 0.030944159254431725, 0.01874138042330742, -0.002194200176745653, -0.03603270277380943, -0.03216639161109924, 0.01489876490086317, 0.0015844000736251473, 0.0009545041830278933, 0.02835952304303646, 0.043196018785238266, 0.013408183120191097, -0.0704972892999649, 0.016027972102165222, 0.06062391400337219, -0.02074343152344227, -0.0394238643348217, -0.002041024388745427, -0.21416720747947693, -0.043057702481746674, 0.002681216225028038, 0.08971525728702545, -0.006584805436432362, -0.031300242990255356, -0.024250486865639687, 0.016380852088332176, 0.03484872356057167, 0.015284935012459755, 0.022754594683647156, 0.022884516045451164, 0.0008533428190276027, -0.0007825086358934641, 0.056777823716402054, 0.008989321067929268, 0.00443284772336483, -0.0061547947116196156, -0.05409533530473709, 0.028837021440267563, 0.001987810479477048, -0.05532044544816017, -0.05354280397295952, 0.007851894944906235, -0.004850757773965597, 0.030164189636707306, -0.005229317583143711, 0.040457624942064285, 0.02373121865093708, -0.09406445175409317, -0.0035461827646940947, 0.03762030601501465, -0.028328068554401398, -0.11118749529123306, 0.10513168573379517, 0.0031344040762633085, 0.022302821278572083, -0.009988135658204556, -0.019126329571008682, 0.03812876343727112, 0.07127695530653, -0.03650180995464325, 0.029000021517276764, -0.020529940724372864, 0.06336234509944916, 0.011924740858376026, -0.05233033001422882, 0.003233760828152299, -0.002096683718264103, -0.003868147963657975, -0.01433188933879137, -0.028849998489022255, -0.021264271810650826, 0.03573806583881378, -0.025336094200611115, -0.017336200922727585, 0.027233615517616272, 0.017688823863863945, 0.00897950865328312, 0.04986666142940521, 0.016007276251912117, 0.048795152455568314, -0.05369766429066658, -0.05058329552412033, 0.03271728754043579, -0.06922871619462967, -0.010147323831915855, -0.02887052111327648, 0.06643511354923248, 0.00815853476524353, 0.36804887652397156, -0.025044893845915794, 0.01400669477880001, 0.01098556723445654, -0.021760201081633568, -0.0018290434964001179, -0.028367863968014717, 0.010872678831219673, 0.006117113400250673, -0.025757430121302605, -0.0034407037310302258, -0.00798515509814024, -0.036797355860471725, -0.0059495959430933, -0.017697064206004143, -0.028829185292124748, -0.01251949928700924, -0.03859219700098038, -0.029210735112428665, 0.027353951707482338, 0.00417333422228694, 0.00951673835515976, -0.04202371835708618, -0.027626007795333862, 0.015865324065089226, 0.059922777116298676, -0.009525446221232414, -0.013522044755518436, 0.035304926335811615, -0.06334912776947021, -0.03188240900635719, 0.054046325385570526, -0.011013598181307316, -0.08470066636800766, -0.003542974591255188, 0.00027214130386710167, 0.07897575199604034, -0.009989979676902294, 0.028726935386657715, 0.007379230111837387, 0.012303272262215614, 0.006875036284327507, 0.01282732654362917, 0.04740104824304581, -0.0726516917347908, -0.09913128614425659, 0.10695964843034744, -0.026331190019845963, -0.07490738481283188, -0.042462971061468124, -0.02316553145647049, -0.0031268647871911526, 0.05399946868419647, -0.03700670972466469, -0.032395850867033005, -0.0041067935526371, 0.050677377730607986, 0.03317936509847641, -0.0017062773695215583, -0.043395914137363434, -0.07017075270414352, -0.06144876033067703, 0.05728556588292122, -0.025581179186701775, 0.07952560484409332, 0.04089728742837906, -0.1060790941119194, -0.054733552038669586, 0.05130557715892792, -0.05924351140856743, -0.04841068014502525, -0.029924113303422928, -0.006438742391765118, -0.09475132077932358, 0.03970771282911301, 0.02849884331226349, 0.0009613637812435627, -0.0326487235724926, 0.053318459540605545, 0.028233816847205162, 0.01712404005229473, 0.0397978238761425, -0.055061064660549164, -0.022810550406575203, -0.007363128010183573, -0.055197473615407944, -0.03155346214771271, -0.028145572170615196, 0.0012526193168014288, -0.02585778385400772, 0.004327916540205479, -0.02722514607012272, 0.001161338877864182, -0.028231702744960785, 0.04966935142874718, 0.003022887511178851, -0.018789198249578476, -0.009081186726689339, -0.03560122847557068, 0.026626786217093468, 0.023476434871554375, 0.08274706453084946, 0.054708536714315414, -0.014155391603708267, 0.018082953989505768, 0.0065210252068936825, 0.03773223236203194, 0.03364590182900429, -0.0773858055472374, 0.07532435655593872, -0.05052081122994423, -0.08784130960702896, 0.039686307311058044, 0.021506229415535927, -0.04494694992899895, -0.02359943836927414, -0.06189369410276413, -0.0042876279912889, 0.03401561826467514, -0.010450812987983227, 0.07274571806192398, 0.00527649512514472, -0.03078581392765045, 0.043800849467515945, -0.290823757648468, 0.005390128120779991, -0.06931380182504654, -0.02438226342201233, -0.03675561025738716, -0.01937258616089821, -0.006288816221058369, -0.02522616647183895, -0.02028850093483925, 0.02428003028035164, 0.06470905989408493, -0.03684988617897034, -0.026353418827056885, -0.041552942246198654, -0.010994977317750454, -0.054753441363573074, 0.010545525699853897, -0.02113610878586769, -0.03753640875220299, -0.021705837920308113, 0.052091147750616074, -0.011889411136507988, 0.05250681936740875, -0.05740809440612793, -0.009477533400058746, 0.03409849479794502, 0.10936521738767624, 0.007888544350862503, 0.05314601585268974, -0.0783180519938469, 0.0516846664249897, 0.03194192796945572, -0.07583646476268768, -0.06274167448282242, -0.0003744944406207651, 0.03996003419160843, -0.03317652642726898, 0.041853491216897964, -0.06195811927318573, 0.03170076385140419, 0.018886778503656387, -0.05510229989886284, 0.033388227224349976, -0.0027324128895998, -0.0063469382002949715, -0.048337679356336594, 0.03893664851784706, -0.08613451570272446, 0.00967407040297985, 0.04120150953531265, -0.00031798254349268973, 0.01795019954442978, -0.018391119316220284, 0.0675850585103035, -0.00019161646196153015, -0.06842504441738129, 0.02792096696794033, -0.05066667124629021, -0.011948628351092339, 0.0009393019718118012, 0.051966287195682526, 0.022453680634498596, 0.005635082256048918, -0.023066457360982895, 0.02810131572186947, 0.03664547577500343, 0.02824418991804123, -0.025668025016784668, 0.03103233501315117, -0.06515804678201675, -0.055277880281209946, 0.02226027101278305, -0.001684963353909552, 0.012507971376180649, 0.017203835770487785, 0.051908574998378754, 0.04356115311384201, 0.00045036731171421707, 0.058157600462436676, -0.005582776851952076, 0.014652601443231106, 0.048208367079496384, 0.11079854518175125, 0.015361671335995197, 0.009687589481472969, 0.03540653735399246, 0.03227096423506737, -0.044954098761081696, 0.017608631402254105, -0.010851881466805935, -0.02278406359255314, 0.03375251591205597, 0.002659496618434787, -0.00769768888130784, -0.00013977507478557527, 0.0542498454451561, -0.27183032035827637, 0.023469483479857445, 0.030223632231354713, 0.02706591784954071, -0.0387825071811676, -0.01093404833227396, 0.05033250153064728, -0.0633520781993866, 0.009894001297652721, 0.012191190384328365, -0.013567683286964893, 0.01657431200146675, 0.019463011994957924, -0.08505939692258835, -0.002690607914701104, 0.058039091527462006, 0.06475768983364105, 0.043438129127025604, 0.05605003610253334, 0.06667786091566086, 0.009602613747119904, 0.03843367099761963, 0.1769219934940338, 0.016290271654725075, 0.0383836105465889, -0.015173782594501972, -0.022514162585139275, -0.03446995094418526, 0.08231043070554733, 0.027723809704184532, 0.06541451066732407, -0.056156374514102936, 0.11212688684463501, 0.014260702766478062, -0.006299085449427366, -0.0514882430434227, -0.0026818192563951015, 0.022791346535086632, 0.0031055626459419727, -0.03268557786941528, -0.013415750116109848, 0.03962213173508644, -0.07936228066682816, -0.018433235585689545, 0.037405047565698624, 0.007820856757462025, 0.008301086723804474, -0.02422766573727131, -0.09502626955509186, 0.006074270233511925, -0.039580054581165314, -0.039864737540483475, 0.03397808223962784, 0.004775159060955048, 0.062011975795030594, -0.016910316422581673, -0.012717538513243198, 0.014204873703420162, -0.02883603237569332, 0.037328992038965225, 0.06351371854543686, 0.005212919786572456, 0.07493699342012405, 0.028568973764777184, 0.021616874262690544], "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6c816bad-9dcf-4e5f-8fe9-8515f290e64a", "node_type": "4", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "74eaa45f6b8bfd17bfc1106c7a98f9728d85219084d4a91725c434c2d4bbc5f4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "199a1bda-95df-4f7f-ba88-3de67c50d76d", "node_type": "1", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "af4118b0c7a10968f34b134f54484f809a5f574dca12336db062a0e0757e76a7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6dd184d9-dc36-424e-a9cd-e56e6b546852", "node_type": "1", "metadata": {}, "hash": "e1ad5800eb74bcefe74b57e41fa1fac36beb428fd1292100ffc1df4359afee3e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "### Displaying Search Results and Handling New Search (Code Examples)\n\nLet's look at how the GUI specifically implements the use case of displaying results and preparing for a new search.\n\n#### The Main Search Screen (`MainView.fxml` & `MainViewController.java`)\n\nThe `MainView.fxml` file defines the layout of our main search window, including the search bar, buttons, and the area where book results will appear.\n\n**`src/main/resources/ui/gui/fxml/MainView.fxml` (Snippet)**\n```xml\n<!-- ... other layout definitions ... -->\n<HBox alignment=\"CENTER\" spacing=\"10.0\">\n    <!-- The text field where you type your search -->\n    <TextField fx:id=\"searchField\" onAction=\"#handleSearch\" promptText=\"Search for books...\" />\n    <!-- The search button you can click -->\n    <Button fx:id=\"searchButton\" onAction=\"#handleSearch\" text=\" Search \ud83d\udd0d\" />\n</HBox>\n\n<!-- This is where our book cards will be displayed -->\n<ScrollPane fitToWidth=\"true\">\n    <VBox fx:id=\"resultsContainer\" spacing=\"10.0\" style=\"-fx-padding: 20;\">\n    </VBox>\n</ScrollPane>\n<!-- ... other layout definitions ... -->\n```\n*   `fx:id=\"searchField\"` gives the search box a name so our Java code can refer to it.\n*   `onAction=\"#handleSearch\"` means \"when the user presses Enter in this text field or clicks the search button, call the `handleSearch` method in the `MainViewController`.\"\n*   `fx:id=\"resultsContainer\"` is a special vertical box (`VBox`) where we will programmatically add all the individual `BookCard` elements.\n\nNow, let's look at the `MainViewController` which brings this FXML blueprint to life.", "mimetype": "text/plain", "start_char_idx": 7535, "end_char_idx": 9110, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "6dd184d9-dc36-424e-a9cd-e56e6b546852", "embedding": [-0.045781344175338745, 0.0018116439459845424, -0.03170531243085861, 0.008902367204427719, 0.002166753401979804, 0.010817046277225018, -0.03965015336871147, 0.049450475722551346, 0.01866433210670948, -0.025397883728146553, -0.013702143914997578, -0.02258048579096794, 0.01524424459785223, 0.028982123360037804, 0.010720116086304188, -0.03753574937582016, -0.025258110836148262, 0.013357259333133698, 0.016446011140942574, -0.023271577432751656, 0.06894030421972275, 0.03265918418765068, -0.03447815403342247, -0.02907727099955082, 0.00172870559617877, 0.06348565220832825, -0.028047317638993263, -0.034559447318315506, -0.015740783885121346, -0.21912425756454468, -0.04419548436999321, -0.04596302658319473, 0.07977599650621414, 0.003074366832152009, 0.00026629623607732356, -0.004720003344118595, 0.011942530050873756, 0.017905529588460922, 0.04143977910280228, -0.012993549928069115, 0.012926246039569378, 0.01787886954843998, -0.03727521002292633, 0.055042825639247894, 0.027142193168401718, -0.006812762934714556, -0.002146076876670122, -0.03635686635971069, 0.0475887767970562, 0.007430125959217548, -0.06943771243095398, -0.02319745160639286, -0.009750410914421082, -0.028772573918104172, 0.012600247748196125, 0.027179164811968803, 0.06957235932350159, 0.043799880892038345, -0.05096135288476944, -0.005073988810181618, -0.0010256431996822357, -0.008910823613405228, -0.10325334966182709, 0.08388973027467728, 0.010043787769973278, 0.017907297238707542, 0.018329603597521782, -0.037526316940784454, 0.029963811859488487, 0.04394006356596947, -0.016414424404501915, 0.045674748718738556, 0.0319826640188694, 0.01851595938205719, 0.025416364893317223, -0.07158486545085907, 0.01648467220366001, -0.012419324368238449, 0.037657156586647034, -0.018235953524708748, -0.028957031667232513, -0.012694275006651878, 0.04192967712879181, 0.01027013547718525, -0.013821410946547985, 0.051315486431121826, -0.0034555401653051376, -0.00803842581808567, 0.07616201043128967, 0.03773331642150879, 0.03469186648726463, -0.04269262030720711, -0.0035473641473799944, 0.03774314373731613, -0.09796557575464249, -0.024549173191189766, -0.024359116330742836, 0.03623323142528534, 0.013033422641456127, 0.4057493507862091, -0.028755303472280502, 0.008329512551426888, 0.028629418462514877, -0.009927349165081978, -0.016997896134853363, -0.030256250873208046, 0.005849110893905163, 0.008421008475124836, -0.020721912384033203, 0.007950587198138237, -0.028733618557453156, -0.050115637481212616, 0.0019912475254386663, -0.03451584279537201, -0.05434455722570419, -0.04027223214507103, -0.06993668526411057, -0.010457796044647694, -0.027691364288330078, 0.0199320986866951, 0.039159100502729416, -0.018695710226893425, 0.024469930678606033, 0.03439166396856308, 0.03539571911096573, -0.03275945037603378, -0.04522208496928215, 0.03213910385966301, -0.0588734894990921, -0.01614663377404213, 0.008847746066749096, -0.026433466002345085, -0.07551146298646927, -0.024217132478952408, 0.036700282245874405, 0.04664148390293121, 0.017415566369891167, 0.03618329390883446, -0.003125803079456091, 0.008481444790959358, 0.019578462466597557, 0.041225604712963104, 0.041918061673641205, -0.028427105396986008, -0.08747529983520508, 0.09104128926992416, 0.023347554728388786, -0.039048608392477036, -0.008082143031060696, -0.04237887263298035, -0.021234266459941864, 0.09889950603246689, -0.032901402562856674, 0.0063705528154969215, 0.020500674843788147, 0.047181807458400726, 0.040551118552684784, -0.0008761048666201532, -0.028073547407984734, -0.017041556537151337, -0.06292389333248138, 0.015050639398396015, -0.0006896298727951944, 0.0979660302400589, 0.03636409714818001, -0.07732833176851273, -0.03256550058722496, 0.048820752650499344, -0.08084062486886978, -0.02600427158176899, -0.04742163047194481, -0.011023841798305511, -0.05214870721101761, 0.025052795186638832, 0.019184544682502747, -0.017168298363685608, -0.05253257974982262, 0.0498419851064682, 0.047153230756521225, 0.011342252604663372, 0.013592132367193699, -0.06418319046497345, -0.03423377871513367, 0.021535636857151985, -0.03694293275475502, -0.040293000638484955, 0.0003826522151939571, -0.019341403618454933, -0.02194770611822605, -0.03723269701004028, -0.03223035857081413, 0.03145115450024605, -0.010567317716777325, 0.053063131868839264, 0.02534450590610504, -0.03305676206946373, -0.021969405934214592, -0.023768369108438492, 0.01511318888515234, -0.016318634152412415, 0.1061776876449585, 0.04995238035917282, -0.05795157700777054, 0.04658779874444008, -0.03191748261451721, 0.027104031294584274, -0.003044304670765996, -0.05267350748181343, 0.025104844942688942, -0.02021174691617489, -0.05558394640684128, 0.018467053771018982, 0.03444480523467064, -0.022483212873339653, -0.08099877834320068, -0.008139219135046005, -0.0023448222782462835, 0.03833436593413353, 0.010296686552464962, 0.03799792006611824, 0.006757236085832119, -0.012865057215094566, 0.020127462223172188, -0.3084433972835541, 0.0211750827729702, -0.06442873179912567, -0.054960787296295166, -0.009807023219764233, -0.03154020011425018, -0.012780938297510147, -0.03329494968056679, -0.02450357936322689, 0.02247031033039093, 0.10428176075220108, -0.04880501702427864, -0.027802089229226112, -0.05651533603668213, -0.03386492654681206, -0.04012078791856766, 0.0052312337793409824, -0.05535203963518143, -0.046492647379636765, -0.032506536692380905, -0.0033592311665415764, -0.025641217827796936, 0.012957788072526455, -0.0022343755699694157, 0.03714045137166977, 0.020994702354073524, 0.16736899316310883, -0.05053841322660446, 0.07875679433345795, -0.05998052656650543, 0.00418050866574049, 0.054414235055446625, -0.05997155234217644, -0.0436711385846138, -0.0018357585649937391, 0.04455694183707237, -0.03117656521499157, 0.024405313655734062, 0.020648255944252014, 0.05639057978987694, 0.032454781234264374, -0.026222631335258484, 0.0231876689940691, -0.061680879443883896, 0.019171999767422676, -0.07368737459182739, 0.010992747731506824, -0.11848167330026627, 0.02672930620610714, 0.056151606142520905, -0.005095817614346743, -0.01653408072888851, -0.0284833163022995, 0.06636177748441696, 0.003888526000082493, -0.032586660236120224, 0.01917126402258873, -0.015482485294342041, -0.022013669833540916, 0.00575882475823164, 0.05136037617921829, 0.06751146167516708, 0.013729183934628963, -0.021118681877851486, 0.035324614495038986, 0.014198379591107368, 0.01049026194959879, -0.012831269763410091, 0.036593664437532425, -0.049552399665117264, -0.047657258808612823, 0.014775993302464485, -0.011249881237745285, -0.009535273537039757, 0.040770187973976135, 0.07808982580900192, 0.022926151752471924, -0.014430933631956577, 0.030894817784428596, -0.011686639860272408, -0.01122299488633871, 0.029303472489118576, 0.10146669298410416, 0.008024252019822598, -0.02765396051108837, 0.028341693803668022, -0.009461313486099243, -0.010224292986094952, -0.015918105840682983, 0.018425649031996727, -0.02155761606991291, 0.0625968724489212, -0.01828579418361187, 0.026435380801558495, 0.07294266670942307, 0.03589853644371033, -0.2636052072048187, -0.015142833814024925, 0.04614536464214325, 0.03576365485787392, 0.0005900502437725663, 0.0033017639070749283, 0.04984141141176224, -0.06952060759067535, 0.02396545372903347, -0.019431762397289276, -0.00517928646877408, 0.019013291224837303, 0.024288052693009377, -0.04469345137476921, 0.02473071776330471, 0.06146061047911644, 0.051891449838876724, 0.01606990583240986, 0.06496960669755936, 0.02316492609679699, -0.021492496132850647, 0.023250911384820938, 0.13012416660785675, 0.010517214424908161, -0.013770692050457, 0.004958599340170622, -0.016918625682592392, -0.05015066638588905, 0.07555386424064636, 0.03608689084649086, 0.05434800311923027, -0.03616786748170853, 0.10636965185403824, 0.015412647277116776, 0.018010694533586502, -0.08242984861135483, -0.0015814092475920916, 0.03760656714439392, -0.003966107033193111, -0.025570640340447426, -0.012940511107444763, 0.03524509817361832, -0.050804946571588516, 0.00922287255525589, 0.024088045582175255, -0.011482632718980312, -0.06587845832109451, 0.003196858102455735, -0.07610700279474258, -0.020490195602178574, -0.049967020750045776, -0.04551716521382332, 0.02791394107043743, 0.0034516623709350824, 0.022546445950865746, 0.027923228219151497, -0.012790641747415066, 0.0051849908195436, -0.042501192539930344, 0.02600269578397274, 0.03686690330505371, 0.034651122987270355, 0.0742499828338623, 0.057616107165813446, 0.026684196665883064], "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6c816bad-9dcf-4e5f-8fe9-8515f290e64a", "node_type": "4", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "74eaa45f6b8bfd17bfc1106c7a98f9728d85219084d4a91725c434c2d4bbc5f4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "771f83ca-46d6-4739-8b7d-e275480daa44", "node_type": "1", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "0073048269529b89e43562810300fb22bc154f420dbfed106229b184af1b0adf", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "723b2ff8-1c88-4de9-af48-80e658c50c53", "node_type": "1", "metadata": {}, "hash": "af7c3ef5dead2ded32cc3f3e56373d153f3dbde945786ebce0befb681ee34ba2", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Now, let's look at the `MainViewController` which brings this FXML blueprint to life.\n\n**`src/main/java/ui/gui/controllers/MainViewController.java` (Simplified `handleSearch` and `displayBooks`)**\n```java\npackage ui.gui.controllers;\n\nimport domain.Book;\nimport javafx.fxml.FXML;\nimport javafx.fxml.FXMLLoader; // Essential for loading FXML blueprints\nimport javafx.scene.Node;     // A general UI element\nimport javafx.scene.layout.VBox;\nimport ui.gui.services.DevShelfService;\nimport ui.gui.services.DevShelfService.SearchResponse;\n\nimport java.io.IOException;\nimport java.util.List;\n\npublic class MainViewController {\n\n    @FXML private TextField searchField; // Connected to fx:id=\"searchField\" in FXML\n    @FXML private VBox resultsContainer; // Connected to fx:id=\"resultsContainer\"\n\n    private DevShelfService service; // Our application \"brain\" from Chapter 1\n\n    public void setService(DevShelfService service) { this.service = service; }\n\n    @FXML\n    private void handleSearch() {\n        String query = searchField.getText(); // Get text from the search field\n        if (query == null || query.trim().isEmpty()) return;\n\n        // 1. Ask the backend service (DevShelfService) for search results\n        SearchResponse response = service.search(query);\n\n        // 2. Clear old results and display the new ones\n        displayBooks(response.books);\n    }\n\n    private void displayBooks(List<Book> books) {\n        resultsContainer.getChildren().clear(); // Remove all previously displayed books\n\n        // Loop through the books we got back\n        for (Book book : books) {\n            try {\n                // 3. Load the blueprint for a single book card\n                FXMLLoader loader = new FXMLLoader(getClass().getResource(\"/ui/gui/fxml/BookCard.fxml\"));\n                Node card = loader.load(); // Create the visual card element\n\n                // 4. Get the controller for this new card\n                BookCardController cardController = loader.getController();\n\n                // 5. Tell the card controller to display this specific Book's data\n                cardController.setData(book);\n\n                // 6. Make the card clickable to show more details\n                card.setOnMouseClicked(e -> openDetailsView(book));\n\n                // 7.", "mimetype": "text/plain", "start_char_idx": 9025, "end_char_idx": 11306, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "723b2ff8-1c88-4de9-af48-80e658c50c53", "embedding": [-0.010655196383595467, 0.01692907139658928, -0.007885400205850601, 0.06418993324041367, -0.011879992671310902, -0.01358854677528143, -0.05575564131140709, -0.003020479576662183, 0.03814031183719635, 0.0176018588244915, -0.0004438958130776882, -0.02488473616540432, -0.004720411729067564, 0.06707096844911575, -0.013263624161481857, -0.02207791619002819, 2.753770058916416e-05, -0.017899101600050926, -0.02559848688542843, 0.014972512610256672, 0.04339252784848213, 0.03199407458305359, -0.0015211956342682242, -0.045219965279102325, -0.013086908496916294, 0.07586362212896347, -0.033181075006723404, -0.06663739681243896, -0.008499923162162304, -0.19843368232250214, -0.03388404846191406, -0.012658498249948025, 0.07133180648088455, 0.005688182543963194, -0.027688920497894287, -0.03786943480372429, 0.021209698170423508, 0.03397313877940178, 0.008954280987381935, 0.002039126120507717, -0.002122279955074191, 0.004256395157426596, -0.021327316761016846, 0.052269045263528824, 0.03015338070690632, -0.0063035874627530575, 0.027497876435518265, -0.01980091631412506, 0.10617532581090927, -0.050695572048425674, -0.04420456290245056, -0.021543627604842186, 0.026920579373836517, -0.029486874118447304, 0.01401406992226839, 0.003855187678709626, 0.019704025238752365, 0.015504472889006138, -0.01832232065498829, -0.01477998960763216, 0.029153531417250633, -0.017955414950847626, -0.07877898216247559, 0.10465893149375916, -0.015202558599412441, 0.03101767785847187, -0.040471676737070084, -0.0028975612949579954, 0.06579660624265671, 0.07540906965732574, 0.005021368153393269, 0.003651790786534548, 0.007776795886456966, 0.06466396898031235, 0.04348330572247505, -0.044663187116384506, 0.001644349773414433, 0.024919869378209114, 0.011412997730076313, 0.005919536110013723, -0.05865119770169258, -0.05648968741297722, 0.033467523753643036, -0.008332171477377415, 0.010766171850264072, 0.029948702082037926, 0.03775663673877716, -0.01793532632291317, 0.027229979634284973, 0.024184193462133408, 0.03786099702119827, -0.01714208535850048, -0.03975410759449005, 0.029441585764288902, -0.10795077681541443, -0.022746458649635315, -0.01355485338717699, 0.04875107482075691, 0.010047064162790775, 0.3536544442176819, -0.005413153674453497, 0.0016975606558844447, -0.016915319487452507, 0.018331142142415047, -0.06303679198026657, -0.03422040492296219, 0.02530573680996895, 0.023950813338160515, -0.031445927917957306, -0.024086659774184227, 0.0007473932928405702, -0.0312567763030529, -0.010231191292405128, -0.04130202531814575, 0.0014807673869654536, 0.04411349073052406, -0.03369025141000748, -0.01388537511229515, -0.013744519092142582, 0.024758130311965942, 0.003705180948600173, -0.0020311197731643915, -0.054871074855327606, 0.038654934614896774, 0.017804859206080437, -0.01582958921790123, 0.041087377816438675, 0.05106067284941673, -0.07003208994865417, -0.003468940267339349, 0.06070863828063011, -0.003254001261666417, -0.1338399350643158, -0.029888736084103584, -0.011029325425624847, 0.031976450234651566, 0.0038957931101322174, 0.050239138305187225, 0.018625877797603607, -0.0014488432789221406, 0.028017641976475716, 0.04408562555909157, 0.01813833974301815, -0.03956429287791252, -0.06766318529844284, 0.0868619978427887, 0.009725483134388924, -0.011819060891866684, -0.021019654348492622, -0.05763905122876167, 0.017940660938620567, 0.060365647077560425, -0.019676506519317627, 0.0016598283546045423, -0.017758410423994064, 0.03968241810798645, 0.08924447745084763, 0.0059310621581971645, -0.011101868003606796, -0.060011208057403564, -0.042438969016075134, 0.030417708680033684, -0.0013384181074798107, 0.09722685813903809, 0.011895810253918171, -0.0793292298913002, -0.030296551063656807, 0.05215557664632797, -0.09636679291725159, -0.05809350684285164, -0.05393911153078079, 0.03480643779039383, -0.055396031588315964, 0.08615395426750183, 0.05916528403759003, -0.030037157237529755, -0.0418212004005909, 0.056097887456417084, 0.03468160331249237, -0.0016327608609572053, 0.022990385070443153, -0.039144646376371384, -0.05063547194004059, -0.021557655185461044, -0.06301900744438171, -0.05825557932257652, -0.008555648848414421, -0.014008110389113426, -0.03868325427174568, 0.018198208883404732, -0.02710593119263649, 0.009515466168522835, -0.04710821062326431, 0.036922480911016464, -0.027655432000756264, -0.08543618768453598, -0.026096846908330917, -0.027322333306074142, 0.012233281508088112, -0.014419585466384888, 0.08853035420179367, 0.021113958209753036, -0.024020425975322723, 0.07090967148542404, 0.009253473952412605, 0.030752144753932953, -0.01791747659444809, -0.06492004543542862, 0.009525093249976635, -0.0381992906332016, -0.04787837713956833, 0.025126222521066666, -0.0274321511387825, -0.005982500500977039, -0.09395399689674377, -0.01779033988714218, -0.00825510174036026, 0.03984987363219261, -0.0018115201964974403, 0.009655277244746685, -0.01015311200171709, -0.05776272714138031, 0.08774033188819885, -0.3185030221939087, -0.006140133365988731, -0.055926185101270676, -0.040118999779224396, -0.03508872538805008, -0.04573852941393852, 0.004048183560371399, -0.00941061694175005, -0.013747946359217167, 0.04317084327340126, 0.053367991000413895, -0.05958643555641174, -0.014947849325835705, -0.013670540414750576, -0.019659359008073807, -0.02810525707900524, -0.013652823865413666, -0.027283525094389915, -0.019016031175851822, 0.010501889511942863, 0.03888529911637306, -0.043586235493421555, 0.03666599467396736, -0.032818399369716644, 0.04110809415578842, -0.008206396363675594, 0.15119457244873047, 0.019536836072802544, -0.013613604009151459, -0.06400448828935623, 0.031693100929260254, 0.06455908715724945, -0.12084674835205078, -0.06927752494812012, 0.012757986783981323, 0.015476631000638008, -0.0343453623354435, 0.04299910366535187, -0.019660813733935356, 0.029376456514000893, 0.03439124673604965, 0.011038458906114101, 0.02355656400322914, -0.044508375227451324, -0.0007258685654960573, -0.025656314566731453, 0.016850609332323074, -0.0517708882689476, 0.02580776810646057, 0.06411399692296982, -0.03621550649404526, -0.028489505872130394, -0.03009709343314171, 0.05737777426838875, 0.04751811549067497, -0.05028286203742027, 0.02652411162853241, -0.003252672962844372, -0.00030819486710242927, 0.03480556979775429, 0.0028512508142739534, 0.05571596696972847, -0.01885957643389702, -0.022740276530385017, 0.04426101595163345, 0.03526077792048454, -0.03687538951635361, -0.027780061587691307, 0.032881248742341995, -0.060542695224285126, -0.047814298421144485, -0.01457825768738985, 0.021398236975073814, 0.028988467529416084, 0.08902730792760849, 0.05632112920284271, 0.06604061275720596, -0.04626833647489548, 0.009625378996133804, -0.009919637814164162, -0.03548874706029892, 0.017905712127685547, 0.06689219176769257, 0.03286975622177124, -0.019636863842606544, 0.054273370653390884, 0.02560664713382721, -0.039131589233875275, -0.009702682495117188, -0.01592499203979969, -0.06127045303583145, 0.04094734042882919, 0.030588574707508087, 0.04334057494997978, 0.0183427594602108, 0.04534561559557915, -0.254349946975708, 0.001691304030828178, -0.027266988530755043, 0.027221983298659325, 0.0051172818057239056, -0.011416199617087841, 0.062117379158735275, -0.021975506097078323, 0.011397561989724636, -0.032973162829875946, -0.03928046301007271, 0.0026009934954345226, 0.01943255588412285, -0.05433481186628342, -0.017078666016459465, 0.05118156969547272, 0.04617570340633392, 0.025391265749931335, 0.05247644707560539, 0.03621163219213486, 0.01296639908105135, 0.02621169202029705, 0.1604429930448532, 0.05121835693717003, -0.024728750810027122, -0.017299415543675423, 0.0024184132926166058, -0.023103024810552597, 0.10155230760574341, 0.048307571560144424, 0.057859331369400024, -0.03511783108115196, 0.07982878386974335, 0.06527537852525711, 0.0055961585603654385, -0.017465004697442055, 0.027232414111495018, 0.04784075915813446, 0.008722570724785328, 0.0005667528603225946, -0.019596979022026062, 0.015948200598359108, -0.09910261631011963, -0.02385432831943035, 0.031496841460466385, 0.025469426065683365, -0.07630951702594757, 0.01849578134715557, -0.07650890201330185, -0.012623410671949387, 0.0005063910502940416, -0.07111544907093048, 0.02972736582159996, -0.04699835553765297, 0.04848574474453926, 0.011496465653181076, -0.02347162365913391, 0.023965686559677124, -0.01975192315876484, 0.07130901515483856, 0.013645201921463013, 0.005701976828277111, 0.06593093276023865, 0.02297915145754814, 0.006258172448724508], "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6c816bad-9dcf-4e5f-8fe9-8515f290e64a", "node_type": "4", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "74eaa45f6b8bfd17bfc1106c7a98f9728d85219084d4a91725c434c2d4bbc5f4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6dd184d9-dc36-424e-a9cd-e56e6b546852", "node_type": "1", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "b8f12284875f9b85b38c1b8ab9c982e786e40403c60f66ad13efdc9d0ec1e6e4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f19aed0e-b843-4710-a5dc-8d45520c9cd2", "node_type": "1", "metadata": {}, "hash": "46d5e5be3a34d6e5b0f94d9dd1100f445974200f1595ed3dc0beca1921ac04b0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Tell the card controller to display this specific Book's data\n                cardController.setData(book);\n\n                // 6. Make the card clickable to show more details\n                card.setOnMouseClicked(e -> openDetailsView(book));\n\n                // 7. Add the finished card to our results area\n                resultsContainer.getChildren().add(card);\n            } catch (IOException e) {\n                e.printStackTrace(); // Handle errors if the FXML can't be loaded\n            }\n        }\n    }\n\n    // ... other methods like openDetailsView ...\n}\n```\n*   When you type in `searchField` and press Enter, `handleSearch()` is called.\n*   It gets your `query` from the `searchField` and asks our `service` (the app's brain) to `search`.\n*   Then, `displayBooks` takes the list of `Book` objects.\n*   For each `Book`, it uses `FXMLLoader` to create a new \"Book Card\" based on the `BookCard.fxml` blueprint.\n*   It then finds the `BookCardController` for *that specific card* and calls its `setData` method to fill it with the `Book`'s details.\n*   Finally, it adds this newly created and populated card to the `resultsContainer`, making it visible on the screen.\n\n#### The Single Book Card (`BookCard.fxml` & `BookCardController.java`)\n\nEach book displayed in the search results is represented by a `BookCard`.", "mimetype": "text/plain", "start_char_idx": 11040, "end_char_idx": 12368, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "f19aed0e-b843-4710-a5dc-8d45520c9cd2", "embedding": [-0.04393387213349342, 0.021614307537674904, -0.010510577820241451, 0.06967195123434067, 0.018567677587270737, -0.01313102152198553, -0.07624677568674088, 0.0017768893158063293, 0.028772005811333656, 0.007800257299095392, -0.007190330419689417, -0.022128896787762642, 0.0077154915779829025, 0.04018165171146393, 0.0028898026794195175, -0.056425318121910095, 0.02570083737373352, 0.005762946791946888, 0.0043300436809659, -0.00016745651373639703, 0.07154613733291626, 0.011888882145285606, -0.000965369341429323, -0.05845214053988457, 0.0020322673954069614, 0.05162973329424858, -0.006385612767189741, -0.05242085084319115, -0.019288169220089912, -0.2205454409122467, -0.0330110527575016, 0.0346079058945179, 0.09207291901111603, 0.0021414365619421005, -0.02596406638622284, -0.023783624172210693, -0.0022894302383065224, 0.014599792659282684, 0.0067005399614572525, -0.014761743135750294, -0.00022475127479992807, 0.015393742360174656, -0.03490414097905159, 0.06891370564699173, 0.043986786156892776, -0.003671905491501093, -0.006842182949185371, -0.04397666081786156, 0.03394404798746109, 0.006100411526858807, -0.06209772080183029, -0.021176490932703018, 0.04134073480963707, -0.0056601883843541145, 0.010630042292177677, 0.018808875232934952, 0.009729546494781971, 0.032581478357315063, -0.05905983969569206, 0.01948082260787487, 0.016408298164606094, 0.0012253186432644725, -0.1031654104590416, 0.0859568864107132, 0.0001663505972828716, 0.034064121544361115, -0.04281893000006676, -0.004540604539215565, 0.009619158692657948, 0.06297898292541504, 0.01308328565210104, 0.019831353798508644, -0.025060413405299187, 0.03809817507863045, 0.04033002257347107, -0.024882016703486443, 0.01810346730053425, -0.005602978635579348, 0.0003670887090265751, 0.0064344387501478195, -0.0545128658413887, -0.025691673159599304, 0.02559760957956314, -0.02983102947473526, -0.008632420562207699, 0.035717934370040894, 0.04158566892147064, -0.04937104880809784, 0.024611791595816612, 0.0316941924393177, 0.004653346259146929, -0.04755500331521034, -0.0358707569539547, 0.02077193558216095, -0.0810428336262703, -0.05567228049039841, -0.04400475695729256, 0.04311789572238922, 0.007401291746646166, 0.4217436611652374, -0.006938242819160223, 0.017183279618620872, 0.030788574367761612, -0.014202428050339222, 0.006832856684923172, -0.03215594217181206, 0.04724042862653732, -0.017799684777855873, -0.010949229821562767, -0.035775747150182724, -0.04509706422686577, -0.0657261312007904, -0.013781505636870861, -0.03993826359510422, 0.010684429667890072, 0.04750077798962593, -0.0132783567532897, -0.004377414472401142, 0.04448671266436577, 0.020320314913988113, -0.01480782125145197, 0.04952219873666763, -0.034899692982435226, 0.04163338243961334, 0.04212101548910141, -0.019551008939743042, 0.017032772302627563, 0.04495181515812874, -0.030701523646712303, 0.03001406043767929, 0.03858533874154091, 0.012978573329746723, -0.062120068818330765, -0.05405181273818016, -0.01652592048048973, 0.07770208269357681, -0.029571203514933586, 0.044329069554805756, 0.026279503479599953, 0.011351893655955791, 0.024485046043992043, 0.045794859528541565, -0.0033603794872760773, -0.003449481911957264, -0.08651912212371826, 0.09338520467281342, 0.021456385031342506, -0.006926133297383785, -0.017129233106970787, -0.004506914410740137, 0.011650296859443188, 0.044167034327983856, -0.014064706861972809, 0.014994041994214058, -0.014886338263750076, 0.04703358933329582, 0.0472349114716053, -0.018734773620963097, -0.06467222422361374, -0.05787399038672447, -0.0016088353004306555, 0.04271769896149635, -0.029761210083961487, 0.10268402844667435, 0.021388595923781395, -0.11081971228122711, 0.0011863994877785444, 0.05158699303865433, -0.13047140836715698, -0.04946398362517357, -0.032377198338508606, -0.01640818454325199, -0.037173278629779816, 0.08593630790710449, 0.029365211725234985, -0.005503905937075615, -0.037758007645606995, 0.039524227380752563, 0.04660492762923241, -0.015705343335866928, 0.0029407173860818148, -0.0409066416323185, -0.06955195963382721, 0.00428134435787797, -0.03222692757844925, 0.004879748914390802, -0.06629275530576706, -0.029269976541399956, -0.008744574151933193, 0.025111008435487747, 0.009369357489049435, 0.00827841181308031, -0.03347979858517647, 0.044005464762449265, 0.0013776627602055669, -0.04450809955596924, -0.02559306100010872, -0.009122291579842567, -0.014269156381487846, -0.016595561057329178, 0.07881098240613937, 0.013449512422084808, -0.021931059658527374, 0.01588570326566696, 0.007027015555649996, -0.003225618042051792, -0.007842113263905048, -0.09090439230203629, -0.0046702600084245205, -0.017806118354201317, -0.05856496840715408, -0.0048464504070580006, -0.002148449420928955, -0.016983995214104652, -0.042047977447509766, -0.01619688607752323, 0.02677917294204235, 0.024592677131295204, 0.016927650198340416, 0.045446936041116714, 0.0028103694785386324, -0.054614223539829254, 0.03714780882000923, -0.29502108693122864, 0.03574289754033089, -0.08051178604364395, -0.03828511759638786, -0.037632714956998825, -0.031342100352048874, -0.006284164264798164, -0.012761980295181274, 0.004079187288880348, 0.05192802473902702, 0.04834252968430519, -0.062083806842565536, -0.05041668564081192, -0.022455668076872826, -0.05932534858584404, -0.007374211214482784, -0.014045676216483116, -0.007748253643512726, -0.04228198155760765, 0.01851760782301426, 0.015399038791656494, 0.005097510293126106, -0.007248585112392902, -0.033391617238521576, 0.04747287929058075, 0.019998835399746895, 0.15278777480125427, 0.02463299222290516, -0.012929708696901798, -0.025804825127124786, 0.017635103315114975, 0.045047610998153687, -0.07144927978515625, -0.02346203662455082, -0.011869982816278934, 0.04714116454124451, -0.02266927808523178, 0.0053961388766765594, -0.034544143825769424, 0.0028787569608539343, 0.00014364425442181528, 0.016004672273993492, 0.06775742024183273, -0.03537483140826225, -0.012513883411884308, -0.043505825102329254, 0.028900308534502983, -0.045051947236061096, 0.028893662616610527, 0.1024247482419014, 0.0020263956394046545, -0.028071366250514984, -0.02005770057439804, 0.06867652386426926, 0.04032143950462341, -0.026938604190945625, 0.031186511740088463, -0.036558639258146286, 0.008007187396287918, 0.015902575105428696, 0.018369244411587715, 0.02029237151145935, 0.03439737483859062, 0.00207917601801455, 0.0387333482503891, 0.020927423611283302, -0.03178968280553818, -0.021246986463665962, 0.04482949897646904, -0.017622187733650208, -0.06631297618150711, 0.016299046576023102, 0.005585142876952887, -0.021699484437704086, 0.06064113229513168, 0.030300352722406387, 0.03405922278761864, -0.00805009063333273, 0.029591254889965057, 0.006715282332152128, -0.01100399810820818, 0.04262245073914528, 0.07559234648942947, 0.004432239569723606, -0.00986714567989111, 0.011089627631008625, -0.015866879373788834, -0.04199719429016113, 0.008099832572042942, -0.011808419600129128, -0.04292963817715645, 0.05026409029960632, 0.0021298937499523163, 0.04859917610883713, 0.004887461196631193, 0.03194250911474228, -0.308626651763916, -0.00014507092419080436, -0.013128027319908142, 0.043605510145425797, -0.023638837039470673, 0.019300246611237526, 0.041200652718544006, -0.04311346635222435, -0.011857244186103344, -0.05498786270618439, -0.044175002723932266, -0.004628660622984171, 0.016173813492059708, -0.0912245512008667, -0.03272561728954315, 0.03978479281067848, 0.04250096529722214, -0.009020177647471428, 0.07297298312187195, 0.06275361776351929, 0.0069185895845294, 0.029668468981981277, 0.15215958654880524, 0.03378712013363838, -0.03551819920539856, -0.021081458777189255, 0.0034737640526145697, -0.026655809953808784, 0.06817757338285446, 0.050582822412252426, 0.056576959788799286, -0.04284113273024559, 0.08048683404922485, 0.027603721246123314, -0.02191479317843914, -0.05022711679339409, 0.021995363757014275, 0.023638775572180748, 0.010763322934508324, -0.009736825712025166, 0.011838363483548164, 0.033551979809999466, -0.06296318769454956, -0.055530305951833725, 0.005035048816353083, 0.00018409398035146296, -0.004362822510302067, 0.054657988250255585, -0.07520321756601334, -0.02678670920431614, 0.0056021250784397125, -0.016632817685604095, 0.007349453866481781, -0.0029773039277642965, 0.045004602521657944, 0.005094327963888645, -0.0417349636554718, 0.008971930481493473, -0.05483006685972214, 0.03856298327445984, 0.008261372335255146, 0.007330744992941618, 0.04027312248945236, 0.0754886269569397, 0.02152576483786106], "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6c816bad-9dcf-4e5f-8fe9-8515f290e64a", "node_type": "4", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "74eaa45f6b8bfd17bfc1106c7a98f9728d85219084d4a91725c434c2d4bbc5f4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "723b2ff8-1c88-4de9-af48-80e658c50c53", "node_type": "1", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "2ce1a77810f14b12cc58b6978cb39069e7f2c45c5c1e8f94370a74cf5c6a350e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "62b274ba-fc21-4473-bccb-a6f5ba6fa971", "node_type": "1", "metadata": {}, "hash": "ea09d6ee134536f5c2096ff73c9b16ae9bbe4193d140c709757f8a2a32acf6f1", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#### The Single Book Card (`BookCard.fxml` & `BookCardController.java`)\n\nEach book displayed in the search results is represented by a `BookCard`.\n\n**`src/main/resources/ui/gui/fxml/BookCard.fxml` (Snippet)**\n```xml\n<HBox alignment=\"CENTER_LEFT\" spacing=\"15.0\" style=\"...styling for a nice card effect...\"\n      xmlns=\"http://javafx.com/javafx/17\" xmlns:fx=\"http://javafx.com/fxml/1\"\n      fx:controller=\"ui.gui.controllers.BookCardController\">\n\n    <ImageView fx:id=\"coverImage\" fitHeight=\"100.0\" fitWidth=\"70.0\" />\n\n    <VBox spacing=\"5.0\" HBox.hgrow=\"ALWAYS\">\n        <Label fx:id=\"titleLabel\" text=\"Book Title\" />\n        <HBox spacing=\"10.0\" alignment=\"CENTER_LEFT\">\n            <Label fx:id=\"authorLabel\" text=\"Author Name\" />\n            <Label fx:id=\"ratingLabel\" text=\"4.7 \u2605\" />\n        </HBox>\n        <Label fx:id=\"tagsLabel\" text=\"tags: algorithms, java\" />\n    </VBox>\n</HBox>\n```\n*   This FXML describes a horizontal box (`HBox`) containing an image (`ImageView`) for the cover and a vertical box (`VBox`) holding labels for the title, author, rating, and tags.\n*   `fx:id` attributes are used to connect these visual elements to the `BookCardController`.", "mimetype": "text/plain", "start_char_idx": 12222, "end_char_idx": 13391, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "62b274ba-fc21-4473-bccb-a6f5ba6fa971", "embedding": [-0.0191448125988245, -0.011537659913301468, -0.02332252636551857, 0.027716999873518944, 0.009447273798286915, 0.008422589860856533, -0.03736831620335579, 0.03716689348220825, 0.030283421277999878, -0.0003554554423317313, -0.02454235777258873, -0.05459488183259964, 0.029487622901797295, 0.06517525017261505, -0.030883122235536575, 0.009392453357577324, 0.026530088856816292, 0.013805046677589417, -0.014408235438168049, -0.004909669980406761, 0.06128016486763954, 0.010452225804328918, 0.003146602539345622, -0.05825118348002434, -0.005561817903071642, 0.08255793899297714, 0.024203313514590263, -0.05381525307893753, -0.006736800540238619, -0.15931446850299835, 0.012984264642000198, -0.00682081887498498, 0.046083975583314896, 0.023370610550045967, -0.05308181419968605, -0.0025728081818670034, 0.005390332546085119, 0.0028974462766200304, 0.03948462754487991, -0.013921796344220638, -0.039942964911460876, -0.004930466413497925, -0.017135869711637497, 0.013919664546847343, 0.05893959850072861, 0.011192535050213337, -0.003220917657017708, -0.06501735001802444, 0.039065007120370865, 0.025351328775286674, -0.049385957419872284, -0.0066842976957559586, 0.026651185005903244, 0.0072151049971580505, -0.00030232357676140964, 0.0512361116707325, -0.0060933842323720455, -0.027438892051577568, -0.016079392284154892, 0.05460323393344879, 0.025784499943256378, 0.02091209962964058, -0.109768345952034, 0.08303509652614594, -0.007477741688489914, 0.05267858877778053, -0.015065193176269531, -0.005258732941001654, 0.008597276173532009, 0.06017286330461502, -0.026970351114869118, 0.04283634573221207, -0.009879831224679947, -0.004691008012741804, 0.03615627437829971, -0.05964061617851257, 0.0009193628211505711, 0.009828324429690838, 0.021311167627573013, 0.005113551858812571, -0.03468102589249611, -0.03020603582262993, 0.044327154755592346, -0.049696534872055054, 0.011688646860420704, 0.044879250228405, 0.05645202472805977, -0.061522744596004486, 0.033655211329460144, 0.030816974118351936, -0.0026045162230730057, -0.05349352955818176, -0.0061849006451666355, 0.0261332169175148, -0.08191387355327606, -0.02681923285126686, -0.06243109330534935, 0.03166298568248749, -0.03634880110621452, 0.3401472866535187, -0.06110779941082001, -0.061929553747177124, -0.013138179667294025, 0.009032990783452988, -0.033589426428079605, -0.046231020241975784, 0.015291310846805573, -0.005817223805934191, -0.05568201094865799, -0.007270304951816797, -0.03793436661362648, -0.06261028349399567, -0.018956730142235756, -0.018777359277009964, 0.004600119311362505, 0.022336892783641815, -0.00989211443811655, 0.022650720551609993, 0.0044042933732271194, -0.008862605318427086, 0.05338536947965622, 0.010009652003645897, -0.02838059514760971, 0.057598281651735306, 0.029377423226833344, -0.016588423401117325, 0.00830940343439579, 0.0521533377468586, -0.03995123878121376, 0.018879050388932228, 0.061187345534563065, -0.007414634805172682, -0.07546176016330719, -0.032788947224617004, -0.0005849006120115519, 0.09685900062322617, -0.0016539898933842778, 0.052064359188079834, 0.01334873866289854, -0.03563889116048813, 0.026752779260277748, 0.023129208013415337, -0.00963667407631874, 0.015492398291826248, -0.046203844249248505, 0.08075336366891861, 0.020365746691823006, 0.02506176009774208, -0.034809410572052, -0.031200924888253212, 0.057794537395238876, 0.0420282818377018, -0.0813336968421936, 0.04932620748877525, -0.02087300457060337, 0.028145233169198036, 0.0301066804677248, 0.007379674352705479, -0.03660421818494797, -0.027520829811692238, 0.00256294384598732, -0.007032440043985844, -0.0030154127161949873, 0.09160718321800232, 0.03445643186569214, -0.08566914498806, 0.02050621248781681, 0.01926952786743641, -0.1048106998205185, -0.025927476584911346, -0.058007508516311646, 0.032802581787109375, -0.050515614449977875, 0.08460027724504471, 0.05001885071396828, 0.009164000861346722, -0.029861243441700935, 0.03915606811642647, 0.03855882212519646, 0.012822317890822887, -0.006231792736798525, -0.036757368594408035, -0.08749327808618546, 0.010409661568701267, -0.05870760604739189, -0.02627829648554325, -0.05196090415120125, -0.022404702380299568, -0.035943154245615005, 0.004541566129773855, 0.019065948203206062, 0.025720087811350822, -0.04901354759931564, 0.06612028926610947, -0.012468245811760426, -0.04735627770423889, -0.02134275995194912, -0.00790250115096569, -0.02376602776348591, -0.0576292909681797, 0.08535272628068924, 0.028263593092560768, -0.007331680506467819, 0.03613992780447006, -0.017395712435245514, -0.017825497314333916, -0.01221881527453661, -0.0396139994263649, -0.020870428532361984, -0.01614333689212799, -0.05383723974227905, 0.0018010357161983848, -0.011707082390785217, -0.006016594357788563, -0.07459355145692825, 0.025287339463829994, 0.009428072720766068, -0.006060292478650808, 0.048766907304525375, 0.03918648138642311, 0.029275119304656982, -0.040129367262125015, 0.02377890609204769, -0.34829920530319214, 0.0657438412308693, -0.03508852422237396, -0.0527799129486084, -0.030802642926573753, -0.03856535628437996, -0.005685724318027496, 0.00318005564622581, -0.030452022328972816, 0.0671442374587059, 0.07688450068235397, -0.061898667365312576, -0.05410464107990265, -0.036135297268629074, -0.07907745242118835, 0.0027184635400772095, 0.0034683081321418285, -0.05097481235861778, 0.0027397158555686474, -0.006543486844748259, -0.024277713149785995, 0.004217916633933783, -0.029485320672392845, 0.00983621645718813, 0.05245295539498329, 0.008975268341600895, 0.16706590354442596, -0.0036746885161846876, -0.006878928747028112, -0.015941832214593887, 0.004735551308840513, 0.09145782887935638, -0.06874847412109375, -0.022390060126781464, 0.008159812539815903, -0.041785743087530136, -0.04247159883379936, 0.018927913159132004, -0.005210611503571272, 0.001008455059491098, 0.021132031455636024, -0.010911491699516773, 0.05127905681729317, -0.038252126425504684, 0.044601596891880035, -0.05946625769138336, 0.033903952687978745, -0.08049765229225159, 0.0195908360183239, 0.038575246930122375, 0.006009286735206842, 0.02326754294335842, -0.035249318927526474, 0.08532273769378662, 0.013911857269704342, -0.017609069123864174, 0.051487550139427185, -0.0022468119859695435, -0.021338818594813347, 0.019623493775725365, 0.022912897169589996, -0.010296476073563099, 0.04924289882183075, -0.029036948457360268, 0.03234728053212166, 0.00440669571980834, -0.04004114121198654, -0.053424153476953506, 0.04662613943219185, -0.001009073806926608, -0.04178620129823685, 0.025620710104703903, 0.044109780341386795, -0.011181744746863842, 0.08148138970136642, 0.005901713389903307, 0.0027370303869247437, -0.013074468821287155, 0.007303881458938122, 0.024713953956961632, -0.03039512224495411, 0.04607894644141197, 0.04018089547753334, 0.003941517788916826, 0.028340527787804604, 0.02386535331606865, -0.0026817861944437027, -0.02799137867987156, 0.028987232595682144, -0.0004368287918623537, -0.034781329333782196, 0.052916839718818665, -0.003313069697469473, 0.045089803636074066, 0.02133282646536827, 0.015463458374142647, -0.29847830533981323, 0.015802251175045967, -0.01420528907328844, 0.04140723869204521, -0.013195927254855633, -0.002099581528455019, 0.07663094252347946, -0.03797823563218117, -0.05998734384775162, -0.043797511607408524, -0.016961051151156425, -0.04180079326033592, 0.021906256675720215, -0.052459899336099625, -0.024648448452353477, 0.05066205933690071, 0.019304975867271423, -0.00995937455445528, 0.08287766575813293, 0.04400952160358429, 0.0033561531454324722, 0.0002721545461099595, 0.1590227484703064, 0.04181243106722832, -0.019245175644755363, -0.007231175899505615, -0.0043418509885668755, -0.007853253744542599, 0.11020119488239288, 0.09177866578102112, 0.05245737358927727, -0.012706407345831394, 0.12435778975486755, 0.025866491720080376, 0.004007447045296431, -0.08626886457204819, 0.013352756388485432, -0.003157114377245307, -0.03558926284313202, -0.008232921361923218, 0.010074050165712833, 0.06847384572029114, -0.06817926466464996, -0.028859317302703857, -0.01834116131067276, -0.032873790711164474, -0.023005131632089615, 0.0392666757106781, -0.05490243062376976, -0.017628535628318787, 0.02597156912088394, -0.040949638932943344, -0.036850981414318085, -0.0003168464172631502, 0.03716408088803291, 0.0036105893086642027, -0.00905541144311428, 0.02619866095483303, -0.08581872284412384, 0.04846017807722092, 0.01514458004385233, -0.008937150239944458, 0.04907680302858353, 0.08908037841320038, 0.007199023850262165], "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6c816bad-9dcf-4e5f-8fe9-8515f290e64a", "node_type": "4", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "74eaa45f6b8bfd17bfc1106c7a98f9728d85219084d4a91725c434c2d4bbc5f4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f19aed0e-b843-4710-a5dc-8d45520c9cd2", "node_type": "1", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "eae57dabd0cf03fa035ee3f994a0ba09e5f9616b56e09c136414c4a7e92fb5f1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3c5b83d3-51f4-454b-855b-131239aab46d", "node_type": "1", "metadata": {}, "hash": "4b0d0f6a7398c3bc936dfe9237076ac4edda9c3216aa4f4ee432da1f5a9ff544", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "*   `fx:id` attributes are used to connect these visual elements to the `BookCardController`.\n\n**`src/main/java/ui/gui/controllers/BookCardController.java` (Simplified `setData`)**\n```java\npackage ui.gui.controllers;\n\nimport domain.Book;\nimport javafx.fxml.FXML;\nimport javafx.scene.control.Label;\nimport javafx.scene.image.Image;\nimport javafx.scene.image.ImageView;\nimport java.util.List;\n\npublic class BookCardController {\n\n    @FXML private Label titleLabel;   // Linked to fx:id=\"titleLabel\"\n    @FXML private Label authorLabel;  // Linked to fx:id=\"authorLabel\"\n    @FXML private Label ratingLabel;  // Linked to fx:id=\"ratingLabel\"\n    @FXML private Label tagsLabel;    // Linked to fx:id=\"tagsLabel\"\n    @FXML private ImageView coverImage; // Linked to fx:id=\"coverImage\"\n\n    private static final String DEFAULT_IMG = \"https://via.placeholder.com/150x200?text=No+Cover\";\n\n    // This method is called by MainViewController to fill the card with data\n    public void setData(Book book) {\n        titleLabel.setText(book.getTitle());\n        authorLabel.setText(book.getAuthor() != null ? book.getAuthor() : \"Unknown\");\n        ratingLabel.setText(String.format(\"%.1f \u2605\", book.getRating()));\n\n        List<String> tags = List.of(book.getTag());\n        if (!tags.isEmpty()) {\n            tagsLabel.setText(\"tags: \" + String.join(\", \", tags));\n        } else {\n            tagsLabel.setText(\"\");\n        }\n\n        // Load the book's cover image from its URL\n        String url = (book.getCoverUrl() != null && !book.getCoverUrl().isEmpty())\n                ? book.getCoverUrl() : DEFAULT_IMG;\n        try {\n            coverImage.setImage(new Image(url, true)); // Load image from URL\n        } catch (Exception e) {\n            // If image loading fails, it will just show no image\n        }\n    }\n}\n```\n*   The `setData` method receives a `Book` object (our digital index card).\n*   It then takes the information from that `Book` (like its title, author, rating, and cover image URL) and uses it to update the corresponding `Label` and `ImageView` elements on the card.\n*   This is how the raw `Book` data is transformed into a visually appealing search result entry.", "mimetype": "text/plain", "start_char_idx": 13298, "end_char_idx": 15474, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "3c5b83d3-51f4-454b-855b-131239aab46d", "embedding": [-0.008318274281919003, 0.017042482271790504, 0.0015802915440872312, 0.04345444589853287, 0.04178439453244209, 0.003914589527994394, -0.07593563199043274, 0.018725808709859848, 0.022318366914987564, 0.02324736677110195, 0.004117482807487249, -0.02852829545736313, 0.01210854947566986, 0.050885964184999466, -0.021724192425608635, -0.01437287125736475, 0.03732812777161598, 0.011360229924321175, -0.05815831199288368, 0.01649966463446617, 0.054051026701927185, 0.029838664457201958, 0.04626334831118584, -0.060639094561338425, -0.01751825399696827, 0.06489795446395874, -0.013072305358946323, -0.04820386320352554, -0.009280314669013023, -0.18977564573287964, -0.017822710797190666, 0.003021561075001955, 0.06974221765995026, 0.0021793204359710217, -0.03350001573562622, -0.02642645873129368, -0.015619675628840923, 0.003344218246638775, 0.05193490535020828, -0.019758567214012146, -0.008837055414915085, 0.015052122063934803, -0.024785565212368965, 0.06895822286605835, 0.0013774873223155737, -0.020547106862068176, -0.00014842803648207337, -0.020430788397789, 0.05192942172288895, -0.009915065951645374, -0.09102533757686615, -0.020041149109601974, 0.037676505744457245, 0.008017376996576786, 0.0291240606456995, 0.018848661333322525, 0.02483951486647129, 0.03806170076131821, 0.0023071253672242165, 0.01960272528231144, 0.012458615936338902, -0.0017374586313962936, -0.10711440443992615, 0.0899585708975792, 0.02197166346013546, 0.019391469657421112, -0.017867080867290497, -0.03234272450208664, 0.0047835190780460835, 0.0209715124219656, -0.02626579813659191, 0.016097968444228172, -0.0040067811496555805, 0.03375881537795067, 0.037142861634492874, -0.07261002063751221, -0.008781990967690945, 0.011695509776473045, -0.0025416805874556303, -0.01416147779673338, -0.03943159803748131, -0.031730763614177704, 0.036497700959444046, -0.04915883019566536, 5.007807703805156e-05, 0.03353866562247276, 0.06250954419374466, -0.0392947755753994, 0.02936720848083496, 0.010381162166595459, 0.0024287039414048195, -0.0442306250333786, -0.013136137276887894, 0.016751520335674286, -0.07923498004674911, 0.003990726545453072, -0.04364118352532387, 0.05316166579723358, 0.07960502803325653, 0.3304227590560913, -0.07462884485721588, 0.006954391486942768, -0.01067344844341278, -0.02350734733045101, 0.009971849620342255, -0.05547605827450752, 0.04060152918100357, -0.002807971090078354, -0.021426409482955933, 0.0007237503887154162, -0.01085615810006857, -0.046124719083309174, -0.007808380294591188, -0.03260457515716553, -0.0023152159992605448, 0.003281950019299984, -0.0311955027282238, 0.013262208551168442, -0.004545977804809809, -0.01122413668781519, 0.042147621512413025, 0.03735869377851486, -0.03688719496130943, 0.037104275077581406, 0.041419655084609985, 0.005248599220067263, 0.01555217057466507, 0.028690097853541374, -0.006992477923631668, 0.000555974489543587, 0.04000658914446831, -0.003827990498393774, -0.11010809242725372, -0.01463915966451168, -0.01212287601083517, 0.056793294847011566, -0.0004483026859816164, 0.004690850619226694, 0.007595145143568516, 0.006851714104413986, 0.02696193754673004, 0.04200277477502823, -0.002542709931731224, 0.0037338375113904476, -0.09243880212306976, 0.10632406175136566, 0.02224241942167282, 0.018933236598968506, -0.020665565505623817, -0.0396927073597908, 0.007317947223782539, 0.0810389295220375, -0.024792715907096863, -0.02841665782034397, 0.0017288225935772061, 0.038852792233228683, 0.04776516184210777, 0.040429696440696716, -0.054055552929639816, -0.060455501079559326, -0.02091038040816784, 0.015575372613966465, 0.011576239950954914, 0.09801144152879715, -0.005417591892182827, -0.06775227934122086, -0.03863342106342316, 0.0453018918633461, -0.1097160205245018, -0.026690773665905, -0.04105602577328682, -0.018351249396800995, -0.10117524117231369, 0.05413077026605606, 0.045709047466516495, 0.017776858061552048, -0.013107743114233017, 0.004753751680254936, 0.018143391236662865, -0.03362071514129639, 0.027032554149627686, -0.061813391745090485, -0.06733041256666183, 0.033671796321868896, -0.053983233869075775, -0.04887755960226059, -0.06890763342380524, -7.112798630259931e-05, -0.023032648488879204, 0.05297110602259636, 0.0009975660359486938, 0.019823184236884117, -0.003960421308875084, 0.025468735024333, 0.023925360292196274, -0.04862689599394798, -0.024429410696029663, 0.0009300755336880684, -0.04646151885390282, -0.007051076274365187, 0.055297862738370895, 0.021569538861513138, -0.06527677178382874, 0.0310166385024786, -0.02956482768058777, 0.013129075057804585, 0.018406378105282784, -0.062061138451099396, 0.04661628231406212, -0.008479521609842777, -0.07398100942373276, 0.029260598123073578, -0.057882729917764664, -0.03720112517476082, -0.06023836508393288, -0.032835833728313446, 0.02716040425002575, 0.05166478455066681, -0.020936323329806328, 0.05493113026022911, -0.023561451584100723, -0.041523706167936325, 0.020390767604112625, -0.32029294967651367, 0.04417373239994049, -0.029893511906266212, -0.07243642956018448, 0.00013321309234015644, -0.03554866835474968, 0.0024485697504132986, -0.021125907078385353, 0.03196023032069206, 0.030067386105656624, 0.11322157829999924, -0.03704095259308815, -0.07144702970981598, -0.025271011516451836, -0.027825279161334038, -0.04161038249731064, 0.010572904720902443, -0.02019193023443222, -0.03941480815410614, -0.032869286835193634, 0.02165742591023445, -0.004087739158421755, -0.019012195989489555, -0.06296569108963013, 0.016542887315154076, 0.009606577455997467, 0.1394929438829422, 0.0039034842047840357, 0.026714419946074486, -0.07277122884988785, 0.035763196647167206, 0.0687827616930008, -0.11001677066087723, -0.06414838880300522, -0.01961577497422695, 0.005104145035147667, -0.03168097510933876, 0.0314631462097168, -0.0285496786236763, -0.0007033845758996904, 0.05822060629725456, 0.002023009117692709, 0.042501673102378845, -0.04043300077319145, -0.012051532976329327, -0.011879388242959976, 0.03985127806663513, -0.041053712368011475, 0.05274488404393196, 0.06966407597064972, -0.021395543590188026, 0.015133166685700417, -0.01605992391705513, 0.09488900750875473, 0.020483558997511864, -0.033083848655223846, 0.012251365929841995, -0.030665487051010132, -0.0004288125201128423, -0.041695937514305115, 0.036002982407808304, 0.010355712845921516, 0.013896510004997253, -0.013642332516610622, 0.03284711018204689, -0.01422141119837761, -0.06336086243391037, -0.03715650364756584, 0.03212619200348854, -0.04189393296837807, -0.08284563571214676, -0.019346928223967552, 0.005705372430384159, -0.006430981680750847, 0.07259391248226166, 0.07763362675905228, 0.04110473021864891, -0.01888788864016533, 0.0006225765682756901, -0.007319419179111719, -0.01030126865953207, 0.047960955649614334, 0.04518911987543106, -0.014229318127036095, 0.010348348878324032, 0.03148779273033142, -0.00025644488050602376, -0.07151255756616592, -0.014093085192143917, 0.030898818746209145, -0.03813266009092331, 0.013157885521650314, 0.02610635757446289, 0.01095117162913084, 0.017448240891098976, 0.059406936168670654, -0.3022303581237793, 0.005298597272485495, -0.010036331601440907, 0.04184691980481148, 0.022605251520872116, -0.0255889892578125, 0.057011909782886505, -0.014482928439974785, 0.013252227567136288, -0.013393828645348549, -0.05201469361782074, -0.010488597676157951, 0.01599515788257122, -0.08398258686065674, 0.010776752606034279, 0.059358902275562286, 0.09533508867025375, 0.010316569358110428, 0.0696207657456398, 0.07720674574375153, 0.01349868904799223, 0.0029886532574892044, 0.16244906187057495, 0.05409569293260574, 0.03129790723323822, 0.007025467697530985, -0.0008917634258978069, -0.047561392188072205, 0.07090305536985397, 0.08064631372690201, 0.08792322874069214, -0.04729808121919632, 0.08472584187984467, 0.06413667649030685, -0.019277408719062805, -0.03751634433865547, 0.014087401330471039, 0.005468463990837336, 0.019097497686743736, 0.002163591329008341, 0.01301877573132515, 0.042305003851652145, -0.04846252501010895, -0.022665951400995255, 0.03384393826127052, 0.009201569482684135, 0.0011374069144949317, -0.002213026164099574, -0.07278214395046234, -0.02313624881207943, 0.0057480777613818645, -0.008544656448066235, 0.03213248774409294, -0.00014926822041161358, 0.06476862728595734, 0.01980721391737461, -0.008384046144783497, 0.008252783678472042, -0.0770258679986, 0.052330758422613144, 0.011785735376179218, -0.00731766689568758, 0.021949250251054764, 0.050786543637514114, 0.016653627157211304], "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6c816bad-9dcf-4e5f-8fe9-8515f290e64a", "node_type": "4", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "74eaa45f6b8bfd17bfc1106c7a98f9728d85219084d4a91725c434c2d4bbc5f4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "62b274ba-fc21-4473-bccb-a6f5ba6fa971", "node_type": "1", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "94ae74dae23becc51bdd17f03fa444acce9d987435641163281535909f4b5691", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d1d4dd88-de94-4f62-8908-249ae9a9ee9a", "node_type": "1", "metadata": {}, "hash": "dda069ccd0a4f8ab680778081a2eac13bd7a74dd90c587ea84728a3aa10ab18d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "*   This is how the raw `Book` data is transformed into a visually appealing search result entry.\n\n#### The Book Detail View (`BookDetailView.fxml` & `BookDetailController.java`)\n\nWhen you click on a `BookCard`, DevShelf opens a new window (`BookDetailView.fxml`) to show all the details of that specific book.\n\n**`src/main/java/ui/gui/controllers/BookDetailController.java` (Simplified `setBookData`)**\n```java\npackage ui.gui.controllers;\n\nimport domain.Book;\nimport javafx.fxml.FXML;\nimport javafx.scene.control.Label;\nimport javafx.scene.image.ImageView;\nimport javafx.scene.text.Text;\n\npublic class BookDetailController {\n\n    @FXML private ImageView largeCoverImage;\n    @FXML private Label fullTitle;\n    @FXML private Label authors;\n    // ... other labels for category, rating, progLang ...\n    @FXML private Text descriptionText;\n\n    private Book book;\n\n    // This method is called when the details window opens\n    public void setBookData(Book book, /* ... other context ... */) {\n        this.book = book;\n        fullTitle.setText(book.getTitle());\n        authors.setText(book.getAuthor());\n        descriptionText.setText(book.getDescription());\n        // ... set other labels ...\n\n        String url = (book.getCoverUrl() != null && !book.getCoverUrl().isEmpty())\n                     ? book.getCoverUrl()\n                     : \"https://via.placeholder.com/150x200?text=No+Cover\";\n        largeCoverImage.setImage(new Image(url, true)); // Set larger cover image\n    }\n\n    @FXML\n    private void handleBack() {\n        // Code to close this window and go back to the previous screen\n    }\n\n    @FXML\n    private void handleRead() {\n        // Code to open the book's download link in a web viewer\n    }\n}\n```\n*   Similar to `BookCardController`, `BookDetailController.setBookData` takes a `Book` object and populates all the labels and the large cover image on the detailed view.\n*   This provides a richer view of the book information that you saw briefly in the search results.", "mimetype": "text/plain", "start_char_idx": 15377, "end_char_idx": 17376, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "d1d4dd88-de94-4f62-8908-249ae9a9ee9a", "embedding": [-0.056481145322322845, 0.025556106120347977, 0.004118100740015507, 0.0383601114153862, 0.042205262929201126, 0.026714438572525978, 0.0011308605317026377, 0.012867391109466553, 0.0014051847392693162, -0.02384745143353939, -0.061773624271154404, -0.008941582404077053, 0.043707963079214096, 0.02080455794930458, 0.012987205758690834, -0.03257796913385391, -0.0136095080524683, -0.05494571477174759, -0.006554729770869017, -0.026879269629716873, 0.06421171128749847, 0.006394336931407452, -0.01025666669011116, -0.08537416905164719, -0.0433347225189209, 0.07390987873077393, 0.009911470115184784, -0.042535364627838135, 0.023937663063406944, -0.1962786167860031, 0.01157019566744566, 0.04525268077850342, 0.0825861319899559, -0.037488751113414764, -0.07076480984687805, -0.02324725314974785, 0.021756228059530258, -0.011499578133225441, -0.017506910488009453, -0.040651846677064896, 0.023992370814085007, 0.020195428282022476, 0.029340865090489388, 0.040866535156965256, -0.013330001384019852, -0.049020376056432724, -0.01260829996317625, -0.0031484526116400957, 0.005507786758244038, 0.006485816556960344, -0.061323557049036026, -0.02726800926029682, 0.057946883141994476, -0.019089382141828537, 0.052873630076646805, 0.02812664397060871, 0.04489956051111221, 0.08567782491445541, -0.04608609899878502, 0.003646478522568941, -0.0029112952761352062, -0.013923308812081814, -0.13184142112731934, 0.08557730168104172, 0.038181379437446594, 0.01480708085000515, 0.01623658277094364, -0.04628036543726921, 0.002688491018489003, -0.028850305825471878, -0.03491075336933136, -0.002504147356376052, -0.005045246798545122, 0.016914473846554756, 0.0422845333814621, -0.0898498147726059, 0.009175796993076801, -0.027568526566028595, 0.0021657794713974, -0.02227780595421791, -0.03713449463248253, 0.016559483483433723, 0.008736548945307732, -0.008852967992424965, -0.007828691974282265, 0.03582333028316498, 0.029226331040263176, -0.005279874894768, 0.02035684511065483, -0.031697265803813934, -0.014995814301073551, -0.05616486445069313, 0.019306544214487076, 0.028504977002739906, -0.02310289815068245, 0.01907435618340969, 0.015425287187099457, 0.017839549109339714, -0.01690296269953251, 0.4055074453353882, -0.01323897298425436, -0.049840494990348816, 0.030761992558836937, -0.026066867634654045, 0.0518948920071125, 0.01770499162375927, 0.017208311706781387, -0.011382374912500381, -0.0271176565438509, 0.03127966821193695, -0.024214597418904305, -0.027318142354488373, -0.02183452434837818, 0.024430498480796814, -0.07040413469076157, -0.004999786615371704, 0.00677386624738574, 0.002055934863165021, 0.04793713986873627, -0.02913258597254753, 0.04164912551641464, -0.021183881908655167, 0.0051736230961978436, 0.006669588387012482, 0.041101809591054916, -0.03962032124400139, -0.01612512581050396, 0.011254779994487762, -0.03066462278366089, 0.0027159249875694513, 0.03538035228848457, 0.000348839967045933, -0.08765061944723129, 0.019000712782144547, 0.026887020096182823, 0.0389116108417511, -0.01830996386706829, -0.013061659410595894, -0.006684909109026194, 0.02245613932609558, 0.03540525957942009, 0.01508429553359747, 0.02510237693786621, -0.031837135553359985, -0.07871372997760773, 0.10111667960882187, -0.009026863612234592, -0.010739450342953205, -0.028226301074028015, -0.015183379873633385, -0.003670313861221075, 0.0678725466132164, -0.026744386181235313, 0.0004734841058962047, -0.028609825298190117, 0.049061428755521774, 0.0642404854297638, 0.04265282675623894, -0.0354679711163044, -0.007869375869631767, -0.045472659170627594, 0.0032836166210472584, -0.014752342365682125, 0.09156785160303116, 0.01492360606789589, -0.09117604047060013, -0.04897143691778183, 0.05911283195018768, -0.06644660979509354, -0.04593527317047119, -0.03856552764773369, -0.005460930988192558, -0.039277322590351105, -0.027098048478364944, 0.015846921131014824, 0.007326939608901739, -0.043587300926446915, 0.024617014452815056, 0.0555737242102623, 0.04825276881456375, 0.010959071107208729, -0.03927528113126755, -0.0363282710313797, 0.012204728089272976, -0.022344915196299553, 0.00023338884057011455, -0.04419007524847984, -0.018996549770236015, 0.004612152464687824, 0.05304337665438652, -0.03336440026760101, -0.011964766308665276, -0.0254819355905056, 0.06646004319190979, -0.008203799836337566, -0.032318372279405594, -0.023321038112044334, -0.03296792879700661, -0.03407995030283928, -0.015775587409734726, 0.02344351075589657, 0.06484978646039963, -0.035017821937799454, 0.022388432174921036, -0.050307031720876694, -0.015866732224822044, -0.023609858006238937, -0.059537045657634735, 0.0961095467209816, -0.03350326791405678, -0.07685808092355728, 0.013545759953558445, 0.05761699378490448, -0.016090014949440956, -0.026358677074313164, -0.005775469820946455, -0.010680289939045906, 0.025992345064878464, -0.012640655972063541, 0.04542848467826843, -0.04070955887436867, -0.0017310710391029716, -0.012690081261098385, -0.29323285818099976, 0.015855761244893074, -0.016142940148711205, -0.016573665663599968, -0.01623266376554966, -0.06726910918951035, 0.06745093315839767, -0.007135670632123947, 0.0018284132238477468, 0.014534288085997105, 0.07598670572042465, -0.02391042932868004, -0.05652736499905586, -0.0162685327231884, -0.015990449115633965, 0.0060637155547738075, 0.04907343164086342, -0.02616346813738346, -0.08747679740190506, -0.015474979765713215, 0.015048091299831867, -0.018801994621753693, 0.04307413846254349, -0.05280323699116707, -0.026673967018723488, 0.005857735872268677, 0.09994718432426453, -0.01599854603409767, 0.10505369305610657, -0.015264954417943954, 0.05641192942857742, 0.0588347390294075, -0.08613546937704086, -0.067512646317482, 0.013007917441427708, 0.03740575909614563, -0.0388229563832283, -0.005638892762362957, -0.016163887456059456, 0.02726973220705986, 0.009483584202826023, -0.04424475505948067, 0.043172337114810944, -0.040697332471609116, 0.007499185390770435, -0.045625634491443634, 0.010498333722352982, -0.1115112379193306, -0.022514814510941505, 0.028136106207966805, -0.023278258740901947, 0.012828168459236622, -0.016478653997182846, 0.027759768068790436, -0.03154461458325386, -0.019228782504796982, 0.00645859818905592, -0.030674472451210022, -0.021144596859812737, -0.057738516479730606, 0.06876935809850693, -0.003163389628753066, 0.0008066572481766343, -0.046595700085163116, 0.011988064274191856, 0.01922306977212429, -0.033566031605005264, -0.03694186732172966, 0.04756743088364601, -0.027002351358532906, -0.06666974723339081, 0.047745294868946075, -0.015870647504925728, -0.0011013393523171544, 0.048505838960409164, 0.048140302300453186, 0.0481879785656929, 0.00390448491089046, -0.0032191057689487934, 0.02446594275534153, 0.003009955631569028, 0.06836605072021484, 0.12782631814479828, -0.002003120258450508, -0.00635286932811141, -0.001297584967687726, 0.05640291050076485, -0.05519359931349754, -0.008777212351560593, -0.01953304000198841, -0.03608076274394989, 0.018820220604538918, 0.01809445023536682, -0.050286419689655304, -0.018621228635311127, 0.0685238391160965, -0.29886800050735474, 0.022921167314052582, 0.06253094971179962, 0.03592679649591446, -0.0015823866706341505, 0.01851832866668701, 0.05156198889017105, -0.08870579302310944, 0.01824229396879673, -0.02067369967699051, 0.0007486487738788128, 0.008306307718157768, 0.017730576917529106, -0.03883426636457443, 0.043132904917001724, 0.07777943462133408, 0.08967984467744827, -0.012096007354557514, 0.04462653025984764, 0.024150550365447998, 0.016432898119091988, 0.01385599933564663, 0.14784649014472961, 0.03847673162817955, 0.045659348368644714, 0.010960548184812069, 0.0312064066529274, -0.010789084248244762, 0.07472344487905502, 0.05895136669278145, 0.02859457954764366, -0.06225832551717758, 0.10627711564302444, 0.04427202045917511, -0.016109762713313103, -0.031401608139276505, -0.008301552385091782, 0.01674681156873703, 0.017360355705022812, 0.010809777304530144, 0.0052460418082773685, 0.04604203253984451, -0.06961488723754883, -0.036033645272254944, 0.045882634818553925, -0.013800331391394138, 0.01961454749107361, -0.031365230679512024, -0.006986591499298811, 0.0008035773644223809, -0.01875307224690914, -0.03899325057864189, 0.01633298583328724, -0.002395584248006344, 0.03482082113623619, 0.013053364120423794, 0.010154482908546925, 0.0028009675443172455, -0.04212473705410957, 0.030409900471568108, 0.06992508471012115, -0.009045536629855633, 0.07396338880062103, 0.019085662439465523, 0.02861287072300911], "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6c816bad-9dcf-4e5f-8fe9-8515f290e64a", "node_type": "4", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "74eaa45f6b8bfd17bfc1106c7a98f9728d85219084d4a91725c434c2d4bbc5f4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3c5b83d3-51f4-454b-855b-131239aab46d", "node_type": "1", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "1f74e0fd6dd4d8aca9800e3dd10d978ab48601fff5ec730e34e04f3885f9af31", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4002abd1-a951-4bc3-bbbf-c4cf4c266aac", "node_type": "1", "metadata": {}, "hash": "87bba6d2154318f8d252388f948e51e5804dbc88121225a44ba6b598c66e3c87", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "*   This provides a richer view of the book information that you saw briefly in the search results.\n\n### Comparing CLI and GUI for User Interface Presentation\n\nHere\u2019s a quick comparison of how the two interfaces handle showing information and getting input:\n\n| Feature                     | CLI Version (`CliView.java`)                          | GUI Version (JavaFX FXML & Controllers)                                   |\n| :-------------------------- | :---------------------------------------------------- | :------------------------------------------------------------------------ |\n| **How information is shown** | `System.out.println()` for plain text output          | Graphical elements: `Label`, `ImageView`, `VBox` in FXML files, controlled by Java classes |\n| **How input is gathered**   | `Scanner.nextLine()` reads typed text                 | `TextField` for typing, `Button` for clicking (all defined in FXML, handled by controllers) |\n| **Styling/Appearance**      | Limited to text formatting (bold, color if supported) | Rich visual styling using CSS (Cascading Style Sheets) and FXML attributes |\n| **Core Components**         | `CliView` class                                       | FXML files (blueprints) and Controller classes (brains)                 |\n| **Interaction Flow**        | Sequential: read input, print output, repeat          | Event-driven: user actions (clicks, types) trigger specific methods in controllers |\n\n### Conclusion\n\nIn this chapter, we explored \"User Interface Presentation,\" which is the \"face\" of our DevShelf application. We learned that:\n*   The UI is how DevShelf **shows** information (like search results) and **gathers** input (like your search queries).\n*   DevShelf offers two types of interfaces: the **CLI** (Command Line Interface) for text-based interaction, and the **GUI** (Graphical User Interface) for visual interaction.\n*   In the CLI, the `CliView` class uses `System.out.println()` to display and `Scanner` to read input.\n*   In the GUI, JavaFX uses **FXML files** as \"blueprints\" to define the layout and **Controller classes** (like `MainViewController`, `BookCardController`, `BookDetailController`) as \"workers\" to manage behavior and display [Book (Domain Model)](02_book__domain_model_.md) data visually.\n*   We saw how the GUI dynamically loads individual `BookCard` elements to present search results, linking the `Book` data to visual components.", "mimetype": "text/plain", "start_char_idx": 17277, "end_char_idx": 19706, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "4002abd1-a951-4bc3-bbbf-c4cf4c266aac", "embedding": [-0.0496981143951416, 0.03170141577720642, 0.024225503206253052, 0.024098943918943405, 0.028543371707201004, -0.012902989983558655, -0.029551099985837936, -0.02545030228793621, -0.0006432320806197822, -0.019537726417183876, -0.02582949586212635, 0.021706702187657356, 0.020531609654426575, 0.040812037885189056, -0.026460561901330948, -0.06532710045576096, -0.016686053946614265, -0.02544442005455494, -0.02493707649409771, -0.022442445158958435, 0.0599031038582325, -0.00019591656746342778, -0.009688963182270527, -0.05157909914851189, -0.0012377027887851, 0.08275412023067474, -0.011382153257727623, -0.046576205641031265, 0.024339649826288223, -0.2242828756570816, 0.007768772542476654, -0.007671068888157606, 0.08335889130830765, 0.007323927711695433, -0.04986574873328209, -0.04601806029677391, 0.03556716814637184, 0.031168967485427856, 0.0534859374165535, 0.01549313310533762, -0.00011576888209674507, 0.0448719747364521, -0.025015974417328835, 0.02354607731103897, 0.04559783637523651, -0.00920259952545166, -0.010015242733061314, -0.00787074863910675, -0.003472540294751525, 0.0005083405412733555, -0.0860208123922348, 0.009184400551021099, 0.020078204572200775, 0.02808813378214836, -0.021220004186034203, 0.04509047418832779, 0.03667308762669563, 0.03381361439824104, -0.03840985521674156, 0.027435583993792534, 0.052381645888090134, -0.042250439524650574, -0.0907408595085144, 0.10320373624563217, 0.024418657645583153, 0.031088240444660187, -0.012806103564798832, -0.043702132999897, 0.009008744731545448, 0.04791438579559326, 0.0035064266994595528, 0.04654122143983841, 0.0035548738669604063, 0.03388349339365959, 0.04332922026515007, -0.02106405235826969, 0.007092638406902552, -0.028738442808389664, 0.009900097735226154, -0.039516836404800415, -0.009504436515271664, -0.05110318586230278, 0.012268749065697193, -0.008130041882395744, -0.021177170798182487, 0.0010789030930027366, 0.014544165693223476, -0.026753196492791176, 0.030669456347823143, 0.01275763288140297, 0.046796467155218124, -0.02520062029361725, 0.012338989414274693, 0.020398134365677834, -0.01818840205669403, -0.002568767173215747, -0.008732990361750126, 0.0683637335896492, 0.005624602548778057, 0.4354170262813568, -0.034771084785461426, 0.043931663036346436, 0.020056113600730896, -0.018445992842316628, -0.01636054366827011, -0.027497127652168274, 0.05775021016597748, 0.019668027758598328, -0.04460792616009712, 0.013390627689659595, 0.012473461218178272, -0.03349084034562111, -0.006531720981001854, -0.03260182961821556, 0.022811243310570717, 0.001384225906804204, -0.09479886293411255, 0.0019598391372710466, 0.03031081333756447, -0.0009955359855666757, 0.012144379317760468, 0.02941426821053028, -0.031358297914266586, 0.002521766582503915, 0.051435019820928574, -0.002298241015523672, -0.012163919396698475, 0.05687209591269493, -0.0741371214389801, 0.012527056969702244, 0.02042243629693985, -0.0017148465849459171, -0.09992874413728714, 0.0005198669387027621, 0.02944655902683735, 0.04883189499378204, -0.012771389447152615, -0.023817267268896103, -0.01694324240088463, 0.03411923721432686, -0.016380293294787407, 0.0940864235162735, 0.038443829864263535, -0.029552219435572624, -0.05344124883413315, 0.11509228497743607, 0.01941642537713051, 0.01830412819981575, -0.005222973879426718, -0.007971166633069515, 0.021253930404782295, 0.03546878322958946, -0.020643191412091255, -0.045448411256074905, -0.03646652027964592, 0.034409698098897934, 0.0625074952840805, 0.03323015198111534, -0.014043939299881458, -0.06564343720674515, -0.028920086100697517, 0.021128136664628983, -0.004789587110280991, 0.058265212923288345, -0.0024714756291359663, -0.09233473986387253, -0.012558205984532833, 0.03608500212430954, -0.10528130829334259, -0.05260694772005081, -0.04182080924510956, 0.02550446428358555, -0.06959027796983719, 0.045022450387477875, 0.04412153363227844, -0.014757681638002396, -0.05187896639108658, 0.013867577537894249, 0.0063229757361114025, 0.025008168071508408, 0.02879311703145504, -0.026808274909853935, -0.022894836962223053, -0.021644217893481255, -0.04791700839996338, -0.03143279254436493, -0.06501822173595428, -0.010874860920011997, -0.01372756902128458, 0.0004484423261601478, -0.016894247382879257, -0.011824868619441986, 0.016617104411125183, 0.03283948451280594, 0.006368829403072596, -0.01751347817480564, -0.00880888570100069, -0.013054169714450836, -0.03637472167611122, 0.035735320299863815, 0.027323618531227112, 0.006699970457702875, -0.025076095014810562, 0.018048841506242752, -0.035886749625205994, -0.03360834717750549, -0.0009072807151824236, -0.0725611001253128, 0.04833221063017845, -0.02189595066010952, -0.02300266921520233, 0.013293666765093803, -0.0007196360384114087, -0.03680121526122093, 0.010377699509263039, -0.050722118467092514, -0.005880489479750395, 0.05543128028512001, -0.03450640290975571, 0.043253760784864426, 0.0021765120327472687, -0.07382059097290039, 0.007766698487102985, -0.320687860250473, 0.032634660601615906, -0.05173789709806442, -0.01621825061738491, -0.043325137346982956, -0.02491113729774952, 0.030146682634949684, 0.009457715786993504, -0.0260697640478611, 0.024275027215480804, 0.06229910999536514, -0.03102359175682068, -0.016279935836791992, 0.012029319070279598, -0.014522861689329147, -0.035018980503082275, 0.033222634345293045, -0.019856441766023636, -0.08487871289253235, -0.010989456437528133, 0.021350128576159477, -0.02933908998966217, -0.014142413623631, -0.0855712816119194, 0.0059636919759213924, 0.022864893078804016, 0.10438206791877747, 0.016323648393154144, 0.03342248499393463, -0.004018919076770544, 0.07293128222227097, 0.06392738223075867, -0.08433187007904053, -0.09399110078811646, 0.0038299881853163242, 0.024444032460451126, -0.018559247255325317, -0.012170437723398209, 0.01862519234418869, 0.01764061115682125, 0.007844892330467701, -0.01072713639587164, 0.06077977269887924, -0.011501443572342396, -0.04622869938611984, 0.009753642603754997, 0.04815050587058067, -0.06078554317355156, -0.030206846073269844, 0.07569590210914612, -0.003569137305021286, 0.0062666223384439945, -0.004171102307736874, 0.04686352238059044, -0.002965115010738373, -0.03461607173085213, -0.03030376322567463, -0.056842245161533356, -0.010374775156378746, -0.03774449974298477, 0.01777179352939129, 0.016209090128540993, -0.004502291791141033, 0.006421895232051611, 0.03041803278028965, 0.027658579871058464, -0.04345761612057686, -0.02700689621269703, 0.03139097988605499, -0.04587630182504654, -0.06315827369689941, 0.009262220934033394, -0.03703630715608597, 0.00952950119972229, 0.06501103192567825, 0.029692359268665314, 0.044852208346128464, 0.003209946444258094, -0.014673653990030289, -0.015825891867280006, -0.01239300612360239, 0.01592874340713024, 0.09230760484933853, 0.00915092695504427, 0.0023610347416251898, 0.003451928962022066, 0.0099883321672678, -0.03340612351894379, -0.016848713159561157, -0.0037166979163885117, -0.052845392376184464, 0.015126386657357216, -0.006458819378167391, -0.045817453414201736, 0.0049486611969769, 0.03801409900188446, -0.26120123267173767, 0.035277701914310455, 0.030394166707992554, 0.046582356095314026, 0.009376044385135174, -0.016055762767791748, 0.04580441862344742, -0.022152196615934372, 0.0702957883477211, -0.06677283346652985, -0.027629530057311058, 0.007096515968441963, 0.008769559673964977, -0.09549273550510406, 0.02830614149570465, 0.07024335116147995, 0.11656183749437332, -0.011561972089111805, 0.04400922358036041, 0.058398135006427765, 0.040940865874290466, 0.02815181203186512, 0.17876867949962616, 0.05866257846355438, -0.009707593359053135, -0.003088053548708558, -0.011949900537729263, -0.0630909651517868, 0.001645028474740684, 0.08554105460643768, 0.08525138348340988, -0.06079056113958359, 0.042185019701719284, 0.028107477352023125, -0.006373152602463961, -0.021731223911046982, 0.0376683734357357, 0.030343126505613327, 0.035250093787908554, -0.02849726751446724, -0.011560431681573391, 0.03762436658143997, -0.05469512194395065, -0.008463365025818348, 0.014249172061681747, -0.0394994281232357, -0.03536080941557884, -0.020904971286654472, -0.049014851450920105, -0.003477835562080145, 0.008580062538385391, -0.0298859141767025, 0.013753438368439674, 0.007833178155124187, 0.035070568323135376, 0.0009501659078523517, -0.01342508103698492, 0.03777516633272171, 0.0016172253526747227, 0.037987057119607925, 0.01683618873357773, 0.010887492448091507, 0.05778677389025688, -0.01431382168084383, 0.03397640958428383], "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6c816bad-9dcf-4e5f-8fe9-8515f290e64a", "node_type": "4", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "74eaa45f6b8bfd17bfc1106c7a98f9728d85219084d4a91725c434c2d4bbc5f4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d1d4dd88-de94-4f62-8908-249ae9a9ee9a", "node_type": "1", "metadata": {"file_name": "Chapter 3 User Interface Presentation.md"}, "hash": "6e838bd9cf237b1ab2b1f6c88c7bf31c7235bc03381cba7f2364e77900773b2c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "*   We saw how the GUI dynamically loads individual `BookCard` elements to present search results, linking the `Book` data to visual components.\n\nUnderstanding the UI is crucial because it's your primary point of contact with DevShelf. Now that we know how books are presented to you, let's dive into how DevShelf efficiently finds those books in the first place!\n\n[Next Chapter: Search Index Management](04_search_index_management_.md)", "mimetype": "text/plain", "start_char_idx": 19562, "end_char_idx": 19998, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "59bc7d32-828f-431c-a8b7-8d6915269af7", "embedding": [-0.05004607513546944, 0.03197368234395981, 0.015304328873753548, 0.03557784482836723, 0.03914611414074898, -0.03999156877398491, -0.03748701140284538, 7.380851457128301e-05, 0.01203736662864685, -0.003444962901994586, 0.018741272389888763, -0.00014914004714228213, 0.02618170902132988, -0.008987010456621647, -0.011126913130283356, -0.04579268768429756, -0.0064496914856135845, -0.003004235215485096, -0.03926762565970421, 0.0006621434586122632, 0.08915996551513672, 0.014953129924833775, -0.0182353388518095, -0.043410129845142365, -0.03785724565386772, 0.07681651413440704, -0.010599533095955849, 0.0011226102942600846, -0.025717491284012794, -0.22166164219379425, 0.0021869949996471405, 0.004978915676474571, 0.082650326192379, 0.02244998887181282, 0.006461138837039471, -0.03891891986131668, 0.013296595774590969, 0.0025593347381800413, -0.003679832210764289, 0.0051691303960978985, 0.0025561514776200056, 0.032447729259729385, -0.01462507899850607, 0.07359874248504639, 0.014360393397510052, 0.01404501311480999, -0.029475385323166847, -0.011977898888289928, -0.016602234914898872, -0.03856273368000984, -0.12674039602279663, 0.014516492374241352, 0.00625182269141078, -0.0030766779091209173, 0.012925189919769764, 0.01775873452425003, 0.04351913556456566, 0.038773808628320694, -0.016730546951293945, -0.036479584872722626, 0.05117641016840935, -0.03121175989508629, -0.07409583032131195, 0.09577855467796326, -0.007066130638122559, 0.032842833548784256, 0.0032898178324103355, -0.09728872776031494, 0.018706563860177994, 0.017556823790073395, -0.009251609444618225, 0.05314923822879791, -0.03143811970949173, 0.04415600746870041, 0.01347747165709734, -0.017689023166894913, -0.0065396372228860855, -0.01707027107477188, 0.06071403995156288, -0.019682008773088455, -0.0099397087469697, -0.045406825840473175, 0.04869592934846878, -0.0222496185451746, -0.019017115235328674, -0.02909606322646141, 0.028102440759539604, -0.016337711364030838, 0.049323175102472305, 0.011774633079767227, 0.06211378797888756, -0.042487479746341705, 0.044821880757808685, 0.05996148660778999, -0.011198307387530804, -0.004713254980742931, 0.0003090680984314531, 0.06465087831020355, -0.0031100143678486347, 0.4315147399902344, -0.015016711317002773, 0.06271002441644669, 0.01597452163696289, -0.0237844530493021, -0.008956486359238625, -0.03303191438317299, 0.03233996033668518, -0.0014885412529110909, 0.018578382208943367, -0.0022795505356043577, 0.02488066256046295, -0.05380717292428017, 0.06067630648612976, -0.0339239127933979, 0.018614405766129494, -0.01399984024465084, -0.023729799315333366, 0.020075026899576187, -0.019976552575826645, 0.0023817052133381367, -0.008622908964753151, 0.029556894674897194, 0.028273386880755424, 0.0568520687520504, 0.06000626087188721, -0.008896728046238422, -0.01730971783399582, 0.04997295141220093, -0.04443953186273575, 0.024429552257061005, 0.007597105111926794, -0.0261421836912632, -0.08894453197717667, 0.0059516835026443005, 0.06420236080884933, 0.03429412469267845, -0.031556665897369385, -0.02881477214396, 0.012759511359035969, -0.01117966789752245, -0.0027184963691979647, 0.05467356741428375, 0.028893332928419113, -0.005642560310661793, -0.04222075641155243, 0.132541224360466, 0.058807648718357086, 0.0006742401164956391, -0.04371674358844757, -0.05197377875447273, 0.01912815310060978, 0.03114657662808895, -0.0011725445510819554, -0.10529259592294693, -0.0009004176245070994, 0.01294892467558384, 0.0991673544049263, 0.023798750713467598, -0.025350822135806084, -0.051149483770132065, -0.07648887485265732, 0.024856911972165108, -0.01728442683815956, 0.06845368444919586, -0.02648308128118515, -0.05577914044260979, -0.034738171845674515, 0.013544132001698017, -0.13177646696567535, -0.05964941531419754, -0.009328343905508518, -0.01423915196210146, -0.03404796123504639, 0.018370553851127625, 0.026729777455329895, -0.03989120200276375, -0.047705408185720444, -0.008688407950103283, 0.031990617513656616, 0.004376954399049282, 0.018692754209041595, -0.031194407492876053, 0.0005723072099499404, 0.00991918332874775, -0.056746821850538254, -0.04924498125910759, -0.06496543437242508, -0.00984676368534565, 0.010903194546699524, 0.02247045561671257, -0.05044672265648842, -0.0022584109101444483, 0.007181727327406406, 0.006269850768148899, -0.009943351149559021, -0.04317028820514679, 0.012110968120396137, -0.017972085624933243, -0.03242233023047447, 0.006947420537471771, 0.007653535809367895, 0.014782770536839962, -0.020942410454154015, 0.03581502288579941, -0.03575596958398819, -0.011380400508642197, 0.007220471277832985, -0.07972385734319687, 0.07712311297655106, -0.00616423087194562, -0.004919061902910471, -0.015046605840325356, -0.0544026680290699, -0.05223953351378441, -0.01736808568239212, -0.027796020731329918, 0.018818983808159828, 0.03918127343058586, -0.027962032705545425, 0.02566877007484436, -0.0065174587070941925, -0.03694557026028633, -0.026268530637025833, -0.30372530221939087, 0.010218382813036442, -0.037942446768283844, -0.02260383777320385, -0.007215996738523245, -0.06206369027495384, 0.029717324301600456, -0.001078665954992175, -0.030805841088294983, 0.035822462290525436, 0.08144782483577728, -0.03673723340034485, -0.02043246105313301, -0.015938840806484222, -0.0014541682321578264, 0.031414467841386795, 0.032319325953722, -0.00224573677405715, -0.09007959067821503, -0.007082244846969843, 0.009649277664721012, -0.028692802414298058, 0.01776336506009102, -0.09553426504135132, 0.009327780455350876, -0.008351103402674198, 0.0925087034702301, 0.0211570356041193, 0.0525074265897274, -0.03210897743701935, 0.06040264293551445, 0.020893292501568794, -0.07671458274126053, -0.07528230547904968, -0.024150392040610313, -0.016956714913249016, 0.010330310091376305, 0.016598248854279518, 0.015074608847498894, 0.0021268194541335106, 0.020522097125649452, 0.009616157039999962, 0.026580696925520897, 0.01870490424335003, -0.07906435430049896, 0.011474776081740856, 0.00807525310665369, -0.0603051520884037, 0.02036394737660885, 0.06974159181118011, -0.029310142621397972, 0.04283539950847626, 0.025883860886096954, 0.03644115850329399, -0.03338143229484558, -0.06049809232354164, -0.011308553628623486, -0.09090010076761246, -0.024114007130265236, -0.013931376859545708, 0.016155146062374115, 0.03026803582906723, -0.03750910982489586, -0.010577725246548653, 0.03178244084119797, -0.03213656693696976, -0.03751365467905998, 0.002055661752820015, 0.06830036640167236, -0.045066870748996735, -0.050128210335969925, 0.03816816955804825, -0.02743937075138092, 0.01896265335381031, 0.015063698403537273, 0.0648856908082962, 0.061632148921489716, 0.014297746121883392, 0.003313582856208086, -0.025540821254253387, 0.006833355873823166, 0.0021371974144130945, 0.07289508730173111, -0.025084860622882843, 0.00484028784558177, -0.008945098146796227, 0.025652704760432243, -0.001625213772058487, -0.0066323964856565, 0.030640969052910805, -0.05068124458193779, 0.0012845321325585246, -0.004412605427205563, -0.0315532311797142, 0.031527433544397354, 0.03803230822086334, -0.25304773449897766, 0.05190411955118179, 0.03882632777094841, 0.008224251680076122, 0.048165302723646164, -0.014345950447022915, 0.03603171929717064, -0.04696853458881378, 0.08644117414951324, -0.03012038581073284, -0.005011463537812233, 0.007702221162617207, -0.02217993699014187, -0.0823095440864563, 0.061933208256959915, 0.05062129721045494, 0.13523870706558228, -0.0212544072419405, 0.022428687661886215, 0.034098125994205475, 0.04291540011763573, 0.025219803676009178, 0.1618003398180008, 0.03803494572639465, 0.012824528850615025, 0.0037075430154800415, 0.026021957397460938, -0.030029578134417534, -0.00441640242934227, 0.07818465679883957, 0.04339173808693886, -0.041494086384773254, -0.01630166359245777, 0.004681468475610018, -0.019933883100748062, -0.027766427025198936, 0.008835784159600735, 0.03502394258975983, 0.054667484015226364, -0.027204444631934166, 0.009772379882633686, -0.0030374787747859955, -0.052713315933942795, 0.021528873592615128, 0.04241028428077698, -0.030512822791934013, -0.016837557777762413, -0.04212434962391853, -0.02775845304131508, 0.025308143347501755, 0.025893915444612503, -0.033437855541706085, 0.030566446483135223, 0.005020659416913986, 0.027329640462994576, 0.004426660947501659, -0.0039914497174322605, 0.038735322654247284, -0.00268056383356452, -0.018932078033685684, 0.009907593950629234, -0.021212279796600342, 0.09462620317935944, 0.02060742862522602, 0.03440207615494728], "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73dab258-d5a6-413a-8bf3-450a6e236fce", "node_type": "4", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "0139795258b42ec3a02280199f5d715b673fecc8c665f5197a6e6fbbc696c73c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0071d974-cec9-4981-8bfd-08de3f7d9f3a", "node_type": "1", "metadata": {}, "hash": "7747ffc06ebc2212c98368927f047b0976bf5edc810262e749e8f118f0d3cf40", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Welcome back to DevShelf! In our last chapter, [User Interface Presentation](03_user_interface_presentation_.md), we explored how DevShelf shows you information and takes your input. You learned how `Book` objects (our digital index cards) are displayed. But before those books can appear, DevShelf needs to *find* them, and find them *quickly*.\n\nImagine you walk into a massive library and ask the librarian, \"Find me all books about 'Python'!\" If the librarian had to physically open and read every single book in the entire library each time someone asked a question, they'd be incredibly slow! You'd be waiting forever for your search results.\n\nThis is exactly the problem that **Search Index Management** solves for DevShelf.\n\n### The \"Librarian's Secret Catalog\"\n\nSearch index management is like the librarian's secret, highly organized system that helps them find books in a flash. It's an **offline process**, meaning it happens *before* DevShelf is ready to answer your search queries. It involves meticulously preparing all the book data so that when you search, DevShelf doesn't have to read all the books again.\n\n**Our central use case:** To provide *instant* search results when a user types a query. Without this pre-computation, every search would feel like DevShelf was reading every book from scratch.\n\n### The `IndexerMain`: Our Master Cataloger\n\nThe `IndexerMain` is a special, separate part of our application that's solely responsible for building this \"secret catalog.\" You don't run it every time you start DevShelf. Instead, you run it **once**, or whenever our collection of [Book (Domain Model)](02_book__domain_model__.md) data changes (e.g., new books are added or old ones are removed).\n\nIt reads all the [Book (Domain Model)](02_book__domain_model__.md) information and creates two super-efficient lookup tables:\n\n1.  **Inverted Index:** This is like the index at the back of a textbook. You look up a specific word (term), and it tells you exactly *which books* contain that word.\n2.  **TF-IDF Scores:** This helps DevShelf understand *how important* a word is to a specific book, compared to its importance across *all* books.", "mimetype": "text/plain", "start_char_idx": 1, "end_char_idx": 2159, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "0071d974-cec9-4981-8bfd-08de3f7d9f3a", "embedding": [-0.056344885379076004, 0.06389213353395462, -0.028661241754889488, 0.007139088120311499, 0.05295991897583008, -0.007281268481165171, -0.03730819746851921, 0.050200723111629486, -0.028016721829771996, -0.04581772908568382, 0.010764000937342644, -0.03410501033067703, 0.012601098977029324, -0.00046407885383814573, -0.017862223088741302, 0.002298870589584112, -0.029723061248660088, -0.00696221087127924, -0.04969637840986252, -0.02544403076171875, 0.07033481448888779, 0.027387019246816635, 0.040154725313186646, -0.08197911083698273, 0.03835895285010338, 0.07327812910079956, 0.009668851271271706, -0.040392931550741196, 0.003803347237408161, -0.18150654435157776, -0.027553971856832504, -0.0441485159099102, 0.06473904848098755, 0.021678434684872627, -0.029717866331338882, 0.010438899509608746, -0.025410320609807968, 0.038412049412727356, -0.035112977027893066, -0.020576460286974907, -0.0460231751203537, 0.006375203374773264, -0.020315498113632202, 0.025144826620817184, -0.02218829281628132, -0.002467572223395109, -0.007186787202954292, -0.020014554262161255, 0.014079726301133633, 0.01057224627584219, -0.11676677316427231, -0.029103584587574005, 0.04725274071097374, 0.0013608736917376518, 0.012387538328766823, -0.01380598172545433, 0.06731610745191574, 0.07646592706441879, 0.0011942096753045917, -0.03425030782818794, 0.04480768367648125, -0.03321818634867668, -0.09556933492422104, 0.09365896135568619, 0.006493070162832737, 0.009189886972308159, -0.00012981881445739418, -0.0549943745136261, -0.044405944645404816, 0.06813953071832657, -0.016466712579131126, 0.10627063363790512, 0.03294343873858452, 0.056516245007514954, 0.013262763619422913, -0.02222832478582859, 0.009084795601665974, -0.04654073342680931, 0.03493376448750496, -0.018203604966402054, -0.009755880571901798, -0.09393959492444992, 0.023155637085437775, -0.04177255555987358, 0.01131854485720396, -0.0056359232403337955, 0.04098929092288017, 0.027308784425258636, 0.013027905486524105, 0.02294398471713066, 0.04422953352332115, -0.054286763072013855, 0.01179954782128334, 0.041574809700250626, -0.04766589030623436, -0.0026256872806698084, -0.02698422409594059, 0.03241342306137085, -0.008078954182565212, 0.3376905918121338, -0.0339428149163723, -0.005979989655315876, -0.03614329919219017, -0.027256058529019356, -0.033152349293231964, -0.06611721962690353, 0.06759780645370483, -0.004598328843712807, 0.003951030783355236, -0.023173565044999123, 0.013169387355446815, -0.028644435107707977, 0.030463209375739098, -0.05253060907125473, -0.021071312949061394, -0.0021708135027438402, -0.014338410459458828, 0.02653021365404129, -0.007441662717610598, 0.01967400498688221, 0.018632223829627037, 0.015741897746920586, -0.009435411542654037, 0.022742699831724167, 0.02724315971136093, 0.02372106723487377, -0.023512525483965874, -0.0009898982243612409, -0.015593577176332474, 0.016971221193671227, -0.01922314241528511, -0.06432594358921051, -0.08130742609500885, -0.007441577967256308, 0.06204284727573395, 0.006890011485666037, -0.05039167404174805, -0.011913437396287918, 0.0010057460749521852, 0.0011364418314769864, 0.022262543439865112, 0.028214415535330772, 0.0226662065833807, -0.00928279384970665, -0.06614205986261368, 0.1096784695982933, 0.020991357043385506, 0.004369164351373911, 0.002505445620045066, -0.06528827548027039, 0.007139654830098152, 0.0665106549859047, -0.014784349128603935, -0.08887911587953568, 0.0360400527715683, 0.07132938504219055, 0.04145606607198715, -0.0014428801368921995, -0.047750912606716156, -0.06454542279243469, -0.05597437545657158, 0.020736608654260635, -0.020674707368016243, 0.06860044598579407, -0.00939592532813549, -0.04673057794570923, -0.06813020259141922, 0.04680740088224411, -0.11894441395998001, -0.049133360385894775, -0.011273841373622417, 0.018862243741750717, -0.05540584772825241, 0.03293182700872421, 0.02310458943247795, -0.004039221443235874, -0.019536960870027542, 0.027339309453964233, 0.031043579801917076, 0.04742111638188362, 0.04649464413523674, -0.03061605803668499, -0.026650385931134224, 0.022720230743288994, -0.0028207842260599136, -0.025277074426412582, -0.055747829377651215, -0.033934447914361954, 0.03595827892422676, 0.003080847207456827, -0.0294002965092659, -0.01473206002265215, -0.01703009381890297, 0.04162096977233887, 0.034930769354104996, -0.001408192329108715, 0.006026402115821838, -0.017883753404021263, -0.026784760877490044, -0.028378313407301903, 0.03285561874508858, 0.051226407289505005, -0.017039049416780472, 0.055862393230199814, -0.056500259786844254, -0.00034528097603470087, 0.044365063309669495, -0.049831636250019073, 0.0691060721874237, -0.045440565794706345, -0.008752953261137009, -0.006419478449970484, -0.036032624542713165, -0.039671506732702255, -0.023563804104924202, 0.011704493314027786, 0.0287306047976017, 0.01943795010447502, -0.025336122140288353, 0.053044162690639496, -0.051163796335458755, -0.06709253787994385, -0.05265091359615326, -0.3412979245185852, -0.01817060448229313, -0.017885254696011543, -0.02491329051554203, 0.02989502251148224, -0.05749893933534622, 0.024015961214900017, 0.0005932795465923846, -0.016909241676330566, 0.032994724810123444, 0.08860673010349274, -0.032547786831855774, -0.04146925359964371, -0.03274077922105789, -0.03747157007455826, 0.03501527011394501, 0.018398461863398552, -0.061997637152671814, -0.017583750188350677, 0.009692247956991196, 0.02848939783871174, -0.02221132069826126, -0.0034755824599415064, -0.032409124076366425, 0.04170580580830574, -0.00823068618774414, 0.047280244529247284, -0.012730078771710396, 0.06576833128929138, -0.11982326954603195, 0.036802519112825394, 0.05352016165852547, -0.06884054094552994, -0.0709044560790062, 0.05389353260397911, -0.0705832839012146, -0.03998855501413345, -0.007028570864349604, -0.015911050140857697, 0.04746001213788986, 0.03375469148159027, 0.014091839082539082, 0.008557979948818684, -0.003970054909586906, -0.0629204511642456, -0.004101600032299757, 0.04412723332643509, -0.10176900774240494, 0.02285303920507431, 0.042599789798259735, -0.014524433761835098, 0.02238551899790764, 0.028797857463359833, 0.02600296214222908, -0.004350604955106974, -0.02945527248084545, -0.020406007766723633, -0.058051735162734985, -0.02694191224873066, -0.06664936244487762, 0.04381868988275528, 0.02601615898311138, 0.027386093512177467, 0.02201761305332184, 0.017858117818832397, -0.008576996624469757, -0.012391460128128529, 0.02004064992070198, 0.03412371873855591, -0.009377960115671158, -0.08409301191568375, -0.028299961239099503, -0.020751656964421272, 0.03767811879515648, 0.07689253240823746, 0.05988689512014389, -0.01296941563487053, -0.04188060760498047, 0.047440122812986374, -0.012417623773217201, 0.027267348021268845, 0.0016000488540157676, 0.05160176008939743, -0.03490619361400604, -0.01943204738199711, 0.03386860340833664, 0.04930727928876877, 0.01949911378324032, -0.019504999741911888, 0.03435928374528885, -0.007706797681748867, 0.02954871580004692, 0.047488369047641754, 0.01072276197373867, 0.014077373780310154, 0.04598255082964897, -0.276656836271286, 0.04472587630152702, 0.012962369248270988, 0.003278361400589347, 0.06786862760782242, -0.04436107352375984, 0.07119093835353851, -0.038201045244932175, 0.02655925042927265, -0.0218819472938776, 0.008444196544587612, 0.006209783721715212, 0.010512150824069977, -0.0799575224518776, 0.04166386276483536, 0.028761792927980423, 0.10307380557060242, 0.01701550930738449, 0.06976407021284103, -0.00639354856684804, 0.038659486919641495, 0.010904887691140175, 0.19327156245708466, 0.04117932915687561, -0.012188293039798737, -0.007788858842104673, 0.030963953584432602, 0.0018672858132049441, 0.03408502787351608, 0.07532510161399841, 0.11701831221580505, -0.01216159388422966, 0.0888257622718811, 0.033771295100450516, -0.020981647074222565, -0.029024356976151466, 0.029743429273366928, 0.028185786679387093, 0.02614848129451275, 0.002708876971155405, 0.01327231153845787, 0.04333091154694557, -0.03672807291150093, 0.018659554421901703, 0.03252825513482094, -0.05205604434013367, -0.01679418422281742, -0.0311632938683033, -0.05408870056271553, -0.020565563812851906, 0.0046208626590669155, -0.030002014711499214, 0.05102839320898056, -0.02061508595943451, 0.0005254027782939374, 0.028170764446258545, 0.0058994474820792675, 0.06440620869398117, -0.03368330001831055, 0.02519921027123928, -0.011385147459805012, 0.02379920519888401, 0.055285513401031494, 0.007773649413138628, 0.03253882750868797], "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73dab258-d5a6-413a-8bf3-450a6e236fce", "node_type": "4", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "0139795258b42ec3a02280199f5d715b673fecc8c665f5197a6e6fbbc696c73c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "59bc7d32-828f-431c-a8b7-8d6915269af7", "node_type": "1", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "7bf00ff6b51a15b3a74185fba64b77dea330079d0cd60308809e3427d86eef8c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "48a796a1-ff13-4e1a-8f85-59de9c6f2620", "node_type": "1", "metadata": {}, "hash": "a6d59449c33ca69175d089b6a92ac85c6505b96ef1864833b1e37b9a587a7591", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "2.  **TF-IDF Scores:** This helps DevShelf understand *how important* a word is to a specific book, compared to its importance across *all* books. It's how we know if \"Java\" is a key topic in a book, or just mentioned briefly.\n\nAfter `IndexerMain` finishes its job, it saves all this prepared data into a special file called `index_data.json`. Later, when DevShelf starts up (as we saw in [Application Startup & Flow Control](01_application_startup___flow_control_.md)), it simply *loads* this `index_data.json` file, and `boom!`, it's ready for fast searches.\n\n### How to Build the Search Index\n\nYou would run the `IndexerMain` program directly. It doesn't have a user interface; it just does its work and tells you what it's doing on the console.\n\n**`src/main/java/core/IndexerMain.java` (Simplified)**\n```java\npackage core;\n\nimport domain.Book;\nimport domain.SearchIndexData;\nimport features.search.IndexBuilder;\nimport storage.BookLoader;\nimport utils.TfIdfCalculator;\n// ... other imports\n\npublic class IndexerMain {\n    private static final String INDEX_FILE_PATH = (\"src/main/resources/data/index_data.json\");\n\n    public static void main(String[] args) {\n        System.out.println(\"--- Starting Offline Indexer ---\");\n        try {\n            // 1. Load the raw book data\n            BookLoader loader = new BookLoader(\"src/main/resources/data/book.json\");\n            List<Book> allBooks = loader.loadBooks();\n            System.out.println(\"Loading and indexing books...\");\n\n            // 2. Build the Inverted Index\n            IndexBuilder indexer = new IndexBuilder(/* ... */);\n            for(Book book : allBooks) {\n                indexer.indexDocument(book); // Add each book to the index\n            }\n\n            // 3. Calculate TF-IDF scores\n            TfIdfCalculator tfIdfCalculator = new TfIdfCalculator();\n            tfIdfCalculator.calculateIdf(indexer.getInvertedIndex(), allBooks.size());\n            tfIdfCalculator.calculateTfIdf(indexer.getInvertedIndex());\n            System.out.println(\"TF-IDF calculation complete.\");\n\n            // 4.", "mimetype": "text/plain", "start_char_idx": 2013, "end_char_idx": 4089, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "48a796a1-ff13-4e1a-8f85-59de9c6f2620", "embedding": [-0.08184067159891129, 0.049308277666568756, -0.0023707605432718992, -0.01211854349821806, 0.033864621073007584, -0.012284848839044571, -0.08310918509960175, 0.004825460724532604, -0.025966893881559372, -0.0033855328802019358, 0.041612301021814346, -0.043052442371845245, -0.027831099927425385, -0.03264419734477997, -0.03583763539791107, -0.0014826081460341811, -0.042021360248327255, -0.013940995559096336, -0.04188612103462219, 0.002778934547677636, 0.06871243566274643, -0.01635425165295601, 0.02790919691324234, -0.08380181342363358, 0.039774127304553986, 0.09789787977933884, 0.02734638750553131, -0.05099699646234512, -0.015912586823105812, -0.1642073541879654, 0.004837423097342253, -0.1140279769897461, 0.02953871339559555, 0.036527834832668304, -0.01285372581332922, -0.01219703909009695, -0.0018848339095711708, 0.037889961153268814, -0.015268494375050068, 0.01463992614299059, -0.036383770406246185, 0.0032692556269466877, -0.03976753354072571, -0.0015901306178420782, -0.03183778375387192, 0.026633229106664658, -0.01399950124323368, -0.03953146934509277, 0.07694505900144577, 0.007111787796020508, -0.07944368571043015, -0.035486336797475815, -0.015152908861637115, -0.021008921787142754, -0.02124413661658764, -0.03977638855576515, 0.02630525641143322, 0.07480604946613312, 0.009136493317782879, -0.014599619433283806, 0.04555143043398857, 0.025980016216635704, -0.1171451136469841, 0.10193793475627899, 0.011398488655686378, -0.012091567739844322, -0.022030258551239967, -0.05897272750735283, -0.011239594779908657, 0.04542982950806618, -0.04144058749079704, 0.07260826975107193, 0.0157195795327425, 0.08327008038759232, -0.005106608849018812, -0.04082323610782623, -0.0017068887827917933, 0.005574766546487808, -0.005929267965257168, 0.02625412680208683, -0.08302914351224899, -0.05995917320251465, 0.04397394880652428, -0.004557381384074688, 0.0009383784490637481, 0.011673969216644764, 0.01981671154499054, 0.026089871302247047, 0.04278719797730446, 0.035903602838516235, 0.009812559001147747, -0.013237377628684044, 0.04609256982803345, 0.054227106273174286, -0.06047692149877548, 0.030977070331573486, -0.02743932604789734, 0.06585270911455154, 0.026168473064899445, 0.2928277850151062, -0.049708686769008636, -0.011745617724955082, -0.00033445970620959997, 0.015621860511600971, -0.08832169324159622, -0.04241114854812622, -0.0006808568723499775, 0.055203668773174286, 0.0031785941682755947, 0.0027094639372080564, 0.013939221389591694, 0.010273179039359093, -0.014659285545349121, -0.01573074236512184, -0.048196371644735336, -0.04805807024240494, -0.007436067331582308, 0.015017244964838028, -0.07517241686582565, 0.06513576209545135, -0.01670517586171627, 0.043480511754751205, -0.016725776717066765, 0.03946328163146973, 0.029054289683699608, -0.0156011451035738, 0.033748358488082886, 0.007457087282091379, 0.01309103425592184, 0.015124683268368244, -0.02607847936451435, 0.01360464096069336, -0.10368610918521881, -0.015747806057333946, 0.019721629098057747, -0.01806122437119484, -0.060286667197942734, -0.03976306691765785, -0.002665844513103366, -0.04520745947957039, 0.03558669239282608, -0.0003283414989709854, -0.037856750190258026, -0.030275674536824226, 0.008276483975350857, 0.12587514519691467, 0.024053027853369713, 0.002329691546037793, 0.040932413190603256, -0.0932837501168251, 0.0031537192407995462, 0.05645303055644035, -0.039490096271038055, -0.0461580790579319, 0.02715393155813217, 0.10696128010749817, 0.061045750975608826, -0.006121139973402023, -0.06451216340065002, -0.01967146247625351, -0.0826922133564949, 0.02057681605219841, -0.032191671431064606, 0.07623018324375153, -0.02794194407761097, -0.04665185511112213, -0.012290235608816147, 0.03379601240158081, -0.058383990079164505, -0.07009667158126831, -0.0063913376070559025, 0.08106061816215515, -0.042113009840250015, -0.026875726878643036, 0.02183585986495018, 0.01052281353622675, -0.00312221422791481, 0.008944340981543064, 0.02719513699412346, 0.012659724801778793, 0.03739498555660248, -0.024668298661708832, -0.02931555174291134, -0.022370390594005585, 0.008366958238184452, -0.054433729499578476, -0.01708412356674671, -0.01884646527469158, 0.007299894466996193, 0.016134582459926605, 0.0021286900155246258, -0.009907982312142849, -0.01745680533349514, -0.04706757888197899, 0.01349076721817255, -0.028867272660136223, 0.015908025205135345, -0.004801786504685879, 0.03575325757265091, -0.03967635706067085, 0.058829568326473236, 0.036419931799173355, -0.008855105377733707, 0.07862953096628189, -0.02274511381983757, 0.00759729091078043, 0.022750843316316605, -0.019147131592035294, 0.0464276447892189, -0.03607730567455292, -0.0347624272108078, -0.024057095870375633, -0.02732008695602417, -0.01969601772725582, -0.06782623380422592, -0.006003553047776222, 0.013170786201953888, 0.05516166239976883, 0.01140926405787468, 0.05413675308227539, -0.014954032376408577, -0.1121068149805069, 0.034844059497117996, -0.32174378633499146, -0.025934817269444466, 0.00890399795025587, -0.023620901629328728, -0.03451097756624222, -0.05398917943239212, -0.004197003319859505, 0.023692239075899124, 0.014610844664275646, -0.024158967658877373, 0.10541906207799911, 0.011999075300991535, -0.02155761793255806, -0.055986106395721436, -0.006192444823682308, -0.002972173737362027, 0.037804923951625824, 0.0034505585208535194, -0.0024828510358929634, -0.01322839967906475, 0.006763616111129522, 0.0018784917192533612, 0.01753602921962738, -0.012193756178021431, 0.06440909206867218, -0.02394014410674572, 0.08728910982608795, -0.011746395379304886, 0.047018274664878845, -0.08833324909210205, 0.011866365559399128, 0.06818678230047226, -0.08120512217283249, -0.08767838031053543, 0.0670272707939148, -0.07164176553487778, -0.041593730449676514, 0.050347525626420975, -0.03346468135714531, 0.04659170284867287, 0.023397985845804214, 0.040561072528362274, -0.013853193260729313, -0.043254777789115906, 0.005540181882679462, 0.033865392208099365, -0.016164664179086685, -0.06428683549165726, 0.01816706918179989, 0.025152212008833885, 0.01678626984357834, -0.016544893383979797, 0.055928390473127365, 0.0014027321012690663, -0.04792678728699684, -0.010521508753299713, -0.0013504187809303403, -0.028634553775191307, -0.04847700893878937, -0.013287113979458809, 0.0237113144248724, -0.032397788017988205, 0.051941871643066406, 0.058894503861665726, -0.007707391399890184, -0.00660051591694355, 0.03307567909359932, 0.022481275722384453, 0.04234683886170387, -0.03901788592338562, -0.09818069636821747, 0.04154984652996063, -0.037808857858181, 0.04503406211733818, 0.07830161601305008, 0.11691651493310928, -0.03573998436331749, -0.06070119887590408, 0.03715839982032776, 0.021557878702878952, -0.009614360518753529, -0.00017398873751517385, 0.06458424031734467, 0.0008507043239660561, 0.017476951703429222, 0.026300594210624695, 0.03500217944383621, 0.0049631367437541485, -0.031008576974272728, 0.03577057272195816, 0.034893590956926346, 0.002039684448391199, -0.008655146695673466, 0.007414883002638817, 0.03432440012693405, 0.03758928179740906, -0.23868311941623688, 0.04243744537234306, 0.0016957540065050125, 0.026432225480675697, -0.005436681676656008, -0.02987307496368885, 0.014343789778649807, -0.004925423301756382, 0.017666036263108253, 0.034299176186323166, 0.011452026665210724, 0.014518525451421738, 0.006078722421079874, -0.059585586190223694, 0.024599535390734673, 0.014044822193682194, 0.0569908544421196, 0.010366985574364662, 0.08035369217395782, -0.021177252754569054, 0.010727128013968468, -0.013891158625483513, 0.1953839659690857, 0.021316280588507652, -0.02023879438638687, 0.030916262418031693, 0.03785306587815285, 0.035933125764131546, 0.09431780874729156, 0.002296589547768235, 0.0930178314447403, 0.06096745282411575, 0.09424043446779251, 0.07810231298208237, 0.02356530725955963, -0.030633054673671722, 0.045453306287527084, 0.06970540434122086, -0.027143314480781555, 0.013999027200043201, -0.009891659021377563, 0.04594354331493378, 0.012147532775998116, 0.018155787140130997, 0.054259322583675385, 0.0040234150364995, -0.10386787354946136, -0.034056585282087326, -0.1027313768863678, -0.009298458695411682, -0.014149664901196957, -0.029534736648201942, -0.01679898053407669, -0.09379025548696518, -0.0299739558249712, 0.018579451367259026, -0.04971393570303917, 0.0422704741358757, -0.008618422783911228, 0.003690652549266815, -0.012985089793801308, 0.04004732146859169, 0.06616508215665817, -0.044405076652765274, 0.01250405702739954], "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73dab258-d5a6-413a-8bf3-450a6e236fce", "node_type": "4", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "0139795258b42ec3a02280199f5d715b673fecc8c665f5197a6e6fbbc696c73c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0071d974-cec9-4981-8bfd-08de3f7d9f3a", "node_type": "1", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "776062dd6b477cebf8cc3bcb87399da6f7bcee1ad46df23fd57a4123405030cd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c3291528-1a47-4c65-9e1a-d96ba67525f4", "node_type": "1", "metadata": {}, "hash": "e5bebbbb5c940ecfc86c23779e4351b3908b373be6eec167967570684004b04b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\");\n\n            // 4. Save everything to a JSON file\n            SearchIndexData indexData = new SearchIndexData(\n                indexer.getInvertedIndex(),\n                tfIdfCalculator.getTfIdfVectors(),\n                tfIdfCalculator.getIdfScores()\n            );\n            // ... (Use ObjectMapper to write indexData to INDEX_FILE_PATH)\n            System.out.println(\"--- Indexer Finished Successfully! --- \");\n        } catch (Exception e) {\n            System.err.println(\" --- Indexer failed with an error. --- \");\n            e.printStackTrace();\n        }\n    }\n}\n```\nWhen you run this `IndexerMain` class, it will print messages like \"Loading and indexing books...\" and \"Indexer Finished Successfully!\", then it creates or updates the `index_data.json` file. This file contains all the pre-computed magic for fast searching!\n\n#### What the `index_data.json` File Looks Like (Snippet)\n\nThis is a small part of the generated `index_data.json`.", "mimetype": "text/plain", "start_char_idx": 4067, "end_char_idx": 5026, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "c3291528-1a47-4c65-9e1a-d96ba67525f4", "embedding": [-0.07054535299539566, 0.024941526353359222, -0.013879574835300446, 0.022467928007245064, 0.0961662158370018, -0.015263057313859463, -0.0393536351621151, -0.016202792525291443, 0.020058060064911842, 0.001979055115953088, 0.021478725597262383, -0.04666086286306381, 0.00820589903742075, -0.02611875906586647, -0.0014088930329307914, -0.027486855164170265, -0.016527269035577774, -0.02977965772151947, -0.01756906509399414, 0.03408098593354225, 0.10150177031755447, -0.007601161953061819, 0.007383629679679871, -0.061755649745464325, -0.01061549223959446, 0.08846459537744522, -0.016004474833607674, -0.03566605970263481, -0.0367443710565567, -0.2399480640888214, -0.0024093741085380316, -0.08237005025148392, 0.04254251718521118, 0.024445904418826103, 0.018947681412100792, 0.02232583984732628, -0.023055894300341606, 0.030542796477675438, -0.02841307781636715, 0.033029332756996155, 0.004383372142910957, 0.009187090210616589, -0.0632280632853508, 0.03218620643019676, -0.016814155504107475, -0.022706463932991028, -0.04256274551153183, -0.025134116411209106, -0.022168651223182678, 0.019372155889868736, -0.10164588689804077, -0.010113969445228577, -0.033195994794368744, 0.027285918593406677, 0.02849249169230461, 0.005269437562674284, 0.05255843326449394, 0.051686808466911316, -0.042602505534887314, 0.005460948217660189, 0.041003432124853134, 0.005148552358150482, -0.05521078407764435, 0.07823962718248367, 0.018156694248318672, 0.02131682261824608, -0.04768729582428932, -0.07485191524028778, -0.016166603192687035, -0.0033721039071679115, -0.055793099105358124, 0.039201270788908005, -0.038913652300834656, 0.03976777195930481, -0.000537329469807446, -0.051685940474271774, -0.013944417238235474, -0.003542590420693159, 0.016203900799155235, -0.0072062136605381966, -0.024720560759305954, 0.0025315352249890566, 0.020164446905255318, -0.026726750656962395, 0.021045580506324768, -0.01673654280602932, -0.011967564933001995, 0.0364113412797451, 0.022611329331994057, -0.00599382258951664, 0.006783545017242432, -0.04375851899385452, 0.049355193972587585, 0.060401443392038345, -0.029750963672995567, 0.018875760957598686, -0.018374763429164886, 0.07614554464817047, 0.041826218366622925, 0.4534766376018524, -0.009184226393699646, 0.0428997203707695, 0.010775623843073845, 0.0015427665784955025, 0.01194344274699688, -0.038577787578105927, 0.011883676052093506, -0.0065716831013560295, 0.046021319925785065, -0.03893054276704788, 0.020709123462438583, -0.021855192258954048, 0.024069754406809807, -0.05627504363656044, 0.010928125120699406, -0.046009670943021774, -0.008888982236385345, 0.022715376690030098, -0.0034451948013156652, 0.026473157107830048, -0.014543742872774601, 0.017724409699440002, 0.032152608036994934, 0.05424249544739723, 0.04499693587422371, -0.003698082407936454, 0.009662210009992123, -0.0050950865261256695, 0.016606489196419716, 0.041436292231082916, -0.009974154643714428, 0.04847700893878937, -0.04597027599811554, 0.005982408300042152, 0.03545471653342247, 0.015855960547924042, -0.03473692014813423, -0.024243474006652832, 0.02220391109585762, -0.0027044531889259815, -0.01415933109819889, -0.01908140257000923, -0.03990627080202103, -0.004687644075602293, -0.05071977153420448, 0.13094811141490936, 0.04108373820781708, -0.009415710344910622, -0.022319957613945007, -0.057688090950250626, 0.001021683681756258, 0.07349760085344315, 0.01943008042871952, -0.06718037277460098, -0.012593487277626991, 0.04740738868713379, 0.047851305454969406, 0.005603589583188295, -0.04879247024655342, -0.042381107807159424, -0.04812788963317871, 0.016880175098776817, -0.01077780220657587, 0.09845669567584991, -0.015736212953925133, -0.09201624989509583, 0.006102380808442831, 0.028512807562947273, -0.05156542360782623, -0.07027845829725266, 0.032770946621894836, 0.033833760768175125, -0.03485750034451485, 0.04720352217555046, 0.028059376403689384, -0.0009903082391247153, -0.014955956488847733, -0.0016216804506257176, 0.0497969314455986, 0.006881117355078459, -0.036586444824934006, -0.027937747538089752, -0.02432776615023613, 0.004313723184168339, -0.03000648505985737, 0.0119984932243824, -0.043053966015577316, 0.036683328449726105, 0.014898526482284069, 0.016938675194978714, -0.012947719544172287, 0.013496599160134792, -0.03216264396905899, -0.0301501527428627, -0.004066803492605686, -0.023036161437630653, 0.04387056827545166, -0.0037505740765482187, -0.025877129286527634, -0.04468989744782448, 0.03377532586455345, 0.00994153507053852, 0.008904192596673965, 0.07862111181020737, -0.014222029596567154, 0.0018969696247950196, 0.01500833872705698, -0.020974967628717422, 0.039176683872938156, -0.041769858449697495, -0.049469392746686935, -0.02193293534219265, -0.05763082951307297, -0.022465946152806282, -0.010362518951296806, -0.034131478518247604, -0.011037970893085003, 0.009617215022444725, 0.00022654036001767963, 0.019031498581171036, -0.036076247692108154, -0.09805809706449509, -0.02880258485674858, -0.3213227391242981, 0.004070103634148836, -0.02286570891737938, 0.005264792125672102, -0.02016589045524597, -0.04813956096768379, -0.01685388945043087, -0.008446146734058857, 0.017980391159653664, 0.013313266448676586, 0.08624652028083801, 0.01864979974925518, -0.016401086002588272, -0.03324327990412712, -0.021421344950795174, 0.023238327354192734, 0.03642847761511803, -0.0273764505982399, -0.06691313534975052, 0.03406824544072151, 0.011996960267424583, -0.004696849267929792, -0.031225476413965225, -0.04492505267262459, 0.022701004520058632, -0.02540448307991028, 0.12818248569965363, 0.022367464378476143, 0.047231078147888184, -0.05836604908108711, 0.01702914386987686, -0.005791945848613977, -0.03603794053196907, -0.039689674973487854, 0.016716398298740387, -0.04280737787485123, 0.005737995728850365, 0.07629943639039993, -0.029327044263482094, 0.006971851456910372, -0.00502758426591754, 0.01815173029899597, 0.043400224298238754, -0.030752521008253098, -0.01556782890111208, 0.0018111745594069362, -0.024181436747312546, -0.05345037207007408, 0.016289636492729187, 0.03504418581724167, 0.0012668948620557785, 0.04488722234964371, 0.02715778909623623, 0.045076485723257065, -0.03649870306253433, -0.03478662669658661, -0.0010551890591159463, -0.03728308528661728, -0.05030254274606705, -0.003214284311980009, 0.018656814470887184, -0.03256940469145775, 0.01814642921090126, -0.01278891321271658, 0.003673527156934142, -0.05798850953578949, 0.014728318899869919, 0.01610454171895981, 0.05287646874785423, -0.02265077270567417, -0.07495679706335068, 0.03014853037893772, -0.027142593637108803, 0.029459048062562943, -0.014533039182424545, 0.052040375769138336, -0.0005799377686344087, -0.018743569031357765, 0.009021488949656487, 0.009466966614127159, 0.0232767965644598, 0.058088671416044235, 0.04644773155450821, 0.008569752797484398, 0.02363952435553074, 0.021745700389146805, 0.030032668262720108, 0.00465781893581152, 0.011026888154447079, 0.027680018916726112, -0.011183351278305054, -0.0038838686887174845, -0.032095082104206085, -0.009163718670606613, 0.0550602562725544, 0.06341391056776047, -0.2988557815551758, 0.051399115473032, 0.0019339928403496742, 0.055215101689100266, 0.02132180519402027, 0.0036018006503582, 0.02318192459642887, -0.06755869835615158, 0.03174467384815216, 0.010148991830646992, 0.004762410186231136, 0.06450311094522476, 0.016091013327240944, -0.07710883766412735, -0.022982820868492126, -0.012219764292240143, 0.09717200696468353, -0.016282904893159866, 0.027281930670142174, 0.038723528385162354, 0.014225753955543041, 0.00848519615828991, 0.18342456221580505, 0.03316197171807289, -0.06704508513212204, 0.008541756309568882, 0.0254577174782753, 0.021061301231384277, 0.03948448970913887, 0.036337099969387054, 0.04376683384180069, 0.0149588817730546, -0.0068517872132360935, 0.06120603531599045, -0.002913994947448373, 0.013249259442090988, 0.031796716153621674, 0.03146215155720711, 0.029762079939246178, -0.031516268849372864, -0.002282753586769104, 0.0008760700584389269, -0.016236374154686928, 0.033569589257240295, 0.03399219736456871, -0.009426094591617584, 0.0005636588903144002, -0.051464200019836426, -0.032211318612098694, -0.008153070695698261, -0.024936815723776817, -0.038284990936517715, -0.025082621723413467, -0.045229315757751465, 0.02668498270213604, 0.021471364423632622, -0.004759587347507477, 0.038473814725875854, 0.0340474508702755, -0.03976627066731453, -0.03862399235367775, -0.03609057515859604, 0.07938533276319504, 0.021153712645173073, -0.013833143748342991], "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73dab258-d5a6-413a-8bf3-450a6e236fce", "node_type": "4", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "0139795258b42ec3a02280199f5d715b673fecc8c665f5197a6e6fbbc696c73c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "48a796a1-ff13-4e1a-8f85-59de9c6f2620", "node_type": "1", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "fa9ba114ec4ea7e7257fe8b7d52fcc5b235ad6f4c4319eb11a8b9609cecd6d80", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "637c69a2-8ed0-4cd8-8e13-d035e20a8e80", "node_type": "1", "metadata": {}, "hash": "4b6eeeda40b7f1e19fef9ad27c704528599e1f8b67a5cc2387446a821666d64d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "This file contains all the pre-computed magic for fast searching!\n\n#### What the `index_data.json` File Looks Like (Snippet)\n\nThis is a small part of the generated `index_data.json`. It looks complicated, but it's just a structured way of storing our \"secret catalog\":\n\n**`src/main/resources/data/index_data.json` (Snippet)**\n```json\n{\n  \"invertedIndex\" : {\n    \"don't\" : [ { \"docId\" : 24, \"freq\" : 1, \"positions\" : [ 1 ] } ],\n    \"analysi\" : [ { \"docId\" : 1, \"freq\" : 1, \"positions\" : [ 19 ] } ],\n    \"python\" : [\n      { \"docId\" : 13, \"freq\" : 1, \"positions\" : [ 18 ] },\n      { \"docId\" : 26, \"freq\" : 4, \"positions\" : [ 0, 11, 16, 17 ] }\n    ]\n  },\n  \"tfIdfVectors\" : {\n    \"1\" : { \"rivest\" : 2.31, \"stein\" : 2.31, \"code\" : 1.01 },\n    \"2\" : { \"profession\" : 1.83, \"engin\" : 0.95, \"practic\" : 0.45 },\n    \"3\" : { \"engin\" : 0.95, \"c\" : 0.84, \"code\" : 1.49 }\n  },\n  \"idfScores\" : {\n    \"don't\" : 1.834, \"straub\" : 2.311, \"opus\" : 2.311, \"analysi\" : 1.357\n  }\n}\n```\n*   `invertedIndex`: Maps a word (like \"python\") to a list of \"postings\". Each \"posting\" tells us which book (`docId`), how many times (`freq`), and where (`positions`) the word appears in that book.\n*   `tfIdfVectors`: For each book (`docId`), it lists all the important words (`term`) in that book and their \"importance score\" (`tfIdf`).\n*   `idfScores`: For each word (`term`), it lists its overall rarity/importance score across *all* books.", "mimetype": "text/plain", "start_char_idx": 4844, "end_char_idx": 6255, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "637c69a2-8ed0-4cd8-8e13-d035e20a8e80", "embedding": [-0.04898085072636604, 0.006601247005164623, -0.031213685870170593, 0.05277842655777931, 0.019560664892196655, -0.0498754046857357, -0.014473519288003445, 0.029541291296482086, -0.01655871793627739, 0.00156008533667773, 0.02799658663570881, -0.023128241300582886, 0.002375833224505186, -0.018130427226424217, -0.013296356424689293, 0.015267531387507915, -0.043157532811164856, 0.013559372164309025, 0.0006204252131283283, -0.03830365464091301, 0.07689786702394485, -0.009131128899753094, 0.052868280559778214, -0.06135483458638191, 0.04429730772972107, 0.07035882025957108, -0.06038612872362137, -0.0734533816576004, -0.006647668778896332, -0.2331286370754242, -0.05494453012943268, -0.060260310769081116, 0.08960269391536713, 0.03264837712049484, -0.03596344590187073, 0.04852599650621414, -0.03784377872943878, 0.049133431166410446, -0.017076218500733376, -0.0037823799066245556, -0.03371221199631691, -0.011067155748605728, -0.03691727668046951, 0.014417499303817749, 0.015441793948411942, -0.034196268767118454, -0.024836968630552292, -0.027747442945837975, 0.013304905034601688, 0.027656782418489456, -0.05554661527276039, -0.08408896625041962, 0.020448224619030952, 0.020819513127207756, 0.02873055823147297, 0.012299122288823128, 0.06656154990196228, 0.04312966391444206, 0.02299896813929081, -0.008665488101541996, 0.08206713944673538, 0.003229420632123947, -0.12510907649993896, 0.07379958033561707, -0.03007728047668934, 0.01667211763560772, -0.02575584501028061, -0.03639750927686691, -0.033487819135189056, 0.03327864035964012, -0.008184291422367096, 0.06584445387125015, 0.033999066799879074, 0.10283645987510681, 0.040960151702165604, -0.02446952648460865, 0.010235277935862541, -0.05806713178753853, 0.0007821538602001965, 0.002184466924518347, -0.010685096494853497, -0.04746397212147713, -0.005438854917883873, -0.029621735215187073, 0.08004122972488403, 0.01797330565750599, 0.04770731180906296, 0.01914205029606819, 0.03773486986756325, -0.032963212579488754, 0.004785064607858658, -0.07197190821170807, -0.004563417285680771, 0.059390973299741745, -0.045480139553546906, -0.0008425078121945262, -0.02595667541027069, 0.024670502170920372, 0.030212832614779472, 0.35139200091362, 0.010381273925304413, 0.02063671313226223, -0.05854589864611626, -0.011270231567323208, -0.01561731193214655, -0.04586396366357803, 0.08933892846107483, -0.03192200884222984, -0.03369686380028725, -0.017426082864403725, -0.0006600289489142597, -0.03375706449151039, 0.03566966950893402, -0.06848332285881042, 0.00961458683013916, 0.0226292684674263, 0.01660269685089588, 0.04044387489557266, 0.016953298822045326, 0.029580609872937202, -0.020264027640223503, 0.029608407989144325, 0.007523112930357456, 0.022650370374321938, 0.01919698715209961, 0.04445628821849823, 0.034246839582920074, 0.05049827694892883, -0.0001609168975846842, -0.00391242653131485, 0.005134722217917442, -0.007339242845773697, -0.08122583478689194, 0.00778535520657897, 0.049009159207344055, 0.0007820976315997541, -0.05707983672618866, -0.008059564046561718, -0.010847697034478188, 0.03288450464606285, 0.003914468921720982, 0.026704799383878708, -0.00657642399892211, 0.012891577556729317, -0.06922952085733414, 0.1346552073955536, 0.007053051609545946, 0.005440069362521172, -0.007946155965328217, -0.07139259576797485, 0.020078130066394806, 0.011450015008449554, -0.015655986964702606, -0.07779425382614136, 0.01908150687813759, 0.06717517226934433, 0.03153116628527641, -0.024174373596906662, -0.033993903547525406, -0.06359806656837463, -0.030603773891925812, 0.030738171190023422, -0.05319686606526375, 0.11412183940410614, -0.004769389517605305, -0.07630293816328049, -0.0416904017329216, 0.05862506851553917, -0.13471034169197083, -0.03998764231801033, 0.021366393193602562, 0.009788601659238338, -0.03084598481655121, 0.12221521139144897, 0.02913030982017517, 0.03542819991707802, -0.06648484617471695, -0.005202548578381538, 0.030927786603569984, 0.026270288974046707, 0.03932464122772217, -0.06505969166755676, -0.032165054231882095, 0.07259981334209442, -0.0009602721547707915, -0.023959416896104813, -0.03101852349936962, -0.04037448763847351, 0.027348848059773445, 0.01416369155049324, -0.02291548065841198, -0.019847555086016655, -0.008212010376155376, 0.022800616919994354, 0.00746474415063858, 0.0002974129456561059, 0.007842592895030975, -0.0324849933385849, -0.015555830672383308, -0.029764346778392792, 0.004603593144565821, 0.01720884069800377, -0.013181508518755436, 0.026991289108991623, -0.0013256061356514692, 0.016728635877370834, 0.012856926769018173, -0.04521807283163071, 0.0499076321721077, -0.0671568363904953, -0.005199681501835585, -0.01046791858971119, -0.05644325911998749, -0.035048458725214005, -0.029973112046718597, -0.0376298725605011, 0.04267233982682228, 0.03859509527683258, -0.006579793523997068, 0.03256998956203461, 0.0024620688054710627, -0.08673973381519318, -0.06795742362737656, -0.30236512422561646, -0.027448423206806183, -0.03811078146100044, 0.0039439452812075615, 0.0020381563808768988, -0.06683266162872314, 0.017606139183044434, 0.017040520906448364, 0.001806061016395688, 0.027962516993284225, 0.0744042843580246, -0.0346015989780426, -0.023575736209750175, -0.021121671423316002, -0.02737121656537056, 0.02568437159061432, 0.00019495443848427385, -0.06300196051597595, -0.022518832236528397, 0.0022984661627560854, 0.0589129813015461, 0.015209277160465717, 0.007058587856590748, -0.02725357934832573, 0.023207025602459908, 0.006274330895394087, 0.07464540004730225, 0.02133164368569851, 0.04443960636854172, -0.07557176798582077, 0.02127891778945923, 0.02087130956351757, -0.06581593304872513, -0.0359283983707428, 0.021301303058862686, -0.04394327104091644, -0.03661706671118736, 0.004130176268517971, -0.04198814928531647, 0.051491156220436096, -0.0275482889264822, 0.05987970530986786, -0.014495418407022953, -0.03398994356393814, -0.08400770276784897, -0.015328806824982166, 0.03628883510828018, -0.024959977716207504, 0.023768067359924316, 0.05381855368614197, -0.0015912019880488515, 0.027931587770581245, 0.035713791847229004, 0.043957632035017014, -0.017352253198623657, -0.01852758787572384, -0.04231083020567894, -0.03276882320642471, -0.021504903212189674, -0.063368059694767, 0.010902293026447296, -0.010140676982700825, 0.009649901650846004, 0.017887834459543228, -0.012251798063516617, -0.020962044596672058, 0.005704036448150873, 0.045947205275297165, 0.025228828191757202, -0.020010683685541153, -0.06708794832229614, -0.005319652147591114, -0.018549984320998192, 0.029169837012887, 0.03614472970366478, 0.033123526722192764, -0.021170724183321, -0.061661623418331146, 0.017835980281233788, 0.001054307329468429, 0.03679848462343216, -0.006950903218239546, 0.0029655112884938717, -0.012134979479014874, 0.014411437325179577, 0.0073378379456698895, 0.04531342536211014, 0.026878314092755318, 0.013201638124883175, 0.0421089269220829, -0.0012962165055796504, 0.01840255782008171, 0.024287184700369835, 0.040945619344711304, -0.001971811056137085, 0.08292829990386963, -0.2722695469856262, 0.0500531904399395, 0.0004712879890576005, 0.046259794384241104, 0.036714427173137665, -0.043562788516283035, 0.029774731025099754, -0.04215441271662712, 0.04369078576564789, -0.013918519020080566, 0.0010788739891722798, 0.023807117715477943, -0.004323875065892935, -0.07527385652065277, -0.008970486000180244, 0.00010941885557258502, 0.09123938530683517, 0.007923804223537445, 0.01748257502913475, 0.006460212636739016, 0.05264635384082794, 0.013938076794147491, 0.21846911311149597, 0.0443233996629715, -0.0006895376136526465, -0.0425146222114563, 0.004108429420739412, 0.0212873388081789, 0.020083580166101456, 0.030220475047826767, 0.09642445296049118, -0.022471390664577484, 0.07225369662046432, 0.04959113523364067, -0.006875702645629644, 0.021783938631415367, 0.07538565248250961, 0.006430445704609156, 0.005769648589193821, -0.0070434981025755405, 0.008828056044876575, 0.0034712115302681923, -0.05878039449453354, 0.00361736211925745, 0.045917779207229614, -0.007729328703135252, -0.0037532274145632982, -0.03167015686631203, -0.08107119053602219, -0.008557871915400028, -0.05241494998335838, -0.02538236603140831, 0.012120061554014683, -0.03746921941637993, 0.025554271414875984, 0.02667650766670704, -0.035276636481285095, 0.04302040860056877, -0.020632047206163406, -0.016928769648075104, -0.014887026511132717, 0.05103621259331703, 0.037825413048267365, 0.028572406619787216, 0.02419157885015011], "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73dab258-d5a6-413a-8bf3-450a6e236fce", "node_type": "4", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "0139795258b42ec3a02280199f5d715b673fecc8c665f5197a6e6fbbc696c73c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c3291528-1a47-4c65-9e1a-d96ba67525f4", "node_type": "1", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "11a5e018fa0c055d1fc11f2e2a18363823bccf4c76baed4754c3cb2f0b2d085c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6906ebfe-b03b-4030-b2f0-89f902232c90", "node_type": "1", "metadata": {}, "hash": "63e498a2ed077782b7c0f924c538c96117262cb9551c9b05f88d3e25aee4e24c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "*   `idfScores`: For each word (`term`), it lists its overall rarity/importance score across *all* books.\n\n### Under the Hood: Building the Search Index Step-by-Step\n\nLet's visualize the `IndexerMain` at work as it builds this powerful index:\n\n```mermaid\nsequenceDiagram\n    participant IndexerMain\n    participant BookLoader\n    participant TextProcessor\n    participant IndexBuilder\n    participant TfIdfCalculator\n    participant index_data.json\n\n    IndexerMain->>BookLoader: \"Load all book details from book.json\"\n    BookLoader-->>IndexerMain: \"Here's a list of all Book objects!\"\n    loop For each Book\n        IndexerMain->>TextProcessor: \"Clean and prepare text from book's title, description, etc.\"\n        Note over TextProcessor: Removes common words (\"the\"), corrects spelling, shortens words (stemming)\n        TextProcessor-->>IndexerMain: \"Here are the important, clean words (tokens)!\"\n        IndexerMain->>IndexBuilder: \"Add these tokens and book ID to the Inverted Index\"\n        Note over IndexBuilder: Records which words are in which book, and where.\n    end\n    IndexerMain->>TfIdfCalculator: \"Calculate overall word importance (IDF) across all books\"\n    IndexerMain->>TfIdfCalculator: \"Calculate word importance for each book (TF-IDF)\"\n    Note over TfIdfCalculator: Combines how often a word appears in a book with how rare it is overall.\n    TfIdfCalculator-->>IndexerMain: \"Here are all the TF-IDF scores!\"\n    IndexerMain->>index_data.json: \"Save Inverted Index, TF-IDF scores to index_data.json\"\n    Note over IndexerMain: This file is used later for fast searching!\n    IndexerMain-->>You: \"Index build complete!\"\n```\n\n### The Tools for Building the Index\n\nLet's look at the key components that `IndexerMain` uses to create the search index.\n\n#### Storing the Index Data: `SearchIndexData`\n\nThis class is like a digital container that holds all the different parts of our pre-computed index.", "mimetype": "text/plain", "start_char_idx": 6150, "end_char_idx": 8073, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "6906ebfe-b03b-4030-b2f0-89f902232c90", "embedding": [-0.0403936505317688, 0.020256686955690384, -0.014706145040690899, -0.009826142340898514, 0.05122237652540207, -0.01222965307533741, -0.022287163883447647, 0.015514595434069633, -0.0024843246210366488, -0.041501861065626144, 0.03911488503217697, -0.05081887170672417, 0.015241649001836777, 0.007445562165230513, 0.0006607568939216435, -0.0015701523516327143, -0.036639224737882614, 0.0024769604206085205, -0.004298611544072628, -0.007884223014116287, 0.11648855358362198, 0.027829140424728394, 0.013519215397536755, -0.06459403038024902, 0.027616260573267937, 0.08590170741081238, 0.006132803857326508, -0.020127415657043457, -0.009813285432755947, -0.2146734595298767, -0.004222868010401726, -0.09351827204227448, 0.0797278881072998, 0.03189028054475784, -0.0024666644167155027, -0.012071994133293629, -0.022683849558234215, 0.053106967359781265, -0.022404944524168968, 0.004890686832368374, -0.06195155158638954, -0.02533946931362152, -0.05115652084350586, 0.030285827815532684, -0.01260028500109911, -0.0104159414768219, -0.025868067517876625, -0.05855287238955498, 0.043428998440504074, 0.012257919646799564, -0.08303487300872803, 0.01289034727960825, -0.0077438210137188435, -0.00429518474265933, 0.01564752869307995, -0.005040672607719898, 0.055292654782533646, 0.04752437770366669, -0.043761491775512695, 0.00572146475315094, 0.04858650267124176, -0.014847509562969208, -0.08126691728830338, 0.08553396910429001, -0.0293266698718071, -0.003817649558186531, 0.013857381418347359, -0.04536457359790802, -0.006067462265491486, 0.03957335278391838, -0.03649850934743881, 0.07470984756946564, 0.037891317158937454, 0.07033824175596237, 0.008185665123164654, -0.04171751067042351, -0.01569422520697117, 0.006965952925384045, 0.0053690336644649506, -0.038238704204559326, -0.03235635533928871, -0.03883066400885582, 0.05771876499056816, -0.03195488080382347, 0.004101600032299757, -0.039877716451883316, 0.023018857464194298, -0.027748864144086838, 0.05036313086748123, 0.02995103783905506, 0.029046811163425446, -0.038280438631772995, -0.005578902550041676, 0.024757876992225647, -0.033381905406713486, 0.048676155507564545, -0.059035565704107285, 0.06909433007240295, -0.005911447573453188, 0.38377267122268677, -0.013723750598728657, 0.023838933557271957, -0.01302323304116726, -0.02136550098657608, -0.04552534222602844, -0.08067720383405685, 0.03048250637948513, 0.01014617457985878, -0.002164087723940611, -0.025331029668450356, 0.044629573822021484, -0.049970176070928574, 0.0025963247753679752, -0.008841757662594318, -0.06653330475091934, -0.025802576914429665, -0.03815976157784462, 0.018998758867383003, -0.044668786227703094, 0.030713988468050957, -0.024384163320064545, -0.01473987940698862, 0.021127674728631973, 0.04184765741229057, 0.044632960110902786, -0.009472141973674297, -0.024771302938461304, 0.0030215138103812933, -0.003324127057567239, 0.010363527573645115, 0.011872055940330029, 0.0071181063540279865, -0.0987793356180191, -0.026140376925468445, 0.045244839042425156, 0.0008747526444494724, -0.01620854064822197, -0.024607161059975624, 0.010962231084704399, -0.02489473484456539, -0.004783486481755972, -0.03140889108181, 0.004214943386614323, -0.015427600592374802, -0.07330935448408127, 0.15376417338848114, 0.0099601736292243, -0.02986462600529194, 0.005149787291884422, -0.09180252999067307, -0.01601741835474968, 0.032561033964157104, -0.018187033012509346, -0.055423710495233536, 0.002216011518612504, 0.08462996035814285, 0.04984164610505104, 0.009612863883376122, -0.06507453322410583, -0.0384981743991375, -0.07227140665054321, 0.05215362831950188, -0.021186670288443565, 0.10557268559932709, 0.009654880501329899, -0.0374765619635582, -0.027539005503058434, 0.03133198246359825, -0.07243384420871735, -0.055759068578481674, -0.005659149028360844, 0.03321317210793495, 0.0006103494670242071, 0.03003857471048832, 0.037205152213573456, 0.026262760162353516, 0.027408288791775703, 0.026087190955877304, 0.019104911014437675, 0.01014073844999075, 0.028656424954533577, -0.02052266150712967, -0.027515612542629242, -0.00351065956056118, -0.006072681862860918, -0.022205356508493423, -0.04337861016392708, 0.00259445421397686, 0.017544176429510117, 0.014436725527048111, -0.04058743268251419, -0.015948902815580368, -0.0645066350698471, -0.0054723769426345825, -0.021869421005249023, -0.031606148928403854, 0.056223273277282715, -0.034983787685632706, 0.02088307961821556, -0.05177922174334526, 0.08371701091527939, 0.04201183840632439, -0.009419073350727558, 0.06760906428098679, -0.0030055243987590075, 0.03398064151406288, 0.05856317654252052, -0.020352160558104515, 0.00880135502666235, -0.053669124841690063, -0.034834109246730804, -0.014654156751930714, -0.03685490041971207, -0.02921539545059204, -0.03220234811306, -0.03691212087869644, 0.023839129135012627, 0.03353600203990936, 0.05524757131934166, 0.03747153654694557, -0.015786753967404366, -0.08440252393484116, -0.0007373744738288224, -0.31491607427597046, -0.021838350221514702, -0.033488307148218155, 0.0026725877542048693, -0.02523626573383808, -0.03073791228234768, 0.02283688262104988, 0.0007603860576637089, -0.0011359893251210451, -0.012289570644497871, 0.10467784851789474, -0.021027173846960068, -0.045135367661714554, -0.035419296473264694, -0.01828724518418312, -0.0348709337413311, 0.06234468147158623, -0.025099696591496468, -0.0161867905408144, -0.010725263506174088, 0.02384028397500515, -0.020089801400899887, 0.019655272364616394, -0.03086400032043457, 0.08901945501565933, -0.022211361676454544, 0.09069473296403885, -0.03446337580680847, 0.03928830102086067, -0.06043009087443352, 0.02077486552298069, -0.017188886180520058, -0.05461148917675018, -0.06010402366518974, 0.040832001715898514, -0.047648150473833084, -0.032289791852235794, 0.05876971408724785, -0.03320371359586716, 0.07014129310846329, -0.01928495056927204, 0.009661206975579262, 0.010061448439955711, 0.00127750588580966, -0.024836188182234764, 0.00657672667875886, 0.00884756725281477, -0.10034208744764328, 0.03072194568812847, 0.08061835914850235, -0.00428084097802639, -0.02086239494383335, 0.048287004232406616, 0.04090528562664986, -0.016023632138967514, -0.02179793268442154, 0.017778392881155014, -0.04760057479143143, 0.00414290651679039, -0.024074958637356758, 0.03712235763669014, -0.011408316902816296, 0.010067197494208813, 0.0021940995939075947, -0.0232051033526659, -0.02321850135922432, -0.016924425959587097, 0.02866823598742485, 0.03936689719557762, -0.05585827678442001, -0.09712778031826019, 0.0031676562502980232, -9.267631867260206e-06, 0.042147547006607056, 0.013974333181977272, 0.07359746098518372, -0.003107504453510046, -0.023176008835434914, 0.07412209361791611, 0.006786740384995937, -0.011804204434156418, 0.013221192173659801, 0.06374839693307877, 0.023611916229128838, 0.020962117239832878, 0.04381357878446579, 0.0653250440955162, 0.012970195151865482, 0.010976503603160381, 0.04682954028248787, 0.01077873446047306, 0.005778267979621887, 0.0020615144167095423, -0.03273753449320793, 0.03924719616770744, 0.010217022150754929, -0.29106512665748596, 0.0446433424949646, 0.0055876225233078, 0.032836709171533585, 0.01598317176103592, -0.007098555099219084, 0.04268472269177437, -0.012962180189788342, 0.006316352169960737, 0.03161792457103729, -0.00419679144397378, 0.02304179035127163, -0.00673703895881772, -0.03936527296900749, 0.0055882614105939865, 0.033733028918504715, 0.029801424592733383, 0.0069758035242557526, 0.060390274971723557, -0.03264971449971199, 0.01415424793958664, -0.012377746403217316, 0.19604340195655823, 0.029457664117217064, 0.008239452727138996, 0.004408911801874638, 0.005509886424988508, 0.009317348711192608, 0.026400655508041382, 0.04143252968788147, 0.05724332481622696, -0.011895858682692051, 0.11884580552577972, 0.027694880962371826, 0.03159092739224434, 0.0038186570163816214, 0.059089090675115585, 0.022413676604628563, -0.001008588238619268, 0.0054746223613619804, -0.017638791352510452, 0.028185423463582993, -0.030851049348711967, 0.07207349687814713, 0.04327195882797241, 0.034512974321842194, -0.006025339476764202, -0.05000632628798485, -0.06457583606243134, -0.023545000702142715, -0.017618272453546524, -0.04171237349510193, -0.011682551354169846, -0.052050091326236725, -0.012372191995382309, 0.0182648878544569, -0.06330035626888275, 0.023807356134057045, -0.0019052360439673066, -0.04002075642347336, 0.009557323530316353, 0.011918336153030396, 0.0649719387292862, -0.009365522302687168, 0.008961917832493782], "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73dab258-d5a6-413a-8bf3-450a6e236fce", "node_type": "4", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "0139795258b42ec3a02280199f5d715b673fecc8c665f5197a6e6fbbc696c73c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "637c69a2-8ed0-4cd8-8e13-d035e20a8e80", "node_type": "1", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "d385b416ae7e62eaa5de9a391eb117fff30155533ec23071e8f750978f013390", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1fb3a5b1-9718-49dc-b646-f446bddb149c", "node_type": "1", "metadata": {}, "hash": "10b5064c17c0dc6ae5ff267b69f56c76ff51a928072ee7a8f04c21fe093f946f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#### Storing the Index Data: `SearchIndexData`\n\nThis class is like a digital container that holds all the different parts of our pre-computed index.\n\n**`src/main/java/domain/SearchIndexData.java` (Simplified)**\n```java\npackage domain;\n\nimport lombok.Getter;\nimport java.util.List;\nimport java.util.Map;\n\npublic class SearchIndexData {\n    @Getter\n    private Map<String, List<Posting>> invertedIndex; // Our word-to-book map\n    @Getter\n    private Map<Integer, Map<String, Double>> tfIdfVectors; // Book-to-word-importance map\n    @Getter\n    private Map<String, Double> idfScores; // Overall word importance scores\n\n    // ... constructors (methods to create a SearchIndexData object) ...\n}\n```\nThis simple class acts as a blueprint for the entire search index data that gets saved to `index_data.json`. It clearly shows the three main pieces of information that make up our index.\n\n#### Loading the Index for the Application: `IndexLoader`\n\nOnce `IndexerMain` has created `index_data.json`, the main DevShelf application needs to load it. This is done by the `IndexLoader`.\n\n**`src/main/java/storage/IndexLoader.java` (Simplified)**\n```java\npackage storage;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport domain.SearchIndexData;\nimport java.io.File;\nimport java.io.IOException;\n\npublic class IndexLoader {\n\n    private final String indexFilePath;\n    private final ObjectMapper mapper;\n\n    public IndexLoader(String indexFilePath) {\n        this.indexFilePath = indexFilePath;\n        this.mapper = new ObjectMapper();\n    }\n\n    public SearchIndexData loadIndex() {\n        System.out.println(\"Loading pre-compiled index from: \" + indexFilePath);\n        try {\n            File indexFile = new File(indexFilePath);\n            if (!indexFile.exists()) {\n                throw new IOException(\"Index file not found! Please run IndexerMain first.\");\n            }\n            // This single line reads the JSON file and converts it into a SearchIndexData object!\n            SearchIndexData indexData = mapper.readValue(indexFile, SearchIndexData.class);\n            System.out.println(\"Index loaded successfully.\");\n            return indexData;\n        } catch (IOException e) {\n            // If the index file is missing, the app can't run correctly.\n            System.err.println(\"FATAL ERROR: Could not load index file.", "mimetype": "text/plain", "start_char_idx": 7925, "end_char_idx": 10267, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "1fb3a5b1-9718-49dc-b646-f446bddb149c", "embedding": [-0.04726314917206764, 0.04028962180018425, -0.012631266377866268, 0.00589380506426096, 0.027225565165281296, -0.016938647255301476, -0.05920206010341644, 0.008713210001587868, -0.015529667027294636, -0.03092518076300621, 0.053241513669490814, -0.03299683332443237, 0.016111500561237335, -0.01212304551154375, -0.019078675657510757, -0.019719121977686882, -0.006795321591198444, -0.0014329763362184167, -0.030665704980492592, -0.026237277314066887, 0.12138374894857407, 0.025546366348862648, 0.014316306449472904, -0.09576461464166641, -0.004795616492629051, 0.095865897834301, 0.003930355422198772, -0.010599315166473389, -0.020781822502613068, -0.18156889081001282, -0.021084152162075043, -0.09179741144180298, 0.042465709149837494, 0.049037571996450424, -0.020295200869441032, 0.011809512041509151, -0.021777184680104256, 0.052111417055130005, 0.011065579950809479, -0.00939523708075285, -0.0629458799958229, 0.019359733909368515, -0.03309687227010727, 0.0663202553987503, -0.016802607104182243, 0.008937769569456577, -0.03409181907773018, -0.029925378039479256, 0.03465656936168671, -0.021425966173410416, -0.10108889639377594, 0.026188703253865242, 0.027517052367329597, 0.02114102989435196, -0.014614002779126167, -0.008238964714109898, 0.016024483367800713, 0.060412757098674774, -0.003695103572681546, 0.04048522189259529, 0.029948441311717033, -0.0056376708671450615, -0.09872443228960037, 0.08205952495336533, 0.01898505538702011, 0.0281071774661541, 0.002538752742111683, -0.08174153417348862, -0.008588424883782864, 0.01276610791683197, -0.000755994813516736, 0.08363556116819382, 0.009183688089251518, 0.053292542695999146, -0.006183653604239225, -0.01840316876769066, -0.019196445122361183, 0.009501547552645206, 0.03364918753504753, -0.026376808062195778, -0.02355147898197174, -0.07597480714321136, 0.04142971336841583, -0.010572975501418114, -0.011429398320615292, -0.01767643913626671, 0.05456872284412384, -0.01753307320177555, 0.04470840096473694, 0.02126348204910755, 0.011478040367364883, -0.013729892671108246, 0.049264393746852875, 0.045703962445259094, -0.04841094836592674, 0.02218146249651909, -0.05540238320827484, 0.05789704620838165, 0.011518514715135098, 0.3735642731189728, -0.029604513198137283, 0.0205828920006752, -0.0006492051179520786, -0.017254812642931938, -0.0585230216383934, -0.09614749997854233, 0.00813214760273695, 0.01702001504600048, 0.03003992699086666, 0.024275122210383415, 0.046831049025058746, -0.042706556618213654, 0.008137349039316177, -0.020187823101878166, -0.04159877449274063, -0.02199591137468815, -0.007322072517126799, 0.006376053672283888, -0.06437709927558899, 0.039158739149570465, 0.01870320737361908, 0.0006503027980215847, -0.003552396548911929, 0.03923162445425987, 0.019221100956201553, -0.027789028361439705, -0.02278153784573078, 0.03873882070183754, 0.006656904239207506, -0.04322623834013939, -0.004265584051609039, -0.010580232366919518, -0.10588780045509338, -0.04693220183253288, 0.04341118410229683, 0.008734788745641708, -0.034473687410354614, -0.01487273070961237, 0.020878851413726807, -0.04971909895539284, 0.011132760904729366, -0.016915898770093918, -0.008318260312080383, -0.0012397854588925838, -0.0377567857503891, 0.08640003949403763, 0.03940746933221817, 0.016898591071367264, -0.026129070669412613, -0.062246985733509064, -0.010927150957286358, 0.03878623619675636, -0.03035876154899597, -0.0633990690112114, 0.035388071089982986, 0.04695034399628639, 0.06513160467147827, 0.02717207744717598, -0.03252841532230377, -0.06918323785066605, -0.050723522901535034, 0.04554818570613861, -0.039290569722652435, 0.08392879366874695, -0.005864279344677925, -0.0420866459608078, -0.019507743418216705, 0.04127098619937897, -0.10461495071649551, -0.04403620585799217, 0.011765891686081886, 0.026128096505999565, -0.044046271592378616, 0.029899386689066887, 0.005086352117359638, 0.006588168442249298, -0.02702026255428791, -0.00011296385491732508, 0.017961211502552032, 0.011769908480346203, 0.010652695782482624, -0.032534241676330566, 0.002085371408611536, 0.011229162104427814, -0.0038408928085118532, -0.043147917836904526, -0.020548347383737564, -8.238182635977864e-05, 0.029091300442814827, 0.01684756949543953, -0.03936198726296425, 0.011017314158380032, -0.04266577214002609, -0.012950836680829525, 0.040554411709308624, -0.018365204334259033, 0.031680092215538025, -0.016127949580550194, 0.018761780112981796, -0.06934235990047455, 0.07173537462949753, 0.046560436487197876, 0.004104602616280317, 0.06262107938528061, -0.029645293951034546, 0.017012370750308037, 0.0177253820002079, -0.05037323758006096, 0.050115589052438736, -0.0850599855184555, -0.013121574185788631, -0.018108109012246132, -0.056309234350919724, -0.047088902443647385, -0.04187208041548729, -0.02588956244289875, -0.01336952019482851, 0.023884832859039307, 0.0023179135750979185, 0.02592925727367401, -0.060985591262578964, -0.08160368353128433, 0.0009579815668985248, -0.3528357744216919, -0.013131476007401943, -0.02138092741370201, -0.020126331597566605, -0.0663408562541008, -0.018078286200761795, 0.011800657026469707, -0.014885089360177517, -0.0029634973034262657, 0.005295509472489357, 0.08563400059938431, -0.01749035343527794, -0.03531685099005699, -0.0022736205719411373, -0.0157490074634552, 0.005095717031508684, 0.011686577461659908, -0.01575329527258873, -0.0625089481472969, -0.013565673492848873, 0.03313251584768295, -0.03157879784703255, -0.007543013896793127, -0.047644566744565964, 0.07064064592123032, -0.0006832915241830051, 0.08599021285772324, 0.028818588703870773, 0.045684508979320526, -0.07760927081108093, 0.031572338193655014, 0.0803101509809494, -0.0540132001042366, -0.06408127397298813, 0.02127734385430813, -0.03917769715189934, -0.018668364733457565, 0.005554600153118372, -0.015851307660341263, 0.0699416995048523, 0.01111406646668911, 0.013601933605968952, 0.016796782612800598, -0.024960367009043694, -0.02680865302681923, 0.022266501560807228, 0.024023110046982765, -0.08442520350217819, 0.02468336559832096, 0.09378629922866821, -0.025207817554473877, 0.007036522496491671, 0.03338409960269928, 0.035654179751873016, 0.018876882269978523, -0.021858008578419685, -0.005566134117543697, -0.06902942806482315, -0.012404040433466434, -0.03983733430504799, 0.05363668501377106, 0.00690798182040453, 0.021747596561908722, 0.044594474136829376, -0.035969894379377365, -0.019233224913477898, 0.012901034206151962, 0.032663848251104355, 0.015947090461850166, -0.008539714850485325, -0.08368102461099625, 0.034754496067762375, -0.008888987824320793, 0.06586156785488129, 0.04119621962308884, 0.1036817654967308, 0.03389136865735054, -0.06332492083311081, 0.0358157753944397, -0.021027324721217155, -0.0398017093539238, 0.00952890608459711, 0.0714566707611084, 0.011185542680323124, -0.013573777861893177, 0.05753075331449509, 0.0019376103300601244, -0.005680154077708721, 0.014848999679088593, 0.006101462058722973, 0.0022678354289382696, 0.017770277336239815, -0.017540695145726204, -0.01144492719322443, 0.05686603859066963, 0.03849823772907257, -0.2601812779903412, 0.019852962344884872, 0.0019380876328796148, 0.03417104482650757, 0.026973016560077667, -0.014021813869476318, 0.020114516839385033, -0.0023917080834507942, 0.04062841460108757, -0.016652971506118774, -0.026506558060646057, -0.005419687367975712, -0.0007613849593326449, -0.07896621525287628, 0.05911530554294586, 0.04174743965268135, 0.07887611538171768, 0.03498471900820732, 0.08569231629371643, -0.0016304159071296453, 0.017909249290823936, 0.0013948337873443961, 0.19836841523647308, 0.04346359148621559, -0.007211966905742884, 0.029182398691773415, 0.005698088090866804, 0.01680612377822399, 0.009499999694526196, 0.03954097256064415, 0.06270401924848557, 0.007442922331392765, 0.09949175268411636, 0.022044841200113297, 0.03644965589046478, -0.030555130913853645, 0.07061269134283066, 0.036920543760061264, 0.02499028481543064, -0.012492834590375423, -0.027140319347381592, 0.04449153319001198, -0.027815943583846092, 0.020730076357722282, 0.056817177683115005, -0.011020107194781303, -0.04716217517852783, -0.02565757744014263, -0.05007867515087128, 0.007948774844408035, 0.0025637848302721977, -0.051072943955659866, 0.015479370951652527, -0.032656315714120865, 0.008583527989685535, 0.011033164337277412, -0.028662091121077538, 0.02830105647444725, -0.018149593845009804, -0.042506374418735504, 0.022158382460474968, 0.005659352522343397, 0.05916363373398781, -0.028759712353348732, -0.00643715588375926], "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73dab258-d5a6-413a-8bf3-450a6e236fce", "node_type": "4", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "0139795258b42ec3a02280199f5d715b673fecc8c665f5197a6e6fbbc696c73c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6906ebfe-b03b-4030-b2f0-89f902232c90", "node_type": "1", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "c8d66d60cacf51d600e3df56febd5c2eada3c61e74c1cdfaf8e9a18b214b20a8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2934dc83-98d8-4d63-a747-c9461be684fd", "node_type": "1", "metadata": {}, "hash": "c00f67e266ed2ce25f9d5b9032f42cffad9bf553ef8ad16560067c1c250ced43", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\");\n            return indexData;\n        } catch (IOException e) {\n            // If the index file is missing, the app can't run correctly.\n            System.err.println(\"FATAL ERROR: Could not load index file.\");\n            throw new RuntimeException(\"Failed to load search index\", e);\n        }\n    }\n}\n```\nThe `IndexLoader` reads the `index_data.json` file. If the file is missing, it stops the application because DevShelf cannot function without its \"secret catalog.\" If it's there, it uses a powerful tool called `ObjectMapper` (from the Jackson library) to quickly turn the JSON text into a `SearchIndexData` object that our Java program can use. This is where the magic of instant search begins when the app starts!\n\n#### Building the Inverted Index: `IndexBuilder`\n\nThis is where the actual \"indexing\" of books happens. For each book, the `IndexBuilder` extracts important words and records where they appear.\n\n**`src/main/java/features/search/IndexBuilder.java` (Simplified `indexDocument` method)**\n```java\npackage features.search;\n\nimport domain.Book;\nimport domain.Posting;\nimport utils.TextProcessor; // Our tool to clean up text\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\npublic class IndexBuilder {\n    private final Map<String, List<Posting>> invertedIndex; // The main index: word -> list of book locations\n    private final TextProcessor textProcessor;\n\n    public IndexBuilder(TextProcessor textProcessor) {\n        this.textProcessor = textProcessor;\n        this.invertedIndex = new HashMap<>();\n    }\n\n    public void indexDocument(Book book) {\n        // Combine all relevant text from the book\n        String bookData = book.getTitle() + \" \" + book.getAuthor() + \" \" + book.getDescription() + \" \" +\n                          book.getCategory() + \" \" + book.getProgLang() + \" \" + String.join(\" \", book.getTag());\n\n        // 1. Clean and normalize the text (e.g., \"Python\" -> \"python\", remove \"the\", shorten \"running\" -> \"run\")\n        List<String> stemmedTokens = textProcessor.process(bookData);\n\n        // 2.", "mimetype": "text/plain", "start_char_idx": 10054, "end_char_idx": 12151, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "2934dc83-98d8-4d63-a747-c9461be684fd", "embedding": [-0.0338459275662899, 0.038980621844530106, 0.017088599503040314, 0.019761061295866966, -0.014615710824728012, -0.0657137930393219, -0.07980677485466003, 0.017514308914542198, 0.0409536175429821, 0.053769007325172424, 0.019105052575469017, -0.030731510370969772, 0.017994852736592293, -0.040170054882764816, -0.026556232944130898, -0.03664780408143997, -0.0014629503712058067, 0.01545226201415062, -0.07022339105606079, -0.005223495420068502, 0.08814524114131927, 0.04010020196437836, 0.036583878099918365, -0.007161389105021954, 0.056950781494379044, 0.046076688915491104, -0.1118573248386383, -0.007293071132153273, 0.009978012181818485, -0.20477662980556488, 0.013391938991844654, -0.04330432787537575, 0.06255291402339935, -0.003836133750155568, 0.017151057720184326, -0.003485217457637191, -0.0424669086933136, 0.02640155889093876, -0.021481027826666832, 0.020636387169361115, 0.04607907682657242, 0.010603347793221474, -0.05337515473365784, 0.005861055105924606, 0.03784321993589401, -0.002755730180069804, -0.06127867475152016, -0.06866142153739929, 0.022657662630081177, 0.02321496419608593, -0.05383427068591118, -0.0029794282745569944, 0.032515544444322586, 0.018250934779644012, 0.02199343778192997, -0.016015375033020973, 0.07180695235729218, 0.029657114297151566, 0.013300498016178608, 0.025582801550626755, 0.0572422593832016, -0.007322316523641348, -0.1433994024991989, 0.10904175788164139, -0.0012982870684936643, 0.0026366461534053087, -0.030297767370939255, 0.004605717025697231, 0.006089517381042242, 0.056927669793367386, -0.05338154733181, 0.007873130030930042, -0.0044204904697835445, 0.10446375608444214, 0.037992775440216064, -0.03204157575964928, -0.007310658227652311, 0.020163295790553093, 0.027506466954946518, -0.007522155065089464, -0.027849966660141945, -0.0027123226318508387, 0.03817160800099373, 0.025250380858778954, 0.05092853307723999, -0.002708368469029665, 0.00990382395684719, 0.011488392949104309, 0.024096058681607246, 0.009808428585529327, 0.0355667881667614, -0.07727103680372238, 0.025808090344071388, 0.018946882337331772, -0.009106322191655636, -0.026217443868517876, -0.022801300510764122, 0.0981784239411354, 0.001249894150532782, 0.3419129550457001, -0.03790510445833206, 0.07333090901374817, -0.055131927132606506, 0.026008112356066704, 0.021676382049918175, -0.0743868499994278, -0.01686074025928974, -0.007807495538145304, 0.0005306780221872032, -0.029501520097255707, 0.022395992651581764, -0.07781917601823807, -0.006292620673775673, -0.03225471451878548, 0.047830380499362946, 0.015042650513350964, 0.037975575774908066, 0.022812701761722565, -0.03990894556045532, -0.012196499854326248, 0.0334441103041172, 0.018893573433160782, -0.01859179511666298, 0.037870727479457855, 0.0757727101445198, 0.04412316903471947, 0.05665330961346626, 0.06599505245685577, -0.00434810621663928, 0.032675646245479584, 0.03979475796222687, 0.018364328891038895, -0.0589049831032753, -0.018973469734191895, 0.0029811428394168615, -0.0017557722749188542, -0.042093101888895035, -0.038189150393009186, 0.0385604128241539, -0.011365794576704502, -0.006160864606499672, -0.033829547464847565, -0.022086624056100845, -0.027181103825569153, -0.06157000735402107, 0.1487468183040619, -0.027496442198753357, -0.055381324142217636, -0.02040206454694271, -0.058406341820955276, -0.02314213290810585, 0.06358569115400314, -0.03045288845896721, -0.04931466281414032, -7.680284761590883e-05, 0.016572168096899986, 0.05045503005385399, 0.015871485695242882, -0.016229350119829178, -0.05858346447348595, -0.048633020371198654, 0.029726406559348106, -0.05520033463835716, 0.08878058195114136, 0.017737776041030884, -0.05562493950128555, -0.012983489781618118, 0.0016755972756072879, -0.06724345684051514, 0.0207448061555624, 0.028466954827308655, -0.043571002781391144, -0.015151380561292171, 0.06933099031448364, 0.02091308683156967, 0.027832143008708954, -0.019194379448890686, 0.002355701755732298, 0.06486190855503082, -0.030478792265057564, 0.04311951994895935, -0.03519071266055107, -0.04158436134457588, 0.02745959907770157, 0.017189787700772285, -0.027328455820679665, -0.0369897298514843, 0.02357933670282364, 0.022302955389022827, 0.004152404144406319, 0.009775884449481964, 0.03180544823408127, -0.04194852337241173, -0.0539083406329155, -0.039632104337215424, 0.017164599150419235, 0.0016579689690843225, -0.01459970511496067, -0.0400472916662693, -0.005023514851927757, 0.022139210253953934, 0.05651566758751869, -0.03255453705787659, -0.021305900067090988, 0.03806300833821297, -0.00871643703430891, 0.035815104842185974, -0.04977995157241821, 0.05419827997684479, 0.011353748850524426, -0.03794611245393753, -0.07730677723884583, -0.0579884871840477, -0.05851633474230766, -0.042014703154563904, -0.03831009194254875, -0.025201603770256042, 0.024040818214416504, 0.0066567338071763515, 0.03663470223546028, -0.00964391604065895, -0.04855593293905258, -0.007480720989406109, -0.33209291100502014, -0.02686663344502449, -0.00511065311729908, 0.03722882270812988, 0.019483622163534164, -0.048066169023513794, -0.022422900423407555, -0.0319921113550663, -0.03641938045620918, 0.019127873703837395, 0.05938689410686493, -0.060690827667713165, -0.016660403460264206, -0.051935989409685135, 0.02309083193540573, 0.0039791748858988285, 0.025101305916905403, -0.02497018501162529, -0.03360674902796745, 0.011169014498591423, 0.05466475337743759, -0.019892903044819832, -0.00026866677217185497, -0.03577722981572151, -2.4189534087781794e-05, 0.002130486536771059, 0.12770487368106842, -0.026488561183214188, 0.054230768233537674, -0.013921638019382954, 0.01865958422422409, -0.0033833279740065336, -0.020902732387185097, -0.0643017366528511, -0.00391962006688118, 0.02084522321820259, -0.01002271007746458, 0.02675667591392994, -0.04731176793575287, 0.00508629297837615, 0.01572524942457676, 0.042932700365781784, 0.019715329632163048, -0.0495300330221653, -0.001726781134493649, 0.027521373704075813, -0.0018924303585663438, -0.1264452487230301, 0.04909292981028557, 0.03613753989338875, -0.012758733704686165, 0.07423921674489975, -0.01156853698194027, 0.07565358281135559, -0.004429512191563845, -0.07316258549690247, -0.03065870702266693, 0.007343146484345198, -0.034822892397642136, -0.02495347335934639, -0.010184798389673233, -0.0009856136748567224, 0.02898920513689518, 0.01548286247998476, -0.02240799553692341, -0.008147642947733402, 0.00014016417844686657, 0.03576996177434921, 0.017040710896253586, 0.0074797929264605045, -0.061855919659137726, 0.015616155229508877, -0.0034992173314094543, 0.010284501127898693, -0.002966431202366948, 0.07742954045534134, -0.04105539619922638, 0.027207937091588974, -0.007870475761592388, -0.0007303874590434134, 0.00933121144771576, 0.046102188527584076, 0.049084730446338654, 0.07052653282880783, 0.0050950744189321995, 0.016598021611571312, 0.009228739887475967, -0.024999350309371948, 0.03625848516821861, 0.037230297923088074, -0.004939242731779814, 0.02643262967467308, -0.012454269453883171, 0.08099567145109177, 0.03267586976289749, 0.045982908457517624, -0.28337737917900085, -0.027143461629748344, -0.002891913754865527, 0.009476236999034882, 0.026731083169579506, -0.012645554728806019, -0.0013412104453891516, 0.016777941957116127, 0.006448990199714899, 0.02190324105322361, -0.055035900324583054, 0.05853456258773804, 0.015686465427279472, -0.07716017216444016, -0.008186797611415386, 0.01311870850622654, 0.0700438916683197, -0.04227735474705696, -0.02602880448102951, -0.020736878737807274, 0.02368786185979843, -0.028244638815522194, 0.18376967310905457, 0.023625466972589493, 0.011647685430943966, -0.03858450800180435, 0.016733482480049133, 0.010444479063153267, 0.026726361364126205, 0.017807727679610252, 0.05164922773838043, -0.010212053544819355, 0.09169661998748779, 0.06283264607191086, 0.0288020558655262, -0.004551370162516832, 0.0687938779592514, 0.002207369776442647, -0.006062614731490612, -0.026658054441213608, -0.08304017037153244, -0.0049300845712423325, -0.07782739400863647, -0.05357340723276138, 0.05360383540391922, -0.04625840112566948, -0.031879883259534836, -0.03927520662546158, -0.021492356434464455, 0.025190619751811028, -0.045438192784786224, 0.008736672811210155, -0.016352178528904915, -0.0400722436606884, 0.04937047138810158, 0.02760370261967182, -0.0008969355258159339, 0.01151742972433567, -0.0010560315568000078, -0.021000906825065613, -0.013253588229417801, -0.07793203741312027, 0.03335244953632355, 0.06473845988512039, 0.008435580879449844], "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73dab258-d5a6-413a-8bf3-450a6e236fce", "node_type": "4", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "0139795258b42ec3a02280199f5d715b673fecc8c665f5197a6e6fbbc696c73c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1fb3a5b1-9718-49dc-b646-f446bddb149c", "node_type": "1", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "b0acf8099d8e9e7fdf7f9870d30e759ab88f8a82b750b7d2f4b824ea2c29eb84", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1a2f3d84-70ca-43bd-9a52-12336770dad1", "node_type": "1", "metadata": {}, "hash": "7e793f8bd8d17e29d695c53d9af3a2e707c55c674262760e30330829b2d051bb", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Clean and normalize the text (e.g., \"Python\" -> \"python\", remove \"the\", shorten \"running\" -> \"run\")\n        List<String> stemmedTokens = textProcessor.process(bookData);\n\n        // 2. Record term positions and frequencies within THIS book\n        Map<String, List<Integer>> termPositions = new HashMap<>();\n        for (int pos = 0; pos < stemmedTokens.size(); pos++) {\n            String term = stemmedTokens.get(pos);\n            termPositions.computeIfAbsent(term, k -> new ArrayList<>()).add(pos);\n        }\n\n        // 3. Add this book's data to the main inverted index\n        for (Map.Entry<String, List<Integer>> entry : termPositions.entrySet()) {\n            String term = entry.getKey();\n            List<Integer> positions = entry.getValue();\n            Posting posting = new Posting(book.getBookId(), positions.size(), positions); // Store book ID, frequency, positions\n            invertedIndex.computeIfAbsent(term, k -> new ArrayList<>()).add(posting); // Add to global index\n        }\n    }\n    // ... getter for invertedIndex\n}\n```\nThe `indexDocument` method is called for every book.\n1.  It gathers all important text about the book (title, author, description, etc.).\n2.  It uses `TextProcessor` (which we'll explore in [Text Normalization Utilities](08_text_normalization_utilities_.md)) to clean up this text, making words lowercase, removing common \"stop words\" like \"a\" or \"the\", and reducing words to their root form (e.g., \"running\", \"ran\", \"runs\" all become \"run\").\n3.  It then goes through each cleaned word (or \"term\") in the book, noting its `bookId`, how many times it appears (`freq`), and where (`positions`). This information is stored in a `Posting` object.\n4.  Finally, it adds this `Posting` to our main `invertedIndex`. If a word is seen for the first time, it gets a new entry. If it's seen again in another book, that book's `Posting` is added to the word's existing list.\n\n#### Calculating Word Importance: `TfIdfCalculator`\n\nAfter the `InvertedIndex` is built, the `TfIdfCalculator` adds a layer of \"smartness\" by calculating TF-IDF scores.", "mimetype": "text/plain", "start_char_idx": 11967, "end_char_idx": 14051, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "1a2f3d84-70ca-43bd-9a52-12336770dad1", "embedding": [-0.02402425743639469, 0.01257925946265459, -0.02838028222322464, -0.013101447373628616, 0.029481446370482445, -0.01785685122013092, 0.040347013622522354, 0.0856487825512886, -0.02644217759370804, 0.001048887730576098, -0.004756301175802946, -0.05240461230278015, 0.057620637118816376, -0.006889876443892717, 0.03107548877596855, -0.018143722787499428, -0.041914280503988266, 0.014530112035572529, -0.007537072524428368, -0.025429094210267067, 0.1256927102804184, 0.011721247807145119, 0.06969480216503143, -0.041701581329107285, 0.05922440066933632, 0.06043398752808571, -0.06950528174638748, -0.07492343336343765, -0.010457548312842846, -0.21274882555007935, -0.03238798305392265, -0.048886917531490326, 0.07102092355489731, 0.017851511016488075, -0.01435813121497631, 0.06059792637825012, -0.0691930279135704, 0.02389618195593357, -0.030264824628829956, -0.02593478187918663, -0.0268897395581007, -0.007389796432107687, -0.030034590512514114, 0.005593388807028532, -0.02172461524605751, -0.04299025982618332, -0.03781234472990036, -0.031099362298846245, -0.02419491484761238, 0.03839299827814102, -0.0357743464410305, -0.03194538876414299, 0.03467896580696106, 0.07962312549352646, 0.03516462445259094, -0.014752445742487907, 0.08574893325567245, 0.059715479612350464, -0.010314378887414932, -0.019138390198349953, 0.030061881989240646, 0.03125676512718201, -0.11957032978534698, 0.014940107241272926, -0.00014670044765807688, -0.025691604241728783, -0.04986678808927536, -0.034933339804410934, -0.05177820846438408, 0.09021144360303879, -0.009079648181796074, 0.09346397966146469, 0.04023072123527527, 0.09360487759113312, 0.07940385490655899, -0.003944574389606714, 0.02611597813665867, -0.034144092351198196, 0.033458150923252106, -0.010074316523969173, 0.017684999853372574, 0.005520661361515522, -0.00747289601713419, -0.022331010550260544, 0.02494347281754017, -0.0002668077067937702, 0.03941618278622627, -0.013506877236068249, -0.006220356095582247, -0.010615000501275063, 0.027296755462884903, -0.017416907474398613, 0.007310422603040934, -0.00025083505897782743, -0.026267297565937042, -0.01700248196721077, -0.031628940254449844, -0.005248596426099539, 0.01790754869580269, 0.40032094717025757, 0.003934024833142757, -0.033602550625801086, -0.05603227764368057, -0.02140170708298683, 0.035289593040943146, -0.011420358903706074, 0.040723253041505814, -0.035121042281389236, -0.04938550665974617, -0.016567502170801163, -0.0004655974335037172, -0.0760829895734787, 0.02496400661766529, -0.002579506253823638, 0.019963346421718597, 0.021324271336197853, 0.03157181292772293, 0.07852748781442642, 0.008917059749364853, 0.016192208975553513, -0.023311659693717957, -0.0011137855472043157, 0.01852470077574253, 0.03810091316699982, 0.013695154339075089, 0.0143058430403471, 0.01929027959704399, 0.01948927342891693, 0.033384062349796295, 0.04255911335349083, 0.0013491990976035595, -0.03872881829738617, -0.06364576518535614, 0.022133581340312958, 0.05923822894692421, -0.012166286818683147, -0.06088446080684662, -0.011277617886662483, -0.018269430845975876, 0.005349636543542147, 0.016099434345960617, 0.007693286519497633, -0.01858500763773918, -0.033358681946992874, -0.0667944997549057, 0.1516680270433426, -0.02487306110560894, -0.008988347835838795, 0.015077829360961914, -0.07064631581306458, -0.009261084720492363, 0.031259868294000626, -0.024771321564912796, -0.04036140814423561, 0.004882589913904667, 0.05871123448014259, 0.014358834363520145, -0.052479472011327744, -0.027636295184493065, -0.03182927519083023, -0.006325241178274155, 0.025202399119734764, -0.0407584123313427, 0.09873076528310776, -0.012900002300739288, -0.04822241887450218, -0.03521691635251045, 0.055900294333696365, -0.1025112196803093, -0.041116826236248016, 0.03408053517341614, -0.03942299261689186, -0.016944758594036102, 0.04934179410338402, 0.010733971372246742, 0.008985458873212337, -0.033892013132572174, -0.029230337589979172, 0.05390290915966034, -0.0005204447079449892, 0.07818328589200974, -0.05170559510588646, -0.07570376247167587, 0.039308615028858185, 0.005400522146373987, -0.016472550109028816, -0.028766199946403503, -0.05000106245279312, 0.022551175206899643, 0.03985944017767906, -0.028791824355721474, -0.04107951745390892, -0.0573403537273407, -0.004018760286271572, 0.014080843888223171, -0.0260719396173954, -0.033865686506032944, 0.0038719745352864265, -0.024762175977230072, -0.03167318180203438, -0.019969774410128593, 0.005260434467345476, 0.018590370193123817, 0.017517665401101112, 0.010793727822601795, 0.012011244893074036, 0.04803368076682091, -0.028459614142775536, 0.046676378697156906, -0.032560236752033234, -0.009052829816937447, -0.0228817667812109, -0.013634373433887959, -0.004320560023188591, -0.042543765157461166, 0.023859301581978798, 0.029388489201664925, 0.024810099974274635, 0.008111556991934776, -0.0012710171286016703, 0.014383506961166859, -0.022517329081892967, -0.05837913975119591, -0.31610342860221863, -0.03436474874615669, -0.03476015105843544, -0.005166627001017332, 0.043132681399583817, -0.039342835545539856, 0.035559508949518204, -0.016789602115750313, 0.02300572395324707, 0.02349775843322277, 0.08672376722097397, -0.015975134447216988, -0.035950709134340286, -0.05396628379821777, 0.016509519889950752, 0.01606087014079094, 0.003648433368653059, -0.047868940979242325, -0.016386153176426888, -0.002301199594512582, 0.015260664746165276, 0.013196012936532497, 0.0143871009349823, -0.013970217667520046, 0.02772953361272812, 0.029065771028399467, 0.05018336698412895, -0.02409493364393711, 0.04685969650745392, -0.03974078968167305, 0.013342969119548798, 0.025262463837862015, -0.05628347769379616, -0.043670039623975754, 0.04320972412824631, -0.033068880438804626, -0.011785442940890789, 0.006033973768353462, -0.06118632107973099, 0.0005625886260531843, -0.028482697904109955, 0.049206145107746124, 0.008124940097332, -0.030476853251457214, -0.047806963324546814, -0.018245026469230652, 0.00044668844202533364, -0.06117354705929756, 0.01773625798523426, 0.04140525311231613, -0.015681084245443344, -0.0021005128510296345, 0.03391571342945099, 0.06005224958062172, -0.00014108292816672474, -0.04827556014060974, -0.02168193832039833, 0.0045422762632369995, 0.0116367032751441, -0.044295065104961395, 0.012806431390345097, -0.01768125779926777, 0.03047337383031845, 0.010570164769887924, -0.024967538192868233, -0.020920800045132637, -0.00399168161675334, -0.0025839649606496096, 0.03666792809963226, -0.0020946275908499956, -0.04256456345319748, 0.05495496466755867, 0.009185859002172947, -0.005676142871379852, 0.04144035279750824, 0.009527314454317093, 0.01415193360298872, -0.03837623447179794, 0.02858286164700985, -0.02531457133591175, 0.07479386776685715, 0.038128890097141266, 0.05301673710346222, -0.03282224014401436, -0.0030731186270713806, 0.018011368811130524, 0.09142785519361496, 0.0252237506210804, 0.014481192454695702, 0.03695378825068474, -0.03979400917887688, -0.006515763700008392, 0.04930602386593819, 0.0676385685801506, -0.005595261696726084, 0.02893800288438797, -0.3254918158054352, 0.01511580590158701, -0.02151692844927311, 0.009729248471558094, 0.013934836722910404, -0.033145442605018616, 0.07301559299230576, -0.05674588307738304, -0.02265678159892559, 0.015716003254055977, -0.019702648743987083, 0.05511267110705376, 0.014174602925777435, -0.06925078481435776, -0.00346428994089365, -0.02992304041981697, 0.0079102898016572, -0.010739537887275219, 0.03522617369890213, -0.04126095771789551, 0.04788742959499359, 0.013125203549861908, 0.20400746166706085, 0.002242077374830842, 0.007543771527707577, -0.0036002860870212317, 0.024787219241261482, 0.021902920678257942, 0.06519700586795807, 0.04187355563044548, 0.039905574172735214, -0.030827313661575317, 0.05036298930644989, 0.04270714148879051, -0.00320300180464983, -0.02005656436085701, 0.03770311921834946, -0.02888786420226097, 0.005090457387268543, -0.02854783460497856, 0.008846440352499485, 0.0032875877805054188, -0.021972477436065674, 0.011434894055128098, 0.044701918959617615, -0.02403872460126877, 0.031311988830566406, -0.04313906654715538, -0.0545162558555603, 0.008480203337967396, -0.05423705652356148, -0.038568735122680664, 0.009463947266340256, -0.04936768114566803, 0.02921449765563011, 0.02978050336241722, -0.005317559465765953, 0.020788075402379036, -0.014660541899502277, -0.03998342901468277, -0.019257137551903725, 0.018564054742455482, 0.05096176639199257, 0.0477747805416584, 0.018311351537704468], "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73dab258-d5a6-413a-8bf3-450a6e236fce", "node_type": "4", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "0139795258b42ec3a02280199f5d715b673fecc8c665f5197a6e6fbbc696c73c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2934dc83-98d8-4d63-a747-c9461be684fd", "node_type": "1", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "92ff0581baf89614e168185c8654bc572d6de4dac5ffa4acc72b81c649075b2b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c07e7aea-c849-4cd6-ab80-a04e34bc8e82", "node_type": "1", "metadata": {}, "hash": "e5535aa21b7024e6ef733e6cd3b77d8260216145a8c51abf64c35eb8b0337599", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#### Calculating Word Importance: `TfIdfCalculator`\n\nAfter the `InvertedIndex` is built, the `TfIdfCalculator` adds a layer of \"smartness\" by calculating TF-IDF scores.\n\n**`src/main/java/utils/TfIdfCalculator.java` (Simplified `calculateIdf` and `calculateTfIdf` methods)**\n```java\npackage utils;\n\nimport domain.Posting;\nimport lombok.Getter;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\npublic class TfIdfCalculator {\n    @Getter\n    private Map<Integer, Map<String, Double>> tfIdfVectors = new HashMap<>(); // Book -> (Word -> Score)\n    @Getter\n    private Map<String, Double> idfScores = new HashMap<>(); // Word -> Overall Rarity Score\n\n    public void calculateIdf(Map<String, List<Posting>> invertedIndex, int totalDocCount) {\n        System.out.println(\"Calculating IDF scores for + \" + invertedIndex.size() + \" terms...\");\n        for(String term : invertedIndex.keySet()) {\n            int docFrequency = invertedIndex.get(term).size(); // How many documents contain this term\n            // IDF: Log (Total # of books / # of books containing this term)\n            double idf = Math.log10( (double) totalDocCount / docFrequency );\n            idfScores.put(term, idf); // Store the rarity score for each term\n        }\n    }\n\n    public void calculateTfIdf(Map<String, List<Posting>> invertedIndex) {\n        System.out.println(\"Calculating TF-IDF vectors for all documents...\");\n        for(String term : invertedIndex.keySet()) {\n            double idf = idfScores.get(term); // Get the overall rarity score\n            List<Posting> postings = invertedIndex.get(term);\n            for(Posting posting : postings ) {\n                int docId = posting.getDocId();\n                int termFreq = posting.getFreq(); // How many times this term appears in THIS book\n                // TF: 1 + Log (Term Frequency in this book)\n                double tf = 1 + Math.log10(termFreq);\n                double tfIdf = tf * idf; // Combine TF and IDF\n                tfIdfVectors.computeIfAbsent(docId, k -> new HashMap<>()).put(term,tfIdf); // Store importance score\n            }\n        }\n    }\n}\n```\n1.", "mimetype": "text/plain", "start_char_idx": 13883, "end_char_idx": 16020, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "c07e7aea-c849-4cd6-ab80-a04e34bc8e82", "embedding": [-0.051183659583330154, 0.014620739966630936, -0.04283268749713898, 0.021833224222064018, 0.04382403939962387, -0.0009604363003745675, -0.010556627996265888, 0.04785861447453499, 0.024583013728260994, -0.012170901522040367, 0.003315904177725315, -0.006307669915258884, 0.05286869406700134, -0.023786595091223717, -0.007188832387328148, -0.021277690306305885, -0.02053982764482498, -0.0015203700168058276, -0.03556516021490097, -0.03386576101183891, 0.13267309963703156, -0.010319492779672146, 0.05058317631483078, -0.040828313678503036, 0.012424402870237827, 0.07341815531253815, -0.039277248084545135, -0.0416652150452137, -0.023742154240608215, -0.2344440519809723, -0.002019464271143079, 0.005773961544036865, 0.07506297528743744, 0.016142278909683228, 0.017019880935549736, 0.013610455207526684, -0.027795568108558655, 0.029067035764455795, 0.021517805755138397, 0.03183763474225998, -0.04658040776848793, 0.007230432704091072, 0.01147009339183569, 0.04472948610782623, 0.0005740932538174093, 0.00806910078972578, -0.08845257759094238, -0.004927145782858133, -0.048559047281742096, 0.017525408416986465, -0.1031157597899437, 0.0025279733818024397, 0.015250626020133495, 0.05548859387636185, 0.03366876393556595, 0.052457544952631, 0.05295814946293831, 0.03267921134829521, 0.00996699370443821, -0.008220409974455833, 0.017557991668581963, 0.010956627316772938, -0.11782458424568176, 0.07503208518028259, 0.019175324589014053, -0.005069674924015999, 0.004336101934313774, -0.06719133257865906, -0.005165185779333115, 0.03605680167675018, -0.03088008053600788, 0.08798672258853912, 0.02750907838344574, 0.05247790738940239, 0.0741601437330246, -0.002767043886706233, 0.009508306160569191, -0.04615649953484535, 0.04553632065653801, -0.04343593493103981, 0.034552015364170074, -0.0434998981654644, -0.0035752414260059595, -0.022415339946746826, 0.00704213697463274, -0.0012872569495812058, 0.02916010655462742, 0.012388630770146847, 0.007445057388395071, 0.019231587648391724, 0.018611248582601547, -0.024222690612077713, 0.007532360032200813, 0.008693699724972248, -0.040313784033060074, -0.00837765447795391, -0.04139452800154686, 0.05264595150947571, 0.04209301620721817, 0.4031708836555481, -0.015072748996317387, 0.013475467450916767, -0.037392862141132355, -0.009969229809939861, -0.007077390793710947, -0.0402505062520504, 0.05255158245563507, -0.026585295796394348, -0.006193715613335371, 0.0002810765872709453, 0.0032239726278930902, -0.0639728233218193, 0.055258143693208694, -0.06870316714048386, 0.03148094564676285, 0.015879178419709206, 0.031095879152417183, 0.04842416197061539, 0.009070267900824547, -0.012605753727257252, -0.022752661257982254, 0.014699210412800312, -0.01613563485443592, 0.036273255944252014, 0.012466834858059883, -0.003759240498766303, -0.0023084168788045645, 0.04653822258114815, 0.024639377370476723, 0.0066204071044921875, -0.012807301245629787, -0.026671450585126877, -0.08609609305858612, 0.0014586697798222303, 0.03763669729232788, 0.00524891447275877, -0.05888478085398674, -0.030603913590312004, -0.025666870176792145, 0.030478259548544884, 0.011462980881333351, 0.012491093017160892, -0.017289800569415092, 0.02487882412970066, -0.07886088639497757, 0.14806826412677765, 0.032754380255937576, 0.017066925764083862, -0.036136262118816376, -0.056468866765499115, 0.02598058246076107, 0.08496136218309402, -0.028986789286136627, -0.07401493936777115, 0.006291027180850506, 0.07595103234052658, 0.053213052451610565, -0.0299308430403471, -0.014032671228051186, -0.030034223571419716, -0.05013517662882805, 0.029064606875181198, -0.02888922207057476, 0.11181759089231491, -0.04628365859389305, -0.04687176272273064, -0.0475102961063385, 0.04093945771455765, -0.13740003108978271, -0.04478432238101959, 0.0035788966342806816, -0.04440049082040787, -0.03652137145400047, 0.07259876281023026, 0.031550921499729156, -0.007263252977281809, -0.05768328905105591, -0.009094193577766418, 0.02813570387661457, 0.004433516412973404, 0.04055624082684517, -0.04526253044605255, -0.054567258805036545, 0.048318322747945786, -0.0036317624617367983, -0.011946724727749825, -0.051399994641542435, -0.0253142099827528, 0.053275853395462036, 0.020598776638507843, -0.01338580809533596, -0.021086370572447777, -0.00400142464786768, 0.016601111739873886, 0.00014992714568506926, -0.028303923085331917, -0.006907676812261343, 0.009504188783466816, -0.043604157865047455, -0.030201319605112076, 0.010692127980291843, -0.0036380745004862547, -0.0069359526969492435, 0.007313561160117388, -0.024740787222981453, -0.004160932265222073, 0.037066731601953506, -0.017380686476826668, 0.054421693086624146, -0.004646047484129667, 0.0017405393300577998, -0.012733333744108677, -0.04900103062391281, -0.04553535580635071, -0.032291144132614136, -0.011059965007007122, 0.002816184423863888, 0.029144631698727608, -0.025408877059817314, 0.05129920318722725, -0.023071272298693657, -0.0848393663764, -0.07444088906049728, -0.30528852343559265, -0.0008058924577198923, -0.01487588882446289, -0.008405054919421673, 0.04779531806707382, -0.06090906634926796, 0.044472020119428635, -0.024970736354589462, 0.01495716255158186, 0.03702065721154213, 0.020882098004221916, -0.002528164070099592, -0.07898154854774475, -0.011606446467339993, -0.02545839548110962, 0.005595275200903416, 0.0287375058978796, -0.049385327845811844, -0.033211324363946915, 0.008771625347435474, 0.029701685532927513, 0.007288681343197823, -0.007320743519812822, -0.051259495317935944, 0.021795956417918205, 0.003886934369802475, 0.0700468122959137, -0.010151616297662258, 0.06436089426279068, -0.04267480596899986, 0.014192740432918072, 0.019067058339715004, -0.027341622859239578, -0.018691902980208397, 0.013749152421951294, -0.05140933021903038, 0.016804860904812813, 0.0010521990479901433, -0.040307752788066864, 0.020475191995501518, -0.030890021473169327, 0.005227682646363974, 0.03256561607122421, -0.02556546777486801, -0.0871318057179451, 0.015736665576696396, 0.0007753776153549552, -0.06651977449655533, 0.013925296254456043, 0.04434879124164581, 0.011986535973846912, 0.026688305661082268, 0.006454354152083397, 0.02771177887916565, -0.016141332685947418, -0.030733417719602585, -0.03678816184401512, -0.04435158520936966, -0.01678025722503662, -0.05372658371925354, 0.015730060636997223, -0.0034613513853400946, 0.006929602008312941, -0.01241861842572689, 0.0037628235295414925, -0.012558292597532272, -0.009035525843501091, 0.007916167378425598, 0.04936551675200462, -0.016399607062339783, -0.03900406137108803, 0.08264078944921494, -0.012302478775382042, -0.0014594865497201681, 0.055764757096767426, 0.024788416922092438, 0.027975769713521004, -0.027130890637636185, -0.023508595302700996, -0.007044740486890078, 0.061820901930332184, 0.018034553155303, 0.0649791806936264, -0.060235921293497086, -0.000834153441246599, 0.019220048561692238, 0.08402138948440552, 0.025462567806243896, -0.010344934649765491, 0.0375603511929512, -0.017677782103419304, 0.03400012478232384, 0.028182441368699074, 0.0033737034536898136, 0.0227170679718256, 0.04023539274930954, -0.30977416038513184, 0.014940891414880753, -0.0240116436034441, 0.041462648659944534, 0.023665929213166237, -0.0336495041847229, 0.05631444975733757, -0.034456826746463776, 0.024989910423755646, -0.03550386056303978, -0.048472389578819275, 0.024546608328819275, -0.0027676494792103767, -0.0689917802810669, 0.015495264902710915, -0.004743534605950117, 0.07670724391937256, -0.04597444459795952, 0.009626000188291073, 0.002069625537842512, 0.04094789922237396, 0.03852303698658943, 0.2079465091228485, 0.0066062696278095245, -0.0005439177039079368, -0.027761459350585938, 0.03816398233175278, -0.0006126296357251704, 0.0037117137107998133, 0.03388034924864769, 0.04857358708977699, -0.05930091813206673, 0.03175949677824974, 0.0174981951713562, -0.0007023499347269535, -0.022172585129737854, 0.01768006756901741, -0.002495942870154977, 0.027583422139286995, -0.03687598183751106, 0.040193844586610794, 0.007269068155437708, -0.006289205048233271, 0.008668269962072372, 0.040208689868450165, -0.03420617803931236, 0.014563183300197124, -0.04725857824087143, -0.04380478337407112, -0.003588701132684946, -0.03156645596027374, -0.0026121498085558414, 0.04190307855606079, 0.007060997188091278, 0.041533276438713074, 0.014985273592174053, 0.014215534552931786, 0.0522506907582283, -0.0007975914631970227, -0.02790864184498787, -0.0037281790282577276, 0.011472338810563087, 0.0267080906778574, 0.03563331440091133, 0.014444837346673012], "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73dab258-d5a6-413a-8bf3-450a6e236fce", "node_type": "4", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "0139795258b42ec3a02280199f5d715b673fecc8c665f5197a6e6fbbc696c73c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1a2f3d84-70ca-43bd-9a52-12336770dad1", "node_type": "1", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "a2b54a3752566e2b503aadbe50df7deea44c954c010965b813b37d887971c7c2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7f4181d1-ff1d-45e8-973f-80cea9975270", "node_type": "1", "metadata": {}, "hash": "9537932b4c1e1f76295b3d741446addb5ba9619fb2c9bf4fb1728c3e8a19c1f8", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "**`calculateIdf`**: This method first calculates the **Inverse Document Frequency (IDF)** for *every unique word* in our entire library. A word that appears in many books (like \"the\" or \"programming\") will have a low IDF score, meaning it's not very discriminating. A word that appears in few books (like \"quantum entanglement\") will have a high IDF score, meaning it's very specific.\n2.  **`calculateTfIdf`**: Then, for each word in each book, it calculates the **Term Frequency-Inverse Document Frequency (TF-IDF)** score.\n    *   **Term Frequency (TF)**: How often a word appears in a *specific book*. More occurrences mean more relevance to *that book*.\n    *   **TF-IDF = TF \\* IDF**: This final score tells us how important a word is to a specific book, taking into account how often it appears *in that book* and how rare it is *across the entire library*. High TF-IDF means a word is very relevant and unique to a document.\n\nThis entire process makes DevShelf incredibly efficient. When you search, it doesn't have to re-read and calculate all this information. It just looks up words and their scores in the pre-built `SearchIndexData`!\n\n### Conclusion\n\nIn this chapter, we delved into **Search Index Management**, the behind-the-scenes magic that makes DevShelf's search incredibly fast. We learned that:\n*   It's an **offline process** performed by `IndexerMain` to prepare book data for quick searching.\n*   The core components are the **Inverted Index** (mapping words to books) and **TF-IDF scores** (measuring word importance).\n*   The `IndexBuilder` populates the inverted index by processing book text and recording word locations.\n*   The `TfIdfCalculator` then assigns importance scores to words within books based on their frequency and rarity.\n*   All this prepared data is saved into `index_data.json` and loaded by the `IndexLoader` when DevShelf starts, turning our digital library into an instant search powerhouse.\n\nThis efficient preparation of data is crucial for the \"brain\" of DevShelf, our search engine. In the next chapter, we'll explore how this pre-computed index is actually used to answer your search queries!", "mimetype": "text/plain", "start_char_idx": 16022, "end_char_idx": 18168, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "7f4181d1-ff1d-45e8-973f-80cea9975270", "embedding": [-0.03351685404777527, -0.007073314394801855, -0.011781908571720123, -0.01680547371506691, 0.0385773666203022, 0.045919474214315414, 0.010337931104004383, -0.005919590126723051, 0.043817829340696335, -0.024143017828464508, -0.025125369429588318, 0.0012312253238633275, 0.009383151307702065, 0.013511927798390388, -0.046833813190460205, 0.025085074827075005, -0.025883343070745468, -0.014254862442612648, -0.03491188958287239, -0.020115839317440987, 0.05584406852722168, -0.026096660643815994, -0.015264392830431461, -0.04458210617303848, 0.015042549930512905, 0.016954926773905754, -0.005694256629794836, -0.023812521249055862, -0.00920911692082882, -0.17114920914173126, 0.032256901264190674, -0.025205284357070923, 0.09227360039949417, 0.01341976784169674, -0.044378861784935, -0.04067738726735115, 0.04506245255470276, 0.03776521235704422, -0.01902587339282036, 0.01467150915414095, -0.012510466389358044, 0.03191512078046799, -0.06502498686313629, 0.020569419488310814, 0.055968135595321655, 0.05120653659105301, -0.010305714793503284, -0.009859057143330574, -0.03273263946175575, -0.0014204527251422405, -0.06007332354784012, -0.007267598994076252, -0.040574558079242706, 0.008454709313809872, 0.04658867046236992, 0.03209675848484039, 0.03131462261080742, -0.006518960930407047, 0.025558261200785637, 0.012883782386779785, 0.06228690966963768, 0.02637571655213833, -0.08007119596004486, 0.0646928995847702, -0.04289747774600983, 0.025957800447940826, -0.035897284746170044, -0.10679081827402115, -0.04253371059894562, 0.03309138864278793, 0.007630744017660618, 0.03146140277385712, 0.03608689084649086, 0.010497008450329304, 0.013356036506593227, -0.005034736357629299, -0.0343562588095665, -0.01878938637673855, -0.005339906085282564, -0.04164930060505867, 0.036219000816345215, -0.03477589786052704, 0.024160226806998253, -0.01367802545428276, -0.013718681409955025, -0.007263304200023413, 0.007674945052713156, -0.03433309122920036, 0.026906659826636314, -0.01571236364543438, 0.025726821273565292, -0.047261785715818405, 0.01609971933066845, 0.062008727341890335, -0.008506620302796364, 0.011364570818841457, 0.02082565613090992, 0.042522892355918884, 0.024951240047812462, 0.41032445430755615, -0.03544381260871887, 0.08350256830453873, 0.031079160049557686, -0.0457196906208992, -0.04149377718567848, -0.018099727109074593, 0.006715779658406973, 0.013338888995349407, -0.00047242335858754814, -0.019103486090898514, 0.03954426571726799, -0.039392534643411636, 0.01302675623446703, -0.008001342415809631, 0.012639976106584072, -0.041043300181627274, 0.01102874893695116, 0.0057846372947096825, 0.021846866235136986, -0.021670566871762276, 0.012076172977685928, 0.017120152711868286, 0.06808480620384216, 0.04201873764395714, 0.041539400815963745, -0.024922626093029976, -0.022075267508625984, 0.044919662177562714, -0.037514716386795044, -0.0210614874958992, 0.00017871966701932251, -0.008507669903337955, -0.08791659772396088, 0.0008335055899806321, 0.04869873449206352, -0.027749134227633476, -0.025292888283729553, -0.09047464281320572, 0.02104966528713703, 0.03294305130839348, -0.052473198622465134, 0.09279052168130875, 0.033396195620298386, 0.013358883559703827, -0.062136515974998474, 0.1372358649969101, 0.04457153379917145, 0.0040614185854792595, -0.03591492772102356, -0.0820193886756897, -0.015348578803241253, 0.056352607905864716, -0.005087083205580711, -0.08826521039009094, -0.03096928633749485, 0.017931563779711723, 0.03685993701219559, -0.024103404954075813, -0.05620211735367775, -0.02563769556581974, -0.08610379695892334, 0.007288226392120123, -0.028989756479859352, 0.09365104138851166, 0.0211162269115448, -0.07624796032905579, -0.04503849893808365, 0.020632367581129074, -0.049506813287734985, -0.03458280488848686, 0.0198565274477005, -0.012528903782367706, -0.06331850588321686, 0.03292495384812355, 0.01211214903742075, -0.01828939840197563, -0.03543998673558235, 0.011114752851426601, 0.014954710379242897, -0.00403931550681591, 0.07330366224050522, -0.025956174358725548, -0.01011724304407835, 0.003716853680089116, -0.034399524331092834, -0.05258364975452423, -0.06088781729340553, 0.032938141375780106, 0.01354517787694931, -0.04978972673416138, -0.046153776347637177, 0.027621135115623474, -0.022249991074204445, 0.021536672487854958, -0.044789522886276245, -0.038690343499183655, 0.03456754982471466, -0.0015249059069901705, -0.03252701088786125, -0.009365304373204708, 0.01666177436709404, 0.0033863696735352278, -0.008266894146800041, 0.05778913199901581, -0.017120152711868286, 0.027798281982541084, 0.022287676110863686, -0.028500547632575035, 0.06884501129388809, 0.043447982519865036, 0.0036666805390268564, -0.009288799948990345, -0.032309189438819885, -0.04094703122973442, 0.031380604952573776, 0.009101900272071362, 0.0017431254964321852, 0.03267998993396759, -0.02423713728785515, 0.04250672459602356, 0.012694749981164932, -0.027660692110657692, -0.027932673692703247, -0.3282082974910736, -0.008801084011793137, -0.05060259625315666, -0.03930937498807907, 0.012288001365959644, -0.039038460701704025, 0.045022569596767426, 0.025330819189548492, -0.00660644331946969, 0.0101694967597723, 0.03460896387696266, 0.04316195473074913, -0.022569725289940834, -0.02322966791689396, -0.01192584726959467, 0.012871474027633667, 0.09072118997573853, -0.007455393206328154, -0.07503227144479752, 0.0007812429685145617, 0.04657502844929695, 0.028808336704969406, -0.012201113626360893, -0.13571697473526, 0.03442475572228432, -0.018854385241866112, 0.10482748597860336, 0.01658116653561592, 0.049386996775865555, -0.06494360417127609, 0.021149393171072006, -0.028796490281820297, -0.043584030121564865, -0.08685270696878433, 0.02207503467798233, -0.06935973465442657, 0.029519524425268173, 0.05924341827630997, 0.009834036231040955, -0.020531589165329933, 0.005004186648875475, -0.013309549540281296, -0.02453172206878662, -0.04609943553805351, -0.06986129283905029, 0.0027346829883754253, -0.0599164217710495, -0.05431785061955452, -0.002454166766256094, 0.07118766754865646, 0.02520599588751793, 0.032916050404310226, 0.01638689450919628, 0.04505540803074837, -0.00235190917737782, -0.043705105781555176, -0.03737923875451088, -0.06845030188560486, -0.05865512043237686, -0.029414290562272072, 0.024512547999620438, -0.040082916617393494, -0.052068792283535004, -0.008408160880208015, 0.023265764117240906, -0.013048063963651657, 0.007485090289264917, -0.05515941232442856, -0.001885750680230558, -0.026899302378296852, -0.060564372688531876, 0.04467964544892311, -0.013444514945149422, 0.06355354189872742, 0.05435967817902565, 0.024559583514928818, 0.02470899187028408, 0.022365545853972435, 0.049399059265851974, 0.036968350410461426, -0.00748273404315114, 0.005559224169701338, 0.06450314819812775, 0.005886523053050041, -0.003143465146422386, -0.0031502710189670324, 0.05096666142344475, 0.03262032940983772, 0.014449152164161205, 0.04482477530837059, -0.06897015869617462, 0.024998050183057785, 0.009832009673118591, -0.10499674826860428, 0.0213639959692955, -0.01423861924558878, -0.2628098428249359, 0.08185207098722458, 0.01792231760919094, 0.008080159313976765, 0.058829814195632935, -0.015367299318313599, 0.06001606583595276, -0.01749693788588047, 0.042187727987766266, 0.03038875199854374, -0.04975171014666557, 0.04981882870197296, -0.0041303131729364395, -0.06198583543300629, 0.02564839832484722, 0.027706030756235123, 0.08168386667966843, -0.03699125722050667, 0.012394538149237633, -0.035987336188554764, -0.013346729800105095, -0.002924092812463641, 0.19892039895057678, 0.04347391054034233, -0.03328200429677963, 0.007732436526566744, 0.024847252294421196, -0.05516837537288666, 0.009935103356838226, 0.03442205861210823, 0.05028923973441124, -0.026759441941976547, 0.04090188443660736, 0.008507679216563702, 0.01745198480784893, -0.008886493742465973, -0.02968454733490944, 0.0142226442694664, 0.04827761650085449, -0.02464473433792591, 0.05051729828119278, 0.024155905470252037, 0.0005960625712759793, 0.05025526508688927, 0.05869969725608826, 0.05051432177424431, 0.02083388715982437, -0.05675443261861801, -0.03660999611020088, 0.01745665818452835, 0.007541639730334282, 0.016349544748663902, 0.055514026433229446, -0.043143417686223984, 0.037124186754226685, -0.010186499916017056, 0.02160063199698925, 0.029271593317389488, 0.018064258620142937, -0.005203795153647661, 0.016171611845493317, 0.021549593657255173, 0.03615504503250122, 0.011273135431110859, 0.03539049252867699], "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73dab258-d5a6-413a-8bf3-450a6e236fce", "node_type": "4", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "0139795258b42ec3a02280199f5d715b673fecc8c665f5197a6e6fbbc696c73c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c07e7aea-c849-4cd6-ab80-a04e34bc8e82", "node_type": "1", "metadata": {"file_name": "Chapter 4 Search Index Management.md"}, "hash": "02cb72b8d822af9da7cf55f4c3f594b0b3fc2b9bf61aae5a6578ad38701e95e8", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "This efficient preparation of data is crucial for the \"brain\" of DevShelf, our search engine. In the next chapter, we'll explore how this pre-computed index is actually used to answer your search queries!\n\n[Next Chapter: Core Search Engine](05_core_search_engine_.md)", "mimetype": "text/plain", "start_char_idx": 17964, "end_char_idx": 18231, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "690ee5d4-df98-4fc8-9e4b-f827bac4cfd0", "embedding": [-0.04360003024339676, 0.01026353519409895, -0.03559137135744095, 0.011721566319465637, 0.030376851558685303, -0.011007742024958134, -0.026138460263609886, 0.003487301990389824, 0.014507098123431206, -0.013942565768957138, 0.025583114475011826, -0.0022323306184262037, 0.017480487003922462, -0.01661190204322338, -0.023090386763215065, -0.007823651656508446, -0.0005810831789858639, 0.026791470125317574, -0.034618690609931946, -0.044817712157964706, 0.07784508913755417, 0.012944967485964298, -0.005218888632953167, -0.07416782528162003, -0.012947450391948223, 0.06049785763025284, -0.01652170717716217, -0.007488436531275511, -0.05646425485610962, -0.21998581290245056, -0.007136524189263582, 0.0027962445747107267, 0.08876825869083405, 0.018089741468429565, -0.018542127683758736, -0.025886740535497665, 0.03621074929833412, 0.005286764353513718, 0.015255212783813477, 0.022229555994272232, -0.01130982581526041, 0.005837444681674242, -0.017866650596261024, 0.05487748607993126, 0.028405385091900826, 0.010980695486068726, -0.016196541488170624, -0.00468440679833293, -0.05082826688885689, -0.0388285294175148, -0.07793863117694855, -0.0014102817513048649, -0.005351406522095203, 0.033698227256536484, 0.011279051192104816, 0.028971722349524498, 0.05551983788609505, 0.07799478620290756, -0.021313399076461792, -0.016985127702355385, 0.018432369455695152, -0.033271390944719315, -0.0975685566663742, 0.081755630671978, 0.008071862161159515, 0.016860023140907288, -0.009171073324978352, -0.07603301852941513, -0.01530282199382782, 0.03391517326235771, -0.002438864205032587, 0.06376989185810089, 0.01246595662087202, 0.04581825062632561, 0.0005021064425818622, 0.011578177101910114, 0.02262561395764351, -0.01953273080289364, 0.04376111179590225, -0.03490081802010536, -0.025333520025014877, -0.05594436824321747, 0.011401146650314331, -0.024199817329645157, -0.020496729761362076, -0.0032457278575748205, 0.045669663697481155, -0.016404034569859505, 0.030670950189232826, 0.004719902761280537, 0.06980551034212112, -0.05163269117474556, 0.03557698801159859, 0.01830911636352539, -0.03517584502696991, 0.015835091471672058, -0.029520215466618538, 0.054094355553388596, 0.03137990087270737, 0.41935279965400696, -0.012074491940438747, 0.06660221517086029, 0.001903729746118188, -0.04723246768116951, -0.008211880922317505, -0.050543561577796936, 0.02775779739022255, 0.01654302142560482, 0.03244708850979805, -0.013496313244104385, 0.013574149459600449, -0.041972022503614426, 0.06049039587378502, -0.023371875286102295, 0.04060801491141319, -0.025853512808680534, -0.016455667093396187, 0.012513851746916771, 0.013227513059973717, -0.012312843464314938, -0.017802434042096138, 0.005007091443985701, 0.03452455624938011, 0.061267998069524765, 0.05676833912730217, -0.00532178208231926, -0.016939736902713776, 0.0561152808368206, -0.03513151779770851, 0.006037317682057619, 0.004746702499687672, -0.002965301973745227, -0.11162548512220383, 0.007914607413113117, 0.06017351895570755, 0.03778225928544998, -0.025202494114637375, -0.015031956136226654, 0.019334740936756134, -0.007583763916045427, -0.0017490406753495336, 0.05885889381170273, 0.047995150089263916, -0.00987103022634983, -0.08704763650894165, 0.11349896341562271, 0.04258923605084419, -0.014901048503816128, -0.05354863777756691, -0.057837799191474915, -0.002093267161399126, 0.04591123387217522, -0.012517607770860195, -0.09082309156656265, -0.011637667194008827, 0.027887988835573196, 0.07322151958942413, -0.008380874060094357, -0.05261097103357315, -0.0666351169347763, -0.08116181194782257, 0.024747615680098534, 0.0029693092219531536, 0.10159497708082199, -0.01556906197220087, -0.08336631953716278, -0.022809457033872604, 0.024168916046619415, -0.12611941993236542, -0.0187756959348917, 0.0024876384995877743, -0.0025854664854705334, -0.066562719643116, 0.04249401390552521, 0.011905374936759472, -0.0433717779815197, -0.02308773621916771, 0.018994165584445, 0.03462284058332443, 0.017664819955825806, 0.008727425709366798, -0.041007332503795624, -0.025691019371151924, 0.03611012175679207, -0.02746051922440529, -0.04056517407298088, -0.045648153871297836, 0.0008271400001831353, 0.019687537103891373, 0.023566005751490593, -0.040030382573604584, 0.0016263555735349655, 0.01427968218922615, 0.014893569052219391, -0.00048262617201544344, -0.015750117599964142, 0.005930882878601551, -0.012118840590119362, -0.01668238267302513, 0.033294614404439926, 0.03995784744620323, 0.027830660343170166, -0.010823292657732964, 0.02075197547674179, -0.033864401280879974, 0.0009555142605677247, -0.007320719305425882, -0.05765821784734726, 0.09644845873117447, 0.015161273069679737, 0.0032874736934900284, 0.002542130183428526, -0.05250054970383644, -0.049576692283153534, -0.009606296196579933, -0.03488708287477493, 0.010728444904088974, 0.03276645764708519, -0.049308013170957565, 0.05072392150759697, -0.015906108543276787, -0.04999367520213127, -0.04431458190083504, -0.29512035846710205, 0.012258600443601608, -0.049041956663131714, -0.04818394035100937, 0.012856253422796726, -0.06406576186418533, 0.03308245912194252, -0.01865110918879509, -0.012020868249237537, 0.021334141492843628, 0.09011811017990112, -0.02755110338330269, -0.018220694735646248, -0.0056935641914606094, -0.0007446075906045735, 0.03411649167537689, 0.024246487766504288, -0.012899627909064293, -0.07583799213171005, 0.0028188657015562057, 0.052343614399433136, -0.03244621679186821, 0.016665106639266014, -0.10646345466375351, -0.002631071489304304, 0.0015936412382870913, 0.07032889872789383, 0.02516227215528488, 0.050504814833402634, -0.03881629928946495, 0.05666283890604973, 0.015654755756258965, -0.051144424825906754, -0.05504783242940903, -0.0010644439607858658, -0.04480734467506409, 0.0314827635884285, -0.008828616701066494, -0.009543007239699364, -0.0033917336259037256, 0.013666081242263317, 0.001435393700376153, 0.006466231774538755, 0.002295037265866995, -0.0749034434556961, 0.004064119886606932, -0.02808512933552265, -0.06879086792469025, 0.02368263527750969, 0.06043176352977753, -0.039003752171993256, 0.050651270896196365, 0.02169335074722767, 0.034642115235328674, -0.06367232650518417, -0.0752323567867279, -0.02044990472495556, -0.07268483191728592, -0.019200649112462997, 0.003560402197763324, 0.03593730553984642, -0.008454034104943275, -0.011652975343167782, 0.003371115308254957, 0.02853911928832531, -0.04235396534204483, -0.004753869492560625, 0.01996760070323944, 0.060606762766838074, -0.06070081889629364, -0.061737511307001114, 0.017419634386897087, -0.040777720510959625, 0.032880812883377075, 0.02337437868118286, 0.061239127069711685, 0.0764104574918747, 0.01211368478834629, 0.02298150584101677, -0.026199620217084885, 0.012211072258651257, -0.0169844850897789, 0.10023922473192215, -0.02987634390592575, -0.007982324808835983, 0.0037024810444563627, 0.03906693682074547, -0.022784141823649406, 0.013233971782028675, 0.03900781646370888, -0.04595096781849861, 0.015046422369778156, 0.007124234456568956, -0.04621114209294319, 0.03242212533950806, 0.05759565904736519, -0.24750448763370514, 0.052306730300188065, 0.008786768652498722, 0.037336722016334534, 0.05013260990381241, -0.04998684674501419, 0.054306041449308395, -0.047365088015794754, 0.08887983113527298, -0.004027164541184902, 0.012065217830240726, 0.011834870092570782, -0.01654738374054432, -0.09322948008775711, 0.038448650389909744, 0.021135853603482246, 0.10891235619783401, -0.03544382378458977, 0.038660429418087006, 0.03821991756558418, 0.03481779992580414, 0.005727645009756088, 0.17581193149089813, 0.048506997525691986, -0.004306642338633537, 0.006829361896961927, 0.019481664523482323, -0.038208454847335815, -0.0161723792552948, 0.05919662490487099, 0.041244860738515854, -0.05178306996822357, 0.031089849770069122, 0.000297267222777009, -0.014176090247929096, -0.03140285983681679, 0.004183449316769838, 0.012851303443312645, 0.026584558188915253, -0.04063541069626808, 0.016073284670710564, -0.006343939807265997, -0.023753533139824867, 0.020000357180833817, 0.05427228659391403, -0.03385845571756363, -0.03258153423666954, -0.06842190772294998, -0.0345330610871315, -0.0027432232163846493, 0.004424021113663912, -0.02107807993888855, 0.05984542518854141, -0.012595808133482933, 0.03202204033732414, 0.040773943066596985, 0.0037434452679008245, 0.030382443219423294, -0.02818896621465683, -0.0013188441516831517, 0.01601647026836872, 0.006225405260920525, 0.08389779180288315, 0.04354189336299896, 0.038748010993003845], "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4eb76d44-f06c-4ed4-9687-7fbc29020abc", "node_type": "4", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "6cd2deb2e1f38059bee3c3dbfb51fe532818a1110da3a2db86f1b0f399ca8972", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "324be7c9-b4a8-423a-ae10-54a02d05c438", "node_type": "1", "metadata": {}, "hash": "56661733cdd0cafefff7efa273a3bfe16fe1a54c682b772db9107d7465313e8e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Welcome back to DevShelf! In our last chapter, [Search Index Management](04_search_index_management_.md), we learned how DevShelf meticulously prepares a \"secret catalog\" (our search index) of all its books *before* you even start searching. This pre-computed index makes our library incredibly fast.\n\nNow, imagine you have this amazing, super-organized catalog. How do you actually *use* it to find the books you're looking for? If you ask a question like \"Find me books about clean code in Java,\" what happens next?\n\nThat's where the **Core Search Engine** comes in!\n\n### The \"Finder\" of Our Digital Library\n\nThe Core Search Engine is the primary brain of DevShelf that answers your search queries. It's the \"finder\" in our digital library. It takes your question (your search query), consults the \"secret catalog\" (the search index), and then quickly identifies and presents the initial set of books that are most relevant to what you asked.\n\n**Our central use case:** A user types a search query like \"Python machine learning\" into DevShelf, and the Core Search Engine needs to find and list the most pertinent books on that topic.\n\nLet's break down how it does this magic!\n\n### How the Core Search Engine Works\n\nThe Core Search Engine, primarily handled by the `QueryProcessor` component, performs these key steps:\n\n1.  **Understand Your Query:** It first cleans up your search query and breaks it into important words.\n2.  **Find Potential Books:** It then uses the pre-built \"inverted index\" from [Search Index Management](04_search_index_management_.md) to quickly identify *all* books that contain *any* of your important search words.\n3.  **Score for Relevance:** Not all matching books are equally good! It then calculates a \"relevance score\" for each potential book to your query. This score helps determine which books are the *most* pertinent.\n4.  **Rank and Present:** Finally, it sorts the books from highest score to lowest, ensuring that the best matches rise to the top of your search results.\n\n### Using the Core Search Engine\n\nYou don't directly tell the `QueryProcessor` what to do.", "mimetype": "text/plain", "start_char_idx": 1, "end_char_idx": 2105, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "324be7c9-b4a8-423a-ae10-54a02d05c438", "embedding": [-0.04651642218232155, 0.019065532833337784, -0.06920919567346573, 0.013962941244244576, -0.02160930261015892, -0.0462467223405838, -0.010004892013967037, -0.0029672980308532715, 0.029172006994485855, -0.011026403866708279, -0.0020986979361623526, -0.005706472788006067, 0.025437530130147934, -0.02912742830812931, -0.033365361392498016, -0.014634908176958561, -0.005110855679959059, 0.01108741294592619, 0.00924892257899046, -0.025286544114351273, 0.04662516340613365, 0.047102995216846466, -0.03422758728265762, -0.0508732944726944, -0.031016100198030472, 0.028749637305736542, 0.008345995098352432, -0.021881522610783577, -0.027391448616981506, -0.18936985731124878, 0.03392413631081581, -0.06097773462533951, 0.06667111814022064, 0.0069646937772631645, 0.005080108065158129, 0.016532061621546745, 0.047516223043203354, -0.0038440681528300047, 0.013654414564371109, 0.0092512471601367, 0.012084982357919216, -0.0345819815993309, -0.034584105014801025, 0.035501398146152496, 0.02823363058269024, -0.031667884439229965, 0.032440103590488434, -0.03780054301023483, -0.012144481763243675, -0.0014754395233467221, -0.07827933877706528, 0.0036637329030781984, 0.010167003609240055, -0.01181318424642086, 0.04029608517885208, -0.0041219694539904594, 0.08771274238824844, 0.07961007207632065, -0.0032469723373651505, -0.03482702746987343, 0.04254511371254921, -0.06073848530650139, -0.1119496300816536, 0.08778820931911469, -0.0009311035391874611, -0.0031643728725612164, 0.02168477326631546, -0.09545152634382248, 0.004975962918251753, 0.03114161640405655, 0.010121436789631844, 0.057977646589279175, -0.0015851190546527505, 0.07437518239021301, 0.01964755728840828, -0.009709577076137066, -0.03732515871524811, 0.008736549876630306, 0.048720549792051315, -0.021318959072232246, -0.04443306475877762, -0.030527302995324135, 0.015145714394748211, -0.006515886634588242, -0.011955657973885536, 0.013983611017465591, 0.03893585875630379, 0.027757612988352776, 0.07090722769498825, -0.02013316936790943, 0.07507669925689697, -0.08501538634300232, 0.008513852022588253, 0.029486041516065598, -0.04039950668811798, 0.0043892282992601395, -0.029879366979002953, 0.05879959091544151, 0.019122540950775146, 0.36488041281700134, 0.014608572237193584, 0.07248158007860184, -0.007964443415403366, -0.017803415656089783, -0.005596007686108351, -0.06422561407089233, -0.023761333897709846, 0.031119946390390396, -0.009385385550558567, -0.005238834768533707, 0.03244761377573013, -0.009245620109140873, 0.07890243083238602, -0.017611298710107803, -0.018216095864772797, -0.0011720131151378155, -0.05804295092821121, -0.005667305551469326, -0.03881961107254028, -0.0004442858335096389, 0.0035190226044505835, -0.04782629385590553, 0.00011636436101980507, 0.02724616974592209, 0.05644868686795235, 0.010430722497403622, -0.008730226196348667, 0.07245458662509918, -0.07797717303037643, 0.0007671168423257768, 0.013002424500882626, -0.05410795658826828, -0.08577322959899902, 0.032421842217445374, 0.040941230952739716, 0.008955385535955429, 0.002365893218666315, -0.02064412645995617, -0.011808565817773342, -0.026520641520619392, -0.04612154886126518, -0.008201169781386852, 0.032059963792562485, -0.0066602337174117565, -0.04371517896652222, 0.15186168253421783, -0.044713959097862244, -0.0236847884953022, -0.06629659235477448, -0.04881192371249199, -0.054964229464530945, 0.04999655857682228, -0.02296268939971924, -0.05861382931470871, -0.04435952007770538, 0.07629961520433426, 0.07808142155408859, 0.05679694935679436, -0.04798993840813637, -0.0676104947924614, -0.057359933853149414, -0.017336620017886162, -0.007413619197905064, 0.12226163595914841, 0.05400779843330383, -0.06970246881246567, -0.03890516608953476, 0.0017230116063728929, -0.1523112952709198, 0.007581378798931837, -0.007687178906053305, 0.010749658569693565, -0.07100357860326767, 0.0018931420054286718, 0.006785956211388111, -0.04577186331152916, -0.005990532226860523, 0.019190076738595963, 0.07304870337247849, -0.009670303203165531, 0.0071135833859443665, -0.03177199140191078, 0.003957434557378292, -0.019723813980817795, -0.0036041249986737967, -0.05755644291639328, -0.024396978318691254, -0.01857556588947773, -0.0007948068669065833, -0.038719940930604935, -0.03348536789417267, -0.011545754037797451, -0.006462573539465666, 0.005541348829865456, 0.03130580112338066, -0.013042374514043331, 0.00536117609590292, 0.0069754458963871, 0.03573582321405411, 0.057883355766534805, 0.08344117552042007, 0.06489256769418716, -0.02849758416414261, 0.024423900991678238, -0.04298803210258484, 0.008019734174013138, -0.03973512351512909, -0.012988719157874584, 0.08138392120599747, 0.01890401914715767, -0.03445737063884735, -0.0014169554924592376, -0.021449008956551552, -0.03283929452300072, -0.03397699072957039, -0.022045785561203957, -0.016088757663965225, 0.054673559963703156, 0.02519921027123928, 0.04968331754207611, -0.030977971851825714, 0.030003249645233154, 0.023000845685601234, -0.29292818903923035, -0.006451020948588848, -0.030026750639081, -0.013989184983074665, 0.021979698911309242, -0.048623524606227875, 0.019311701878905296, -0.012328111566603184, -0.02845904417335987, 0.03761635348200798, 0.10438676923513412, -0.007204415742307901, -0.017155444249510765, 0.025901690125465393, -0.020604141056537628, -0.005249730311334133, 0.03856988251209259, -0.003368438221514225, -0.05433855578303337, -0.005330456420779228, 0.06341518461704254, -0.05549333244562149, 0.019058916717767715, -0.07794981449842453, -0.010577135719358921, -0.01142843160778284, 0.11427050828933716, -0.005020045209676027, 0.0794791653752327, -0.037200678139925, 0.06742347776889801, 0.009256740100681782, -0.07933511584997177, -0.0902394950389862, -0.027627045288681984, 0.0010271016508340836, 0.000728280225303024, 0.015638498589396477, -0.022800609469413757, 0.061167120933532715, -0.0011527941096574068, 0.005001210141927004, -0.011312384158372879, -0.010315785184502602, 0.008143693208694458, 0.015912553295493126, 0.004114122595638037, -0.049888551235198975, 0.004914877470582724, 0.07025133073329926, -0.05306902527809143, 0.04620718955993652, 0.019768109545111656, 0.04045245423913002, -0.01096291746944189, -0.06745076179504395, 0.010183393023908138, -0.032683394849300385, -0.009772997349500656, -0.019785169512033463, 0.044281769543886185, 0.02985253557562828, -0.01589934341609478, 0.028139570727944374, 0.016754601150751114, -0.026155175641179085, 0.023513605818152428, 0.020497232675552368, 0.042790282517671585, -0.049770984798669815, -0.07707793265581131, -0.004868027754127979, -0.03825029358267784, 0.06941552460193634, 0.005788012873381376, 0.03454577550292015, 0.07583456486463547, -0.0041869995184242725, 0.04230949282646179, -0.05537960305809975, 0.01487975288182497, 0.025908248499035835, 0.0789557695388794, 0.010314092971384525, -0.01572018675506115, 0.009091166779398918, 0.01639525778591633, -0.0322670079767704, -0.005808126647025347, -0.0023599255364388227, -0.06294503062963486, -0.027042463421821594, -0.014005185104906559, 0.028086364269256592, 0.03882646560668945, 0.05772348865866661, -0.26076334714889526, 0.016011115163564682, -0.010883254930377007, 0.03374689072370529, 0.039499908685684204, -0.0452936626970768, 0.03970392793416977, -0.04099888354539871, 0.007811436429619789, 0.04904184862971306, -0.013085841201245785, -0.02970469929277897, -0.04785938188433647, -0.055337850004434586, 0.021325349807739258, 0.07034377753734589, 0.05458669736981392, -0.01211571879684925, 0.02581816539168358, 0.02879846841096878, 0.010519384406507015, 0.018168048933148384, 0.15703009068965912, 0.027262983843684196, 0.03910018503665924, 0.017965445294976234, 0.018353700637817383, -0.05380704626441002, 0.005133601371198893, 0.06672803312540054, 0.03908905014395714, -0.08083026111125946, 0.10093456506729126, -0.010002631694078445, 0.008121725171804428, -0.01824069954454899, 0.044735826551914215, 0.022520998492836952, -0.00792323425412178, -0.03306274488568306, -0.025284063071012497, 0.02102317288517952, -0.0042306212708354, 0.003901370335370302, 0.0596982017159462, -0.015850206837058067, -0.019558921456336975, -0.06195982173085213, -0.07401809096336365, 0.01797891966998577, -0.02002791501581669, -0.0562959760427475, 0.060032039880752563, -0.01939639449119568, 0.033365316689014435, 0.026551051065325737, -0.014836825430393219, -0.0056634158827364445, -0.020859330892562866, 0.035600461065769196, 0.07535028457641602, -0.021082360297441483, 0.07167957723140717, 0.023703651502728462, 0.045974068343639374], "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4eb76d44-f06c-4ed4-9687-7fbc29020abc", "node_type": "4", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "6cd2deb2e1f38059bee3c3dbfb51fe532818a1110da3a2db86f1b0f399ca8972", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "690ee5d4-df98-4fc8-9e4b-f827bac4cfd0", "node_type": "1", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "486908a9994a640450fc631106c9e32de16e0a7728a4bc2621c8a5c5e790e4a3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5c4a78f9-e26c-4f7a-88aa-c30a536e8e3a", "node_type": "1", "metadata": {}, "hash": "f1b7767a4e1f6bab940d0bc8fb814d20f9de40add843e4f6b0d75f9294b18717", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "### Using the Core Search Engine\n\nYou don't directly tell the `QueryProcessor` what to do. Instead, when you type into the search bar (in the GUI) or enter a command (in the CLI), our main application logic (like `DevShelfService` for GUI or `BookSearchEngine` for CLI) calls the `QueryProcessor` to do the heavy lifting.\n\nLet's look at how the `DevShelfService` (for the GUI) calls the `QueryProcessor`'s `search` method:\n\n**`src/main/java/ui/gui/services/DevShelfService.java` (Simplified `search` method)**\n```java\npackage ui.gui.services;\n\nimport domain.Book;\nimport domain.SearchResult;\nimport features.search.QueryProcessor; // Our search engine!\n// ... other imports\n\npublic class DevShelfService {\n    // ... other services and bookMap\n    private final QueryProcessor queryProcessor; // The brain of our search\n\n    public DevShelfService( /* ... other services, QueryProcessor queryProcessor ... */ ) {\n        // ... initialize other services\n        this.queryProcessor = queryProcessor; // Get the search engine ready\n    }\n\n    public SearchResponse search(String query) {\n        System.out.println(\"\ud83d\udd0d GUI Processing Query: [\" + query + \"]\");\n\n        // 1. Raw Search: Hand the query to our QueryProcessor\n        List<SearchResult> results = queryProcessor.search(query);\n\n        // ... (further steps like handling no results, re-ranking, converting to Book objects) ...\n\n        // Example output (after re-ranking and conversion):\n        // return new SearchResponse(books, isSuggestion, usedQuery);\n        return null; // Simplified\n    }\n    // ... other methods\n}\n```\nWhen you type \"Python\" and hit Enter, the `search` method in `DevShelfService` gets `query = \"Python\"`. It then simply passes this `query` to `queryProcessor.search(query)`. The `QueryProcessor` then goes to work and returns a list of `SearchResult` objects.\n\nA `SearchResult` object is a simple container that holds two things:\n*   `docId`: The unique ID of the book that matched.\n*   `score`: How relevant that book is to your query. A higher score means more relevant.", "mimetype": "text/plain", "start_char_idx": 2015, "end_char_idx": 4080, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "5c4a78f9-e26c-4f7a-88aa-c30a536e8e3a", "embedding": [-0.019800398498773575, 0.009509723633527756, -0.05010372772812843, -0.04293067380785942, 0.018078474327921867, -0.06175748631358147, -0.003669523634016514, 0.050285857170820236, 0.06414628773927689, -0.006714979652315378, -0.029337294399738312, -0.006843592971563339, 0.036419209092855453, 0.035607852041721344, -0.060223907232284546, 0.014876391738653183, 0.02752852626144886, 0.0305507592856884, -0.01861434243619442, 0.02020622231066227, 0.0397430956363678, 0.0817810446023941, 0.020971989259123802, -0.06989341229200363, 0.055832549929618835, 0.05164409801363945, -0.027560783550143242, -0.07135037332773209, -0.030388392508029938, -0.1757066398859024, -0.04386158660054207, -0.03042462281882763, 0.07039222121238708, -0.007763008587062359, -0.010523393750190735, 0.008884699083864689, -0.009706385433673859, -0.013002731837332249, 0.022207142785191536, -0.007770021911710501, -0.002223149873316288, -0.02765508182346821, -0.018180442973971367, 0.01994416117668152, -0.008125562220811844, -0.02791646681725979, 0.02535080909729004, -0.008368363603949547, 0.003670762525871396, -0.007977209985256195, -0.04517284035682678, -0.05612439289689064, 0.019525527954101562, 0.026361195370554924, 0.032020922750234604, -0.007926457561552525, 0.03106856159865856, 0.07336413115262985, -0.023616986349225044, 0.026522552594542503, 0.052954256534576416, 0.024295808747410774, -0.14266079664230347, 0.03452523797750473, -0.014614231884479523, -5.887994484510273e-05, -0.012550589628517628, -0.041382160037755966, -0.03815213590860367, 0.0827581137418747, -0.01495837140828371, 0.053311560302972794, 0.021656403318047523, 0.10966268181800842, 0.03850299492478371, -0.035321444272994995, -0.04310625419020653, -0.08421611785888672, 0.051070768386125565, 0.003358667716383934, -0.02454978972673416, -0.04920179396867752, 0.008867811411619186, -0.06811431050300598, 0.010424037463963032, -0.008564390242099762, 0.05006494000554085, -0.015900051221251488, 0.07905068248510361, 0.01199291180819273, 0.04196552559733391, -0.07637089490890503, -0.056331198662519455, 0.027894064784049988, -0.08024219423532486, 0.0025459614116698503, -0.03890892490744591, 0.0212041437625885, 0.04124027490615845, 0.3693954348564148, -0.012839671224355698, 0.011150126345455647, -0.05476284772157669, -0.0029376023449003696, -0.006714554037898779, -0.06621988862752914, 0.0594722256064415, 6.575393490493298e-05, 0.04666594788432121, -0.03168802708387375, 0.031173259019851685, -0.0437973327934742, 0.0051042367704212666, -0.01489760261029005, -0.008231683634221554, 0.056961897760629654, 0.002208460122346878, 0.03641363978385925, 0.040339395403862, -0.03581888601183891, -0.011673442088067532, 0.002926949178799987, 0.004575687926262617, -0.046100061386823654, 0.031782981008291245, 0.005566042382270098, -0.0046860165894031525, 0.026091622188687325, -0.03329436480998993, -0.02147974818944931, 0.026238301768898964, -0.09206690639257431, -0.09411735832691193, -0.0031498728785663843, 0.004714923445135355, -0.014915136620402336, -0.004056998994201422, 0.03562198206782341, -0.018612226471304893, 0.012752464041113853, 0.0005306252278387547, -0.025204531848430634, 0.0018975134007632732, 0.01998789608478546, -0.1232386976480484, 0.15360485017299652, -0.004748839884996414, -0.02099108137190342, -0.03830932080745697, -0.08379895240068436, -0.029631415382027626, 0.009516396559774876, -0.04158278554677963, -0.04495874047279358, -0.00161463872063905, 0.053814806044101715, 0.0029045178089290857, -0.013460896909236908, -0.0232164915651083, -0.08023284375667572, -0.00874823983758688, 0.0031042175833135843, -0.04264576733112335, 0.08381593972444534, -0.0026452268939465284, -0.01914128102362156, -0.019233737140893936, 0.04978561028838158, -0.07358896732330322, -0.0028517479076981544, -0.007544260006397963, -0.01403081975877285, -0.03228134289383888, 0.04315241053700447, 0.027758147567510605, -0.040873464196920395, 0.01021010521799326, 0.0049201068468391895, 0.03293299674987793, 0.04630325362086296, 0.056804630905389786, -0.029494792222976685, -0.06647899746894836, 0.04973669722676277, 0.002750877756625414, 0.005881242919713259, -0.09617170691490173, -0.014895807020366192, 0.05567508563399315, 0.012974059209227562, -0.06144082173705101, -0.0464000403881073, -0.020211732015013695, 0.037823814898729324, 0.030605390667915344, -0.01508856751024723, 0.028372643515467644, -0.02390078268945217, 0.021298501640558243, 0.00465416070073843, 0.05565040186047554, 0.03578309342265129, -0.006425673142075539, 0.01171001885086298, 0.006828732788562775, 0.0269984882324934, 0.04239630326628685, -0.05084199458360672, -0.007226891350001097, -0.00235449499450624, -0.07655742019414902, -0.03622991964221001, -0.05893206596374512, 0.02020447328686714, 0.008260294795036316, -0.029575956985354424, 0.032098863273859024, 0.042437389492988586, -0.06773031502962112, 0.03444991260766983, -0.027177924290299416, -0.0421484149992466, 0.0164601132273674, -0.31101393699645996, -0.02305099181830883, -0.04100596904754639, -0.02880096063017845, 0.04244004935026169, -0.03160308301448822, -0.006741486955434084, 0.019136155024170876, -0.02459822967648506, 0.036197032779455185, 0.08351186662912369, -0.027050090953707695, -0.03268296644091606, 0.005626772530376911, -0.017908159643411636, -0.02988274022936821, -0.0027413598727434874, -0.005869755055755377, 0.00016610034799668938, -0.02484949864447117, 0.01851607672870159, -0.03314270079135895, 0.032852184027433395, -0.04229423776268959, 0.02382977120578289, -0.03652574121952057, 0.07283110916614532, -0.001198125770315528, 0.022754710167646408, -0.05252949520945549, 0.057880911976099014, 0.0014087099116295576, -0.07475706189870834, -0.05889914557337761, 0.04502524435520172, -0.017512081190943718, -0.041913989931344986, -0.006080843973904848, -0.08016251027584076, 0.004689876921474934, -0.010436276905238628, 0.005890814121812582, 0.0011377529008314013, -0.0203216765075922, -0.06328743696212769, 0.0005673574050888419, 0.04763190075755119, -0.026816733181476593, 0.04827238619327545, 0.11029098182916641, -0.04947253316640854, 0.027454979717731476, 0.019144445657730103, 0.05457153543829918, -0.0006157314055599272, 0.020916758105158806, -0.054845064878463745, -0.03580356761813164, 0.0033411583863198757, -0.010973086580634117, 0.03365702927112579, -0.016062648966908455, 0.020522762089967728, 0.022639544680714607, -0.0012545587960630655, -0.027852710336446762, -0.005445471964776516, 0.044780902564525604, 0.07849340885877609, -0.012964896857738495, -0.023950722068548203, -0.061466895043849945, -0.04411924257874489, 0.05580764263868332, 0.060743629932403564, 0.03183784708380699, 0.030362194404006004, 0.010134735144674778, 0.01580321602523327, -0.009050917811691761, 0.020586589351296425, 0.018639229238033295, 0.056084997951984406, -0.03221796452999115, 0.03107527084648609, 0.0173233263194561, 0.07016660273075104, 0.0009612704743631184, 0.029049614444375038, -0.009769698604941368, -0.065072201192379, -0.01028010156005621, -0.0070375618524849415, -0.027756880968809128, -0.037870265543460846, 0.03465599939227104, -0.27460089325904846, 0.029248345643281937, 0.0033410757314413786, 0.04431620612740517, 0.013230470009148121, -0.013488074764609337, 0.07705700397491455, -0.04226614534854889, -0.00807185098528862, 0.02023196406662464, 0.06684532016515732, 0.04074813798069954, -0.038129910826683044, -0.05922004207968712, 0.008026494644582272, 0.05103966221213341, 0.028005221858620644, 0.01791030541062355, 0.08361344784498215, 0.03400491550564766, 0.03463920205831528, 0.03051500953733921, 0.17152883112430573, 0.016732754185795784, 0.04129738733172417, 0.020855050534009933, 0.023254651576280594, 0.005918220151215792, 0.04031944274902344, 0.04829142242670059, 0.03587887063622475, 0.005203949753195047, 0.1151549369096756, -0.0003382415452506393, 0.008278091438114643, 0.005960766226053238, 0.02887948416173458, -0.0063700200989842415, 0.06518534570932388, -0.046606048941612244, 0.014078471809625626, 0.0007049795240163803, -0.05991780385375023, 0.02760772965848446, 0.08439084887504578, 0.00930826086550951, -0.019280249252915382, -0.056529637426137924, -0.05901806056499481, 0.00436050072312355, -0.006169864907860756, -0.047018636018037796, 0.02704605460166931, -0.024857262149453163, 0.0030197547748684883, 0.01849234849214554, -0.019620420411229134, 0.02618449367582798, -0.04105513542890549, -0.01599355787038803, -0.013592232018709183, 0.05428708344697952, 0.07441278547048569, 0.05611114203929901, 0.0049879224970936775], "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4eb76d44-f06c-4ed4-9687-7fbc29020abc", "node_type": "4", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "6cd2deb2e1f38059bee3c3dbfb51fe532818a1110da3a2db86f1b0f399ca8972", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "324be7c9-b4a8-423a-ae10-54a02d05c438", "node_type": "1", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "f963d5f8c00121f66c574ab7e51676288663d86a93a3145f10012ee023111e4d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "36a3288a-f9e6-4538-a968-14b13f0ce95d", "node_type": "1", "metadata": {}, "hash": "dd0c669b8ced0fa3ecce269558478c4392172ef18f719fa5ffe2bc055c9a79b9", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "*   `score`: How relevant that book is to your query. A higher score means more relevant.\n\n**`src/main/java/domain/SearchResult.java` (Simplified)**\n```java\npackage domain;\n\nimport lombok.Getter;\n\npublic class SearchResult implements Comparable<SearchResult> {\n\n    @Getter\n    private final int docId;   // The ID of the matching book\n    @Getter\n    private final double score; // How relevant it is to the query\n\n    public SearchResult(int docId, double score) {\n        this.docId = docId;\n        this.score = score;\n    }\n\n    // This helps us sort results from highest score to lowest\n    @Override\n    public int compareTo(SearchResult other) {\n        return Double.compare(other.score, this.score);\n    }\n    // ... toString() method for debugging ...\n}\n```\nAfter the `QueryProcessor` returns this list of `SearchResult`s, `DevShelfService` (or `BookSearchEngine` in CLI) takes these `docId`s, looks up the full [Book (Domain Model)](02_book__domain_model_.md) objects using our `bookMap` (from [Application Startup & Flow Control](01_application_startup___flow_control_.md) and [Book (Domain Model)](02_book__domain_model_.md)), and then passes them to the [User Interface Presentation](03_user_interface_presentation_.md) to be displayed.", "mimetype": "text/plain", "start_char_idx": 3991, "end_char_idx": 5242, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "36a3288a-f9e6-4538-a968-14b13f0ce95d", "embedding": [-0.10203598439693451, -0.0008607898489572108, -0.04883028194308281, 0.027027787640690804, -0.008952951990067959, -0.03805770352482796, -0.018902480602264404, 0.02299567498266697, 0.03054537996649742, -0.0026028132997453213, 0.005594579037278891, 0.00023519629030488431, 0.003177227219566703, -0.016682375222444534, -0.023768285289406776, -0.030867764726281166, 0.0038392061833292246, 0.00831584446132183, 0.008674699813127518, -0.043687909841537476, 0.062255457043647766, 0.03249687701463699, -0.030475089326500893, -0.09139737486839294, -0.020636653527617455, 0.04868587851524353, -0.03416478633880615, -0.07069491595029831, -0.024768788367509842, -0.20801331102848053, -0.005928871687501669, -0.041418325155973434, 0.10278961807489395, 0.025920746847987175, -0.03486377373337746, 0.046261824667453766, 0.020635319873690605, 0.03858078643679619, -0.037489838898181915, 0.010460535995662212, -0.0077738375402987, -0.024397950619459152, -0.05128500610589981, 0.013799525797367096, 0.020907089114189148, -0.025981351733207703, 0.014077192172408104, -0.06792958825826645, -0.04034367576241493, 0.008504861034452915, -0.08668465167284012, -0.029886526986956596, 0.025241442024707794, 0.032637033611536026, 0.050190269947052, -0.014540528878569603, 0.07625993341207504, 0.04635113850235939, -0.018385743722319603, -0.006642153486609459, 0.06720902025699615, -0.04154913127422333, -0.09459487348794937, 0.10250301659107208, -0.029812313616275787, 0.01490404549986124, -0.0047944821417331696, -0.08102191984653473, 0.02505333349108696, 0.0509062223136425, -0.0184816624969244, 0.06200138479471207, 0.012588710524141788, 0.061371639370918274, 0.04332539439201355, 0.03092743642628193, -0.029187817126512527, 0.005784711800515652, 0.06344594061374664, -0.031710416078567505, -0.05439303442835808, -0.04595058038830757, 0.031078394502401352, 0.005277842283248901, 0.000443499069660902, 0.02181546576321125, 0.0030379854142665863, 0.04052862524986267, 0.044058412313461304, -0.02722299098968506, 0.019877661019563675, -0.058166779577732086, 0.009901757352054119, 0.026764683425426483, -0.00910335872322321, -0.001982620684430003, -0.03939792141318321, 0.0372149758040905, 0.04651935026049614, 0.35559001564979553, -0.006287334952503443, 0.05736153572797775, -0.00242699240334332, -0.020674943923950195, -0.02101973257958889, -0.057369720190763474, -0.006455505732446909, -0.0211692713201046, -0.018787894397974014, -0.017906198278069496, 0.014197492972016335, -0.024904893711209297, 0.07172828912734985, 0.005251105409115553, -0.017281359061598778, 0.010180119425058365, 0.021607043221592903, 0.02794690616428852, -0.014260959811508656, -0.0073626479133963585, -0.013566120527684689, -0.01056693959981203, -0.004408690147101879, 0.004605082329362631, 0.024278420954942703, 0.00876954011619091, -0.02175850234925747, 0.07714268565177917, -0.03765249252319336, -0.04419348016381264, 0.04711003601551056, -0.008252372965216637, -0.0856308862566948, 0.027847742661833763, 0.058918312191963196, -0.020229902118444443, -0.0022712836507707834, -0.043048299849033356, -0.026682352647185326, -0.002690461929887533, -0.05458663031458855, 0.027312688529491425, -0.001336470479145646, -0.01472453773021698, -0.07872826606035233, 0.16061638295650482, -0.020330972969532013, -0.023460358381271362, -0.06854764372110367, -0.04655681177973747, -0.037608541548252106, 0.06436428427696228, -0.0186461228877306, -0.040734391659498215, -0.04120871424674988, 0.09046965837478638, 0.03474486246705055, 0.05897308140993118, -0.04624558985233307, -0.03155067563056946, -0.04357689991593361, 0.03397442400455475, -0.04703860729932785, 0.1298021376132965, 0.049580056220293045, -0.10105324536561966, -0.002977906260639429, -0.011147096753120422, -0.10717781633138657, 0.019802037626504898, 0.004475001245737076, 0.054043784737586975, -0.0201601292937994, 0.046550899744033813, -0.002165441866964102, 0.0019069855334237218, -0.00987305212765932, 0.04261046275496483, 0.0326383039355278, 0.0041517335921525955, 0.03321346640586853, -0.01523576769977808, -0.001945588388480246, -0.00032911772723309696, 0.011812267825007439, -0.021511010825634003, -0.013185917399823666, 0.00038193241925910115, 0.013399493880569935, -0.013156348839402199, -0.026179997250437737, -0.03332281857728958, -0.0009091173415072262, -0.005812144838273525, 0.01883840374648571, -0.03282662481069565, 0.0191742442548275, -0.00023991460329852998, 0.021787716075778008, 0.016156332567334175, 0.016458848491311073, 0.04191984608769417, -0.0470399335026741, 0.04277344048023224, -0.016523512080311775, 0.0007263276493176818, -0.050265926867723465, -0.008513637818396091, 0.04253368452191353, 0.017336653545498848, -0.05088627338409424, -0.022258538752794266, -0.05886222794651985, 0.017546361312270164, -0.04604053124785423, -0.01370716281235218, -0.009838424623012543, 0.06511438637971878, 0.01855805702507496, 0.06979627907276154, -0.03428962081670761, -0.021595044061541557, -0.019109586253762245, -0.27885472774505615, -0.04161616787314415, -0.038161542266607285, -0.002502395771443844, 0.008040131069719791, -0.05324689671397209, -0.0363583080470562, -0.04212140664458275, -0.030853653326630592, 0.010827163234353065, 0.07113344967365265, -0.019303079694509506, -0.020037183538079262, 0.007234770804643631, -0.02540845051407814, 0.00918483640998602, 0.030723806470632553, -0.014290990307927132, -0.06477750837802887, -0.02823355793952942, 0.05245199427008629, 0.017467252910137177, 0.025461945682764053, -0.033045489341020584, -0.0013904068619012833, 0.008583717048168182, 0.1024908646941185, 0.013643632642924786, 0.06260058283805847, -0.0492011234164238, 0.024311518296599388, -0.026056837290525436, -0.07904530316591263, -0.05555231124162674, -0.007686694152653217, -0.031154107302427292, -0.03659907355904579, -0.0496392548084259, -0.011022244580090046, 0.013799136504530907, -0.05781324952840805, 0.01754632778465748, -0.013053195551037788, -0.038095276802778244, -0.004748293198645115, -0.011760118417441845, 0.014770780690014362, -0.06427030265331268, 0.010023294016718864, 0.06939873099327087, -0.04497990757226944, 0.07143226265907288, 0.011910227127373219, 0.0022149316500872374, 0.012222517281770706, -0.043479789048433304, 0.018864883109927177, -0.031215667724609375, -0.04091666638851166, -0.0006872655940242112, 0.04533706605434418, 0.03464975580573082, -0.047918714582920074, 0.04738599434494972, 0.03331085667014122, -0.0463445745408535, 0.023024849593639374, 0.04847162961959839, 0.06677132099866867, -0.05373197793960571, -0.1043376475572586, 0.02772652544081211, -0.028656233102083206, 0.03213687613606453, 0.010207449086010456, 0.0033048223704099655, 0.036414630711078644, -0.049573954194784164, 0.058583617210388184, -0.05683086812496185, 0.05940809100866318, 0.03002009727060795, 0.05362977460026741, 0.0019228494493290782, -0.002644987078383565, 0.05823419243097305, 0.03544165939092636, -0.031494464725255966, -0.006848476827144623, 0.02137836441397667, -0.016487661749124527, -0.0010549351572990417, -0.033802248537540436, 0.02511211484670639, -0.009855110198259354, 0.06677854806184769, -0.2610590159893036, 0.01663718931376934, -0.0032313421834260225, 0.05387568473815918, 0.021345756947994232, 0.004246097523719072, 0.04989206790924072, -0.06624801456928253, 0.03051295131444931, 0.02919490821659565, 0.0063978638499975204, 0.024824067950248718, -0.017420722171664238, -0.03142956644296646, 0.019222915172576904, 0.03926604241132736, 0.06718319654464722, -0.01627976819872856, 0.05707947909832001, 0.021465472877025604, 0.004038995131850243, 0.0386677123606205, 0.19270044565200806, 0.0017240302404388785, 0.052248675376176834, 0.023535585030913353, 0.04755996912717819, -0.02282094582915306, 0.016950909048318863, 0.043182604014873505, 0.03854643180966377, -0.041288815438747406, 0.11872319877147675, 0.012634651735424995, -0.002843667985871434, 0.011344759725034237, 0.06426858901977539, 0.03211040049791336, 0.004132568370550871, -0.01714966632425785, -0.003492397489026189, -0.028035182505846024, -0.005343304481357336, 0.02989472635090351, 0.08576563000679016, -0.020080525428056717, -0.01063777506351471, -0.06097949668765068, -0.09632740914821625, 0.04841971769928932, -0.024440353736281395, -0.05442660674452782, 0.0284491665661335, -0.033474162220954895, 0.003482681466266513, 0.03071906790137291, -0.07716450840234756, -0.006042773369699717, -0.05964462831616402, 0.0033567470964044333, 0.08476188778877258, 0.011884774081408978, 0.07106856256723404, 0.059954069554805756, 0.04264454171061516], "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4eb76d44-f06c-4ed4-9687-7fbc29020abc", "node_type": "4", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "6cd2deb2e1f38059bee3c3dbfb51fe532818a1110da3a2db86f1b0f399ca8972", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5c4a78f9-e26c-4f7a-88aa-c30a536e8e3a", "node_type": "1", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "0c5a8b74f68fb65442b59cfbb9ca6bf4c7d30e2c8dff78654a4b577aba8e1bd5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "33bc12fc-1a09-4f57-b5c0-f85bcc9b0ccf", "node_type": "1", "metadata": {}, "hash": "0971149d9222c934956fe25f4d2be33de15d60e9653424a613eb9bc6fc6f88cc", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "### Under the Hood: The `QueryProcessor` in Action\n\nLet's visualize what happens inside the `QueryProcessor` when you submit a search for \"Java algorithms\":\n\n```mermaid\nsequenceDiagram\n    participant User\n    participant App Service\n    participant QueryProcessor\n    participant TextProcessor\n    participant Search Index\n    participant Search Results\n\n    User->>App Service: \"Search: Java algorithms\"\n    App Service->>QueryProcessor: search(\"Java algorithms\")\n    QueryProcessor->>TextProcessor: \"Clean and stem 'Java algorithms'\"\n    Note over TextProcessor: \"java\" \"algorithm\"\n    TextProcessor-->>QueryProcessor: Cleaned terms: [\"java\", \"algorithm\"]\n    QueryProcessor->>QueryProcessor: Calculate query's TF-IDF vector\n    QueryProcessor->>Search Index: Find documents with \"java\" or \"algorithm\"\n    Note over Search Index: Uses Inverted Index to get initial doc IDs\n    Search Index-->>QueryProcessor: List of potential Book IDs (e.g., 1, 3, 5, 7)\n    loop For each potential Book ID\n        QueryProcessor->>Search Index: Get book's TF-IDF vector (e.g., for book ID 1)\n        Note over Search Index: Uses tfIdfVectors map\n        Search Index-->>QueryProcessor: Book 1's vector\n        QueryProcessor->>QueryProcessor: Calculate Cosine Similarity (Query Vector vs. Book 1 Vector)\n        Note over QueryProcessor: Assigns a relevance score (e.g., 0.75 for Book 1)\n    end\n    QueryProcessor->>QueryProcessor: Sort results by score (highest first)\n    QueryProcessor-->>Search Results: List<SearchResult> (e.g., (Book 1, 0.75), (Book 3, 0.62)...)\n    Search Results-->>App Service: Ranked Search Results\n    App Service-->>User: Display books\n```\n\n#### The `QueryProcessor` Class: The Search Mastermind\n\nThe `QueryProcessor` is the class that orchestrates the entire search process. It needs access to the tools we built in [Search Index Management](04_search_index_management_.md): the `invertedIndex`, `tfIdfVectors`, and `idfScores`.", "mimetype": "text/plain", "start_char_idx": 5244, "end_char_idx": 7191, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "33bc12fc-1a09-4f57-b5c0-f85bcc9b0ccf", "embedding": [-0.055669378489255905, 0.004023236222565174, -0.03406207635998726, 0.0203296709805727, 0.024654850363731384, -0.06634385138750076, 0.0056837196461856365, 0.020943425595760345, 0.020721904933452606, -0.02848469465970993, -0.007280461955815554, -0.024167850613594055, 0.014041169546544552, -0.029465800151228905, 0.008144529536366463, 0.0038046534173190594, -0.022458238527178764, 0.01167080644518137, 0.00619471026584506, -0.040252190083265305, 0.07972479611635208, 0.07128902524709702, 0.0097018638625741, -0.020056407898664474, 0.02006266452372074, 0.035950250923633575, -0.030210314318537712, -0.0605812706053257, -0.019403569400310516, -0.20184071362018585, -0.002500068861991167, -0.046899549663066864, 0.11092730611562729, 0.03153512254357338, -0.007451470009982586, 0.010545787401497364, -0.02463988959789276, 0.033564355224370956, -0.04086274653673172, -0.015084335580468178, -0.021119603887200356, -0.015026409178972244, -0.03857894241809845, 0.003273115959018469, 0.0028818200808018446, 0.013846552930772305, 0.0007114089094102383, -0.08061249554157257, 0.034884605556726456, 0.030743256211280823, -0.01864405907690525, 0.012707404792308807, 0.017768314108252525, 0.02520504780113697, 0.07003671675920486, -0.0332784540951252, 0.10188472270965576, 0.037081874907016754, -0.032357655465602875, -0.01214596163481474, 0.05220695585012436, -0.01878918707370758, -0.1034345030784607, 0.07934834063053131, -0.03509577363729477, 0.009135916829109192, 0.029501624405384064, -0.04688175022602081, 0.008638827130198479, 0.05467220023274422, -0.014304744079709053, 0.06439442932605743, -0.019570255652070045, 0.06334976106882095, 0.016130242496728897, -0.005874944850802422, -0.02166483923792839, -0.014162094332277775, 0.03459698706865311, -0.014540538191795349, -0.028396688401699066, -0.04039030149579048, 0.0603288933634758, 0.002156269969418645, 0.027346672490239143, -0.03502257913351059, 0.006933698896318674, 0.0360686369240284, 0.03855370357632637, -0.02901887334883213, 0.04239612817764282, -0.06528199464082718, 0.015140803530812263, 0.03720046579837799, -0.03640260547399521, 0.0015506134368479252, -0.03129839152097702, 0.1277158558368683, 0.01739063858985901, 0.4036194682121277, 0.013696734793484211, 0.050457246601581573, -0.026125719770789146, -0.06632405519485474, -0.02292807213962078, -0.024981766939163208, -0.00481398543342948, 0.009195968508720398, 0.009603540413081646, -0.034231893718242645, 0.006196270231157541, -0.0635896772146225, 0.02677365578711033, 0.015718406066298485, -0.0001062118899426423, 0.010663227178156376, 0.001776313059963286, 0.024865148589015007, -0.024372685700654984, 0.009545869193971157, -0.030192619189620018, -0.022574806585907936, -0.008461940102279186, 0.042133647948503494, 0.051105376332998276, 0.016146404668688774, 0.004757757764309645, 0.054179344326257706, -0.023361627012491226, -0.0008290161495096982, 0.01237999927252531, -0.04382287710905075, -0.074980728328228, 0.05251838266849518, 0.03340860456228256, 0.018061678856611252, -0.04797349497675896, -0.021436313167214394, -0.0006279852241277695, -0.0009990012040361762, -0.04321812093257904, -0.030457081273198128, 0.019194912165403366, -0.03843838721513748, -0.06210920587182045, 0.13874219357967377, -0.05561535805463791, -0.07253727316856384, -0.035769715905189514, -0.11157494783401489, 0.004138560499995947, 0.03822421282529831, 0.0012346336152404547, -0.07046308368444443, -0.03812304884195328, 0.05839277803897858, 0.07163706421852112, -0.011053038761019707, -0.06282101571559906, -0.040281571447849274, -0.014187339693307877, 0.04012193903326988, -0.07291753590106964, 0.10084028542041779, 0.015789683908224106, -0.04377761855721474, -0.05609148368239403, 0.04019284248352051, -0.11510668694972992, 0.021822167560458183, 0.013335596770048141, -0.038046713918447495, -0.05469368025660515, 0.05720766633749008, 0.021140892058610916, -0.006986388936638832, -0.0038774937856942415, 0.02120955102145672, 0.03163628652691841, -0.0067113470286130905, 0.03640517219901085, -0.028129061684012413, -0.03312414884567261, 0.022896356880664825, 0.011237003840506077, -0.03418590873479843, 0.0031742267310619354, -0.00726730702444911, 0.05460672080516815, 0.005355162546038628, -0.029182497411966324, -0.03867697715759277, -0.013587716035544872, 0.001732921227812767, 0.013379297219216824, -0.00218006013892591, -0.007803301326930523, -0.019535347819328308, -0.011191668920218945, -0.019814154133200645, 0.051811665296554565, 0.0558810755610466, 0.00914086028933525, -0.012157809920608997, 0.01924086920917034, 0.044096894562244415, 0.018952136859297752, -0.059079594910144806, 0.032561417669057846, -0.0001369935052935034, -0.03588971868157387, 0.00037665656418539584, -0.054978977888822556, -0.0097736781463027, -0.0010588248260319233, -0.05510270968079567, 0.021924231201410294, 0.012911033816635609, 0.013599582016468048, 0.06518330425024033, 0.00536455400288105, 0.04040776565670967, -0.032266587018966675, -0.28983646631240845, -0.05696120858192444, -0.045374706387519836, 0.03584623336791992, 0.022308697924017906, -0.08429792523384094, -0.013560907915234566, -0.030359020456671715, -0.03351549431681633, 0.05238749831914902, 0.06380456686019897, -0.03394612669944763, -0.03607843443751335, -0.004480733536183834, -0.020706841722130775, 0.014469784684479237, 0.07359875738620758, -0.0025255598593503237, -0.029644954949617386, -0.05808623880147934, 0.04483292996883392, -0.017323898151516914, 0.05041004717350006, -0.051399003714323044, 0.04148750379681587, 0.015822578221559525, 0.11766409128904343, -0.01057176012545824, 0.032669294625520706, -0.0472613088786602, 0.03955195099115372, -0.010092522017657757, -0.07653585076332092, -0.06802332401275635, 0.0044148582965135574, -0.007522993255406618, -0.05073828622698784, -0.00040659861406311393, -0.019187362864613533, 0.01998918130993843, -0.04397018253803253, -0.012864332646131516, -0.03879648447036743, -0.035007327795028687, -0.002012976910918951, -0.0068577672354876995, -0.0010303654707968235, -0.10523960739374161, 0.019779140129685402, 0.0787564143538475, -0.017798732966184616, 0.03772132098674774, 0.02516203187406063, 0.05871240049600601, -0.006110049784183502, -0.044455353170633316, -0.007602599915117025, -0.05775809288024902, -0.021000197157263756, -0.022175703197717667, 0.04692723602056503, 0.010870729573071003, -0.0008564875461161137, -0.023233920335769653, 0.003580285469070077, -0.018664080649614334, 0.009875553660094738, 0.03129282593727112, 0.05223296955227852, -0.04849076271057129, -0.10852976143360138, 0.008545211516320705, -0.009970000013709068, 0.07385409623384476, -0.028819222003221512, 0.06446680426597595, 0.028528764843940735, -0.02105940319597721, 0.04655392840504646, -0.05742090940475464, 0.04385056719183922, 0.041510969400405884, 0.058998167514801025, 0.016776874661445618, -0.017855405807495117, 0.035447102040052414, 0.0364781953394413, -0.035356100648641586, 0.0012512507382780313, 0.040574319660663605, -0.016682498157024384, 0.006289489567279816, -0.007381699979305267, -0.010049853473901749, 0.02194061316549778, 0.018825460225343704, -0.23063699901103973, -0.0014911829493939877, 0.0012200252385810018, 0.035415299236774445, 0.02612837217748165, -0.0025897917803376913, 0.04218452051281929, -0.023786449804902077, 0.028926705941557884, 0.039081305265426636, -0.01946156658232212, 0.03518282249569893, -0.03855636715888977, -0.05492410436272621, 0.05745856836438179, 0.033734168857336044, 0.04199211671948433, 0.0008989052730612457, 0.04272696003317833, -0.01710006780922413, 0.024511607363820076, -0.0019122742814943194, 0.21781028807163239, 0.012973200529813766, 0.0319395586848259, -0.00032374399597756565, 0.05508517473936081, -0.053307775408029556, 0.03333378955721855, 0.034970514476299286, 0.06403552740812302, -0.023026656359434128, 0.10334283113479614, 0.029198991134762764, 0.04161692410707474, -0.005062357056885958, 0.05133437737822533, -0.006639748811721802, -0.021812280640006065, -0.00540368165820837, -0.08220130205154419, 0.018358854576945305, -0.02541648969054222, -0.008349481970071793, 0.058950696140527725, -0.018093563616275787, -0.011837535537779331, -0.039256200194358826, -0.060873061418533325, 0.00470890523865819, -0.02288627438247204, -0.01996404305100441, 0.023885784670710564, -0.011977817863225937, 0.016508465632796288, 0.009718619287014008, -0.08156614750623703, 0.00045177602441981435, -0.00910178478807211, -0.02348078228533268, 0.03675324097275734, 0.005383659154176712, 0.04254395142197609, 0.019862065091729164, 0.02386585623025894], "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4eb76d44-f06c-4ed4-9687-7fbc29020abc", "node_type": "4", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "6cd2deb2e1f38059bee3c3dbfb51fe532818a1110da3a2db86f1b0f399ca8972", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "36a3288a-f9e6-4538-a968-14b13f0ce95d", "node_type": "1", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "d2aa1ae633250a3a0ff62992f5a5faa236f8234dcb2d94190ce94627a850ac8a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0277eadb-3097-4e01-8262-c30883366f8c", "node_type": "1", "metadata": {}, "hash": "418b4e5ca7f4bbb5a35e138fd06a513c4d3f0006fedf0a3987be9778302e434b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "It needs access to the tools we built in [Search Index Management](04_search_index_management_.md): the `invertedIndex`, `tfIdfVectors`, and `idfScores`. It also uses our `TextProcessor` (which we'll explore in [Text Normalization Utilities](08_text_normalization_utilities_.md)) to clean up the user's query.\n\n**`src/main/java/features/search/QueryProcessor.java` (Simplified Constructor)**\n```java\npackage features.search;\n\nimport domain.Posting;\nimport domain.SearchResult;\nimport utils.TextProcessor; // Our text cleaning tool\nimport java.util.*;\n\npublic class QueryProcessor {\n    private final TextProcessor textProcessor;\n    private final Map<String, List<Posting>> invertedIndex;     // Word -> Books containing it\n    private final Map<Integer, Map<String, Double>> tfIdfVectors; // Book ID -> (Word -> Score)\n    private final Map<String, Double> idfScores;                // Word -> Overall Rarity Score\n\n    public QueryProcessor(TextProcessor textProcessor,\n                          Map<String, List<Posting>> invertedIndex,\n                          Map<Integer, Map<String, Double>> tfIdfVectors,\n                          Map<String, Double> idfScores) {\n        this.textProcessor = textProcessor;\n        this.invertedIndex = invertedIndex;\n        this.tfIdfVectors = tfIdfVectors;\n        this.idfScores = idfScores;\n    }\n    // ... search method and other helper methods\n}\n```\nThe constructor simply takes all the pre-built index components and the `TextProcessor` as \"ingredients\" to do its job.\n\n#### The `search` Method: The Core Logic\n\nThis is the main method that runs when you search.\n\n**`src/main/java/features/search/QueryProcessor.java` (Simplified `search` method)**\n```java\n// Inside QueryProcessor class\npublic List<SearchResult> search(String rawQuery) {\n    // 1. Process the query (clean words, stem them)\n    List<String> queryTerms = textProcessor.process(rawQuery);\n    if (queryTerms.isEmpty()) {\n        return Collections.emptyList(); // No valid terms left to search\n    }\n\n    // 2. Calculate the query's own TF-IDF vector\n    Map<String, Double> queryVector = calculateQueryVector(queryTerms);\n\n    // 3.", "mimetype": "text/plain", "start_char_idx": 7038, "end_char_idx": 9190, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "0277eadb-3097-4e01-8262-c30883366f8c", "embedding": [-0.09513692557811737, -0.004545851144939661, -0.056626882404088974, 0.022062255069613457, 0.021400554105639458, -0.07695044577121735, 0.007696140557527542, 0.007309716194868088, 0.015462817624211311, 0.00831033755093813, -0.009847414679825306, -0.03627752140164375, 0.03364911302924156, -0.012936982326209545, 0.007453916594386101, -0.024452170357108116, -0.01095912978053093, 0.026142869144678116, -0.03531395271420479, -0.01493233721703291, 0.03842709958553314, 0.02322516031563282, 0.00528290867805481, -0.04573243111371994, 0.03754841536283493, 0.07371823489665985, -0.03923290595412254, -0.08114273846149445, -0.0013768129283562303, -0.22651347517967224, -0.034144893288612366, -0.0415513776242733, 0.07518008351325989, 0.014083313755691051, 0.0162764023989439, 0.02894677221775055, -0.011342119425535202, 0.0005410430021584034, -0.019446173682808876, -0.026780331507325172, -0.008311312645673752, -0.023793324828147888, -0.02080339565873146, 0.017774678766727448, 0.0016114666359499097, -0.007109915837645531, -0.05158824101090431, 0.009160198271274567, -9.14510601432994e-05, 0.02843998558819294, -0.06070944666862488, -0.04623069614171982, -0.008785498328506947, 0.026530172675848007, 0.03787369653582573, 0.040159352123737335, 0.05932367593050003, 0.04900490865111351, -0.017556749284267426, -0.018719326704740524, 0.07078700512647629, -0.001097010332159698, -0.132161945104599, 0.0873609110713005, -0.027135450392961502, 0.013777222484350204, -0.026165934279561043, -0.06646890938282013, -0.007266548462212086, 0.07462034374475479, 0.00019395042909309268, 0.05012771487236023, 0.030926261097192764, 0.04441577196121216, 0.020028481259942055, 0.03587886318564415, 0.0014222463360056281, -0.020002318546175957, 0.06015341728925705, 0.007584699895232916, -0.014323363080620766, -0.014390754513442516, 0.010316862724721432, -0.009871207177639008, 0.013256581500172615, 0.004378324840217829, 0.01649649068713188, 0.0007255352684296668, 0.02941812574863434, -0.0245551448315382, 0.02732859179377556, -0.042710673063993454, -0.014924042858183384, 0.012824642471969128, -0.032285258173942566, -0.013986061327159405, -0.020916732028126717, 0.03494410589337349, 0.09394282102584839, 0.3428143858909607, 0.0035858910996466875, 0.035986486822366714, -0.014867360703647137, 0.01722169667482376, -0.00934417825192213, -0.025795482099056244, -0.023736486211419106, -0.04835623502731323, 0.0071759396232664585, -0.030670545995235443, -0.040958017110824585, -0.0698637068271637, 0.03230041638016701, -0.04627102613449097, -0.009023935534060001, 0.02073328197002411, 0.05455555394291878, 0.05162226781249046, 0.0038842542562633753, 0.016027266159653664, -0.01214451715350151, -0.002978298347443342, -0.006491097621619701, 0.044507067650556564, 0.025484761223196983, 0.004768698941916227, 0.024285055696964264, 0.022619212046265602, -0.04281330853700638, 0.018859634175896645, 0.012790437787771225, -0.00944890920072794, -0.10311276465654373, 0.025776399299502373, 0.06435203552246094, -0.01943032257258892, -0.03973832726478577, -0.004951318260282278, -0.04240662604570389, 0.015047446824610233, -0.02165713906288147, -0.01479240320622921, -0.011894985102117062, 0.01885376125574112, -0.10073884576559067, 0.17878621816635132, -0.040862563997507095, -0.041859790682792664, -0.03195907175540924, -0.09686136990785599, 0.02658087946474552, 0.03667158633470535, -0.023192735388875008, -0.04077424481511116, -0.058859650045633316, 0.06814801692962646, 0.06723807752132416, -0.038896963000297546, -0.054990705102682114, -0.05587298423051834, 0.005490040872246027, 0.044498346745967865, -0.023860560730099678, 0.138999342918396, -0.0038228740449994802, -0.06785742193460464, -0.0029517333023250103, 0.06124848499894142, -0.08844960480928421, -0.006290860008448362, -0.0034049865789711475, -0.04137629270553589, -0.03628620132803917, 0.075373075902462, 0.019541211426258087, -0.004858945030719042, -0.07529846578836441, -0.005018849857151508, 0.06182240694761276, 0.0017924470594152808, 0.025377055630087852, -0.050386399030685425, -0.037710245698690414, 0.05535999312996864, -0.009486162103712559, -0.01033470593392849, -0.026605017483234406, -0.023077258840203285, 0.02118557319045067, 0.00995592586696148, 0.032646529376506805, -0.04269566759467125, -0.03121206723153591, 0.011258289217948914, 0.019589556381106377, -0.02581225335597992, 0.00588582968339324, -0.0021887277252972126, 0.014274896122515202, 0.009062493219971657, 0.04529320448637009, -0.002639400539919734, 0.01110790204256773, 0.012342137284576893, 0.0019448318053036928, -0.008061928674578667, -0.02360161952674389, -0.04810900613665581, 0.02050853706896305, 0.02843589521944523, -0.02005251869559288, -0.015662509948015213, -0.08712008595466614, -0.047948844730854034, -0.021310236304998398, -0.014957845211029053, 0.021279798820614815, 0.037055931985378265, -0.07348348200321198, 0.058530163019895554, -0.01322198286652565, -0.0730338916182518, -0.018466917797923088, -0.29631590843200684, -0.053688548505306244, -0.06789591163396835, -0.005644095595926046, 0.015384787693619728, -0.07297344505786896, -0.005721104331314564, -0.013251349329948425, -0.029273949563503265, 0.06791086494922638, 0.042525194585323334, 0.03937966376543045, -0.04197268933057785, -0.010919895023107529, -0.027319975197315216, 0.0030659742187708616, 0.028594156727194786, 0.02121465839445591, -0.026793543249368668, -0.027681415900588036, 0.041692305356264114, -0.027032755315303802, 0.02615121565759182, -0.05643065273761749, 0.041240137070417404, 0.011193440295755863, 0.11593789607286453, -0.0059235580265522, 0.036338090896606445, -0.04702841117978096, 0.05785098671913147, 0.009258950129151344, -0.05797461420297623, -0.01694844849407673, 0.01713326759636402, -0.029789987951517105, -0.0126829594373703, -0.0003841191064566374, -0.018735086545348167, -0.010482287965714931, -0.028214501217007637, 0.049560546875, 0.05520657077431679, -0.050570640712976456, -0.03657582402229309, 0.010593123733997345, 0.004311638418585062, 0.005560566205531359, 0.016572749242186546, 0.10424590110778809, -0.031843043863773346, 0.05182114616036415, 0.007181448396295309, 0.023258868604898453, -0.03321344032883644, -0.02621570974588394, -0.0317603275179863, -0.057205818593502045, -0.02996278926730156, -0.05333007499575615, 0.006206309422850609, -0.02672383561730385, 0.02689145877957344, 0.02348773367702961, 0.03844276815652847, -0.055437929928302765, 0.0451204776763916, -0.011611605063080788, 0.05335036665201187, 0.002495829714462161, -0.07548631727695465, 0.025814203545451164, -0.012683538720011711, 0.07688656449317932, 0.051866404712200165, 0.027440659701824188, 0.038714244961738586, 0.01015204656869173, 0.007956965826451778, -0.037090521305799484, 0.0681849867105484, 0.026375165209174156, 0.06479529291391373, -0.02050872892141342, 0.008172929286956787, 0.030619174242019653, 0.09734436124563217, 0.018984593451023102, -0.007372451946139336, 0.05567243695259094, -0.008384195156395435, -0.012521717697381973, 0.017360860481858253, 0.011282602325081825, -0.014677400700747967, 0.05289286747574806, -0.27980688214302063, 0.02875785157084465, 0.0005218334845267236, 0.05339088290929794, 0.027206098660826683, -0.03834197670221329, 0.0857878252863884, -0.06923864781856537, 0.028695683926343918, -0.020252792164683342, -0.013860274106264114, 0.04617561772465706, -0.021229567006230354, -0.06944804638624191, 0.027886027470231056, 0.012126975692808628, 0.050567470490932465, -0.05159512534737587, 0.06202731281518936, 0.012182775884866714, 0.041677381843328476, -0.0021146356593817472, 0.18779775500297546, 0.0031302599236369133, 0.016403332352638245, -0.014293519780039787, -0.0012184601509943604, -0.04605409875512123, 0.054042477160692215, 0.03500502556562424, 0.05326567962765694, -0.03698991239070892, 0.09581124782562256, 0.042552050203084946, 0.015008105896413326, 0.019657950848340988, 0.007500883191823959, 0.03069949895143509, 0.017956892028450966, -0.04489843174815178, -0.004485590383410454, -0.006473950110375881, -0.04268447309732437, 0.02009269781410694, 0.053707048296928406, -0.014317587018013, 0.008661007508635521, -0.041508231312036514, -0.08217298984527588, -0.0003446041082497686, -0.001020594034343958, 0.014921977184712887, 0.026902146637439728, -0.004133874084800482, 0.016825538128614426, 0.03484343737363815, -0.0588037371635437, 0.02085159160196781, -0.008366412483155727, -0.030977727845311165, -0.013667238876223564, 0.0027093407697975636, 0.03897803649306297, 0.03390251100063324, 0.05184910446405411], "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4eb76d44-f06c-4ed4-9687-7fbc29020abc", "node_type": "4", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "6cd2deb2e1f38059bee3c3dbfb51fe532818a1110da3a2db86f1b0f399ca8972", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "33bc12fc-1a09-4f57-b5c0-f85bcc9b0ccf", "node_type": "1", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "528df7ec818a78cac78102aea1a2fc11a3d7186bca2ac5d34542edeca6f06247", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6d42b3e7-b1ae-4ebc-be5f-5b65ada882a3", "node_type": "1", "metadata": {}, "hash": "edd5ede646289f49e67ba7def1f68fa6c796124e85a7028171a0fde8a40739ef", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Calculate the query's own TF-IDF vector\n    Map<String, Double> queryVector = calculateQueryVector(queryTerms);\n\n    // 3. Find all documents that match *any* query term using the inverted index\n    Set<Integer> matchingDocIds = findMatchingDocuments(queryTerms);\n\n    // 4. Score each matching document using Cosine Similarity\n    List<SearchResult> results = new ArrayList<>();\n    for (int docId : matchingDocIds) {\n        Map<String, Double> docVector = tfIdfVectors.get(docId); // Get book's TF-IDF vector\n        double score = cosineSimilarity(queryVector, docVector); // Calculate relevance!\n        if (score > 0) { // Only add if there's some relevance\n            results.add(new SearchResult(docId, score));\n        }\n    }\n\n    // 5. Rank (sort) the results by score (highest first)\n    Collections.sort(results);\n\n    return results;\n}\n```\nHere's a breakdown of the steps in `search()`:\n1.  **`textProcessor.process(rawQuery)`**: Just like `IndexerMain` processed book text, the `QueryProcessor` uses `TextProcessor` to clean and standardize your search query (e.g., \"Programming Books\" becomes [\"program\", \"book\"]).\n2.  **`calculateQueryVector(queryTerms)`**: It then creates a special numeric representation (a \"vector\") of your query, using the same TF-IDF logic applied to books. This helps us compare your query to books.\n3.  **`findMatchingDocuments(queryTerms)`**: This step is super fast because it uses the `invertedIndex` we built. It quickly gathers a list of all `bookId`s that contain any of the processed query terms.\n4.  **`cosineSimilarity(queryVector, docVector)`**: This is the core of relevance scoring. For each potential book, it compares the query's vector to the book's pre-computed `tfIdfVectors` using a mathematical technique called Cosine Similarity.\n5.  **`Collections.sort(results)`**: Finally, all the `SearchResult`s are sorted from highest relevance score to lowest, putting the best matches at the top.\n\n#### `findMatchingDocuments`: Rapid Document Retrieval\n\nThis method uses the `invertedIndex` to get all books that contain at least one of your query words.", "mimetype": "text/plain", "start_char_idx": 9068, "end_char_idx": 11176, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "6d42b3e7-b1ae-4ebc-be5f-5b65ada882a3", "embedding": [-0.10238136351108551, 0.06116058677434921, -0.040346745401620865, 0.058260414749383926, 0.019665192812681198, -0.04886925220489502, -0.022845974192023277, 0.013311133719980717, 0.0006985015352256596, 0.0366208590567112, 0.01347818411886692, -0.05059916898608208, 0.041913073509931564, -0.021384069696068764, 0.01586194522678852, -0.031103774905204773, 0.024796172976493835, 0.026495356112718582, -0.020744819194078445, -0.0027340210508555174, 0.07308974117040634, 0.05270613729953766, -0.04513705521821976, -0.060956135392189026, -0.0029756459407508373, 0.0807737410068512, -0.016783712431788445, -0.044471465051174164, -0.022694261744618416, -0.1975526362657547, -0.02059800736606121, -0.031061524525284767, 0.05504471808671951, 0.022675875574350357, 0.02449127286672592, 0.06217843294143677, -0.0075983572751283646, 0.05901480093598366, -0.01591513492166996, 0.010509943589568138, -0.027003664523363113, 0.00912722758948803, -0.004147453233599663, 0.023911161348223686, -0.015407928265631199, 0.011220353655517101, -0.03827770799398422, -0.0356714129447937, -0.005063515622168779, -0.03579887002706528, -0.08228547126054764, -0.007234968710690737, 0.03406471014022827, -0.011869666166603565, 0.004523018375039101, -0.004232437815517187, 0.04951668158173561, 0.07098615914583206, -0.03698005527257919, -0.01773889921605587, 0.03385057672858238, 0.02615358680486679, -0.0870339646935463, 0.067226842045784, 0.02990192361176014, 0.0002751885331235826, -0.009518763981759548, -0.054954517632722855, 0.008589210920035839, 0.08448530733585358, -0.0013465705560520291, 0.058133479207754135, 0.003322639735415578, 0.07955175638198853, 0.028974009677767754, 0.03195679932832718, 0.012715776450932026, -0.023623915389180183, 0.048592742532491684, 0.0019309712806716561, -0.0385914072394371, -0.01916343905031681, 0.024239445105195045, -0.03616776317358017, -0.02617420069873333, -0.05291881039738655, 0.03507829084992409, -0.03871181979775429, 0.047594472765922546, 0.012348677963018417, 0.01596469059586525, -0.016765937209129333, -0.0058185989037156105, 0.028926845639944077, -0.06369120627641678, -0.023258496075868607, -0.07186609506607056, 0.056575700640678406, 0.08126906305551529, 0.3878946304321289, -0.005733100697398186, 0.04441789165139198, -0.005217236932367086, -0.03631804883480072, 0.0019265752052888274, -0.06939655542373657, -0.014050530269742012, -0.050482723861932755, 0.005463073030114174, -0.03513080254197121, -0.011718714609742165, -0.09155469387769699, 0.041766732931137085, -0.031908001750707626, -0.03293443098664284, 0.04171742498874664, 0.07065258175134659, 0.04808635637164116, -0.010262067429721355, -0.004348575137555599, -0.020259559154510498, -0.02630051225423813, 0.006632544565945864, 0.04691570624709129, 0.03853816166520119, -0.04786943271756172, -0.02139311283826828, 0.03515445813536644, -0.026694172993302345, 0.009131002239882946, 0.0424378328025341, 0.010594339109957218, -0.06901626288890839, -0.006761768367141485, 0.06405404210090637, 0.00017246573406737298, -0.009773009456694126, -0.009298811666667461, -0.013929631561040878, 0.035078264772892, -0.022498924285173416, -0.04463614523410797, 0.02401886135339737, -0.008533410727977753, -0.10904727876186371, 0.11635638028383255, 0.009279162622988224, -0.04420746490359306, -0.03820572793483734, -0.08143913745880127, 0.025681758299469948, 0.05179063603281975, -0.039013199508190155, -0.06491382420063019, -0.031280286610126495, 0.019178887829184532, 0.10002847760915756, -0.01053885743021965, -0.03841191157698631, -0.04437842592597008, -0.0045668561942875385, 0.07105165719985962, -0.038759224116802216, 0.14123809337615967, 0.008939328603446484, -0.08491065353155136, 0.012367654591798782, 0.015145525336265564, -0.09787070751190186, 0.0022987418342381716, -0.008651533164083958, 0.02603943832218647, -0.019508179277181625, 0.0626586377620697, 0.009044606238603592, 0.026158230379223824, -0.04174891859292984, 0.03235509619116783, 0.02852853387594223, 0.020800694823265076, 0.014505977742373943, -0.05157313123345375, -0.07299875468015671, 0.025029918178915977, 0.0034953802824020386, -0.025239136070013046, -0.05387607589364052, 0.017674840986728668, 0.022196238860487938, 0.03961717709898949, 0.01721794717013836, -0.041833825409412384, -0.03840411826968193, -0.00851442664861679, 0.03582485020160675, -0.018977489322423935, -0.005076154600828886, -0.040316060185432434, 0.02359612286090851, -0.03275322914123535, 0.042975183576345444, 0.02600063383579254, 0.020793210715055466, 0.05035942420363426, 0.03063475340604782, -0.015958838164806366, 0.012989499606192112, -0.03153202682733536, 0.04794200509786606, 0.022317761555314064, -0.06457886099815369, -0.035913191735744476, -0.06656114757061005, -0.0378112867474556, -0.011536304838955402, -0.027268389239907265, 0.004860094748437405, 0.066404327750206, -0.017473554238677025, 0.044516872614622116, -0.009909061715006828, -0.09802167862653732, 0.013069720938801765, -0.27383318543434143, -0.024046365171670914, -0.06547790765762329, 0.006991574540734291, 0.026929078623652458, -0.04851268604397774, -0.00960642471909523, -0.049163300544023514, -0.011592390947043896, 0.02418372593820095, 0.01841004565358162, -0.008914894424378872, -0.038035448640584946, -0.02458684705197811, -0.01937142014503479, -0.024256708100438118, 0.01158210914582014, -0.009289702400565147, -0.005467545706778765, -0.01283862255513668, 0.06101616472005844, -0.020523803308606148, 0.012803184799849987, -0.05715321749448776, 0.06750275194644928, 0.010783311910927296, 0.09532075375318527, 0.018929682672023773, -0.025326933711767197, -0.06594374030828476, 0.029426762834191322, 0.007717782631516457, -0.0572546012699604, -0.0466296449303627, 0.029676808044314384, 0.013206204399466515, -0.023879937827587128, -0.020315391942858696, -0.030576448887586594, 0.01297091320157051, -0.024211466312408447, 0.04105602204799652, 0.05838043615221977, -0.026416806504130363, -0.005774985998868942, -0.011029193177819252, 0.00018795012147165835, -0.07543899863958359, 0.06742151826620102, 0.08676183223724365, -0.03462784364819527, 0.046756960451602936, 9.459886496188119e-05, 0.04056195542216301, -0.04974514618515968, -0.04149347543716431, 0.0054640029557049274, -0.05179019272327423, -0.012443498708307743, -0.05314776301383972, 0.027875447645783424, -0.010364307090640068, 0.013577157631516457, 0.0031512482091784477, 0.030801767483353615, -0.00714567955583334, -0.0015724922996014357, -0.0018669639248400927, 0.02127939835190773, -0.04054751992225647, -0.0602266900241375, 0.02564706653356552, 0.0010381229221820831, 0.06542931497097015, -0.034741319715976715, 0.05940757691860199, 0.06176146864891052, -0.015080269426107407, 0.004903771914541721, -0.07118024677038193, 0.021390287205576897, -0.0019718215335160494, 0.09506797045469284, 0.03551319241523743, -0.006654453929513693, 0.05772527679800987, 0.0578150600194931, -0.01700519770383835, 0.021889498457312584, 0.022600160911679268, -0.047010380774736404, 0.030983682721853256, -0.01745672896504402, 0.03045714646577835, -0.02113579586148262, 0.016336439177393913, -0.25801393389701843, 0.0366114042699337, -0.02779337577521801, 0.04805608466267586, -0.003849445143714547, -0.01459555421024561, 0.0756162703037262, -0.06981580704450607, 0.03722643479704857, -4.206684388918802e-05, 0.002657003467902541, 0.04492584988474846, -0.024358490481972694, -0.07702768594026566, 0.022183792665600777, 0.023086916655302048, 0.049400750547647476, 7.031791028566658e-05, 0.029023747891187668, 0.012068891897797585, 0.02309366874396801, 0.004868627991527319, 0.2131837010383606, 0.011934589594602585, 0.022619960829615593, -0.0030327436979860067, 0.02845275029540062, -0.033479999750852585, 0.04060443863272667, 0.04210870712995529, 0.02926759049296379, -0.047247275710105896, 0.07810680568218231, 0.015805207192897797, 0.017951615154743195, 0.023420488461852074, 0.05541834235191345, 0.024820366874337196, 0.028747638687491417, -0.04011267423629761, -0.023563120514154434, -0.02645757608115673, -0.03588569164276123, -0.0019763861782848835, 0.04772929474711418, 0.03179643675684929, -0.01580076292157173, -0.0357341542840004, -0.044783640652894974, 0.01796218566596508, -0.036621931940317154, -0.04606708884239197, 0.0035232750233262777, 0.015338927507400513, 0.06400717794895172, -0.006301018409430981, -0.05237559601664543, 0.010289830155670643, -0.06262847781181335, -0.06048339605331421, 0.026961516588926315, 0.0041864365339279175, 0.0318116769194603, 0.0085257263854146, 0.022408947348594666], "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4eb76d44-f06c-4ed4-9687-7fbc29020abc", "node_type": "4", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "6cd2deb2e1f38059bee3c3dbfb51fe532818a1110da3a2db86f1b0f399ca8972", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0277eadb-3097-4e01-8262-c30883366f8c", "node_type": "1", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "9834f5c8d2538f90facdd1f2d85593af0535b91d6ab98892592043eb0e9b45c1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "69c7df10-3b2b-4b33-9234-5f35b7d24708", "node_type": "1", "metadata": {}, "hash": "795e4b4b7e41192b1edac035256fd45fe534b1035f32d1cb96b76ee28a8cfeeb", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#### `findMatchingDocuments`: Rapid Document Retrieval\n\nThis method uses the `invertedIndex` to get all books that contain at least one of your query words.\n\n**`src/main/java/features/search/QueryProcessor.java` (Simplified `findMatchingDocuments` method)**\n```java\n// Inside QueryProcessor class\nprivate Set<Integer> findMatchingDocuments(List<String> queryTerms) {\n    Set<Integer> docIds = new HashSet<>();\n    for(String term : queryTerms) {\n        List<Posting> postings = invertedIndex.get(term); // Look up term in the index!\n        if(postings != null){\n            for(Posting p : postings) {\n                docIds.add(p.getDocId()); // Add all unique book IDs found\n            }\n        }\n    }\n    return docIds;\n}\n```\nFor each word in your query (e.g., \"java\"), it goes to the `invertedIndex` and retrieves all the `Posting` objects associated with \"java\". Each `Posting` tells it which `docId` (book ID) contains that word. It collects all these `docId`s into a `Set` to avoid duplicates, giving us a list of all potential candidate books.\n\n#### `calculateQueryVector`: Understanding the Query's Importance\n\nThis method creates a TF-IDF vector for *your search query itself*. This allows us to treat your query like a small \"document\" and compare it to our books.", "mimetype": "text/plain", "start_char_idx": 11020, "end_char_idx": 12300, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "69c7df10-3b2b-4b33-9234-5f35b7d24708", "embedding": [-0.07969949394464493, -0.021156111732125282, -0.07074558734893799, 0.03797227889299393, -0.018724916502833366, -0.06074395775794983, 0.03942045569419861, 0.019669653847813606, 0.024132655933499336, -0.01595778949558735, -0.02199018932878971, -0.030269533395767212, 0.03719576075673103, -0.005495097022503614, 0.035843100398778915, -0.040335580706596375, -0.03606463223695755, 0.002894953591749072, -0.030175110325217247, -0.03933989629149437, 0.05819415673613548, 0.011412878520786762, 0.0480058491230011, -0.02634349651634693, 0.01270360965281725, 0.06866537034511566, -0.03040226921439171, -0.06110891327261925, 0.0007744900649413466, -0.22209492325782776, -0.028577812016010284, -0.037239886820316315, 0.07033107429742813, -0.005508876405656338, -0.022152112796902657, 0.05329344421625137, 0.010106474161148071, 0.028557339683175087, -0.019013604149222374, -0.012268522754311562, -0.04380962997674942, -0.0012375133810564876, 0.008119262754917145, 0.02196134440600872, -0.03381210193037987, 0.0023805471137166023, -0.021234620362520218, 0.011441491544246674, -0.01707684062421322, 0.05753563344478607, -0.03688472509384155, -0.05856091529130936, 0.005257300101220608, 0.023185769096016884, 0.06868201494216919, 0.029314838349819183, 0.06220763549208641, 0.058366358280181885, -0.0028221397660672665, -0.03002420999109745, 0.06907226145267487, -0.036394327878952026, -0.1017947718501091, 0.07908016443252563, -0.023585345596075058, -0.009746911935508251, -0.014183782041072845, -0.054467394948005676, -0.017931321635842323, 0.07586649060249329, 0.005045020487159491, 0.07136910408735275, -0.012738827615976334, 0.05033895745873451, 0.027095481753349304, 0.0036090321373194456, -0.020148366689682007, 0.011206244118511677, 0.03235925734043121, 0.00544701749458909, -0.0064368704333901405, -0.00823346059769392, 0.03476058691740036, -0.022700835019350052, 0.011630024760961533, -0.0249030664563179, 0.007205327041447163, 0.0005795065080747008, 0.029362976551055908, -0.060582175850868225, 0.016369653865695, -0.03245231881737709, -0.03305559977889061, -0.026288125663995743, -0.02838696539402008, -0.017171360552310944, -0.0039885020814836025, 0.04250607639551163, 0.062162209302186966, 0.3553536832332611, 0.015027441084384918, 0.017815960571169853, 0.010631115175783634, -0.007181357592344284, -0.007920523174107075, -0.02453245222568512, -0.017816858366131783, -0.027094827964901924, 0.0033079287968575954, -0.00417826185002923, -0.009470973163843155, -0.03575863316655159, 0.035966869443655014, -0.0597967654466629, -0.03570220619440079, 0.009457609616219997, 0.05266455560922623, 0.053972288966178894, 0.040675342082977295, 0.010158943943679333, -0.009257410652935505, -0.02248966693878174, -0.01751222275197506, 0.0534508042037487, 0.03684394061565399, 0.008077841252088547, 0.016558216884732246, 0.02863890305161476, -0.007402137387543917, 0.0014557113172486424, 0.008107738569378853, 6.162512727314606e-05, -0.08494827151298523, 0.003709341399371624, 0.055135708302259445, 0.012760637328028679, -0.03591836243867874, -0.021730277687311172, -0.028864923864603043, 0.02800743654370308, -0.03937280550599098, -0.015026585198938847, 0.0038522796239703894, -0.013385603204369545, -0.1088699996471405, 0.16787463426589966, -0.026992300525307655, -0.019954849034547806, -0.029651416465640068, -0.10036922991275787, -0.0061089941300451756, 0.0512922964990139, -0.007771910168230534, -0.05838404968380928, -0.04869614541530609, 0.08422635495662689, 0.09019006043672562, -0.016546189785003662, -0.04444153234362602, -0.06816046684980392, 0.002829048316925764, 0.018447399139404297, -0.03324940800666809, 0.11756705492734909, 0.015375915914773941, -0.07290270179510117, -0.0075196693651378155, 0.05315891280770302, -0.09549938142299652, -0.036544833332300186, 0.018065262585878372, -0.026910556480288506, -0.05067077651619911, 0.0538504384458065, 0.04062608256936073, -0.03196370601654053, -0.06706152856349945, 0.010552234016358852, 0.07792536169290543, -0.0015973346307873726, 0.05086853727698326, -0.020503267645835876, -0.04890083894133568, 0.061626508831977844, -0.03810582682490349, -0.02351377159357071, -0.04447787627577782, -0.028360510244965553, 0.03357584401965141, 0.01994963362812996, 0.03367803990840912, -0.07902619242668152, -0.014301083981990814, 0.052672963589429855, 0.01623208448290825, -0.02443462796509266, -0.025976035743951797, -0.005535067990422249, -0.012739788740873337, -0.03180978447198868, 0.05551188066601753, -0.004262933973222971, 0.018671372905373573, 0.012740401551127434, -0.015987982973456383, 0.020504266023635864, 0.028951382264494896, -0.04379386454820633, 0.023397766053676605, -0.00966474786400795, -0.02640257216989994, -0.018492553383111954, -0.0711633563041687, -0.023979108780622482, -0.053794678300619125, -0.0010684903245419264, 0.02468506060540676, 0.05379638075828552, -0.009248660877346992, 0.05491139367222786, -0.04205670952796936, -0.05243103206157684, -0.012707960791885853, -0.30741310119628906, -0.06983713060617447, -0.05040174722671509, 0.01660446636378765, 0.0364968366920948, -0.05717761069536209, -0.0005892510525882244, -0.028283054009079933, 0.004988466389477253, 0.030325567349791527, 0.0093065295368433, 0.02763744257390499, -0.038257431238889694, -0.005111846141517162, -0.026590928435325623, 0.03294587507843971, 0.026325605809688568, 0.01394469290971756, -0.03378118574619293, -0.030044768005609512, 0.03331990912556648, 0.010601451620459557, 0.01971479505300522, -0.07123225927352905, 0.046051573008298874, -0.001652508624829352, 0.10799527913331985, 0.0023437340278178453, 0.047933418303728104, -0.06638644635677338, 0.046117160469293594, -0.005931758787482977, -0.0586712621152401, -0.009195851162075996, -0.00010263384319841862, -0.05757247284054756, -0.0477619394659996, 0.025693031027913094, -0.030482206493616104, -0.005681971553713083, -0.05287162959575653, 0.021205315366387367, 0.051818784326314926, -0.025549815967679024, -0.047269657254219055, 0.0022291189525276423, 0.007579905446618795, -0.004922713618725538, -0.012038721702992916, 0.06989067792892456, -0.02361689880490303, 0.048228006809949875, 0.022729162126779556, -0.00011796468606917188, -0.019931839779019356, -0.02736659161746502, -0.0078010293655097485, -0.046080972999334335, -0.007552055176347494, -0.011995424516499043, -0.00036851511686109006, -0.014100717380642891, 0.05016058310866356, 0.001730246702209115, 0.016094008460640907, -0.016555465757846832, 0.02585732564330101, -0.0037669141311198473, 0.026760276407003403, -0.004796866327524185, -0.0660884827375412, 0.04856136813759804, -0.011738172732293606, 0.022653276100754738, 0.05200829729437828, -0.022269872948527336, 0.058173634111881256, -0.01579989679157734, 0.034775733947753906, -0.0031618294306099415, 0.0678485557436943, 0.01822497323155403, 0.07308311760425568, 0.009146581403911114, 0.02378302998840809, 0.0559522807598114, 0.09471911191940308, 0.04555151239037514, 0.0033257650211453438, 0.04070871323347092, -0.025547267869114876, 0.012301244772970676, 0.021696295589208603, -0.007932603359222412, -0.0522761270403862, 0.027353355661034584, -0.28329378366470337, 0.024870147928595543, -0.02843749150633812, 0.052723534405231476, 0.009993469342589378, -0.02836758643388748, 0.03659961745142937, -0.06720535457134247, 0.0495806485414505, -0.02479141391813755, -0.019904987886548042, 0.017882606014609337, 0.012430383823812008, -0.06613705307245255, -0.012695582583546638, 0.02344653569161892, 0.04656055569648743, -0.030650632455945015, 0.04825931787490845, 0.0226714126765728, 0.051731254905462265, -0.013122894801199436, 0.2134508639574051, -0.018042048439383507, 0.034728433936834335, -0.033729344606399536, 0.0381605364382267, -0.01719128154218197, 0.021466046571731567, 0.06432769447565079, 0.02648165076971054, -0.039202120155096054, 0.13178715109825134, 0.009054691530764103, -0.003866511629894376, 0.018900778144598007, 0.016414716839790344, 0.015892887488007545, -0.015674766153097153, -0.046166613698005676, 0.02777436375617981, 0.008466162718832493, -0.0158288162201643, 0.06350132822990417, 0.07835779339075089, -0.01750914938747883, 0.03230931609869003, -0.05175524204969406, -0.07325305789709091, -0.012530941516160965, -0.022323206067085266, -0.026458755135536194, 0.020751168951392174, -0.0043262154795229435, 0.025511538609862328, 0.03335939720273018, -0.05461539700627327, 0.02394135110080242, -0.015615930780768394, -0.010683346539735794, -0.01788344420492649, 0.016638491302728653, 0.04267003759741783, 0.004624153021723032, 0.03238886594772339], "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4eb76d44-f06c-4ed4-9687-7fbc29020abc", "node_type": "4", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "6cd2deb2e1f38059bee3c3dbfb51fe532818a1110da3a2db86f1b0f399ca8972", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6d42b3e7-b1ae-4ebc-be5f-5b65ada882a3", "node_type": "1", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "d5f801f30e9e38fdfb866004e9b4d1d562b11a6b1f9cfc9f7cad177d1973fb76", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e1a1c153-9b3e-4680-8460-1d2c4770861e", "node_type": "1", "metadata": {}, "hash": "7157f90b966d9dcf5f5982c5633dee37dec3b6a697acc37000b769ceaecb64e8", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#### `calculateQueryVector`: Understanding the Query's Importance\n\nThis method creates a TF-IDF vector for *your search query itself*. This allows us to treat your query like a small \"document\" and compare it to our books.\n\n**`src/main/java/features/search/QueryProcessor.java` (Simplified `calculateQueryVector` method)**\n```java\n// Inside QueryProcessor class\nprivate Map<String, Double> calculateQueryVector(List<String> queryTerms) {\n    Map<String, Double> queryVector = new HashMap<>();\n    Map<String, Integer> termCounts = new HashMap<>(); // Count how many times each term appears in YOUR query\n\n    for(String term : queryTerms) {\n        termCounts.put(term, termCounts.getOrDefault(term, 0) + 1);\n    }\n\n    for(String term : termCounts.keySet()) {\n        double tf = 1 + Math.log10(termCounts.get(term)); // Calculate Term Frequency for query term\n        double idf = idfScores.getOrDefault(term, 0.0);    // Get Inverse Document Frequency from our index\n\n        queryVector.put(term, tf * idf); // Store TF-IDF score for query term\n    }\n    return queryVector;\n}\n```\nThis method essentially does the same TF-IDF calculation we saw in [Search Index Management](04_search_index_management_.md), but for the query. It counts how many times each word appears in *your query* (TF) and then multiplies it by the overall rarity of that word (`idfScores`) from our pre-built index.\n\n#### `cosineSimilarity`: Measuring How Alike Things Are\n\nThis is the clever math part! Cosine Similarity measures the \"angle\" between two \"vectors\" (our lists of TF-IDF scores for the query and a book).\n\n**Analogy:** Imagine your query and a book are two arrows in a multi-dimensional space.\n*   If they point in exactly the same direction, they are very similar (score = 1.0).\n*   If they point in completely different directions, they are not similar at all (score = 0.0).\n*   Anything in between is a partial match.", "mimetype": "text/plain", "start_char_idx": 12078, "end_char_idx": 13989, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "e1a1c153-9b3e-4680-8460-1d2c4770861e", "embedding": [-0.06839781999588013, -0.01011226698756218, -0.04860438406467438, 0.0060524544678628445, -0.009493165649473667, -0.06567015498876572, -0.0074754748493433, -0.015131874941289425, 0.0681246891617775, -0.014012809842824936, 0.02313167229294777, -0.019696325063705444, 0.02579326182603836, 0.017899515107274055, -0.022001221776008606, -0.017764348536729813, 0.02529965713620186, 0.010694199241697788, -0.04682835936546326, 0.01251971535384655, 0.047390446066856384, 0.02204899676144123, 0.03313281759619713, -0.06240095943212509, 0.03124389238655567, 0.1033020094037056, -0.015207632444798946, -0.09391351789236069, -0.0027875329833477736, -0.2126467525959015, -0.022936508059501648, -0.015165369026362896, 0.07610991597175598, -0.02201228402554989, -0.017325077205896378, 0.03057597577571869, 0.013983004726469517, 0.02061227709054947, -0.02010728046298027, -0.0490034855902195, -0.02056839130818844, 0.012666822411119938, -0.002648334251716733, -0.0045657288283109665, -0.03978245332837105, -0.0014211374800652266, -0.019983837381005287, 0.027251092717051506, 0.005688392091542482, 0.018683310598134995, -0.033457182347774506, -0.059546440839767456, 0.003341827541589737, 0.04153512418270111, 0.05212061479687691, 0.03736918792128563, 0.019625583663582802, 0.058933477848768234, -0.010158900171518326, 0.021850544959306717, 0.06871411204338074, -0.024338338524103165, -0.1143089011311531, 0.040843136608600616, 0.028899746015667915, -0.009540848433971405, -0.004439877346158028, -0.07010972499847412, -0.04016078636050224, 0.08089861273765564, 0.017985960468649864, 0.0417984277009964, 0.026225460693240166, 0.0663214698433876, 0.006448332220315933, 0.02315022610127926, -0.015346874482929707, 0.012684246525168419, 0.044113583862781525, 0.027161963284015656, -0.043508727103471756, -0.038416020572185516, 0.004134588409215212, -0.03333267942070961, 0.0014597694389522076, -0.003539599012583494, 0.004840988665819168, 0.0003502972540445626, 0.021331308409571648, -0.05216233804821968, 0.013824368827044964, -0.06855759769678116, -0.032365377992391586, 0.004398687276989222, -0.06755956262350082, -0.06186762824654579, -0.030393464490771294, 0.0051878755912184715, 0.05732905492186546, 0.3246515393257141, 0.0017674855189397931, 0.047479625791311264, -0.03099873848259449, 0.006385022308677435, 0.012652439996600151, -0.020407820120453835, -0.0055688489228487015, -0.045639753341674805, 0.059272974729537964, -0.0421290285885334, -0.014942055568099022, -0.021597374230623245, 0.01893109455704689, -0.06745430082082748, -0.031042691320180893, 0.038147177547216415, 0.05101041868329048, 0.019556833431124687, 0.07037857919931412, -0.007078986149281263, -0.024937624111771584, -0.020240018144249916, -0.028125334531068802, -0.017620302736759186, 0.036736875772476196, -0.010227637365460396, 0.002031052950769663, 0.023037701845169067, -0.010467717424035072, -0.01237779576331377, 0.04232808202505112, -0.05422037094831467, -0.06081388518214226, -0.012069391086697578, 0.0062550753355026245, 0.01010185107588768, -0.048995766788721085, 0.01985400915145874, 0.012356751598417759, 0.024968048557639122, -0.0209855567663908, -0.010276766493916512, 0.016991516575217247, 0.025964198634028435, -0.0911102369427681, 0.1702534407377243, -0.05827174335718155, -0.015656566247344017, -0.021243678405880928, -0.07024770975112915, 0.0073228455148637295, 0.0063609778881073, -0.028043532744050026, -0.03501683101058006, -0.03234459087252617, 0.07612656056880951, 0.041430067270994186, -0.008040892891585827, -0.030492696911096573, -0.08291323482990265, 0.011651030741631985, 0.017017241567373276, -0.0665631890296936, 0.12530279159545898, 0.023693637922406197, -0.0407731719315052, 0.02991236373782158, 0.07072648406028748, -0.07535344362258911, 0.010024618357419968, 0.005217310041189194, -0.04335431754589081, -0.0193636417388916, 0.08487818390130997, 0.014416131190955639, -0.01734878309071064, -0.06787848472595215, 0.02164081111550331, 0.03736572340130806, 0.022265441715717316, 0.01052446011453867, -0.02362152934074402, -0.05720660462975502, 0.06123524531722069, -0.012983712367713451, -0.01483647245913744, -0.05632153898477554, -0.02227073535323143, 0.03466644883155823, 0.014028286561369896, -0.00655756751075387, -0.05622514337301254, -0.06259074807167053, 0.029052652418613434, 0.0072769420221447945, -0.017243340611457825, 0.020085690543055534, -0.025871342048048973, 0.0237102173268795, -0.020989473909139633, 0.07262448221445084, 0.032911788672208786, 0.002429245738312602, -0.006601563189178705, 0.01812633126974106, -0.013311614282429218, 0.02223302610218525, -0.07726480066776276, 0.016779573634266853, 0.035034146159887314, -0.07380988448858261, -0.09094906598329544, -0.1261925995349884, -0.01428074948489666, 0.007853670045733452, -0.01593185029923916, 0.054484039545059204, 0.05022450163960457, -0.054043084383010864, 0.09423105418682098, -0.07886488735675812, -0.031526483595371246, -0.00893373042345047, -0.3100428581237793, -0.011670305393636227, -0.022885287180542946, -0.033794891089200974, 0.038191817700862885, -0.035529013723134995, 0.01111665554344654, -0.0068139503709971905, -0.015513395890593529, 0.05110347643494606, 0.0422452911734581, 0.031585920602083206, -0.036721378564834595, 0.0040548378601670265, -0.047871556133031845, 0.023503346368670464, 0.01388334296643734, 0.05494219437241554, -0.010723261162638664, -0.010921131819486618, 0.007483923342078924, 0.019712600857019424, -0.013343456201255322, -0.03055906482040882, 0.036509618163108826, 0.00927249900996685, 0.12709365785121918, -0.01386629231274128, 0.03543274849653244, -0.07217741757631302, 0.030105385929346085, 0.027767324820160866, -0.07370578497648239, 0.0158283319324255, 0.015582687221467495, -0.02359871193766594, -0.051432084292173386, -0.02698054537177086, -0.05621775612235069, 0.008187570609152317, -0.04592951387166977, 0.029782835394144058, 0.06669729202985764, -0.009046233259141445, -0.05031667277216911, 0.017229095101356506, 0.00370717141777277, -0.01467535924166441, -0.0011378716444596648, 0.0998002365231514, -0.034685831516981125, 0.042471710592508316, 0.02412436157464981, 0.03544679284095764, 0.002166721737012267, -0.010191165842115879, -0.06861000508069992, -0.04507860913872719, -0.001539137912914157, -0.028804711997509003, 0.04251816123723984, -0.04685487598180771, 0.04364629462361336, 0.04574558138847351, 0.020126421004533768, 0.009989231824874878, 0.04872700199484825, -0.023144841194152832, 0.05677987262606621, 0.028592702001333237, -0.0481925867497921, 0.03018008917570114, -0.014452285133302212, 0.0014993370277807117, 0.04991175979375839, 0.005788121838122606, 0.04567786306142807, 0.03254598379135132, 0.04642126336693764, 0.030126087367534637, 0.07769813388586044, 0.017661040648818016, 0.05171291530132294, -0.006723620928823948, 0.001801766804419458, -0.009529856964945793, 0.06369875371456146, -0.01694880984723568, 0.03788173198699951, 0.010132448747754097, -0.025817198678851128, 0.0090032909065485, -0.009413209743797779, 0.006653226912021637, -0.026146015152335167, 0.022558996453881264, -0.2753421366214752, 0.018968837335705757, -0.016341380774974823, 0.04461342468857765, 0.02280273474752903, -0.05764499679207802, 0.06640657037496567, -0.07174723595380783, -0.0034582980442792177, -0.01674964465200901, 0.011591820046305656, 0.02403443492949009, -0.013395950198173523, -0.05879781022667885, -0.017393531277775764, 0.051810670644044876, 0.07208863645792007, -0.032597616314888, 0.0704178661108017, 0.019259167835116386, 0.030295033007860184, -0.018173355609178543, 0.18571029603481293, -0.021043067798018456, 0.0008878464577719569, 0.014446811750531197, 0.05664944648742676, -0.014868665486574173, 0.04824329912662506, 0.053816623985767365, 0.018857527524232864, -0.003764153691008687, 0.11848518997430801, 0.014317664317786694, -0.007153431419283152, 0.022369397804141045, 0.016319243237376213, 0.026258070021867752, 0.04631539061665535, -0.0484938807785511, 0.0222923643887043, -0.02635878697037697, -0.059863269329071045, 0.01946267858147621, 0.09472391754388809, 0.001669607125222683, 0.007212898228317499, -0.03964459151029587, -0.037850216031074524, -0.028362438082695007, -0.009503254666924477, -0.006354850251227617, 0.031367309391498566, -0.014482744969427586, 0.014434713870286942, 0.03284624218940735, -0.08098622411489487, -0.020482145249843597, -0.04621937498450279, -0.01855958253145218, 0.0030663772486150265, -0.016344459727406502, 0.04556494206190109, 0.020283112302422523, 0.0036259994376450777], "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4eb76d44-f06c-4ed4-9687-7fbc29020abc", "node_type": "4", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "6cd2deb2e1f38059bee3c3dbfb51fe532818a1110da3a2db86f1b0f399ca8972", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "69c7df10-3b2b-4b33-9234-5f35b7d24708", "node_type": "1", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "c758f9f910fc854eaafd9641b02f7d0f1a2851fd481cc50d3cf656f04bb563e2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bed52443-f519-40da-ab66-c1c1ba83fea8", "node_type": "1", "metadata": {}, "hash": "fce58466fe86c029c31cb7862baef3ddd2d62d1ce4f287c601dbb6e5c80655d1", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "*   If they point in completely different directions, they are not similar at all (score = 0.0).\n*   Anything in between is a partial match.\n\n**`src/main/java/features/search/QueryProcessor.java` (Simplified `cosineSimilarity` method)**\n```java\n// Inside QueryProcessor class\nprivate double cosineSimilarity(Map<String, Double> vec1, Map<String, Double> vec2) {\n    if (vec2 == null) return 0.0; // If book has no TF-IDF data, it can't be similar\n\n    double dotProduct = 0.0;\n    double norm1 = 0.0; // \"Length\" of query vector\n    double norm2 = 0.0; // \"Length\" of document vector\n\n    // Calculate how much the two vectors overlap (dot product)\n    // and the \"length\" of the query vector (norm1)\n    for (String term : vec1.keySet()) {\n        double queryTermScore = vec1.get(term);\n        double bookTermScore = vec2.getOrDefault(term, 0.0);\n\n        dotProduct += queryTermScore * bookTermScore;\n        norm1 += queryTermScore * queryTermScore;\n    }\n\n    // Calculate the \"length\" of the document vector (norm2)\n    for (double score : vec2.values()) {\n        norm2 += score * score;\n    }\n\n    // Avoid division by zero\n    if (norm1 == 0.0 || norm2 == 0.0) {\n        return 0.0;\n    }\n\n    // The final formula: (Overlap) / (Length of Query * Length of Book)\n    return dotProduct / (Math.sqrt(norm1) * Math.sqrt(norm2));\n}\n```\nThis method takes two maps (the query's TF-IDF vector and a book's TF-IDF vector) and computes a score between 0 and 1. A score closer to 1 means the book is highly relevant to the query, while a score closer to 0 means it's not. This score is precisely what determines the book's ranking in your search results!\n\n### Conclusion\n\nIn this chapter, we explored the **Core Search Engine**, which is the \"finder\" of our DevShelf application. We learned that:\n*   The `QueryProcessor` is the main component responsible for taking your search query and finding relevant books.", "mimetype": "text/plain", "start_char_idx": 13849, "end_char_idx": 15761, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "bed52443-f519-40da-ab66-c1c1ba83fea8", "embedding": [-0.05112839862704277, 0.03257632628083229, -0.04424762353301048, 0.012469283305108547, 0.021580953150987625, -0.06658154726028442, -0.0042165121994912624, 0.002387283369898796, 0.025984425097703934, -0.02189173921942711, -0.013443101197481155, 0.006475508213043213, 0.02565661072731018, -0.014202277176082134, -0.03670345991849899, -0.00666274968534708, 0.0049488297663629055, 0.03447811305522919, -0.02847353182733059, -0.0372774563729763, 0.023852696642279625, 0.03505499288439751, -0.03696390241384506, -0.05236261710524559, 0.006682192906737328, 0.06538378447294235, -0.0276395995169878, -0.020761488005518913, -0.009654463268816471, -0.21865834295749664, 0.017397398129105568, -0.016881342977285385, 0.0965886265039444, 0.025903811678290367, -0.012277151457965374, -0.005533643066883087, 0.017100999131798744, -0.014502694830298424, 0.01907644234597683, -0.012545299716293812, -0.017646322026848793, -0.011458530090749264, -0.022172709926962852, 0.04146706685423851, 0.01705731637775898, 0.015524270944297314, -0.013711526989936829, -0.0463358499109745, -0.05921164155006409, -0.003729031188413501, -0.08807606995105743, -0.006416101474314928, 0.013850749470293522, 0.02512989565730095, 0.04259582981467247, 0.022826898843050003, 0.07195031642913818, 0.056247174739837646, -0.018183039501309395, -0.004420532379299402, 0.052050430327653885, -0.01815374754369259, -0.1281602382659912, 0.0845787525177002, -0.04290357604622841, 0.017629200592637062, 0.012554071843624115, -0.09214059263467789, -0.01405971497297287, 0.06933268159627914, -0.011147135868668556, 0.059248585253953934, 0.0031000550370663404, 0.06158344820141792, 0.0333334319293499, 0.016161829233169556, -0.016208961606025696, -0.01555701531469822, 0.04282185435295105, 0.0012451402144506574, 0.0020675654523074627, -0.0461144745349884, 0.014706277288496494, -0.013396935537457466, -0.015005575492978096, -0.01138306688517332, 0.03406093269586563, 0.021788913756608963, 0.0496622659265995, -0.02654687687754631, 0.06897576153278351, -0.07230806350708008, 0.006483030971139669, 0.03885934501886368, 0.005252022296190262, -0.028567461296916008, -0.02989554964005947, 0.061405498534440994, 0.05417650192975998, 0.4022580683231354, -0.014401476830244064, 0.07883992791175842, -0.007301074918359518, -0.014844132587313652, -0.0313553623855114, -0.063592329621315, 0.006156428251415491, -0.018289383500814438, 0.00389157235622406, -0.0201676357537508, 0.008767766878008842, -0.06224415823817253, 0.052261464297771454, -0.020440833643078804, 0.023114530369639397, 0.005057275295257568, -0.01741703972220421, 0.021492930129170418, -0.0015062394086271524, -0.016712211072444916, 0.0014450597809627652, -0.00376815814524889, 0.014475604519248009, 0.00903844553977251, 0.043193455785512924, -0.004226673394441605, -0.00013982396922074258, 0.051735106855630875, -0.04984903708100319, 0.0042532156221568584, -0.009882336482405663, -0.018411455675959587, -0.09034022688865662, 0.026369662955403328, 0.05617528781294823, -0.0007246228051371872, -0.004929239861667156, -0.031063897535204887, -0.009408634155988693, 0.017966540530323982, -0.04153866320848465, 0.07165666669607162, 0.03142509609460831, 0.010001487098634243, -0.08047468960285187, 0.15107910335063934, -0.017102563753724098, -0.04168957844376564, -0.050504520535469055, -0.058707378804683685, -0.0018894718959927559, 0.06171660125255585, -0.013635784387588501, -0.07374292612075806, -0.023828722536563873, 0.06884453445672989, 0.08153289556503296, -0.00016936137399170548, -0.03826325386762619, -0.036806635558605194, -0.048479896038770676, 0.012747080065310001, -0.03825788199901581, 0.10218242555856705, 0.004713412374258041, -0.08278155326843262, -0.026612166315317154, 0.016577793285250664, -0.1162661463022232, 0.005388585850596428, 0.011418047361075878, -0.022336214780807495, -0.039901942014694214, 0.04094463586807251, -0.013309909030795097, -0.011419063434004784, -0.02917274832725525, 0.024728087708353996, 0.030283086001873016, -0.019049223512411118, 0.07385256141424179, -0.04210967570543289, -0.030587956309318542, 0.012721458449959755, -0.029326528310775757, -0.04452376067638397, -0.050489213317632675, -0.023965759202837944, 0.011455932632088661, 0.019395940005779266, -0.02486340142786503, -0.008144091814756393, -0.004975068382918835, 0.0019571345765143633, 0.032873038202524185, -0.012093786150217056, -0.002882191678509116, 0.0159769207239151, -0.04630078002810478, 0.013430198654532433, 0.00999460183084011, 0.030065160244703293, -0.03484512120485306, 0.020328061655163765, -0.03390225023031235, -0.031165679916739464, -0.013611238449811935, -0.030060097575187683, 0.07756790518760681, 0.0008469498716294765, 0.010768412612378597, -0.023192578926682472, -0.07060551643371582, -0.051775261759757996, -0.020248636603355408, -0.004785513039678335, 0.007677851710468531, 0.05900832638144493, -0.025408830493688583, 0.053993526846170425, -0.022487392649054527, -0.012454839423298836, -0.016039395704865456, -0.2950543463230133, -0.04077184200286865, -0.05712675303220749, 0.00010925035894615576, 0.02695717290043831, -0.05564055219292641, 0.012182005681097507, 0.008017579093575478, -0.044535331428050995, 0.03469056636095047, 0.06374677270650864, -0.008366679772734642, -0.03104334883391857, 0.0058474307879805565, -0.017620030790567398, -0.0032936434727162123, 0.044998038560152054, -0.008114173077046871, -0.06731724739074707, -0.03770260140299797, 0.0398528054356575, -0.029440926387906075, -0.013845482841134071, -0.09278854727745056, 0.018532291054725647, 0.003802100894972682, 0.08466070145368576, 0.021739652380347252, 0.03848159685730934, -0.01249373983591795, 0.06142259016633034, -0.009081128984689713, -0.07319816946983337, -0.06398311257362366, 0.007542638573795557, 0.0011408653808757663, 0.006668892223387957, -0.03079497441649437, 0.010262876749038696, 0.024644475430250168, -0.0151854008436203, 0.008325641043484211, 0.038075242191553116, -0.0033129604998975992, -0.06990216672420502, 0.0032142363488674164, 0.01303911954164505, -0.05638857185840607, 0.019008198752999306, 0.11142001301050186, -0.02679912932217121, 0.05742783471941948, 0.01807592809200287, 0.03149475157260895, -0.02654420956969261, -0.04919131100177765, -0.02022356167435646, -0.06008855253458023, -0.04948456212878227, -0.023806946352124214, 0.03692319244146347, -0.0041035753674805164, 0.004645345266908407, 0.01885908842086792, 0.03698895126581192, -0.03660925105214119, -0.015003642067313194, 0.0075533767230808735, 0.04860878363251686, -0.0282612144947052, -0.07998090982437134, -0.0018868762999773026, -0.06144803762435913, 0.05636696517467499, 0.01706448197364807, 0.06111034378409386, 0.07928856462240219, 0.012692637741565704, 0.026432983577251434, -0.056271057575941086, 0.04484479874372482, 0.02346002124249935, 0.05069177970290184, -0.014445492997765541, -0.007787499111145735, 0.01471647061407566, 0.04949573799967766, -0.013008869253098965, 0.01497156172990799, 0.03177656605839729, -0.03608065843582153, -0.0054422165267169476, -0.010447918437421322, -0.02258642204105854, 0.005122472997754812, 0.030363408848643303, -0.2511568069458008, 0.03180786594748497, 0.01513083279132843, 0.03674032911658287, 0.06245701014995575, -0.04952000826597214, 0.04832683876156807, -0.04065203294157982, 0.07964301854372025, -0.010572443716228008, 0.014327534474432468, 0.021028466522693634, -0.04640938341617584, -0.0684385895729065, 0.011509829200804234, 0.059823762625455856, 0.08241906762123108, -0.0465485043823719, 0.047582048922777176, 0.012239867821335793, 0.03347642719745636, 0.021059464663267136, 0.19744537770748138, 0.04568183422088623, 0.022767337039113045, -0.020588412880897522, 0.04079686850309372, -0.05100935325026512, -0.01140287984162569, 0.0525263212621212, 0.07278311997652054, -0.06107403710484505, 0.06832626461982727, 0.014797832816839218, 0.016749439761042595, 0.012586208991706371, 0.03141758218407631, 0.05121687054634094, 0.023300955072045326, -0.02088252082467079, 0.002954550087451935, -0.007917475886642933, -0.026428747922182083, -0.009081527590751648, 0.054655108600854874, -0.024621915072202682, -0.026654647663235664, -0.06631622463464737, -0.05789261311292648, 0.01565280370414257, 0.01137092337012291, -0.008404678665101528, 0.05626992508769035, -0.02082819677889347, 0.0001696444087428972, -0.006626874674111605, -0.020413773134350777, 0.03471900522708893, -0.005637157242745161, 0.018461713567376137, 0.03748272359371185, 0.00691470829769969, 0.06747616082429886, 0.03360136225819588, 0.03131627291440964], "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4eb76d44-f06c-4ed4-9687-7fbc29020abc", "node_type": "4", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "6cd2deb2e1f38059bee3c3dbfb51fe532818a1110da3a2db86f1b0f399ca8972", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e1a1c153-9b3e-4680-8460-1d2c4770861e", "node_type": "1", "metadata": {"file_name": "Chapter 5 Core Search Engine.md"}, "hash": "2b951d55b2c69f2dc82ceeea36c2185fba48a5b7592281bfef294a32d8fec4f7", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "We learned that:\n*   The `QueryProcessor` is the main component responsible for taking your search query and finding relevant books.\n*   It first **processes** your query (cleaning and stemming words).\n*   Then, it uses the pre-built `invertedIndex` from [Search Index Management](04_search_index_management_.md) to quickly **identify matching documents**.\n*   Crucially, it **scores** these books for relevance using techniques like Cosine Similarity, comparing the query's TF-IDF vector to each book's TF-IDF vector (also from [Search Index Management](04_search_index_management_.md)).\n*   Finally, it **ranks** the results, ensuring the most pertinent books are shown first.\n\nThis entire process allows DevShelf to quickly transform your simple search query into a prioritized list of highly relevant books. Now that we know how books are found, let's look at how DevShelf keeps track of what you click on and how you interact with the results!\n\n[Next Chapter: User Interaction & Analytics](06_user_interaction___analytics_.md)", "mimetype": "text/plain", "start_char_idx": 15629, "end_char_idx": 16660, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "cd005c07-a425-4aa7-84ac-2902b486053d", "embedding": [-0.05021755024790764, 0.027790851891040802, -0.020746532827615738, -0.00536948349326849, 0.025552792474627495, -0.013906819745898247, 0.024701610207557678, 0.013657600618898869, 0.022558195516467094, -0.01062401756644249, 0.015712382271885872, 0.031206782907247543, 0.01449156366288662, 0.02665075846016407, -0.013238624669611454, -0.011443267576396465, 0.0031378662679344416, 0.007259470410645008, -0.04744899272918701, -0.05884886905550957, 0.03747841715812683, 0.015213211067020893, 0.028725864365696907, -0.07694268971681595, -0.03701020032167435, 0.04278932884335518, -0.042172838002443314, -0.026842178776860237, -0.03444456681609154, -0.20416328310966492, 0.010496148839592934, 0.01806577481329441, 0.08822023868560791, 0.009969454258680344, -0.049211300909519196, -0.026219645515084267, 0.013864395208656788, 0.0074221729300916195, 0.05799734219908714, 0.0038819233886897564, -0.0021788771264255047, -0.0038140302058309317, -0.028432302176952362, 0.0477641224861145, -0.03199891000986099, 0.006319829728454351, -0.013470539823174477, -0.025468388572335243, -0.08000582456588745, 0.009170548059046268, -0.09279242902994156, -0.022900963202118874, 0.01736348681151867, 0.01682889647781849, 0.04053869843482971, 0.015448865480720997, 0.06734868884086609, 0.0848781019449234, 0.0012694421457126737, -0.0008850164012983441, 0.04993901774287224, -0.035755328834056854, -0.0705956369638443, 0.07372868061065674, -0.006308163981884718, -0.0031103738583624363, 0.004349125549197197, -0.08987922221422195, -0.022956982254981995, 0.02491757459938526, 9.995591972256079e-05, 0.06688094139099121, -0.02118273638188839, 0.026048855856060982, 0.04475993663072586, 0.018926410004496574, 0.010333660058677197, -0.015906531363725662, 0.035355113446712494, -0.005306327249854803, -0.02114742249250412, -0.03128168731927872, 0.013374085538089275, -0.023618578910827637, 0.006284783128648996, -0.021515915170311928, 0.06070332229137421, 0.0036137462593615055, 0.025386469438672066, 0.00035076052881777287, 0.04487907886505127, -0.03562774509191513, 0.046345628798007965, 0.0051318383775651455, -0.0016751372022554278, -0.009104440920054913, -0.008780417963862419, 0.033653587102890015, -0.0016250826884061098, 0.4206511676311493, -0.019388588145375252, 0.04683190584182739, 0.0015467392513528466, -0.03348903730511665, -0.016985585913062096, -0.07502370327711105, 0.019186310470104218, -0.013394398614764214, 0.024616116657853127, 0.019721558317542076, 0.012393694370985031, -0.030011078342795372, 0.04490125551819801, -0.014449422247707844, 0.023292915895581245, 0.013776304200291634, 0.0364551767706871, 0.01509093213826418, 0.032612986862659454, -0.03245195746421814, 0.02161431685090065, -0.001392519916407764, 0.02109840139746666, 0.0159441027790308, 0.0680428221821785, -0.01662342995405197, -0.02718370594084263, 0.07923661172389984, -0.03383819758892059, -0.0089259659871459, -0.005172258708626032, -0.01496661826968193, -0.1265236884355545, 0.025270087644457817, 0.04753967002034187, 0.03319855034351349, -0.050284434109926224, -0.009366560727357864, 0.017618348821997643, 0.030057821422815323, -0.006208519451320171, 0.06438550353050232, 0.03663019835948944, -0.026111219078302383, -0.06768542528152466, 0.1274348795413971, 0.06217382475733757, -0.003737958613783121, -0.007213677745312452, -0.0405280739068985, 0.006356205325573683, 0.07146324962377548, -0.03107856772840023, -0.06685594469308853, 0.01824364997446537, 0.035208649933338165, 0.0755734071135521, 0.0009039606084115803, -0.05567426607012749, -0.016122953966259956, -0.07099618017673492, 0.01985049806535244, -0.03979765623807907, 0.055100858211517334, -0.0184479970484972, -0.08697386085987091, -0.02555490843951702, 0.005427464842796326, -0.1135406494140625, -0.0040165879763662815, -0.00573606975376606, -0.0172410998493433, -0.059569112956523895, -0.007667510770261288, 0.020577333867549896, -0.019321821630001068, -0.03544596955180168, -0.0010683336295187473, 0.007397364359349012, 0.005592918489128351, 0.043889667838811874, -0.046862829476594925, -0.03208542615175247, 0.03047165460884571, -0.057196807116270065, -0.03656351566314697, -0.03195812180638313, -0.024877319112420082, 0.03886907175183296, 0.038069818168878555, -0.04734543338418007, -0.015508840791881084, -0.013006718829274178, 0.03063386119902134, 0.020512759685516357, -0.017928510904312134, -0.03945232555270195, -0.0023043681867420673, -0.05704659968614578, -0.01055222749710083, 0.022300103679299355, 0.017605464905500412, -0.02859978936612606, 0.016939327120780945, -0.01369673665612936, 0.01801675744354725, -0.023872150108218193, -0.036186881363391876, 0.12404809147119522, -0.02093515917658806, -0.009138640016317368, -0.007985979318618774, -0.01163213700056076, -0.014734742231667042, -0.0334765687584877, 0.005526191089302301, -2.714554966587457e-06, 0.03653625026345253, -0.0106993792578578, 0.014745591208338737, -0.030124874785542488, 0.03745059296488762, -0.0304998978972435, -0.30576980113983154, -0.002228064462542534, 0.013368531130254269, -0.016172612085938454, -0.011003559455275536, -0.09176032245159149, 0.05401930212974548, -0.024226326495409012, 0.013907283544540405, 0.05077832564711571, 0.0876537635922432, -0.0476972833275795, -0.03408709168434143, -0.011271596886217594, 0.04114020615816116, 0.014496791176497936, -0.004073614254593849, -0.001207978930324316, -0.07000887393951416, -0.030134476721286774, 0.011065247468650341, -0.007499209139496088, 0.032622937113046646, -0.1150282546877861, 0.007190902251750231, -0.0004903448279947042, 0.07392121851444244, 0.05056256055831909, 0.023162322118878365, -0.05347365513443947, 0.0375649593770504, 0.03011069819331169, -0.086061991751194, -0.0779242292046547, -0.0031864026095718145, 0.018348177894949913, 0.03276112675666809, -0.04159538820385933, -0.014545431360602379, -0.015621372498571873, 0.022569499909877777, 0.0019434490241110325, 0.0431559793651104, -0.01885046623647213, -0.06332584470510483, -0.0245352815836668, 0.009805809706449509, -0.07744680345058441, -0.017726970836520195, 0.07222426682710648, -0.022848263382911682, 0.02809976041316986, 0.04825391620397568, 0.0239578690379858, -0.04850125312805176, -0.06790131330490112, -0.012911859899759293, -0.02999143861234188, -0.019083771854639053, 0.0029150655027478933, 0.005379538983106613, 0.019748322665691376, -0.0352666936814785, -0.02699659764766693, 0.05503370240330696, -0.04012954235076904, -0.043918658047914505, 0.019543245434761047, 0.03928135335445404, -0.03791828081011772, -0.06189625337719917, 0.043418146669864655, -0.03579006344079971, 0.03197870030999184, 0.040666744112968445, 0.05338957533240318, 0.055737920105457306, -0.017274310812354088, -0.02686588652431965, -0.01692643202841282, 0.009711428545415401, 0.02219192497432232, 0.08368127048015594, -0.047927603125572205, -0.020763974636793137, 0.0025039860047399998, 0.027962228283286095, -0.031244471669197083, 0.0052554430440068245, -0.002152383327484131, -0.061732713133096695, -0.0011029498418793082, 0.022554483264684677, -0.07056017220020294, 0.00578529667109251, 0.05223685875535011, -0.27095985412597656, -0.00040202573291026056, 0.0033646898809820414, 0.02554195746779442, 0.044383611530065536, -0.001475285505875945, 0.057827722281217575, -0.07024671137332916, 0.052204541862010956, -0.011654617264866829, -0.00032968370942398906, 0.00807462353259325, -0.013081161305308342, -0.07497043907642365, 0.05738050863146782, 0.06156526878476143, 0.08916883915662766, -0.0030662415083497763, 0.05746549367904663, -0.0007601510733366013, 0.05489636957645416, 0.024220598861575127, 0.17720955610275269, 0.05905551463365555, 0.034804295748472214, -0.0015823891153559089, 0.02618715539574623, -0.06897801905870438, -0.014624941162765026, 0.028927888721227646, -0.005282106809318066, -0.06657945364713669, 0.048155225813388824, 0.009676649235188961, -0.0008899589884094894, -0.01991155557334423, -0.00809029582887888, -0.007499574683606625, 0.01347681600600481, -0.03832978755235672, 0.05007818341255188, 0.04872238636016846, -0.006090139038860798, 0.01761908084154129, 0.069877490401268, -0.03338109701871872, 0.0043115438893437386, -0.029831157997250557, -0.023486614227294922, 0.015096701681613922, 0.03665924072265625, -0.04543394595384598, 0.04577077925205231, 0.01797950454056263, 0.03399954363703728, 0.04033530130982399, -0.0010537015041336417, 0.025416459888219833, -0.01783633604645729, 0.005833394359797239, 0.03815135732293129, 0.026425527408719063, 0.07370010763406754, 0.007355961017310619, 0.016810912638902664], "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fc82f45a-94bd-4023-86ca-38b5b26554ff", "node_type": "4", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "1a0764ed9a15c6f1286a2f45e7fcc1d528e443ee129f48fed44f286e9f44e789", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ca5519d2-0489-465a-8bef-634bca70efa4", "node_type": "1", "metadata": {}, "hash": "efe6efbbad0a2755252cd7507bd03aa8d73251bc98979b4f923a4a17d58606f4", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Welcome back to DevShelf! In our last chapter, [Core Search Engine](05_core_search_engine_.md), we learned how DevShelf's `QueryProcessor` is a brilliant \"finder,\" quickly sifting through our book catalog to give you relevant results. But what happens *after* you get those results? Do you click on the first one? The fifth one? Do you *always* pick the book with the highest rating, or sometimes a less-known one catches your eye?\n\nKnowing what users actually *do* with the search results is incredibly valuable! It's how DevShelf can become smarter and more adaptive over time, learning what's truly popular and trending. This is exactly what **User Interaction & Analytics** is all about.\n\n### The \"Hidden Assistant\" of DevShelf\n\nImagine DevShelf has a **hidden assistant** who quietly watches over your shoulder (not in a creepy way!) whenever you use the app. This assistant doesn't just see the books DevShelf *suggests* to you; they carefully note down *which books you actually click on* after a search.\n\n**The Problem It Solves:** If DevShelf only relies on things like word matching (TF-IDF scores) and static ratings, it might miss out on real-world trends. A book might have a great rating, but if no one ever clicks on it, maybe it's not as *relevant right now*. Conversely, a newer book might not have many ratings yet, but if everyone is suddenly clicking on it, DevShelf should recognize that it's *trending*!\n\n**Our Central Use Case:** A user searches for \"Java,\" sees a list of books, and then clicks on \"Effective Java.\" DevShelf needs to **record this click**, and later, use these click records to figure out which \"Java\" books (or any books) are currently the most popular, influencing future search results and recommendations.\n\nUser Interaction & Analytics allows DevShelf to learn from real user behavior, making the system feel more dynamic and helpful.\n\n### Part 1: Tracking User Clicks (The \"Logger\")\n\nThe first step in understanding user behavior is to record it. DevShelf has a special service dedicated to logging every time you click on a book.\n\n#### The `LoggingService`: DevShelf's Notebook\n\nThe `LoggingService` is like the hidden assistant's notebook.", "mimetype": "text/plain", "start_char_idx": 1, "end_char_idx": 2188, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "ca5519d2-0489-465a-8bef-634bca70efa4", "embedding": [-0.008731924928724766, 0.07223334908485413, -0.021230747923254967, -0.05497624725103378, -0.0025232573971152306, -0.033199556171894073, -0.012540792115032673, -0.05432195961475372, 0.08312714844942093, -0.0035766628570854664, -0.014725386165082455, 0.042642317712306976, -0.004167166538536549, 0.02189590409398079, -0.018713943660259247, -0.07972332835197449, -0.03052409738302231, -0.0020979386754333973, -0.028201118111610413, 0.004438686650246382, 0.037481121718883514, -0.041519228368997574, -0.005677560344338417, -0.0677361860871315, -0.021119633689522743, 0.017367932945489883, -0.02371864952147007, -0.010715652257204056, -0.003049748484045267, -0.13869506120681763, 0.04045948013663292, -0.021894529461860657, 0.011659213341772556, -0.03815262019634247, -0.010663977824151516, -0.01523470226675272, 0.025684889405965805, 0.04176492616534233, 0.05152673274278641, -0.0065346029587090015, 0.046453360468149185, 0.03983955830335617, -0.030240505933761597, 0.02409389428794384, -0.024476295337080956, -0.06084202975034714, -0.00537411542609334, -0.03790856525301933, -0.008592495694756508, -0.00022976839682087302, -0.11614107340574265, 0.026861371472477913, 0.060716841369867325, -0.02859097346663475, -0.0118545051664114, 0.0011915876530110836, 0.06504276394844055, 0.04479760304093361, 0.019442502409219742, -0.012911074794828892, 0.0210383553057909, -0.0476415641605854, -0.07435020059347153, 0.09516365826129913, -0.027512360364198685, 0.0001634399959584698, 0.03165052831172943, -0.08634275943040848, 0.0025415511336177588, 0.017717046663165092, -0.041719287633895874, 0.013571208342909813, -0.05696346238255501, 0.06014810502529144, 0.06131124123930931, -0.02379872463643551, -0.009634447284042835, 0.023133236914873123, -0.016979578882455826, -0.00925559550523758, -0.05493365228176117, -0.05099496617913246, 0.031178375706076622, 0.014883198775351048, -0.018145043402910233, 0.049879297614097595, 0.06901493668556213, -0.060347191989421844, 0.04149945452809334, -0.005533209536224604, 0.026287522166967392, -0.041625719517469406, 0.0028254676144570112, -0.0014184571336954832, -0.052190106362104416, -0.013176978565752506, -0.009240275248885155, 0.06089625507593155, -0.006727753207087517, 0.3678481876850128, -0.05199064314365387, 0.05206097662448883, 0.020304298028349876, -0.05511286482214928, -0.013732648454606533, -0.07341929525136948, 0.002519777277484536, -0.04808475077152252, -0.02178383059799671, 0.02012299746274948, 0.0260536577552557, -0.008480514399707317, 0.06463044136762619, -0.04349223151803017, 0.007868394255638123, 0.02455049380660057, 0.01934080198407173, 0.017554663121700287, -0.020010702311992645, 0.03530222177505493, 0.05588692054152489, 0.002013679826632142, -0.03936067968606949, -0.0031536726746708155, 0.0274985209107399, -0.00080871646059677, -0.027426572516560555, 0.059428516775369644, 0.002323624910786748, -0.031027652323246002, -0.01763930171728134, 0.00018088059732690454, -0.055357273668050766, -0.009670467115938663, 0.010250414721667767, 0.006452358793467283, -0.05250048264861107, -0.01983947865664959, 0.002065161941573024, -0.028860947117209435, 0.008964145556092262, 0.041480280458927155, 0.00983959250152111, 0.022842690348625183, -0.06379255652427673, 0.0742601752281189, 0.025305673480033875, 0.02398088574409485, -0.028661241754889488, -0.03760021552443504, -0.026954883709549904, 0.07617099583148956, -0.0020536924712359905, -0.07167554646730423, 0.02851771004498005, 0.01896403171122074, 0.07672351598739624, 0.004861077293753624, 0.00877372082322836, -0.06800051778554916, -0.049096304923295975, -0.029803507030010223, 0.016478149220347404, 0.06973589956760406, -0.02651907317340374, -0.09812036156654358, -0.02304484322667122, 0.062341995537281036, -0.0997162014245987, -0.05797332897782326, -0.028108783066272736, 0.026305213570594788, -0.06884266436100006, -0.019397513940930367, 0.013674214482307434, -0.0073019578121602535, 0.05491020902991295, 0.005670894868671894, 0.04935299977660179, -0.006573235150426626, 0.029859276488423347, -0.07167086750268936, -0.053538449108600616, 0.019352413713932037, -0.024783829227089882, -0.04821788892149925, -0.07087691873311996, -0.042237188667058945, 0.01980396918952465, 0.02030600607395172, 0.010252020321786404, 0.001567897037602961, -0.0005509924958460033, 0.026972634717822075, 0.00034720293479040265, -0.02267531119287014, 0.018911154940724373, -0.017243579030036926, -0.03838113322854042, -0.030708329752087593, 0.046052683144807816, 0.05394226312637329, -0.020118454471230507, 0.03641633689403534, 0.018910061568021774, 0.027743931859731674, 0.031944941729307175, -0.007094548083841801, 0.09965763241052628, -0.033930666744709015, -0.0543978251516819, 0.021544065326452255, 0.0066758254542946815, -0.03585352003574371, -0.056104522198438644, 0.0529041662812233, -0.04019163176417351, 0.042239896953105927, 0.00975518487393856, -0.0035027910489588976, -0.06608293205499649, -0.06067292392253876, 0.0007496423786506057, -0.3083798289299011, -0.020565174520015717, 0.0016402901383116841, -0.018710268661379814, 0.03969234228134155, -0.034349530935287476, 0.024006305262446404, 0.004552733153104782, 0.010042949579656124, -0.011160515248775482, 0.12231922149658203, -0.026758629828691483, -0.029639309272170067, -0.0268027875572443, -0.020045354962348938, 0.04491607844829559, 0.008146891370415688, -0.010943771339952946, 0.002750720363110304, 0.005872299894690514, 0.03797294571995735, -0.06582880765199661, -0.007605563849210739, -0.018949078395962715, -0.01002804096788168, 0.01075398176908493, 0.09751869738101959, 0.01013124268501997, 0.048994675278663635, -0.1175786480307579, -0.004482674412429333, 0.056035999208688736, -0.027061032131314278, -0.09663251787424088, 0.01003627572208643, 0.027187304571270943, -0.019086971879005432, 0.05562382936477661, 0.004208004102110863, -0.04348626360297203, -0.016468990594148636, 0.046646848320961, 0.010208750143647194, -0.01408320851624012, -0.025656111538410187, -0.03443978726863861, 0.01991249807178974, -0.09748909622430801, -0.011911309324204922, 0.010551972314715385, 0.017819838598370552, -0.0006690150476060808, 0.010996128432452679, 0.044350720942020416, 0.002424692502245307, -0.05667505040764809, 0.009799600578844547, -0.05929424241185188, -0.02160724252462387, -0.024127356708049774, -0.0037930530961602926, 0.02506708912551403, -0.03781004995107651, -0.017085161060094833, 0.052633319050073624, -0.01905146986246109, -0.039737459272146225, 0.012349176220595837, 0.04573064669966698, -0.05575134605169296, -0.03728007152676582, 0.05826155096292496, -0.012142902240157127, -0.017279023304581642, 0.0936371460556984, 0.04014778509736061, 0.0525854229927063, 0.0021386791486293077, -0.012493487447500229, 0.0009230993455275893, -0.0036516552790999413, -0.02108890563249588, 0.07678557932376862, -0.016361676156520844, -0.027013659477233887, 0.029862528666853905, 0.02481812797486782, 0.0011372267035767436, 0.006622999906539917, -0.029291097074747086, -0.08501236885786057, -0.010150808840990067, 0.07179760932922363, -0.04813568666577339, 0.032822344452142715, 0.049923885613679886, -0.275014728307724, 0.016407636925578117, -0.01770424097776413, 0.0405670702457428, 0.02989278733730316, 0.010892968624830246, -0.03021656908094883, 0.03163999319076538, 0.061034779995679855, -0.04060574620962143, 0.028345484286546707, 0.002930623944848776, 0.0020483466796576977, -0.04450315237045288, 0.03891318291425705, 0.10319256037473679, 0.08871905505657196, 0.015290321782231331, 0.04785694181919098, -0.010706795379519463, 0.020996499806642532, -0.019641250371932983, 0.15132103860378265, 0.10545673966407776, 0.04558467119932175, 0.023091264069080353, 0.03419613838195801, -0.020016590133309364, 0.057699140161275864, 0.05685754865407944, 0.037144873291254044, -0.07082615792751312, 0.1040356233716011, 0.051068007946014404, -0.018822915852069855, -0.07084960490465164, 0.030495535582304, 0.01953081786632538, 0.02026628516614437, -0.051773473620414734, -0.032322224229574203, 0.049654461443424225, 0.014337358996272087, 0.020441612228751183, 0.07784751802682877, -0.036763910204172134, -0.04618242383003235, -0.08616315573453903, -0.03099726513028145, 0.010560551658272743, 0.0530850775539875, -0.03337642922997475, 0.06210310012102127, 0.027487166225910187, 0.03080933727324009, 0.06982388347387314, 0.03806852921843529, 0.016646472737193108, 0.00589695805683732, 0.027904756367206573, 0.020738832652568817, -0.007712289225310087, 0.0811958760023117, 0.020440658554434776, 0.030794871971011162], "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fc82f45a-94bd-4023-86ca-38b5b26554ff", "node_type": "4", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "1a0764ed9a15c6f1286a2f45e7fcc1d528e443ee129f48fed44f286e9f44e789", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cd005c07-a425-4aa7-84ac-2902b486053d", "node_type": "1", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "aa7f6c814da04b07fb09574ab04900e510fbaa18970365bd5debd12ab44e5796", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "50c837dc-a25f-4418-83e2-791b29f632b6", "node_type": "1", "metadata": {}, "hash": "30f28f18310c9bde15bb239d6e4864a63f9799acb8857ef6bbf7be0fdd387151", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "DevShelf has a special service dedicated to logging every time you click on a book.\n\n#### The `LoggingService`: DevShelf's Notebook\n\nThe `LoggingService` is like the hidden assistant's notebook. Whenever you click a book in the search results (or open its details), the application tells the `LoggingService` to make an entry in its notebook. This entry includes what you searched for (`query`), which book you clicked on (`clickedDocId`), and `when` you clicked it.\n\nAll these notes are saved into a simple text file named `logs.json`.\n\n#### The `LogEntry`: A Single Click Record\n\nBefore saving a click, DevShelf creates a `LogEntry` object. This is a small digital record, like a single line in our assistant's notebook.\n\n**`src/main/java/domain/LogEntry.java` (Simplified)**\n```java\npackage domain;\n\nimport lombok.Getter;\nimport java.time.Instant; // To record the exact time\n\n@Getter\npublic class LogEntry {\n    private String query;         // What the user searched for\n    private int clickedDocId;     // The unique ID of the book they clicked\n    private String timestamp;     // When the click happened\n\n    // A special method to create a new LogEntry\n    public LogEntry(String query, int clickedDocId) {\n        this.query = query;\n        this.clickedDocId = clickedDocId;\n        this.timestamp = Instant.now().toString(); // Record the current time automatically\n    }\n}\n```\nEach `LogEntry` clearly captures the essential details of a user's interaction with a book.", "mimetype": "text/plain", "start_char_idx": 1994, "end_char_idx": 3476, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "50c837dc-a25f-4418-83e2-791b29f632b6", "embedding": [-0.03907538950443268, 0.07091972976922989, -0.003247010288760066, -0.03117533214390278, -0.010518554598093033, -0.0009340387769043446, 0.02250235341489315, -0.017274778336286545, 0.016646144911646843, 0.024058891460299492, -0.027632704004645348, 0.016299689188599586, -0.04587065801024437, 0.0471113920211792, -0.03692736476659775, -0.05421513691544533, -0.02286037802696228, -0.020842285826802254, -0.007526226807385683, -0.0212121419608593, 0.032305870205163956, -0.052921928465366364, -0.007480055559426546, -0.07418322563171387, -0.016641762107610703, 0.06640735268592834, -0.015123037621378899, -0.040445368736982346, -0.012131278403103352, -0.16788800060749054, -0.006740279961377382, -0.038479432463645935, 0.006964453030377626, -0.02418462187051773, -0.04644981771707535, -0.012891561724245548, 0.02405252866446972, 0.03972473740577698, 0.03617723658680916, -0.02100539207458496, 0.05121632665395737, 0.020022224634885788, -0.01285190787166357, 0.004261727910488844, 0.018064262345433235, -0.06465902179479599, 0.05491458997130394, -0.019848674535751343, 0.004654437303543091, -0.007004853338003159, -0.09202513843774796, 0.0007972274324856699, 0.058301571756601334, -0.0068915537558496, -0.0008697483572177589, -0.0011126536410301924, 0.02865157090127468, 0.04299076274037361, -0.006711748894304037, 0.002563952933996916, 0.0024027449544519186, -0.04538045823574066, -0.09229528158903122, 0.08092848211526871, -0.01821225881576538, -0.015140322037041187, -0.0133018484339118, -0.05801752582192421, 0.03972797468304634, 0.03693278878927231, -0.04730025306344032, 0.001147923176176846, -0.026932422071695328, 0.04742523655295372, 0.07197004556655884, -0.027229635044932365, 0.013447641395032406, 0.031630128622055054, 0.013143621385097504, -0.017831671983003616, -0.08821485936641693, -0.044672150164842606, 0.024650678038597107, -0.026606855913996696, 0.014158808626234531, 0.05668250843882561, 0.06858596950769424, -0.04208587855100632, 0.04331927374005318, -0.038080256432294846, 0.006202626042068005, -0.023788856342434883, -0.008879086934030056, -0.02353847213089466, -0.04158373177051544, 0.019508974626660347, -0.0014733102871105075, 0.014889667741954327, 0.021599523723125458, 0.3649967610836029, -0.014984151348471642, 0.03545635566115379, -0.033715877681970596, -0.000521142384968698, -0.000982156372629106, -0.046424392610788345, 0.010342632420361042, -0.008443871513009071, -0.018904590979218483, 0.03629337251186371, -0.006872718688100576, 0.013045052997767925, 0.029645472764968872, -0.02111819200217724, -0.004714500159025192, 0.033559732139110565, -0.00991049874573946, 0.06292188167572021, 0.003206640714779496, -0.01772375963628292, 0.05988116189837456, -0.0012959205778315663, -0.012887376360595226, -0.03262670710682869, 0.008016323670744896, 0.0157812237739563, -0.0201631598174572, 0.0661100298166275, 0.029346494004130363, -0.018458759412169456, 0.008189044892787933, -0.027921171858906746, -0.0877445638179779, 0.030572621151804924, 0.013270159251987934, -0.02470109798014164, -0.01412896066904068, -0.009413039311766624, 0.006168139632791281, 0.007596174720674753, 0.033048100769519806, 0.020658178254961967, 0.005433159414678812, -0.04113277792930603, -0.055182043462991714, 0.08663619309663773, 0.00976631697267294, 0.003967789001762867, -0.02403060719370842, -0.006994957569986582, -0.007769170682877302, 0.11400167644023895, -0.021431436762213707, -0.036119069904088974, -0.005546916741877794, 0.03570830449461937, 0.03846251964569092, 0.04702773317694664, 0.003741728374734521, -0.08326790481805801, -0.038159798830747604, -0.02805725298821926, 0.04345712810754776, 0.059722382575273514, 0.03223283588886261, -0.09376759827136993, 0.014876804314553738, 0.04673393443226814, -0.11316419392824173, -0.050363339483737946, -0.028994660824537277, 0.05726110190153122, -0.06411853432655334, 0.0029277470894157887, 0.02987459860742092, 0.021865064278244972, 0.02456849068403244, 0.02029404044151306, 0.030707385390996933, 0.008601228706538677, 0.04382762312889099, -0.059817325323820114, -0.053145527839660645, 0.007470022886991501, 0.009520665742456913, -0.028910396620631218, -0.0740307867527008, -0.028028804808855057, 0.011074459180235863, -0.04560599848628044, 0.03330850601196289, -0.05460524186491966, 0.0005866029532626271, 0.02770487405359745, 0.024052470922470093, -0.01642271690070629, 0.026800593361258507, -0.02526664175093174, -0.01637861132621765, -0.0044210683554410934, 0.06086444482207298, 0.054463885724544525, -0.01094132661819458, 0.07403647899627686, -0.003808072069659829, 0.020306870341300964, 0.00799245573580265, -0.02839873917400837, 0.04617765173316002, -0.056091248989105225, -0.07220825552940369, 0.01390568446367979, 0.0012924231123179197, -0.011814014986157417, -0.054184794425964355, 0.02679506689310074, -0.01797344908118248, 0.10789605975151062, 0.01862958073616028, 0.02900630794465542, -0.05503680557012558, -0.024105766788125038, -0.017760513350367546, -0.3328503668308258, -0.02231454662978649, -0.002113946946337819, -0.0210308525711298, 0.0046568987891077995, -0.0330037996172905, 0.032423414289951324, -0.011848272755742073, 0.01071861945092678, -0.035493191331624985, 0.11407832056283951, -0.056015606969594955, -0.03102482296526432, -0.03811030089855194, -0.014057219959795475, 0.05252324417233467, -0.005156350322067738, -0.04968274012207985, -0.03389823064208031, 0.017033061012625694, 0.019476518034934998, -0.02763536386191845, 0.009687269106507301, -0.027951020747423172, 0.0017772280843928456, 0.0032285056076943874, 0.09998774528503418, 0.029033271595835686, 0.07100743800401688, -0.08421719074249268, -0.0009646156104281545, 0.06963419914245605, -0.055978238582611084, -0.08826670795679092, 0.01640484109520912, 0.026988815516233444, -0.043470341712236404, 0.019042499363422394, 0.005796974990516901, -0.02507527358829975, -0.021324027329683304, 0.04467714577913284, -1.6558878996875137e-05, -0.023292163386940956, -0.004936101846396923, -0.03685060515999794, -0.0050109997391700745, -0.08172094821929932, 0.021905258297920227, 0.002983484184369445, 0.027713453397154808, 0.026945948600769043, -0.007467156276106834, 0.048230189830064774, -0.0026180786080658436, -0.02522430568933487, 0.017677828669548035, -0.058865588158369064, -0.03002476878464222, -0.028768695890903473, 0.007569826208055019, 0.054482351988554, -0.03073466382920742, -0.006348954048007727, 0.01936095952987671, -0.007422324735671282, -0.0498788096010685, 0.015268082730472088, 0.0807761624455452, -0.012748434208333492, -0.05829037353396416, 0.03352108970284462, -0.015755347907543182, -0.027004068717360497, 0.10048892349004745, 0.03627847880125046, 0.002409449778497219, -0.03629272058606148, 0.0009158808388747275, -0.0005664875498041511, -0.012902229093015194, 0.044835109263658524, 0.08820346742868423, 0.02277572825551033, -0.027305908501148224, 0.026078177616000175, 0.020911328494548798, -0.014646803960204124, -0.041547369211912155, -0.031542640179395676, -0.04922715947031975, 0.00019094691378995776, 0.01877024956047535, -0.07238424569368362, -0.013363574631512165, 0.0870276615023613, -0.282645583152771, 0.0009323362610302866, -7.044343510642648e-05, 0.09679341316223145, 0.008542833849787712, -0.004046169109642506, 0.02546278014779091, -0.016598476096987724, 0.0170334130525589, -0.005423601716756821, 0.02653650939464569, -0.013746495358645916, 0.003924787975847721, -0.05832686647772789, 0.03391388803720474, 0.0847143828868866, 0.05656193569302559, -0.008552220650017262, 0.03279076889157295, 0.014617426320910454, 0.047740865498781204, -0.0038792702835053205, 0.13836760818958282, 0.08893750607967377, 0.06552295386791229, 0.04069296270608902, 0.020789187401533127, -0.007941801100969315, 0.10162492841482162, 0.04409157484769821, 0.04716607555747032, -0.0673961192369461, 0.1055774837732315, 0.04378213733434677, -0.014371657744050026, -0.08485092967748642, 0.03863998129963875, -0.00046801898861303926, 0.0036484869197010994, -0.03820871189236641, -0.05509372428059578, 0.05340707674622536, -0.018700411543250084, -0.03756318986415863, 0.07293964177370071, -0.07063040882349014, -0.04294046387076378, -0.05344581604003906, -0.04210734739899635, 0.017946824431419373, 0.03399045392870903, -0.05006982386112213, 0.01760200783610344, -0.010075386613607407, 0.0018220030469819903, 0.08695404976606369, -0.0007189336465671659, 0.009275617077946663, -0.01091825496405363, 0.04612819477915764, 0.02015954814851284, -0.027651438489556313, 0.1005798876285553, 0.03538944944739342, 0.031113095581531525], "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fc82f45a-94bd-4023-86ca-38b5b26554ff", "node_type": "4", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "1a0764ed9a15c6f1286a2f45e7fcc1d528e443ee129f48fed44f286e9f44e789", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ca5519d2-0489-465a-8bef-634bca70efa4", "node_type": "1", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "24858e8ceb4d68d91702bc99852665167228672a30993936fab2b48b5c61f9d1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "878cca16-26c8-4054-8089-6badc68b2ad7", "node_type": "1", "metadata": {}, "hash": "ac6cea77aceb57bc3d5d18cd89bd50ea6bd586b41587219562ea9fa33df8ebfd", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#### How a Click Gets Logged\n\nWhen you click a book (for instance, to see its full details in the GUI), here's the simplified flow:\n\n```mermaid\nsequenceDiagram\n    participant You\n    participant GUI Controller\n    participant DevShelfService\n    participant LoggingService\n    participant logs.json file\n\n    You->>GUI Controller: Click on \"Effective Java\" book card\n    GUI Controller->>DevShelfService: logClick(\"Java\", 89)\n    DevShelfService->>LoggingService: logClick(\"Java\", 89)\n    Note over LoggingService: Creates a LogEntry object and converts it to JSON\n    LoggingService->>logs.json file: Append {\"query\":\"Java\", \"clickedDocId\":89, ...}\n    logs.json file-->>LoggingService: (Data written)\n    LoggingService-->>DevShelfService: (Confirmation)\n    DevShelfService-->>GUI Controller: (Confirmation)\n    GUI Controller-->>You: Show \"Effective Java\" details\n```\n\nThe GUI Controller (like `MainViewController` or `BookDetailController` from [User Interface Presentation](03_user_interface_presentation_.md)) detects your click, tells `DevShelfService` (our main app brain, from [Application Startup & Flow Control](01_application_startup___flow_control_.md)), which then tells the `LoggingService` to record it.\n\nHere's how `LoggingService` writes that entry:\n\n**`src/main/java/utils/LoggingService.java` (Simplified `logClick` method)**\n```java\npackage utils;\n\nimport com.fasterxml.jackson.databind.ObjectMapper; // Tool to convert to JSON\nimport domain.LogEntry;\n\nimport java.io.BufferedWriter;\nimport java.io.FileWriter;\nimport java.io.IOException;\n\npublic class LoggingService {\n\n    private final String logFilePath;\n    private final ObjectMapper mapper;\n\n    public LoggingService(String logFilePath) {\n        this.logFilePath = logFilePath;\n        this.mapper = new ObjectMapper();\n    }\n\n    public void logClick(String query, int clickedDocId) {\n        LogEntry entry = new LogEntry(query, clickedDocId); // Create the LogEntry\n\n        // Convert the LogEntry object into a JSON text string\n        String jsonLogLine;\n        try {\n            jsonLogLine = mapper.writeValueAsString(entry);\n        } catch (IOException e) {\n            System.err.println(\"Failed to convert LogEntry to JSON.", "mimetype": "text/plain", "start_char_idx": 3478, "end_char_idx": 5696, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "878cca16-26c8-4054-8089-6badc68b2ad7", "embedding": [-0.08236443251371384, 0.05533149465918541, -0.05476320534944534, -0.06788388639688492, 0.004423316568136215, -0.014245598576962948, -0.06308407336473465, -0.020058447495102882, 0.01425705011934042, 0.002423051744699478, 0.016859915107488632, -0.04318154603242874, 0.0004827491065952927, -0.008557031862437725, -0.002452777000144124, -0.040141720324754715, -0.03471466898918152, -0.028768595308065414, -0.008292906917631626, 0.024447914212942123, 0.03080117702484131, -0.02365501970052719, 0.027904855087399483, -0.11473152786493301, 0.0049031395465135574, 0.056288909167051315, 0.0028326166793704033, -0.035069387406110764, -0.021838443353772163, -0.15670225024223328, 0.018595773726701736, -0.03168792650103569, 0.004416715819388628, -0.049737598747015, -0.026275791227817535, 0.05620342493057251, 0.029964830726385117, 0.06040570139884949, -0.013625108636915684, 0.022459393367171288, 0.004490769933909178, 0.012211611494421959, -0.015123289078474045, -0.015775322914123535, -0.047882843762636185, -0.05352026969194412, -0.009848893620073795, -0.04678357392549515, 0.025321340188384056, 0.025499479845166206, -0.08698644489049911, -0.01856108568608761, -0.00377332279458642, -0.03286449611186981, -0.007734809536486864, -0.008239581249654293, -0.008900925517082214, 0.08593405783176422, -0.018139580264687538, 0.001492561656050384, 0.03343788906931877, -0.0016305255703628063, -0.11468679457902908, 0.05541377514600754, 0.008064070716500282, -0.017561795189976692, -0.008780336007475853, -0.038597773760557175, -0.01811881549656391, 0.051983680576086044, -0.06180299445986748, -0.008477571420371532, -0.01386263594031334, 0.09105958789587021, 0.0072874221950769424, -0.03705333545804024, -0.0010298696579411626, 0.027471086010336876, 0.021434247493743896, 0.02047550305724144, -0.10059274733066559, -0.0038686844054609537, 0.018346525728702545, 0.0075250305235385895, -0.0018729650182649493, 0.036479223519563675, 0.042602356523275375, 0.015938399359583855, 0.01695057563483715, -0.0054975710809230804, 0.04249520227313042, -0.033968500792980194, -0.003859591670334339, -0.040197186172008514, -0.07220792770385742, 0.0007458624895662069, 0.01799260824918747, 0.03569716215133667, 0.02874087728559971, 0.3593113124370575, -0.06183621287345886, -0.00402656989172101, 0.018356334418058395, -0.00028519847546704113, -0.023052625358104706, -0.03438625484704971, -0.02494565211236477, -0.035512421280145645, 0.03845221921801567, -0.0018158776219934225, -0.00928710587322712, 0.04805215820670128, 0.033603373914957047, -0.028554869815707207, -0.025559473782777786, -0.0015218716580420732, 0.030084099620580673, 0.025177523493766785, -0.11490264534950256, 0.0239321980625391, 0.044616155326366425, -0.0023080490063875914, -0.05223742499947548, -0.037294190376996994, 0.0028913524001836777, -0.0026269357185810804, -0.029022634029388428, 0.0469556525349617, 0.0735727921128273, -0.0007589374436065555, -0.007467500399798155, 0.003893778659403324, -0.03676098212599754, -0.008991628885269165, -0.027776304632425308, -0.014924459159374237, -0.06622494012117386, -0.018098285421729088, 0.0002745913516264409, -0.008380635641515255, 0.06721630692481995, -0.056340303272008896, -0.02031295746564865, -0.030145147815346718, -0.010521809570491314, 0.06975486874580383, -0.01672167144715786, -0.009345379658043385, -0.014496611431241035, -0.04670083150267601, -0.03125445917248726, 0.056507620960474014, -0.02060244418680668, -0.05791467800736427, 0.020938487723469734, 0.039068639278411865, 0.02388238161802292, 0.0015679729403927922, -0.008859717287123203, -0.030314484611153603, -0.04399547353386879, -0.05002934858202934, 0.007775034289807081, 0.07766515761613846, 0.006937253754585981, -0.03828783333301544, 0.0048877582885324955, 0.05220514535903931, -0.008008650504052639, -0.07202969491481781, -0.026197968050837517, 0.06249387562274933, 0.0029376342426985502, -0.035812538117170334, -0.008080830797553062, 0.0259898342192173, 0.0443018302321434, -0.006209535524249077, 0.03966270014643669, 0.03054594248533249, 0.028508931398391724, -0.004690251313149929, -0.05941707268357277, -0.01149978581815958, -0.0013474703300744295, -0.0746045857667923, -0.043300844728946686, -0.02030021697282791, 0.004783854354172945, 0.047782279551029205, 0.004977273754775524, 0.020432163029909134, -0.05306713283061981, -0.026921112090349197, -0.0007022565696388483, -0.005105213727802038, 0.06831364333629608, -0.02221772074699402, 0.007520761340856552, -0.0840759128332138, 0.07715814560651779, 0.0750613585114479, -0.011479840613901615, 0.0355386845767498, -0.023131491616368294, 0.013047662563621998, 0.07954651117324829, 0.0061415755189955235, 0.025354690849781036, -0.008802765049040318, -0.07286000996828079, 0.007236608304083347, 0.02695113979279995, 0.009890511631965637, -0.06696831434965134, 0.024387383833527565, -0.020608825609087944, 0.04515380412340164, 0.06559641659259796, 0.03941577300429344, -0.06329641491174698, -0.06960868835449219, 0.024875590577721596, -0.3364362120628357, -0.04077032953500748, 0.05681539326906204, -0.03153841197490692, 0.016597803682088852, -0.06078190729022026, 0.028035545721650124, 0.003340473398566246, 0.014350702054798603, -0.05251304805278778, 0.12870930135250092, -0.03900415450334549, 0.02172813192009926, -0.08401867747306824, 0.0122630400583148, 0.03981665521860123, -0.02869240939617157, 0.02133335918188095, 0.029581861570477486, 0.05249299108982086, -0.026294009760022163, -0.04439045488834381, 0.011939067393541336, -0.02037770487368107, 0.025907225906848907, -0.009802990593016148, 0.09356698393821716, 0.001001767348498106, 0.06047256663441658, -0.08179620653390884, -0.0076879533007740974, 0.05855979397892952, -0.04234270006418228, -0.11389525234699249, 0.0461198091506958, 0.03386528044939041, -0.03640235960483551, 0.08354096114635468, -0.015969783067703247, -0.027211951091885567, -0.0035679538268595934, 0.03330005705356598, -0.03769754618406296, -0.026640549302101135, 0.0031535967718809843, -0.013805542141199112, -0.051316037774086, -0.08824525028467178, 0.014999257400631905, -0.042446233332157135, 0.009199519641697407, 0.03190279006958008, 0.034699924290180206, 0.019532164558768272, -0.030058782547712326, -0.05463695526123047, 0.019322194159030914, -0.004316433798521757, 0.0034297744277864695, 0.007626296486705542, 0.0008200441370718181, -0.00351010262966156, -0.001029490726068616, 0.008928249590098858, -0.009385806508362293, -0.009907720610499382, 0.048969816416502, 0.0724799782037735, 0.03219258040189743, 0.015910275280475616, -0.05178041383624077, 0.09014719724655151, -0.021593037992715836, 0.03321303427219391, 0.08502471446990967, 0.04330241307616234, -0.008333602920174599, -0.009243781678378582, 0.025325452908873558, 0.00436689518392086, -0.005487821530550718, -0.041286665946245193, 0.07288075238466263, 0.0448765866458416, 0.019475402310490608, 0.07418886572122574, 0.007824077270925045, -0.032858461141586304, 0.0007191852782852948, 0.023685695603489876, -0.04177248477935791, -0.020893698558211327, 0.06850852072238922, -0.023770004510879517, 0.059909213334321976, 0.05529838427901268, -0.24602355062961578, -0.005678867921233177, -0.03952953591942787, 0.019113557413220406, 0.047418054193258286, 0.05649014189839363, 0.00845762062817812, -0.018834779039025307, 0.013059179298579693, 0.0621892586350441, 0.016451653093099594, 0.0333242230117321, 0.03420673683285713, -0.018456514924764633, 0.06472732871770859, 0.025405365973711014, 0.002906553214415908, 0.05373882129788399, 0.07873094826936722, -0.007698562927544117, 0.019236303865909576, -0.03663259372115135, 0.16211947798728943, 0.026703068986535072, 0.00864645279943943, 0.02707504667341709, 0.05996024236083031, 0.02628994546830654, 0.10035710781812668, 0.02788590081036091, 0.011672349646687508, -0.03774416819214821, 0.10746058076620102, 0.08082784712314606, 0.0030190672259777784, -0.04751444607973099, 0.04432741925120354, 0.002401364268735051, -0.027585266157984734, -0.053829312324523926, -0.04478086158633232, 0.029232263565063477, 0.043212104588747025, 0.007145863492041826, 0.07869496196508408, -0.027959825471043587, -0.0619327537715435, -0.08675383031368256, -0.04835551604628563, -0.0067660631611943245, 0.019719596952199936, -0.05187901109457016, 0.023072054609656334, -0.03476879745721817, -0.02785523235797882, 0.048223115503787994, 0.062301672995090485, -0.015613206662237644, -0.005902672186493874, -0.026138056069612503, 0.030589237809181213, -0.014622827991843224, 0.050035055726766586, 0.021322865039110184, -0.008403616957366467], "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fc82f45a-94bd-4023-86ca-38b5b26554ff", "node_type": "4", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "1a0764ed9a15c6f1286a2f45e7fcc1d528e443ee129f48fed44f286e9f44e789", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "50c837dc-a25f-4418-83e2-791b29f632b6", "node_type": "1", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "4175b1f25e65fb3c224b320417727c60f1867aeafd1577559c1effe142979e41", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "737b80ca-ff5e-46b3-80a2-07c9a7f171da", "node_type": "1", "metadata": {}, "hash": "beda6ff4f8174cab68f83aac3842452ba4ab5f2e2757a2a39c1efef9e09d7d93", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\");\n            return;\n        }\n\n        // Write the JSON string to the logs.json file, adding it at the end\n        try (BufferedWriter writer = new BufferedWriter(new FileWriter(logFilePath, true))) {\n            writer.write(jsonLogLine);\n            writer.newLine(); // Add a new line for the next log entry\n            writer.flush();   // Make sure it's written to disk immediately\n        } catch (IOException e) {\n            System.err.println(\"Failed to write log line to file.\");\n            e.printStackTrace();\n        }\n    }\n}\n```\nThe `logClick` method creates a `LogEntry`, converts it into a JSON string, and then appends this string as a new line to the `logs.json` file. This means `logs.json` grows larger with every user click!\n\n#### What the `logs.json` File Looks Like\n\n`logs.json` is a file where each line is a separate click event:\n\n**`src/main/resources/logs/logs.json` (Snippet)**\n```json\n{\"query\":\"clean\",\"clickedDocId\":58,\"timestamp\":\"2025-11-07T06:55:52.677729400Z\"}\n{\"query\":\"clean\",\"clickedDocId\":58,\"timestamp\":\"2025-11-07T06:55:56.033080Z\"}\n{\"query\":\"develop\",\"clickedDocId\":108,\"timestamp\":\"2025-11-07T18:59:05.735673500Z\"}\n{\"query\":\"The Pragmatic Programmer\",\"clickedDocId\":2,\"timestamp\":\"2025-11-14T14:09:05.605164500Z\"}\n{\"query\":\"The Pragmatic Programmer\",\"clickedDocId\":2,\"timestamp\":\"2025-11-14T14:09:08.471192900Z\"}\n```\nYou can see that book `ID 58` was clicked twice after a \"clean\" search, and book `ID 2` (The Pragmatic Programmer) was clicked several times. This raw data is exactly what our next component needs!\n\n### Part 2: Understanding Popularity (The \"Analyst\")\n\nGathering raw click data is useful, but we need to *process* it to get meaningful insights. This is where the analytics part comes in.", "mimetype": "text/plain", "start_char_idx": 5696, "end_char_idx": 7449, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "737b80ca-ff5e-46b3-80a2-07c9a7f171da", "embedding": [-0.053669363260269165, 0.011041993275284767, -0.012817592360079288, -0.024082990363240242, 0.03435610234737396, -0.021942684426903725, 0.04555675759911537, 0.019788319244980812, 0.007861350663006306, -0.010724782943725586, 0.035273775458335876, 0.00835505686700344, -0.00874866358935833, -0.00914575345814228, -0.0015488280914723873, 0.04243940860033035, -0.007672270759940147, -0.01210077665746212, 0.013724732212722301, -0.042644716799259186, -0.022639289498329163, 0.00672475341707468, 0.021077757701277733, -0.08300358057022095, 0.018102657049894333, 0.03379003703594208, -0.07699033617973328, -0.08708170056343079, -0.028311248868703842, -0.1933000236749649, 0.015775544568896294, -0.08247043192386627, 0.10429825633764267, -0.007186475209891796, -0.013505547307431698, 0.013264310546219349, 0.020910054445266724, 0.029565969482064247, 0.011204591020941734, -0.0039005805738270283, 0.02235093154013157, 0.0058412556536495686, -0.026832157745957375, -0.013524585403501987, -0.02080817148089409, -0.025661956518888474, 0.0015908813802525401, -0.009119578637182713, -0.042338404804468155, 0.045948658138513565, -0.04295285791158676, -0.0298063475638628, -0.01632707752287388, -0.004399485886096954, 0.04081222787499428, -0.022039135918021202, 0.06280291825532913, 0.047538578510284424, 0.033334292471408844, 0.017003148794174194, 0.052603915333747864, 0.00021052401280030608, -0.08491416275501251, 0.04030871018767357, -0.025986548513174057, -0.030005501583218575, -0.05821820721030235, -0.018766984343528748, -0.01705271005630493, 0.0799480527639389, -0.002951002214103937, 0.01557071227580309, -0.018171461299061775, 0.03285374864935875, 0.034415677189826965, -0.016672734171152115, 0.00013157923240214586, -0.006437117699533701, 0.019292619079351425, 0.04745562747120857, -0.017954733222723007, 0.001542944461107254, 0.008568440563976765, -0.06056215986609459, 0.022961050271987915, 0.013750902377068996, 0.05992904677987099, 0.04168594628572464, 0.023432070389389992, -0.029144268482923508, 0.07500883936882019, -0.025038206949830055, -0.01487400010228157, -0.02689167857170105, 0.00022451338008977473, 0.004220110364258289, 0.02137778140604496, 0.04105295240879059, 0.05060606822371483, 0.3853398263454437, 0.020627716556191444, 0.02270934358239174, -0.025643525645136833, -0.036655325442552567, 0.004638152662664652, -0.08329679816961288, -0.01730274222791195, 0.022626999765634537, 0.0037919448222965, 0.024508794769644737, 0.05582138150930405, 0.008415204472839832, -0.0007277038530446589, -0.02210903726518154, 0.028225671499967575, -0.010692764073610306, -0.013385278172791004, 0.0629071593284607, 0.015724007040262222, -0.012414088472723961, 0.00863215047866106, -0.005136764608323574, 0.04822288081049919, 0.026636144146323204, 0.06526806205511093, 0.02812821976840496, 0.026720236986875534, 0.05743339657783508, 0.02037513069808483, 0.017300674691796303, 0.013658919371664524, -0.02022743783891201, -0.14158491790294647, 0.0007117592031136155, 0.030047375708818436, 0.0034445486962795258, 0.028897779062390327, -0.016973337158560753, 0.006707097869366407, 0.03811992332339287, 0.01765012927353382, 0.02745482698082924, 0.05125604569911957, -0.057970184832811356, -0.043543484061956406, 0.14583885669708252, 0.044074151664972305, -0.00794984120875597, -0.011769676581025124, -0.07396481186151505, -0.01193107757717371, 0.025101622566580772, -0.03846937417984009, -0.06010493263602257, 0.000678748416248709, 0.055659711360931396, 0.05642814561724663, 0.008774024434387684, -0.014001130126416683, 0.006600814405828714, -0.07161656767129898, -0.0026800157502293587, -0.005289783701300621, 0.06667578965425491, -0.013020183891057968, -0.09838902205228806, 0.0346708782017231, 0.01713108830153942, -0.07153920084238052, -0.03271317854523659, 0.02595316246151924, 0.027918366715312004, -0.07166578620672226, 0.03980091214179993, 0.03186071664094925, -0.01467614620923996, -0.005758062936365604, -0.01944364234805107, 0.019226374104619026, 0.0047235568054020405, 0.065829798579216, -0.02311001718044281, -0.03644002228975296, 0.03731255605816841, -0.03940455988049507, -0.06462874263525009, -0.030308840796351433, -0.005874834954738617, 0.0184421855956316, 0.05349094048142433, -0.03692198544740677, -0.05785754695534706, -0.04052006080746651, 0.03248157724738121, -0.008770146407186985, -0.023661736398935318, -0.053937554359436035, -0.002778860507532954, -0.0034407200291752815, -0.022998511791229248, 0.015218915417790413, 0.005099026020616293, -0.01577088050544262, -0.02452780306339264, -0.0049171424470841885, 0.10667949169874191, 0.0008826135890558362, -0.02625737525522709, 0.05893713980913162, -0.03511057049036026, -0.03391498699784279, -0.015930885449051857, -0.06775595247745514, -0.030352402478456497, -0.028756091371178627, -0.007325362879782915, 0.04910055547952652, 0.032510533928871155, 0.02096078358590603, 0.05165155977010727, -0.00494471937417984, 0.0076455906964838505, -0.05527734383940697, -0.3286658525466919, -0.024781353771686554, 0.025286532938480377, 0.062073349952697754, -0.016155509278178215, -0.06630752980709076, 0.018387570977211, -0.05193161591887474, 0.07786202430725098, 0.11361485719680786, 0.08328629285097122, 0.009325389750301838, -0.023836204782128334, -0.013597368262708187, 0.007081621792167425, 0.012206378392875195, -0.060277391225099564, -0.023155521601438522, -0.04232525825500488, 0.03555454686284065, 0.029302533715963364, 0.01383725181221962, -0.023343464359641075, -0.10201255977153778, -0.021985381841659546, -0.0218080822378397, 0.07338196039199829, 0.014494302682578564, -0.0002037297817878425, -0.07037472724914551, 0.007811832707375288, 0.0047126454301178455, -0.059260979294776917, -0.009967893362045288, 0.005347470287233591, -0.012390783987939358, 0.015073793940246105, 0.01973423920571804, -0.06315772235393524, 0.002490093233063817, -0.0915088877081871, 0.03278902545571327, -0.007619382813572884, -0.03968757018446922, -0.02635824680328369, -0.009151149541139603, 0.009569814428687096, -0.11145003885030746, 0.018630851060152054, 0.004555088002234697, 0.01663176156580448, 0.02943490818142891, 0.029901282861828804, 0.030234556645154953, -0.054731614887714386, -0.05552894249558449, -0.0013407572405412793, 0.001234319875948131, 0.01819687895476818, -0.008254342712461948, -0.019557321444153786, -0.020151928067207336, 0.0005424671107903123, -0.027455365285277367, 0.0063438271172344685, -0.022293781861662865, -0.004344336688518524, 0.018697967752814293, 0.01139282900840044, 0.010215227492153645, -0.07020123302936554, 0.019507717341184616, -0.023395361378788948, 0.024918679147958755, 0.00898282416164875, 0.01982082799077034, 0.01258392259478569, -0.08621657639741898, -0.025516541674733162, 0.03265857696533203, 0.03911733999848366, 0.014974660240113735, 0.06612138450145721, -0.01741262897849083, 0.003037200076505542, -0.019644755870103836, 0.02999437414109707, -0.004068075213581324, -0.025678854435682297, 0.011586829088628292, -0.017805205658078194, 0.0034347607288509607, -0.003600519383326173, -0.06642738729715347, -0.03497416526079178, 0.044813189655542374, -0.25919342041015625, 0.007982122711837292, -0.032027408480644226, 0.06080217286944389, 0.04315737262368202, -0.03646458312869072, 0.07571374624967575, -0.05456479638814926, 0.006052322220057249, 0.0495159737765789, 0.029741588979959488, 0.05111206695437431, -0.03296960890293121, -0.11759953945875168, 0.02244047448039055, 0.006712145172059536, 0.01855221949517727, 0.0065924939699471, 0.031938839703798294, 0.0004432412388268858, 0.07685951888561249, -0.011857482604682446, 0.1935482919216156, 0.07368266582489014, 0.0406019352376461, -0.0018181076738983393, 0.0029326078947633505, -0.021183660253882408, 0.06043383106589317, -0.027560776099562645, 0.00806824117898941, -0.04570687562227249, 0.08624868094921112, -0.02913997322320938, 0.008767652325332165, -0.0014864911790937185, -0.01076650619506836, 0.034317366778850555, -0.026968661695718765, -0.020231004804372787, 0.009987086057662964, 0.054113563150167465, -0.018321534618735313, 3.3879492548294365e-05, 0.09513241797685623, -0.041403960436582565, -0.005444125272333622, -0.04575338587164879, -0.03638482838869095, 0.03313445672392845, -0.03256261348724365, -0.07365758717060089, -0.020129352807998657, 0.0169008057564497, 0.0017041451064869761, 0.06944819539785385, 0.01349857822060585, 0.07622691988945007, 0.04941636323928833, 0.007178075611591339, 0.010588274337351322, 0.015810878947377205, 0.058153264224529266, 0.022290490567684174, 0.016607720404863358], "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fc82f45a-94bd-4023-86ca-38b5b26554ff", "node_type": "4", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "1a0764ed9a15c6f1286a2f45e7fcc1d528e443ee129f48fed44f286e9f44e789", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "878cca16-26c8-4054-8089-6badc68b2ad7", "node_type": "1", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "c84bf6e574504f5435f056f978a1ecc2257f17dd37650670c1d6f1f41949ec8f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "67387c05-180c-4026-9733-608e21df2120", "node_type": "1", "metadata": {}, "hash": "06158a25c8e34453bf5ac8698be0b5bacb68adafb2693c0384a4b74df4a1d805", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "### Part 2: Understanding Popularity (The \"Analyst\")\n\nGathering raw click data is useful, but we need to *process* it to get meaningful insights. This is where the analytics part comes in.\n\n#### The `LogAnalyzerMain`: Our Offline Popularity Calculator\n\nSimilar to `IndexerMain` (from [Search Index Management](04_search_index_management_.md)) which built our search index, `LogAnalyzerMain` is another **offline tool**. This means you run it separately, usually when the application isn't running, to process the accumulated `logs.json` file.\n\nIts job is simple:\n1.  Read every `LogEntry` from `logs.json`.\n2.  Count how many times each unique book (`clickedDocId`) was clicked.\n3.  Calculate a \"popularity score\" for each book based on its click count.\n4.  Save these popularity scores into a new file: `popularity.json`.\n\nThis `popularity.json` file will then be loaded by the main DevShelf application (just like `index_data.json`) to influence search results and recommendations.\n\n#### How to Run the `LogAnalyzerMain`\n\nYou would run `LogAnalyzerMain` directly, just like `IndexerMain`. It doesn't have a visual interface; it just prints messages as it processes the logs.\n\n**`src/main/java/core/LogAnalyzerMain.java` (Simplified `main` method)**\n```java\npackage core;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport domain.LogEntry;\nimport java.io.BufferedReader;\nimport java.io.FileReader;\nimport java.io.IOException;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class LogAnalyzerMain {\n\n    private static final String LOGS_FILE_PATH = \"src/main/resources/logs/logs.json\";\n    private static final String POPULARITY_OUT_PATH = \"src/main/resources/logs/popularity.json\";\n\n    public static void main(String[] args) {\n        System.out.println(\"--- Starting Log Analyzer ---\");\n        ObjectMapper mapper = new ObjectMapper(); // JSON helper\n\n        Map<Integer, Integer> clickCounts = new HashMap<>(); // Store: <BookID, ClickCount>\n\n        try (BufferedReader reader = new BufferedReader(new FileReader(LOGS_FILE_PATH))) {\n            String line;\n            while ((line = reader.", "mimetype": "text/plain", "start_char_idx": 7261, "end_char_idx": 9377, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "67387c05-180c-4026-9733-608e21df2120", "embedding": [-0.06906507164239883, -0.013187162578105927, -0.0191995520144701, -0.06388076394796371, -0.024029402062296867, -0.002262471942231059, 0.028662879019975662, -0.006265310570597649, 0.08311570435762405, 0.005846414715051651, 0.019045138731598854, 0.013341565616428852, 0.03464837744832039, 0.01857266016304493, -0.039078488945961, -0.01302098948508501, 0.012299611233174801, -0.01602855511009693, -0.013362468220293522, 0.012890715152025223, 0.03689473122358322, -0.0011947707971557975, 0.01971442997455597, -0.04430586099624634, 0.029289545491337776, 0.03681759163737297, -0.05349360778927803, -0.09254486858844757, -0.0381736122071743, -0.203336700797081, 0.017062610015273094, -0.07409721612930298, 0.09360142797231674, -0.0431448258459568, -0.03496112301945686, 3.251210364396684e-05, 0.005728747695684433, 0.01592881791293621, 0.0339842326939106, -0.006385541055351496, 0.006939624901860952, 0.03998279199004173, -0.022137658670544624, -0.018558714538812637, -0.010911519639194012, -0.04038214311003685, -0.031980402767658234, -0.05015290528535843, 0.05882399529218674, 0.05445389449596405, -0.07884258776903152, -0.022512175142765045, -0.023082826286554337, 0.007356287911534309, 0.023025522008538246, -0.024997569620609283, 0.030894668772816658, 0.060300759971141815, 0.03175631910562515, 0.0061232298612594604, 0.020943399518728256, 0.011878383345901966, -0.10520172119140625, 0.033073555678129196, -0.006825997028499842, -0.028101520612835884, -0.0343516580760479, -0.01690535433590412, -0.011790468357503414, 0.06699003279209137, -0.03432319685816765, 0.028931275010108948, 0.027661973610520363, 0.060812558978796005, 0.040422774851322174, -0.03791055083274841, -0.025263125076889992, 0.006180207245051861, 0.001733794342726469, 0.015813909471035004, -0.08538979291915894, -0.004993330221623182, 0.021109458059072495, -0.04346948862075806, 0.04366966336965561, 0.017910469323396683, 0.06504802405834198, 0.015640519559383392, 0.018065160140395164, -0.003182617947459221, 0.05530071631073952, -0.007304030004888773, -0.028347890824079514, -0.012939096428453922, -0.00548198539763689, 0.00704234279692173, -0.0103551484644413, 0.026614630594849586, 0.045072268694639206, 0.3974260091781616, -0.04204683005809784, -0.01791822351515293, -0.05556502193212509, -0.029825527220964432, -0.0014840579824522138, -0.07504653185606003, 0.003142782486975193, -0.010360944084823132, -0.0270526185631752, 0.009949452243745327, 0.016551736742258072, -0.04758424684405327, 0.04175622761249542, -0.05402980372309685, 0.015530852600932121, 0.019387023523449898, 0.03054194338619709, 0.04063185304403305, 0.012548742815852165, -0.026767855510115623, 0.02056186832487583, -0.019191162660717964, 0.018852833658456802, -0.021674921736121178, 0.06652825325727463, 0.042562730610370636, 0.007656218949705362, 0.07411253452301025, 0.019562555477023125, 0.020750166848301888, -0.00045091030187904835, -0.0009170602425001562, -0.1438269317150116, 0.0014898235676810145, 0.00011902724509127438, -0.006672672927379608, 0.0049878270365297794, -0.02776414155960083, -0.008850660175085068, -0.019931361079216003, 0.028068432584404945, -0.027889003977179527, 0.052985966205596924, -0.04000268131494522, -0.041745636612176895, 0.15694478154182434, 0.01518551167100668, -0.014683852903544903, 0.004440429620444775, -0.07013002038002014, 0.025992969051003456, 0.043542515486478806, -0.0587451308965683, -0.04723050072789192, -0.018325811251997948, 0.048354603350162506, 0.03545621037483215, -0.009204590693116188, 0.00891706719994545, -0.041242826730012894, -0.05269249901175499, -0.009141378104686737, 0.011415536515414715, 0.06283538043498993, 0.011677232570946217, -0.02956949546933174, 0.02374453656375408, 0.0017302394844591618, -0.08847757428884506, -0.03845673426985741, 0.014439842663705349, 0.03642678260803223, -0.04292585700750351, 0.05383636802434921, 0.04899993911385536, 0.0030505103059113026, 0.034974101930856705, -0.034027423709630966, 0.046415455639362335, 0.02254273183643818, 0.058279115706682205, -0.043217822909355164, -0.06642793118953705, 0.0017052212497219443, -0.01555235218256712, -0.012758946046233177, -0.015655815601348877, -0.020896896719932556, 0.0018314076587557793, 0.03712267428636551, 0.0013467499520629644, -0.015920348465442657, -0.016841577365994453, 0.03593173995614052, -0.001441453816369176, -0.0585523322224617, -0.015883473679423332, -0.026721034198999405, 0.021500971168279648, -0.03389834985136986, 0.06919964402914047, 0.0016849483363330364, -0.015217551030218601, 0.00807533785700798, 0.028416739776730537, 0.05580022558569908, -0.0027962741442024708, -0.011098361574113369, 0.061952318996191025, -0.04440135136246681, -0.08477427810430527, -0.03394331410527229, -0.05023951083421707, 0.0069340248592197895, -0.06393201649188995, -0.018098264932632446, 0.004942943342030048, 0.05547086149454117, 0.03735896199941635, 0.05432247743010521, -0.007119376678019762, -0.019500037655234337, -0.04148516431450844, -0.2965869605541229, -0.008327275514602661, 0.059642720967531204, -0.008858493529260159, -0.02324247546494007, -0.038702309131622314, 0.038310226052999496, -0.028581496328115463, 0.03488185629248619, 0.05475994944572449, 0.10931634157896042, -0.027237607166171074, -0.036836620420217514, -0.02498682402074337, -0.004097335040569305, -0.006450523156672716, -0.07603993266820908, 0.0035279281437397003, -0.0032215144019573927, 0.03523222357034683, 0.045492637902498245, -0.044788043946027756, -0.013802838511765003, -0.033459700644016266, 0.02452193945646286, -0.028529305011034012, 0.09277912229299545, -0.0032402959186583757, -0.015751168131828308, -0.04621904715895653, 0.043301600962877274, 0.07091594487428665, -0.052980318665504456, -0.02001565508544445, 0.030513755977153778, 0.012457003816962242, -0.0598309189081192, 0.04440848529338837, -0.057867564260959625, 0.00010118708451045677, -0.07676383852958679, 0.03852919116616249, 0.0014333704020828009, -0.06526898592710495, -0.0024200212210416794, -0.029276588931679726, 0.005076242610812187, -0.05732168257236481, 0.03340555354952812, 0.018986307084560394, 0.005358465015888214, -0.01710604317486286, 0.024351218715310097, 0.02385057881474495, -0.02340593747794628, -0.03428420424461365, 0.0005098800756968558, -0.021834656596183777, -0.0389457568526268, -0.006349986884742975, -0.029647784307599068, -0.038725439459085464, 0.012731747701764107, -0.007226618938148022, -0.009700071066617966, -0.008096907287836075, 0.008902961388230324, 0.04906119033694267, 0.033475328236818314, 0.013731366954743862, -0.07249461859464645, 0.025484619662165642, 0.011437889188528061, 0.024492284283041954, 0.03692876920104027, 0.026320289820432663, 0.009532103314995766, -0.02456839010119438, 0.011288966052234173, 0.015144330449402332, 0.01949460431933403, 0.040284525603055954, 0.036604419350624084, 0.01990479789674282, -0.02325444109737873, 0.003996527753770351, 0.04566333070397377, 0.024034392088651657, -0.02399054355919361, -0.005820468068122864, -0.0142232496291399, 0.016304349526762962, 0.03462031111121178, -0.036357346922159195, -0.04100865498185158, 0.04358606040477753, -0.27895501255989075, 0.0028806121554225683, -0.028933105990290642, 0.05037964880466461, 0.024665694683790207, -0.012312709353864193, 0.0310345645993948, -0.06474882364273071, 0.006647513713687658, 0.02602744661271572, 0.010989105328917503, 0.08540938794612885, -0.03177432343363762, -0.08005349338054657, 0.013471143320202827, 0.014099727384746075, -0.02348368987441063, 0.02895464561879635, 0.13146132230758667, 0.007619894575327635, 0.04573293402791023, -0.004244089126586914, 0.19130197167396545, 0.03859908506274223, 0.04875630885362625, 0.017193904146552086, 0.03515441343188286, -0.006680937018245459, 0.07829135656356812, 0.020095346495509148, -0.001482810010202229, -0.03944467008113861, 0.13228005170822144, 0.0294682364910841, -0.022891424596309662, -0.00450761616230011, 0.024944402277469635, 0.0098304757848382, -0.033043455332517624, -0.0006984467036090791, 0.009503660723567009, 0.046664703637361526, -0.042080700397491455, 0.02856501378118992, 0.08634335547685623, -0.06362862139940262, 0.001158231869339943, -0.08835805952548981, -0.032760102301836014, 0.008619510568678379, -0.02512626349925995, -0.06285522878170013, -0.0039049494080245495, 0.00019545710529200733, -0.008048223331570625, 0.07783770561218262, 0.028705094009637833, 0.04077288880944252, 0.011212860234081745, -0.03211972862482071, -0.018631253391504288, -0.009075934998691082, 0.08010805398225784, 0.018286893144249916, -0.0230450090020895], "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fc82f45a-94bd-4023-86ca-38b5b26554ff", "node_type": "4", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "1a0764ed9a15c6f1286a2f45e7fcc1d528e443ee129f48fed44f286e9f44e789", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "737b80ca-ff5e-46b3-80a2-07c9a7f171da", "node_type": "1", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "a7e12d751b0e644150ab0b03bf0c653ea1519904600c9c7f92a148838a656977", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a4ab157a-7f4d-4f3f-9bf9-9e3f75231bc8", "node_type": "1", "metadata": {}, "hash": "f030b295cb7730bfd542b6fb5408e01a0be0f8aa5cd78f16a56ef9a379afce1a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Integer> clickCounts = new HashMap<>(); // Store: <BookID, ClickCount>\n\n        try (BufferedReader reader = new BufferedReader(new FileReader(LOGS_FILE_PATH))) {\n            String line;\n            while ((line = reader.readLine()) != null) {\n                if (line.trim().isEmpty()) continue;\n                LogEntry entry = mapper.readValue(line, LogEntry.class); // Read each click entry\n                int docId = entry.getClickedDocId();\n                clickCounts.put(docId, clickCounts.getOrDefault(docId, 0) + 1); // Count clicks\n            }\n        } catch (IOException e) {\n            System.err.println(\"Error reading log file: \" + e.getMessage());\n            return;\n        }\n\n        // --- Calculate popularity scores (using a logarithm to soften high counts) ---\n        Map<Integer, Double> popularityScores = new HashMap<>();\n        double maxScore = 0.0;\n        for (Integer docId : clickCounts.keySet()) {\n            double score = Math.log10(1 + clickCounts.get(docId)); // E.g., 9 clicks -> log10(10) = 1.0\n            popularityScores.put(docId, score);\n            if (score > maxScore) maxScore = score; // Find the highest score\n        }\n\n        // --- Normalize all scores between 0 and 1 ---\n        if (maxScore > 0) {\n            for (Integer docId : popularityScores.keySet()) {\n                double normalizedScore = popularityScores.get(docId) / maxScore;\n                popularityScores.put(docId, normalizedScore);\n            }\n        }\n\n        // --- Save the final popularity map to popularity.json ---\n        try {\n            mapper.writerWithDefaultPrettyPrinter().writeValue(new File(POPULARITY_OUT_PATH), popularityScores);\n            System.out.println(\"--- Log Analyzer Finished ---\");\n        } catch (IOException e) {\n            System.err.println(\"Error writing popularity file: \" + e.getMessage());\n        }\n    }\n}\n```\nThis process:\n1.  Reads each line from `logs.json`.\n2.  Converts the JSON line back into a `LogEntry` object.\n3.  Increments a counter for the `clickedDocId`.\n4.", "mimetype": "text/plain", "start_char_idx": 9155, "end_char_idx": 11210, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "a4ab157a-7f4d-4f3f-9bf9-9e3f75231bc8", "embedding": [-0.06481330096721649, 0.045841723680496216, 0.001070514670573175, -0.03970339149236679, 0.03556433692574501, -0.008035684935748577, -0.023729393258690834, -0.018467919901013374, 0.06453406810760498, 0.013203694485127926, 0.001769584254361689, 0.047824565321207047, 0.009063774719834328, 0.028125956654548645, -0.044275060296058655, -0.007529556285589933, 0.008281813003122807, -0.020867902785539627, -0.06108062341809273, 0.005316724069416523, 0.022884419187903404, 0.01794411614537239, 0.02340061403810978, -0.08147118985652924, 0.024226270616054535, 0.03766309842467308, -0.03648843988776207, -0.05112622678279877, -0.03778258338570595, -0.20888441801071167, 0.011127866804599762, -0.05204460769891739, 0.07127510011196136, -0.02131703682243824, -0.047959305346012115, 0.004286872688680887, 0.028701413422822952, 0.008761946111917496, 0.05629781633615494, 0.018366996198892593, 0.02159087173640728, 0.04265601933002472, -0.025549273937940598, 0.0046553537249565125, -0.05130715295672417, -0.004692209418863058, -0.04224671050906181, -0.011484870687127113, 0.014275455847382545, 0.035933222621679306, -0.08538535982370377, -0.029842836782336235, -0.006502249278128147, 0.013183762319386005, 0.03264811635017395, -0.00836050696671009, 0.01593550108373165, 0.05783391371369362, 0.012399238534271717, 0.009745016694068909, 0.03109409101307392, -0.013306370936334133, -0.06480371952056885, 0.06391765177249908, 0.008928743191063404, -0.028340304270386696, -0.004112665541470051, -0.05702165141701698, -0.05073171854019165, 0.05216172710061073, -0.02946825884282589, 0.03465157002210617, -0.001231952803209424, 0.054522205144166946, 0.0351853147149086, -0.007964348420500755, -0.03414839133620262, -0.011370726861059666, 0.013781348243355751, 0.012291993945837021, -0.043071310967206955, -0.02619297057390213, 0.012116541154682636, -0.06358862668275833, 0.03942921385169029, 0.003727771108970046, 0.08164098858833313, 0.011494837701320648, 0.02956116385757923, 0.019202234223484993, 0.04701004549860954, -0.02340877614915371, 0.01718420349061489, 0.023052256554365158, -0.02781091071665287, 0.0026959653478115797, -0.002224985044449568, 0.05069538578391075, 0.071011021733284, 0.356453537940979, -0.02061133272945881, 0.03542448952794075, -0.014027874916791916, -0.023486392572522163, -0.011058107018470764, -0.06990774720907211, 0.02545315772294998, -0.011266161687672138, 0.018209682777523994, 0.01392041053622961, 0.021415727213025093, -0.03793485462665558, 0.03142280504107475, -0.034945808351039886, 0.01441492885351181, 0.021271223202347755, 0.015614929609000683, 0.057715922594070435, -0.009544196538627148, 0.00041622258140705526, 0.0407174713909626, 0.01771911233663559, 0.008244624361395836, -0.01790393516421318, 0.05466794595122337, 0.04078907519578934, -0.010563163086771965, 0.05771284177899361, 0.039113882929086685, 0.01721506007015705, -0.057121045887470245, -0.02790430560708046, -0.10298880934715271, -0.019591839984059334, -0.007351546548306942, 0.01840423047542572, -0.037335105240345, -0.016385875642299652, 0.0029951827600598335, 0.031477369368076324, 0.030233653262257576, 0.02276177704334259, 0.03165106102824211, -0.016046244651079178, -0.046284109354019165, 0.10684654116630554, 0.027458956465125084, 0.02924344129860401, -0.005868216976523399, -0.027166536077857018, 0.028082940727472305, 0.07002197206020355, -0.015850866213440895, -0.08198440074920654, 0.01471093762665987, 0.032403137534856796, 0.05491981282830238, 0.010119368322193623, 0.005779402330517769, -0.043606121093034744, -0.06268751621246338, -0.03888528794050217, 0.01580697111785412, 0.04634580388665199, -0.04024285078048706, -0.03636813163757324, -0.007169722113758326, 0.02992401085793972, -0.11722607910633087, -0.07525885850191116, 0.00045922398567199707, 0.04087090864777565, -0.0812932625412941, 0.02998088300228119, 0.043027687817811966, 0.006333228200674057, 0.001079107983969152, -0.04333861544728279, 0.06663926690816879, -0.00919092446565628, 0.03826029971241951, -0.05807061865925789, -0.06210663542151451, 0.016159510239958763, -0.028845790773630142, -0.017773287370800972, -0.04415655508637428, -0.002054937882348895, 0.02315797284245491, 0.02951851673424244, 0.005911742337048054, -0.037955526262521744, -0.028392253443598747, 0.022891152650117874, 0.01931518316268921, -0.009986682794988155, -0.01747070625424385, -0.007559892721474171, -0.028674541041254997, -0.028902648016810417, 0.01809152215719223, 0.013621911406517029, -0.011340063996613026, 0.004856833256781101, -0.013901818543672562, 0.0362694077193737, 0.02108149603009224, -0.04291651397943497, 0.07799699902534485, -0.05852538347244263, -0.05741693824529648, -0.014782309532165527, -0.05646583437919617, -0.033399611711502075, -0.052971720695495605, -0.0038607243914157152, -0.03339369595050812, 0.022755365818738937, 0.009510500356554985, 0.04857388883829117, -0.03888864070177078, -0.03178367018699646, -0.0582243874669075, -0.31859883666038513, -0.0005526116583496332, 0.05968329310417175, -0.033435747027397156, 0.03834431245923042, -0.0787569209933281, 0.02586202695965767, -0.0074510290287435055, 0.03772986680269241, 0.08048708736896515, 0.09371516108512878, -0.03207876533269882, 0.004134219605475664, -0.04271674156188965, -0.007239882368594408, 0.023598209023475647, -0.060208726674318314, -0.01963881589472294, -0.03142758086323738, 0.03221304714679718, 0.022180672734975815, -0.053526218980550766, -0.030310360714793205, -0.07367446273565292, 0.022203553467988968, -0.01619872823357582, 0.06728318333625793, 0.033604979515075684, 0.012934462167322636, -0.08381778001785278, 0.032713331282138824, 0.07092184573411942, -0.0602344386279583, -0.014719733037054539, 0.003092922968789935, 0.012615177780389786, 0.004510527942329645, 0.017864439636468887, -0.046177517622709274, -0.0060293786227703094, -0.026440424844622612, 0.052809808403253555, 0.041309650987386703, -0.07455909997224808, -0.057669270783662796, -0.013235270045697689, -0.01429683156311512, -0.07321939617395401, 0.029688898473978043, 0.0230388380587101, 0.0275445356965065, 0.04668746516108513, 0.023158397525548935, 0.0407995842397213, -0.03495468199253082, -0.03186007961630821, -0.033925220370292664, -0.05801544710993767, -0.03265419974923134, -0.01731383427977562, -0.025370895862579346, -0.013498316518962383, -0.010033698752522469, -0.028449993580579758, 0.0195488128811121, -0.02074938453733921, 0.021701542660593987, 0.04408295825123787, 0.04118690639734268, 0.013023274019360542, -0.06613921374082565, 0.007576290052384138, -0.01081935130059719, 0.03932468593120575, 0.06617806851863861, 0.08049029111862183, 0.016238421201705933, -0.010722058825194836, 0.0009712743922136724, 0.03428999334573746, 0.03981717675924301, 0.043896064162254333, 0.025186138227581978, -0.04502544179558754, -0.017527827993035316, -0.032151930034160614, 0.02177434228360653, -0.01037402544170618, -0.054788872599601746, -0.0023972580675035715, -0.06377916783094406, -0.03335251286625862, 0.041537538170814514, -0.054242685437202454, -0.008934960700571537, 0.06848285347223282, -0.28221839666366577, -0.0013270805357024074, -0.0192757286131382, 0.06210266426205635, 0.05842301622033119, 0.0021936052944511175, 0.013647963292896748, -0.05846383422613144, 0.03160418942570686, 0.006472165230661631, 0.02411993406713009, 0.08978360146284103, 0.0016897032037377357, -0.10767382383346558, 0.05279158055782318, 0.03194901719689369, 0.018622353672981262, -0.0008116899989545345, 0.0857337936758995, -0.010881832800805569, 0.0700826421380043, -0.0037319629918783903, 0.19496293365955353, 0.09037493914365768, 0.018913043662905693, 0.019391359761357307, 0.016366973519325256, -0.0006118324236012995, 0.05424187332391739, 0.019255587831139565, -0.0032341182231903076, -0.028877442702651024, 0.07339520752429962, 0.0540267750620842, -0.0005209044902585447, -0.036855220794677734, 0.0022642610128968954, -0.00016421001055277884, -0.0057159410789608955, -0.06080541014671326, 0.03513658419251442, 0.05678906291723251, -0.030524324625730515, 0.0009466978372074664, 0.10107111185789108, -0.07006870210170746, -0.035656630992889404, -0.08590921014547348, -0.01004111673682928, 0.01528523676097393, 0.0037730797193944454, -0.07599718123674393, 0.04489664360880852, -0.002876667072996497, -0.015590786002576351, 0.08006881922483444, 0.045491207391023636, 0.051823947578668594, 0.022658664733171463, -0.013672256842255592, -0.010574824176728725, -0.01747763529419899, 0.06478984653949738, 0.02056731842458248, -0.00021393234783317894], "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fc82f45a-94bd-4023-86ca-38b5b26554ff", "node_type": "4", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "1a0764ed9a15c6f1286a2f45e7fcc1d528e443ee129f48fed44f286e9f44e789", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "67387c05-180c-4026-9733-608e21df2120", "node_type": "1", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "279d171ec5f0acd411f529a3518b3f80ea547dd0953c84768cd2af542a780edc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8894a184-3cfb-4dce-9564-eec38f60e98b", "node_type": "1", "metadata": {}, "hash": "dd0415dfd7a4edcd399a3106c5ecfb7a1ad287c7c9cbb73b0137a6290334a1f0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Reads each line from `logs.json`.\n2.  Converts the JSON line back into a `LogEntry` object.\n3.  Increments a counter for the `clickedDocId`.\n4.  After reading all logs, it calculates a raw score using `Math.log10(1 + clicks)`. This \"logarithm\" helps to smooth out the scores; for example, 100 clicks isn't *100 times* better than 1 click, but still significantly better. This prevents super popular books from totally dominating everything else.\n5.  Finally, it normalizes these scores so they all fall between `0.0` and `1.0`, making them easy to use in calculations later. The most popular book will have a score of `1.0`.\n6.  The result is then saved to `popularity.json`.\n\n#### What the `popularity.json` File Looks Like\n\n`popularity.json` contains a map where each book ID is linked to its calculated popularity score:\n\n**`src/main/resources/logs/popularity.json` (Snippet)**\n```json\n{\n  \"194\" : 0.227670248696953,\n  \"2\" : 1.0,           // This is the most popular book (score 1.0)\n  \"3\" : 0.3608488067145302,\n  \"6\" : 0.5286339468194481,\n  \"135\" : 0.7876096569652562,\n  \"72\" : 0.5286339468194481,\n  \"9\" : 0.5286339468194481,\n  \"58\" : 0.8668214419824227, // Second most popular book\n  // ... many more books and their scores ...\n}\n```\nNow, DevShelf has a clear, up-to-date understanding of which books are most frequently clicked by its users.\n\n### Part 3: Using Popularity to Improve DevShelf (The \"Enhancer\")\n\nThe collected and analyzed popularity scores are not just for show! They are directly fed back into DevShelf to make your experience better.\n\n#### 1. Boosting Search Results: The `ReRanker`\n\nIn [Core Search Engine](05_core_search_engine_.md), we learned that the `QueryProcessor` finds initial results.", "mimetype": "text/plain", "start_char_idx": 11067, "end_char_idx": 12786, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "8894a184-3cfb-4dce-9564-eec38f60e98b", "embedding": [-0.09096094965934753, 0.015413900837302208, -0.027525030076503754, -0.005185268819332123, 0.045191362500190735, 0.0168435201048851, -0.035003114491701126, 0.014096269384026527, 0.036982402205467224, 0.011466224677860737, 0.024817274883389473, -0.005912948399782181, 0.039584316313266754, 0.0295450147241354, -0.027607707306742668, 0.040562644600868225, 0.041320979595184326, 0.012655537575483322, -0.06452451646327972, -0.03308938443660736, 0.024283945560455322, 0.058690398931503296, 0.013034533709287643, -0.10411825776100159, 0.04062546044588089, -0.020743438974022865, -0.0036631517577916384, -0.05019667372107506, -0.057879988104104996, -0.20968911051750183, -0.03607367351651192, -0.07818590849637985, 0.0821419283747673, -0.0026773244608193636, -0.059223636984825134, 0.030787672847509384, 0.01853676699101925, 0.02051728591322899, 0.0023624093737453222, -0.01607750914990902, -0.014436966739594936, -0.028126569464802742, -0.030966967344284058, -0.009051761589944363, -0.013677366077899933, 0.03986778482794762, 0.01909017562866211, -0.013606604188680649, -0.010422858409583569, 0.017475565895438194, -0.01621263101696968, -0.02053963951766491, -0.004475564230233431, 0.045234739780426025, 0.05114011466503143, -0.03658519685268402, 0.07378216087818146, 0.10242680460214615, 0.02034514769911766, 0.010455640032887459, 0.03903834521770477, -0.021375201642513275, -0.09487789124250412, 0.03832077980041504, 0.0007949072169139981, -0.008103420026600361, -0.027289191260933876, -0.02137289196252823, -0.052807897329330444, 0.07221485674381256, 0.013896605931222439, 0.06646648049354553, 0.016306687146425247, 0.048453718423843384, -0.003113402286544442, 0.06355120241641998, -0.0373510904610157, -0.04642342031002045, 0.06457656621932983, 0.03658590093255043, -0.016487231478095055, -0.028527742251753807, -0.002941014477983117, -0.06945900619029999, 0.02089758589863777, -0.029761118814349174, 0.04943578317761421, 0.022544551640748978, 0.02449735440313816, 0.028677772730588913, 0.05057033523917198, -0.01944742724299431, -0.012601342983543873, 0.014187384396791458, -0.04634752497076988, -0.0031698718667030334, -0.049962952733039856, 0.05543579161167145, 0.04608243703842163, 0.35809141397476196, 0.0047883023507893085, 0.0854126363992691, -0.03189866617321968, -0.01829034462571144, -0.014020333997905254, -0.11968441307544708, 0.04574795812368393, 0.03203895315527916, 0.019550582394003868, 0.022163081914186478, 0.015567271038889885, -0.03399655967950821, 0.044483307749032974, -0.03646143525838852, 0.03284500166773796, 0.0060169268399477005, -0.009226108901202679, 0.05914187803864479, -0.005285370629280806, 0.004311322700232267, -0.03419572860002518, -0.012054230086505413, 0.009968241676688194, -0.010027422569692135, 0.05803162232041359, 0.03936760872602463, -0.02711525559425354, 0.06463152915239334, -0.015115334652364254, 0.011759632267057896, 0.009996160864830017, -0.015148433856666088, -0.10612607002258301, 0.006273951847106218, 0.0217790137976408, 0.02343866229057312, -0.025140628218650818, -0.03134496882557869, 0.005463851150125265, 0.012159486301243305, 0.0022995155304670334, 0.0216483473777771, 0.05372964218258858, -0.06540990620851517, -0.10874723643064499, 0.11247476190328598, -0.003578244475647807, 0.02604534476995468, -0.024076350033283234, -0.023332465440034866, -0.03410777822136879, 0.011004340834915638, -0.0310662928968668, -0.07304762303829193, 0.05960507690906525, 0.03915458917617798, 0.05852772668004036, -0.02049441821873188, -0.04309309273958206, -0.05622953549027443, -0.0587628036737442, 0.03350915387272835, -0.005750626791268587, 0.040342990309000015, 0.018102768808603287, -0.07665316760540009, -0.007280819583684206, -0.016172176226973534, -0.10502643883228302, 0.04620678722858429, -0.013010123744606972, 0.04429967701435089, -0.03217673301696777, 0.052974265068769455, 0.017563505098223686, 0.0052912854589521885, 0.00020921141549479216, -0.08390690386295319, 0.011398225091397762, -0.0021751774474978447, 0.06860215216875076, -0.05023551732301712, -0.028927743434906006, 0.06439410895109177, -0.028671804815530777, 0.0116969533264637, -0.027030695229768753, -0.0419965498149395, -0.00683271698653698, 0.057474032044410706, -0.032881468534469604, -0.040188997983932495, -0.04913920536637306, 0.011634127236902714, 0.053627051413059235, -0.031012065708637238, -0.031395815312862396, 0.002740138443186879, 0.02918856218457222, -0.01325254887342453, -0.02322136051952839, 0.04638802260160446, 0.020751452073454857, 0.00045209054951556027, -0.021589040756225586, 0.032073814421892166, 0.011096944101154804, -0.07284387946128845, 0.07890761643648148, -0.04251263290643692, -0.05541376397013664, -0.044903699308633804, -0.05128207430243492, -0.03132762014865875, -0.0361783467233181, -0.02916274406015873, -0.001522972364909947, 0.024462487548589706, -0.010186881758272648, 0.03931301832199097, -0.009184778667986393, -0.009958154521882534, -0.0706574022769928, -0.2916250228881836, -0.020833922550082207, 0.034185122698545456, -0.034196335822343826, 0.0005049756728112698, -0.05471453815698624, 0.05191989988088608, -0.011394951492547989, 0.03375751152634621, 0.0603143684566021, 0.04252661019563675, -0.055325698107481, -0.044669296592473984, 0.015506036579608917, 0.025883568450808525, -0.00969597790390253, -0.05889683961868286, -0.03513776883482933, -0.013965512625873089, -0.021362362429499626, 0.06555385142564774, -0.0020038082730025053, 0.025199567899107933, -0.08243001997470856, 0.06725877523422241, -0.0018698996864259243, 0.055253032594919205, 0.057896800339221954, -0.01966985873878002, -0.04744802042841911, 0.07278348505496979, 0.030913496389985085, -0.06903687864542007, -0.008389794267714024, 0.03740279749035835, -0.017550885677337646, 0.02834627591073513, -0.043921660631895065, -0.051573384553194046, 0.019998732954263687, 0.0011860092636197805, 0.000759570742957294, 0.012034939602017403, -0.04908492788672447, -0.03237907588481903, 0.001804520026780665, 0.00669575110077858, -0.03698018193244934, 0.0361473523080349, 0.053044289350509644, -0.06174691021442413, 0.014524110592901707, 0.05209163576364517, 0.01188716758042574, -0.022518688812851906, -0.05414470657706261, -0.029815448448061943, -0.017078794538974762, -0.00485417852178216, 0.004062994383275509, 0.04034840315580368, -0.024242855608463287, 0.005557184107601643, -0.02592807449400425, 0.01579222083091736, -0.018947063013911247, 0.027325112372636795, 0.06683484464883804, -0.010067270137369633, -0.0001939179637702182, -0.11240851879119873, -0.002024136483669281, -0.02264980599284172, 0.07030050456523895, 0.04668387770652771, 0.05220886319875717, 0.025639992207288742, -0.07679067552089691, 0.037064310163259506, -0.02590574324131012, 0.0016643586568534374, 0.0019793265964835882, 0.056164857000112534, -0.02722824551165104, -0.00351855275221169, -0.07070747762918472, 0.03383757546544075, 0.008847679011523724, -0.0005753338919021189, 0.04548317566514015, -0.0556633323431015, -0.03998896852135658, -0.027243653312325478, 0.0010075265308842063, -0.017331469804048538, 0.042765822261571884, -0.25799205899238586, 0.017406269907951355, -0.001684264512732625, 0.03424038738012314, 0.032899439334869385, -0.0013575820485129952, 0.060995135456323624, -0.036156438291072845, 0.03209693357348442, 0.022438351064920425, 0.04075852409005165, 0.05501021817326546, -0.0005062086274847388, -0.07076982408761978, 0.009017130360007286, -0.014096055179834366, 0.03216290473937988, 0.0020171189680695534, 0.08089032024145126, -0.002164058852940798, 0.028999174013733864, 0.001201904728077352, 0.19935917854309082, 0.054924581199884415, 0.025541622191667557, 0.0031140465289354324, -0.002032275078818202, -0.0547633096575737, -0.03128420561552048, -0.011913334019482136, -0.0042837075889110565, -0.026261216029524803, 0.10866285115480423, -0.009515141136944294, 0.03384046629071236, 0.02180243469774723, 0.027966126799583435, -0.0006990045076236129, -0.0194887425750494, -0.021836860105395317, 0.03331848606467247, 0.08780107647180557, -0.025459567084908485, 0.022253716364502907, 0.0674835667014122, -0.041858773678541183, 0.027886517345905304, -0.06103987619280815, -0.05425472930073738, 0.002272428246214986, 0.009070509113371372, -0.0680827870965004, 0.02642149291932583, 0.00494084507226944, -0.005565193947404623, 0.04588964208960533, -0.041646767407655716, 0.04720750078558922, -0.015222298912703991, 0.004696793854236603, -0.011195794679224491, 0.002488990779966116, 0.07384035736322403, 0.05291285738348961, 0.035140927881002426], "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fc82f45a-94bd-4023-86ca-38b5b26554ff", "node_type": "4", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "1a0764ed9a15c6f1286a2f45e7fcc1d528e443ee129f48fed44f286e9f44e789", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a4ab157a-7f4d-4f3f-9bf9-9e3f75231bc8", "node_type": "1", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "226e32e6b2315bba5b63eee2b85ab40495ea95782805a26728dcab8e04887853", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "aa50750c-f4fd-48f6-882e-7d095d1691e3", "node_type": "1", "metadata": {}, "hash": "14c39946bc6a27860d0f9df5a7c82c5283956c7a1ccb22a9cd5db327ea3304c0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#### 1. Boosting Search Results: The `ReRanker`\n\nIn [Core Search Engine](05_core_search_engine_.md), we learned that the `QueryProcessor` finds initial results. Then, the `ReRanker` (from [Search Enhancement & Recommendations](07_search_enhancement___recommendations_.md)) steps in to sort those results, ensuring the *best* ones are at the top. The `ReRanker` uses our freshly calculated popularity scores to give a boost to trending books.\n\nWhen DevShelf starts, the `ReRanker` loads the `popularity.json` file:\n\n**`src/main/java/features/search/ReRanker.java` (Simplified Constructor)**\n```java\npackage features.search;\n\nimport com.fasterxml.jackson.core.type.TypeReference;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport domain.Book;\nimport domain.SearchResult;\nimport java.io.File;\nimport java.io.IOException;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\npublic class ReRanker {\n\n    private final Map<Integer, Book> bookMap;\n    private final Map<Integer, Double> popularityMap; // This will hold our popularity scores!\n\n    // Weights to decide how much each factor contributes to the final score\n    private static final double W_TFIDF = 0.7;      // Raw search score\n    private static final double W_POPULARITY = 0.20; // NEW: How popular the book is!\n    private static final double W_RATING = 0.10;     // Book's star rating\n\n    public ReRanker(Map<Integer, Book> bookMap, String popularityFilePath) {\n        this.bookMap = bookMap;\n        this.popularityMap = loadPopularity(popularityFilePath); // Load the popularity scores!\n    }", "mimetype": "text/plain", "start_char_idx": 12626, "end_char_idx": 14213, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "aa50750c-f4fd-48f6-882e-7d095d1691e3", "embedding": [-0.06989482790231705, -0.02795559912919998, 0.026882432401180267, -0.024465108290314674, -0.018523024395108223, -0.009181799367070198, -0.03870003670454025, 0.014246627688407898, 0.07418733090162277, 0.0009454137180000544, -0.014673400670289993, -0.032922644168138504, 0.047571029514074326, 0.024430176243185997, -0.007077703718096018, 0.02798239141702652, 0.03602755814790726, 0.03721661493182182, -0.04265475645661354, -0.0033156697172671556, 0.0601511150598526, 0.050438378006219864, 0.0247882679104805, -0.052233535796403885, 0.07833504676818848, 0.028024496510624886, -0.024867406114935875, -0.07259446382522583, -0.05537411943078041, -0.23725511133670807, -0.011814969591796398, -0.07643802464008331, 0.04889170452952385, -0.013752109371125698, -0.05262540280818939, -0.011754101142287254, 0.011366288177669048, 0.03000136837363243, 0.010698406957089901, -0.025000540539622307, -0.002928270725533366, -0.0022426280193030834, -0.023377107456326485, -0.0165450107306242, -0.0022220255341380835, 0.012561420910060406, 0.004056619480252266, 0.0062021296471357346, 0.018924249336123466, 0.036241721361875534, -0.018107905983924866, -0.03757135942578316, -0.01648194156587124, 0.027601514011621475, 0.00806345883756876, 0.006002993788570166, 0.05215028300881386, 0.08644840121269226, 0.03449062258005142, 0.027911780402064323, 0.051578883081674576, 0.005011780187487602, -0.09372062981128693, 0.027588745579123497, 0.026347672566771507, -0.027236437425017357, -0.04495181143283844, 0.004467597231268883, -0.05311598256230354, 0.06842168420553207, -0.0107722794637084, 0.06814540922641754, 0.027279263362288475, 0.09559638798236847, 0.024755947291851044, 0.017514171078801155, -0.046095412224531174, -0.027773786336183548, 0.02005894109606743, 0.02557271532714367, -0.05058103799819946, -0.0006223529926501215, -0.003909599967300892, -0.0660586953163147, 0.03298640996217728, -0.00867436733096838, 0.013984156772494316, 0.028105465695261955, 0.013940973207354546, 0.027057019993662834, 0.027460673823952675, -0.012277677655220032, -0.027863366529345512, 0.04755810648202896, -0.03017556481063366, -0.02808896079659462, -0.07057696580886841, 0.004030861426144838, 0.09721150994300842, 0.3767276704311371, -0.04765145480632782, 0.010583415627479553, -0.02519611269235611, 0.0017496771179139614, -0.03115987963974476, -0.07413961738348007, 0.03988258168101311, 0.020954903215169907, -0.014801247976720333, 0.005930884275585413, 0.034221433103084564, -0.056551069021224976, 0.026930738240480423, -0.0584680512547493, 0.04126788303256035, 0.003156614489853382, -0.004013842903077602, 0.06542680412530899, -0.046231575310230255, 0.005569866858422756, -0.013004152104258537, -0.007783119101077318, -0.018877699971199036, -0.020209716632962227, 0.0796959400177002, 0.05571669340133667, -0.0022428669035434723, 0.05147239938378334, 0.040274906903505325, -0.003551289439201355, 0.015549203380942345, -0.03187921270728111, -0.12246710062026978, -0.016372432932257652, -0.015857627615332603, 0.028809310868382454, -0.032173383980989456, -0.020358245819807053, 0.023655418306589127, -0.0016997394850477576, 0.0190786961466074, -0.0177918728441, 0.03245970606803894, -0.03729292377829552, -0.06790714710950851, 0.1518724262714386, -0.0025288050528615713, 0.024215083569288254, 0.023829050362110138, 0.005641508847475052, 0.0015072624664753675, -0.014143803156912327, -0.04816310480237007, -0.07096272706985474, 0.013561198487877846, 0.035134587436914444, 0.04046593979001045, 0.002750061685219407, -0.023064875975251198, -0.04033791273832321, -0.03075154311954975, -0.003135495353490114, -0.024525940418243408, 0.07825150340795517, -0.002031185897067189, -0.02689659595489502, 0.030293172225356102, -0.019304974004626274, -0.08060714602470398, 0.004762780386954546, 0.01642850786447525, 0.021630702540278435, 0.006389643531292677, 0.06676866114139557, 0.03361812233924866, 0.003526630811393261, -0.019706742838025093, -0.08325079083442688, 0.04135754704475403, -0.0208016075193882, 0.04934336617588997, -0.02638380415737629, -0.0463295504450798, 0.013573636300861835, -0.03985995799303055, 0.005466569680720568, -0.006049665156751871, -0.00401128176599741, 0.012997692450881004, 0.040658652782440186, 0.02251138724386692, -0.004580837674438953, -0.0147026889026165, 0.012821181677281857, -0.008792422711849213, -0.06011258438229561, -0.03264138102531433, 0.011203469708561897, 0.07119594514369965, -0.027036691084504128, 0.004027863033115864, 0.04108206927776337, -0.019183266907930374, 0.028280064463615417, 0.02974436804652214, 0.04100143164396286, 0.01583734154701233, -0.05127095431089401, 0.003987927455455065, -0.03973009064793587, -0.0561627633869648, -0.07595903426408768, -0.10505759716033936, -0.002756326226517558, -0.018741410225629807, -0.037833888083696365, 0.009797971695661545, -0.009910603053867817, 0.005306486040353775, 0.04358576610684395, -0.021275723353028297, -0.022125881165266037, -0.05359717458486557, -0.3000395894050598, 0.0008694579591974616, 0.05347109213471413, -0.05142432451248169, -0.010914972051978111, -0.050435349345207214, 0.020408745855093002, -0.022745976224541664, 0.0048440853133797646, 0.04960499331355095, 0.09354505687952042, -0.01612810045480728, -0.033133529126644135, 0.02352776564657688, -0.011866028420627117, -0.04032042622566223, -0.05615650489926338, -0.02393593266606331, -0.04820751026272774, 0.010000867769122124, 0.060238879173994064, -0.00710134906694293, -0.011706646531820297, -0.03294658660888672, 0.08826227486133575, 0.021421756595373154, 0.08810669183731079, -0.005593464244157076, -0.01442019548267126, -0.049611836671829224, 0.021980805322527885, 0.04397503286600113, -0.07591192424297333, -0.011865618638694286, 0.03869592398405075, -0.03302057459950447, 0.01900854893028736, -0.026008620858192444, -0.06643861532211304, 0.029312971979379654, -0.03875776007771492, 0.020551541820168495, 0.01005792897194624, -0.0820707306265831, 0.018741488456726074, 0.0015636177267879248, 0.0191977359354496, -0.030024444684386253, 0.019823040813207626, 0.040371768176555634, -0.060699257999658585, -0.006536843255162239, 0.007923834957182407, 0.009378345683217049, 0.004681473132222891, -0.005984412506222725, -0.0072689722292125225, -0.03011360578238964, -0.012766806408762932, -0.002067938446998596, -0.003245645435526967, -0.03439127653837204, 0.02707836963236332, 0.012537503615021706, -0.01652618683874607, -0.014340643770992756, 0.016250018030405045, 0.01622823067009449, 0.007254108786582947, 0.007564661558717489, -0.08753670006990433, -0.0034415097907185555, -0.0001854768634075299, 0.017000027000904083, 0.07363010942935944, 0.06315892934799194, 0.02516038715839386, -0.04341426491737366, 0.04476932808756828, 0.0039048625621944666, 0.045914921909570694, 0.038272757083177567, 0.028858991339802742, 0.012520289048552513, -0.03233812004327774, -0.06801489740610123, 0.001077952329069376, 0.01700330153107643, -0.046311549842357635, 0.016096781939268112, -0.017024187371134758, -0.013681155629456043, -0.020259033888578415, 0.009823138825595379, -0.030949437990784645, 0.024887708947062492, -0.2655019760131836, 0.01781987026333809, -0.027392029762268066, 0.04575493559241295, 0.013285131193697453, -0.02190336212515831, 0.04716045409440994, -0.0662388876080513, 0.003873287932947278, 0.01077338308095932, 0.06534672528505325, 0.07477006316184998, 0.027110900729894638, -0.07235737144947052, -0.0021709944121539593, -0.04244140163064003, 0.030769366770982742, 0.028130365535616875, 0.11854127794504166, 0.00770930340513587, 0.0037381125148385763, -0.009200614877045155, 0.22166138887405396, 0.05537151172757149, 0.020944876596331596, 0.011985710822045803, 0.002911004703491926, -0.026735374704003334, 0.04013708606362343, 0.009837783873081207, -0.026697231456637383, -0.0021316322963684797, 0.11268631368875504, -0.023584039881825447, -0.0035882582888007164, -0.02126145362854004, 0.05199549347162247, 0.051028236746788025, -0.04550109803676605, -0.00399100873619318, 0.017566079273819923, 0.07571709156036377, -0.06281860917806625, 0.023389732465147972, 0.06605137139558792, -0.011926756240427494, 0.02490868791937828, -0.047068383544683456, -0.06041700392961502, 0.027387309819459915, -0.027409112080931664, -0.042425572872161865, -0.02289818599820137, -0.0031667170114815235, 0.014416799880564213, 0.06426598876714706, 0.004171430598944426, 0.03281634673476219, -0.011708296835422516, -0.027502240613102913, -0.03765564039349556, 0.016616610810160637, 0.08054818212985992, -0.0017921471735462546, 0.002950732596218586], "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fc82f45a-94bd-4023-86ca-38b5b26554ff", "node_type": "4", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "1a0764ed9a15c6f1286a2f45e7fcc1d528e443ee129f48fed44f286e9f44e789", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8894a184-3cfb-4dce-9564-eec38f60e98b", "node_type": "1", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "627102b14cf1c4a88d05a03732e90f1ce34f318c95eec49fba78d3f5489ff63c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8dcfc01f-d0c9-47d9-a845-498cbed2de26", "node_type": "1", "metadata": {}, "hash": "1431dcea2ac8a5d3782009ea08eea6c490e7758819510ad58b41bfca47312c79", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "private Map<Integer, Double> loadPopularity(String path) {\n        // Reads popularity.json into the popularityMap\n        try { /* ... file reading logic ... */ }\n        catch (IOException e) { /* ... error handling ... */ }\n        return new HashMap<>(); // Return empty if loading fails\n    }\n\n    // ... reRank method ...\n}\n```\nWhen `ReRanker.reRank` is called, it combines the initial search score (`tfIdfScore`), the book's rating, and now also the `popularityScore` to calculate a `finalScore`:\n\n**`src/main/java/features/search/ReRanker.java` (Snippet from `reRank` method)**\n```java\n// Inside ReRanker class\npublic List<SearchResult> reRank(List<SearchResult> tfIdfResults, String query) {\n    List<SearchResult> reRankedResults = new ArrayList<>();\n\n    for (SearchResult oldResult : tfIdfResults) {\n        int docId = oldResult.getDocId();\n        Book book = bookMap.get(docId); // Get the book details\n\n        double tfIdfScore = oldResult.getScore();\n        double normalizedRating = book.getRating() / 5.0; // Scale rating from 0 to 1\n        double popularityScore = popularityMap.getOrDefault(docId, 0.0); // Get our popularity score!\n\n        // --- The MASTER FORMULA now includes popularity! ---\n        double finalScore = (W_TFIDF * tfIdfScore) +\n                            (W_RATING * normalizedRating) +\n                            (W_POPULARITY * popularityScore); // Add popularity weight\n\n        // ... (title boosts and other re-ranking logic) ...\n\n        reRankedResults.add(new SearchResult(docId, finalScore));\n    }\n    // ... (sorting by finalScore) ...\n    return reRankedResults;\n}\n```\nBy adding `W_POPULARITY * popularityScore` to the `finalScore`, DevShelf now makes sure that books that are currently trending (have higher popularity scores) appear higher in the search results, even if their initial `tfIdfScore` wasn't the absolute highest.\n\n#### 2. Providing Trending Recommendations: The `Graph`\n\nThe `Graph` component (from [Search Enhancement & Recommendations](07_search_enhancement___recommendations_.md)) uses this popularity data to provide smarter recommendations.", "mimetype": "text/plain", "start_char_idx": 14219, "end_char_idx": 16340, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "8dcfc01f-d0c9-47d9-a845-498cbed2de26", "embedding": [-0.026804178953170776, 0.008881662972271442, -0.03024674952030182, -0.022537874057888985, 0.04246283695101738, 0.023185210302472115, -0.037703607231378555, 0.05144181102514267, 0.06436651200056076, 0.004405003506690264, 0.023505423218011856, -0.016008786857128143, 0.04443291202187538, 0.08510204404592514, 0.004006501752883196, 0.06496619433164597, 0.06206836551427841, 0.0091467360034585, -0.03680156543850899, -0.02329505980014801, 0.03985404968261719, 0.06226498261094093, 0.038722846657037735, -0.047435734421014786, 0.03821268305182457, -0.006544775329530239, -0.03996051847934723, -0.06678858399391174, -0.05693184211850166, -0.18816590309143066, -0.007783506065607071, -0.01879541575908661, 0.10146018862724304, 0.022997654974460602, -0.0963684618473053, 0.014844183810055256, 0.07786774635314941, -0.010657928884029388, 0.018275104463100433, -0.025156201794743538, -0.012579667381942272, 0.012508982792496681, -0.01822357252240181, -0.013229848816990852, -0.031411346048116684, 0.020839665085077286, 0.017661340534687042, 0.0046971747651696205, -0.031125826761126518, 0.017271613702178, 0.0040880367159843445, -0.03690732270479202, -0.0028644963167607784, 0.052690744400024414, 0.016020486131310463, 0.0075462269596755505, 0.036989726126194, 0.07435734570026398, -0.013755970634520054, 0.07564467936754227, 0.0479690283536911, -0.009782949462532997, -0.09177093207836151, 0.02515256404876709, -0.02231001667678356, -0.023096555843949318, -0.029405707493424416, 0.009417498484253883, -0.05645452067255974, 0.09663550555706024, 0.009095870889723301, 0.026535602286458015, 0.01278070081025362, 0.086374931037426, 0.013358601368963718, 0.01951962150633335, -0.004864546470344067, -0.040671709924936295, 0.01710352674126625, -0.016626480966806412, -0.0397270992398262, 0.005678354296833277, 0.005188868381083012, -0.07982528209686279, 0.046077385544776917, -0.019085580483078957, 0.021919770166277885, -0.012881293892860413, -0.0034902868792414665, 0.027957679703831673, 0.01581791788339615, -0.045753363519907, -0.006115609779953957, -0.0027568864170461893, -0.04232789948582649, -0.015399791300296783, -0.013032597489655018, 0.00646638311445713, 0.01233510859310627, 0.3321854770183563, -0.027246946468949318, 0.0200482290238142, -0.02696026675403118, 0.03267931565642357, -0.0013485224917531013, -0.1319560706615448, 0.08983030170202255, -0.0412156768143177, 0.03214552253484726, 0.019688047468662262, 0.0009301163372583687, -0.06414995342493057, 0.019393835216760635, -0.07112617045640945, 0.04245283827185631, 0.015181554481387138, 0.008498127572238445, 0.057397887110710144, 0.04625105857849121, -0.016194719821214676, -0.03434964641928673, 0.010219278745353222, 0.03031347505748272, 0.014392363838851452, 0.0407094806432724, 0.0034267432056367397, -0.03806588798761368, 0.024532455950975418, 0.03714785724878311, -0.0068337684497237206, 0.017928635701537132, 0.03813675791025162, -0.12222873419523239, -0.01017322950065136, -0.020143067464232445, 0.030042240396142006, 0.005295625422149897, -0.06829596310853958, 0.04282344505190849, 0.02269023284316063, 0.007327511440962553, 0.03136156126856804, 0.03411915898323059, -0.03637087717652321, -0.08297262340784073, 0.12008360773324966, 0.007795673795044422, -0.010556635446846485, -0.01384844072163105, -0.02709931693971157, -0.004819042980670929, 0.006059695966541767, -0.008482960052788258, -0.027763037011027336, 0.011830500327050686, 0.03970213979482651, 0.06352505087852478, 0.010405290871858597, -0.06098020821809769, -0.029296819120645523, -0.03838229551911354, 0.030230022966861725, -0.06308316439390182, 0.051008548587560654, -0.015578114427626133, -0.07791164517402649, -0.01392427459359169, -0.03245501592755318, -0.07531829923391342, 0.015276191756129265, -0.035432782024145126, 0.0444064736366272, 0.013990241102874279, 0.08218325674533844, 0.036830395460128784, 0.045052774250507355, -0.036033451557159424, -0.07019119709730148, 0.03735029324889183, -0.0022779060527682304, 0.06873802095651627, -0.032643772661685944, -0.016326500102877617, 0.0647508054971695, -0.031965821981430054, 0.0020027169957756996, -0.0675165206193924, -0.0068421801552176476, -0.017002245411276817, 0.04652329161763191, -0.05166317895054817, -0.05436759069561958, -0.024060437455773354, 0.019076848402619362, 0.05764235556125641, -0.029025740921497345, -0.03164032846689224, -0.0060907211154699326, -0.0047758715227246284, -0.03439987823367119, -0.017934748902916908, -0.007535497657954693, -0.012432516552507877, 0.011059016920626163, -0.037755824625492096, 0.02186645194888115, 0.046506717801094055, -0.0643959641456604, 0.07743886858224869, -0.06093558669090271, -0.08873270452022552, -0.059055473655462265, -0.0709269568324089, -0.013893191702663898, -0.06517446041107178, 0.01497850101441145, 0.030753761529922485, 0.04663555696606636, 0.016803467646241188, 0.07060281932353973, 0.011422454379498959, -0.002833171281963587, -0.04136756435036659, -0.30318498611450195, 0.012424029409885406, 0.017613505944609642, -0.019063737243413925, 0.02671566791832447, -0.049129173159599304, 0.019920675083994865, -0.052515704184770584, -0.005288125481456518, 0.09265836328268051, 0.04017911106348038, -0.044855404645204544, -0.03780829906463623, -0.033712927252054214, 0.004559292923659086, 0.009573821909725666, -0.040171656757593155, -0.04974312335252762, -0.028987588360905647, -0.05259370803833008, 0.0046483478508889675, 0.005689780693501234, 0.016877757385373116, -0.07023438811302185, 0.0050154016353189945, 0.042927540838718414, 0.07417414337396622, 0.008074313402175903, -0.0356576107442379, -0.04770631343126297, 0.024119466543197632, 0.02133474312722683, -0.05351639911532402, -0.031017256900668144, 0.019152851775288582, 0.016291605308651924, 0.02368600107729435, -0.018827248364686966, -0.10977011919021606, -0.01859072782099247, 0.002369852736592293, 0.011205612681806087, 0.010786597616970539, -0.03467804193496704, -0.03277670219540596, -0.031872108578681946, 0.07123694568872452, -0.02616114914417267, 0.014262125827372074, 0.08967547118663788, -0.019272418692708015, 0.08881790935993195, 0.012829311192035675, 0.029608801007270813, -0.009151093661785126, -0.03587885946035385, -0.021507475525140762, 0.006465368904173374, -0.01632034219801426, -0.013427738100290298, 0.0009217592887580395, -0.0262148380279541, 0.036302801221609116, -0.035857949405908585, 0.008545389398932457, -0.020140912383794785, -0.04132969677448273, 0.06983914971351624, -0.02325650490820408, 0.05215628817677498, -0.09435034543275833, 0.002047636779025197, -0.05333656072616577, 0.05194210633635521, 0.034179866313934326, 0.04786916449666023, 0.060184113681316376, -0.007464563474059105, -0.02818492241203785, -0.025317994877696037, 0.01763329654932022, 0.0005458618979901075, 0.04189964383840561, 0.004735872149467468, 0.00507652061060071, -0.060736287385225296, 0.05804422125220299, -0.013776273466646671, 0.011679875664412975, 0.03917982429265976, -0.044890373945236206, -0.0377793163061142, -0.028134100139141083, -0.010928015224635601, 0.0061520980671048164, -0.01765233464539051, -0.2861733138561249, 0.002474770648404956, -0.010112404823303223, 0.05206765979528427, 0.0040608616545796394, -0.04316040873527527, 0.04136385768651962, -0.03906618803739548, 0.022677652537822723, 0.051208801567554474, 0.01902821660041809, 0.0686153843998909, 0.02871169149875641, -0.06106196343898773, -0.038497865200042725, 0.016998762264847755, 0.05151711404323578, -0.013830970041453838, 0.06469974666833878, 0.010990099050104618, 0.07163415849208832, -0.013289892114698887, 0.2165469527244568, 0.07909120619297028, 0.037781696766614914, -0.0007634934154339135, -0.00456312857568264, -0.023408886045217514, 0.021630246192216873, -0.007744172587990761, 0.024119079113006592, -0.031350310891866684, 0.08570683002471924, -0.04094758629798889, -0.003353868378326297, 0.023255357518792152, -0.022996746003627777, 0.02213326096534729, -0.013673516921699047, -0.012291357852518559, 0.029415974393486977, 0.005293402820825577, -0.043094851076602936, 0.0030504600144922733, 0.06775061041116714, -0.01507120206952095, 0.00012125272769480944, -0.03924531489610672, -0.028490833938121796, 0.028102321550250053, -0.016467787325382233, -0.04937565699219704, -0.013565579429268837, -0.018849056214094162, 0.030952539294958115, 0.04656398296356201, 0.017283407971262932, 0.07183514535427094, -0.024883277714252472, -0.025014406070113182, 0.0030627972446382046, -0.018368257209658623, 0.05911773443222046, 0.0443783737719059, 0.04344348609447479], "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fc82f45a-94bd-4023-86ca-38b5b26554ff", "node_type": "4", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "1a0764ed9a15c6f1286a2f45e7fcc1d528e443ee129f48fed44f286e9f44e789", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "aa50750c-f4fd-48f6-882e-7d095d1691e3", "node_type": "1", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "d55bb380acc35b8ca5f4c14a171937ba7e92501abd03d7d0379ab14dacaa11d5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3157dcb3-62a2-42ab-822e-9e290ca06552", "node_type": "1", "metadata": {}, "hash": "61c7f7f04c9c5d7b28e8f79ed7b80630d2e4e9efbd05458b975ee3eadf1a0f3e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#### 2. Providing Trending Recommendations: The `Graph`\n\nThe `Graph` component (from [Search Enhancement & Recommendations](07_search_enhancement___recommendations_.md)) uses this popularity data to provide smarter recommendations. When suggesting books related to a specific title, it can now prioritize those related books that are also highly popular.\n\n**`src/main/java/features/recommendation/Graph.java` (Snippet from `recommendPopularBooks` method)**\n```java\npackage features.recommendation;\n\nimport domain.Book;\nimport java.util.*;\n\npublic class Graph {\n\n    // ... graph building logic ...\n\n    public List<String> recommendPopularBooks(String bookTitle, int limit, Map<Integer, Double> popularityMap) {\n        String key = normalize(bookTitle); // Clean the input book title\n        Map<String, Double> relatedBooks = adjList.getOrDefault(key, Collections.emptyMap());\n        List<String> result = new ArrayList<>(relatedBooks.keySet());\n\n        final double ALPHA = 0.7; // How much emphasis on relevance vs. popularity (70% relevance, 30% popularity)\n\n        // Sort the related books based on a combined score\n        result.sort((a, b) -> {\n            double relA = relatedBooks.getOrDefault(a, 0.0); // Relevance score for book A\n            double relB = relatedBooks.getOrDefault(b, 0.0); // Relevance score for book B\n\n            // Get popularity scores from the map\n            double popA = popularityMap != null\n                    ? popularityMap.getOrDefault(titleToId.getOrDefault(a, -1), 0.0)\n                    : 0.0;\n            double popB = popularityMap != null\n                    ? popularityMap.getOrDefault(titleToId.getOrDefault(b, -1), 0.0)\n                    : 0.0;\n\n            // Combine relevance and popularity to get a final recommendation score\n            double scoreA = ALPHA * relA + (1 - ALPHA) * popA;\n            double scoreB = ALPHA * relB + (1 - ALPHA) * popB;\n\n            return Double.compare(scoreB, scoreA); // Sort from highest score to lowest\n        });\n\n        return result.subList(0, Math.min(limit, result.size())); // Return top recommendations\n    }\n}\n```\nHere, the `recommendPopularBooks` method takes the `popularityMap` as an input.", "mimetype": "text/plain", "start_char_idx": 16109, "end_char_idx": 18320, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "3157dcb3-62a2-42ab-822e-9e290ca06552", "embedding": [-0.05392935499548912, 0.017069565132260323, -0.013126678764820099, -0.022677093744277954, 0.030334239825606346, -0.03171083703637123, 0.002916626865044236, -0.015668941661715508, 0.1064743623137474, -0.01842893473803997, -0.030911969020962715, 0.028622476384043694, 0.018568145111203194, 0.02119634859263897, 0.002303862012922764, 0.020226433873176575, 0.016434716060757637, -0.011441772803664207, -0.017082542181015015, -0.003641956951469183, 0.03947514668107033, 0.01726618967950344, 0.02687489427626133, -0.07714265584945679, 0.04188423603773117, 0.06848639249801636, -0.07877284288406372, -0.06857255101203918, -0.03724633902311325, -0.2178090512752533, -0.007815033197402954, -0.023573575541377068, 0.0874418169260025, -0.027977678924798965, -0.06200404465198517, -0.0014523317804560065, 0.04576648771762848, -0.00046731505426578224, 0.04448951780796051, -0.01450409460812807, 0.01232774555683136, 0.0153324194252491, 0.004574134014546871, 0.02334688976407051, -0.0009537529549561441, -0.008884240873157978, -0.03584516793489456, -0.0015167577657848597, -0.03594566881656647, 0.03004823811352253, -0.0069971345365047455, -0.05864235386252403, -0.045305944979190826, 0.05392541363835335, 0.029620567336678505, 0.02239515446126461, 0.021729854866862297, 0.07640988379716873, 0.01354556530714035, 0.08544623851776123, 0.05205207318067551, -0.008947649970650673, -0.10744302719831467, 0.037944160401821136, 0.006268365774303675, -0.03275349736213684, -0.04036332294344902, -0.027652518823742867, -0.05762731656432152, 0.06252267956733704, -0.030628234148025513, 0.013610894791781902, 0.04489564895629883, 0.08681680262088776, 0.019807899370789528, 0.006670815404504538, -0.007899152114987373, -0.01904294453561306, -0.015470964834094048, 0.011631552129983902, -0.028322681784629822, 0.0006873514503240585, -0.015509847551584244, -0.017447104677557945, 0.02376992255449295, 0.04073501005768776, 0.037442196160554886, 0.0003032160457223654, 0.003953895997256041, -0.014147528447210789, 0.03952227905392647, -0.06757258623838425, 0.02484462410211563, -0.004308357834815979, 0.0031936317682266235, -0.01757555827498436, -0.023425184190273285, 0.033176273107528687, 0.07844051718711853, 0.3733604848384857, -0.0038208377081900835, 0.018168209120631218, -0.03727439418435097, -0.00817937683314085, 0.021636443212628365, -0.07577285170555115, 0.0657133162021637, -0.04904826357960701, -0.00267985463142395, -0.0027650860138237476, 0.03851533308625221, -0.034609921276569366, 0.00795133225619793, -0.07917649298906326, 0.047030817717313766, 0.02905891090631485, 0.015504623763263226, 0.03457939997315407, 0.06736013293266296, -0.033446572721004486, 0.016113726422190666, 0.009443632327020168, 0.038910239934921265, -0.004121629986912012, 0.04586074501276016, 0.008744393475353718, 0.03162891045212746, 0.05118311941623688, -0.0239611454308033, -0.03192967176437378, 0.023644661530852318, -0.00899544358253479, -0.1186460331082344, -0.023035911843180656, -0.005578980781137943, 0.020461158826947212, -0.02192625217139721, 0.0057663987390697, 0.023361636325716972, 0.04586615040898323, 0.024813156574964523, 0.02255869470536709, 0.035442907363176346, -0.002699523698538542, -0.06074047461152077, 0.15543784201145172, 0.061462197452783585, -0.01755080558359623, -0.02398865483701229, -0.050569429993629456, 0.015156973153352737, 0.02491890639066696, -0.052584994584321976, -0.06222783774137497, 0.0035208219196647406, 0.028348509222269058, 0.03513302654027939, -0.007363110315054655, 0.010179799981415272, -0.03820948675274849, -0.0666777566075325, -0.007188983261585236, -0.048045650124549866, 0.034533292055130005, -0.04595896974205971, -0.08570113033056259, 0.04549778625369072, 0.03851780667901039, -0.0755501314997673, -0.018065249547362328, -0.009373095817863941, 0.019490962848067284, -0.037825342267751694, 0.06344897300004959, 0.028825385496020317, -0.01818278804421425, 0.004827342461794615, -0.0528644323348999, 0.015733512118458748, 0.014201846905052662, 0.07578161358833313, -0.06077515333890915, -0.06257519870996475, 0.03834907338023186, -0.04530387744307518, 0.004586856812238693, -0.021186674013733864, -0.024090515449643135, -0.012372730299830437, 0.05099862441420555, -0.006066149566322565, 0.005301665980368853, -0.01766129583120346, 0.03922858461737633, 0.024607932195067406, -0.03525082394480705, -0.03836481273174286, -0.01975693181157112, -0.04160650074481964, -0.007380649913102388, 0.012419615872204304, 0.002274337224662304, -0.027762552723288536, -0.04240158945322037, 6.070598101359792e-05, 0.04365351423621178, -0.009927415288984776, -0.057592298835515976, 0.0563792958855629, -0.031018221750855446, -0.043738339096307755, -0.06264003366231918, -0.0933656319975853, -0.019006870687007904, -0.03637721389532089, 0.0008768619154579937, 0.00021557156287599355, 0.06514812260866165, -0.022551611065864563, 0.057168781757354736, -0.026837768033146858, -0.011227541603147984, -0.014659489504992962, -0.2968016564846039, -0.031727295368909836, 0.026102153584361076, 0.01033732295036316, -0.012573848478496075, -0.045776013284921646, 0.02921219915151596, -0.024288790300488472, -0.008164863102138042, 0.11008045822381973, 0.08549151569604874, -0.0024758821818977594, -0.010731267742812634, 0.009901067242026329, -0.018690209835767746, 0.00858594011515379, -0.05771278217434883, -0.015371234156191349, -0.037562333047389984, 0.0031298785470426083, 0.01712588220834732, -0.017673460766673088, 0.037349168211221695, -0.06317004561424255, 0.015235630795359612, 0.014634466730058193, 0.05316542088985443, 0.009431022219359875, -0.0013407234800979495, -0.02124335803091526, 0.02615286596119404, 0.0478481687605381, -0.044172968715429306, -0.013440974988043308, 0.0013130567967891693, 0.03246397525072098, 0.012630404904484749, -0.015501745045185089, -0.0863465964794159, -0.020467892289161682, -0.04883180558681488, 0.04468598961830139, 0.04596893489360809, -0.04797656834125519, -0.05636787787079811, -0.010098102502524853, 0.047241345047950745, -0.03449435159564018, 0.009463083930313587, 0.04335611313581467, -0.006821837276220322, 0.028592512011528015, -0.002043325686827302, 0.028448747470974922, -0.03743449226021767, -0.03721044212579727, -0.04544921964406967, 0.020791735500097275, -0.05007054656744003, -0.009468314237892628, -0.027246026322245598, -0.02549847774207592, 0.0040112570859491825, -0.033156465739011765, 0.03680215775966644, -0.03340417891740799, -0.016690485179424286, 0.05171995609998703, 0.03271423652768135, 0.0284495297819376, -0.06137784197926521, 0.027361832559108734, -0.046416379511356354, 0.0252836886793375, 0.05392972007393837, 0.005948169156908989, 0.0395067073404789, -0.0041633783839643, -0.031383730471134186, 0.020888803526759148, 0.023815542459487915, 0.0018968591466546059, 0.02094894088804722, 0.001078684814274311, 0.0009633511072024703, -0.07613001018762589, 0.07480336725711823, 0.011487786658108234, -0.021755816414952278, -0.000983596546575427, -0.04685250669717789, -0.003952905535697937, -0.008459921926259995, -0.05295795202255249, -0.04140148684382439, 0.030852939933538437, -0.3118908703327179, -0.006824347656220198, -0.032070908695459366, 0.061170727014541626, 0.029024111106991768, -0.048382312059402466, 0.06273343414068222, -0.042133063077926636, 0.04032863304018974, -0.0029760173056274652, 0.04165002703666687, 0.05405928194522858, -0.008738847449421883, -0.06878368556499481, -0.02232033759355545, 0.02668311819434166, 0.0741373747587204, -0.016444014385342598, 0.037383485585451126, -0.010486804880201817, 0.06941428780555725, -0.008425820618867874, 0.19077631831169128, 0.08762375265359879, 0.03722488880157471, 0.004710095468908548, 0.034810736775398254, -0.02728607878088951, 0.03414387255907059, 0.00496910884976387, -0.004178790841251612, -0.030672753229737282, 0.10155277699232101, -0.017441492527723312, -0.02002469263970852, -0.010079613886773586, 0.01197765115648508, 0.025873154401779175, 0.025525782257318497, -0.038692303001880646, 0.02022869512438774, 0.02682298794388771, -0.06163860484957695, -0.0049916827119886875, 0.08100888133049011, -0.009194190613925457, -0.019904568791389465, -0.03525722026824951, -0.03941072151064873, 0.003809693269431591, 0.003153223544359207, -0.04381541907787323, 0.010539297014474869, -0.0024823518469929695, 0.0194321870803833, 0.050642941147089005, -0.006341449450701475, 0.06516823172569275, 0.046447303146123886, -0.015806367620825768, -0.008637147024273872, 0.040777791291475296, 0.06945888698101044, 0.029107622802257538, 0.012852943502366543], "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fc82f45a-94bd-4023-86ca-38b5b26554ff", "node_type": "4", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "1a0764ed9a15c6f1286a2f45e7fcc1d528e443ee129f48fed44f286e9f44e789", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8dcfc01f-d0c9-47d9-a845-498cbed2de26", "node_type": "1", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "1dac69d70373c0dc2b6e566c45de54f72db8652a75f097e7d1b955779deccf54", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5c2f2544-3263-4f8b-946c-7368a07cd1c7", "node_type": "1", "metadata": {}, "hash": "557c21191b4a2320e26f5c98e33437c75a7926c67477f45e429833e35439bf0c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "It calculates a `scoreA` and `scoreB` for two books `A` and `B` by blending their intrinsic \"relevance\" (how strongly they are related to the original book) with their `popularity` score. This means that if two books are equally related, the more popular one will be recommended first!\n\n### Summary of User Interaction & Analytics Components\n\n| Component           | Role                                              | When it runs                                   | Data Processed/Produced                 | Used by                                |\n| :------------------ | :------------------------------------------------ | :--------------------------------------------- | :-------------------------------------- | :------------------------------------- |\n| `LoggingService`    | Records user clicks on books.                     | **Real-time** (during application use)         | `LogEntry` objects -> `logs.json`       | `DevShelfService` (called by UI)       |\n| `LogAnalyzerMain`   | Processes raw click logs to calculate popularity. | **Offline** (run separately, e.g., nightly)    | `logs.json` -> `popularity.json`        | No direct user, prepares data for others |\n| `LogEntry`          | A single data record of a user's click.           | Created by `LoggingService`                    | Stores `query`, `clickedDocId`, `timestamp` | `LoggingService`, `LogAnalyzerMain`    |\n| `popularity.json`   | Stores calculated popularity scores for each book. | Output of `LogAnalyzerMain`                    | Map of `BookID` to `PopularityScore`    | `ReRanker`, `Graph`                    |\n\n### Conclusion\n\nIn this chapter, we explored \"User Interaction & Analytics,\" the hidden assistant that helps DevShelf learn from your behavior. We discovered:\n*   The `LoggingService` actively records your clicks on books, saving them as `LogEntry` objects in the `logs.json` file.\n*   The `LogAnalyzerMain` is an offline tool that processes these raw `logs.json` files, counting clicks and calculating a normalized popularity score for each book, which is then saved to `popularity.json`.\n*   These crucial `popularity.json` scores are then used by other parts of DevShelf, like the `ReRanker` to boost trending books in search results and the `Graph` to provide popularity-aware recommendations.", "mimetype": "text/plain", "start_char_idx": 18321, "end_char_idx": 20617, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "5c2f2544-3263-4f8b-946c-7368a07cd1c7", "embedding": [-0.05714673548936844, 0.0421367846429348, -0.0019946617539972067, -0.004219050519168377, 0.05457134172320366, 0.020514708012342453, 0.001699910731986165, 0.024587180465459824, 0.04628468677401543, 0.013780361041426659, -0.008287033997476101, 0.033056627959012985, 0.04948105663061142, 0.02892901934683323, -0.043304067105054855, -0.0010709407506510615, 0.007136426866054535, 0.013492309488356113, -0.09990095347166061, -0.04918304830789566, 0.04994995519518852, 0.05019398033618927, 0.02912519872188568, -0.08676956593990326, 0.0124515937641263, 0.02049286477267742, -0.02040250413119793, -0.022667139768600464, -0.04727945104241371, -0.18802134692668915, 0.006565652322024107, -0.06224905326962471, 0.06766068935394287, 0.01883835718035698, -0.07988876104354858, -0.021295467391610146, 0.028452279046177864, -0.011170885525643826, 0.030606133863329887, 0.05030285567045212, 0.0025879854802042246, 0.015344238840043545, -0.013752341270446777, 0.020204072818160057, -0.03295296058058739, 0.02545078471302986, -0.04971051216125488, 0.005154798738658428, -0.05604230612516403, 0.019945772364735603, -0.047402869910001755, -0.06071411818265915, 0.0016246719751507044, 0.0351133793592453, 0.06306400150060654, 0.040534988045692444, 0.03559482470154762, 0.09307153522968292, 0.016846656799316406, 0.03890501707792282, 0.0602712444961071, -0.039855800569057465, -0.0788678452372551, 0.05523448437452316, -0.007640557829290628, 0.01751062273979187, -0.017363261431455612, -0.042866338044404984, -0.07493726909160614, 0.05469976365566254, 0.022236382588744164, 0.0707225576043129, 0.0030371681787073612, 0.08451272547245026, 0.023581668734550476, 0.03452129662036896, -0.03680749610066414, -0.04978836700320244, 0.026751186698675156, 0.04737591743469238, -0.0003903056203853339, -0.04429455101490021, 0.0021648025140166283, -0.05265765264630318, 0.010148771107196808, -0.03442364186048508, 0.027639998123049736, -0.02483367547392845, 0.028334544971585274, 0.008153294213116169, 0.026273885741829872, -0.03791066259145737, 0.02302144281566143, 0.06557149440050125, -0.04569507762789726, -0.005693626124411821, -0.0008620136068202555, 0.03571242094039917, 0.030752336606383324, 0.3492203652858734, -0.018485404551029205, 0.0521726980805397, -2.3858705390011892e-05, -0.04872773587703705, -0.024627745151519775, -0.09187428653240204, 0.03900063410401344, -0.012234210036695004, 0.04651559516787529, -0.007224573753774166, 0.02234479784965515, -0.04078461974859238, 0.026342319324612617, -0.04105944558978081, 0.032750051468610764, -0.01865317113697529, -0.02425236627459526, 0.03611276298761368, 0.021234558895230293, -0.014514566399157047, -0.015005719847977161, 0.022289207205176353, 0.012710037641227245, -0.01503029465675354, 0.05967226251959801, 0.054930180311203, -0.04259540140628815, 0.05320174992084503, 0.0023254675325006247, 0.008569561876356602, -0.06250312924385071, -0.028833486139774323, -0.11565730720758438, -0.017582308501005173, -0.004668793641030788, 0.022285910323262215, -0.046901848167181015, -0.04146433621644974, 0.023645950481295586, 0.04906843230128288, 0.013150461949408054, 0.06544263660907745, 0.03898144140839577, -0.001247270731255412, -0.06314574927091599, 0.10115610063076019, 0.031381756067276, 0.05914585664868355, 0.014593076892197132, 0.01836923509836197, 0.004127569030970335, 0.0701509639620781, -0.027762610465288162, -0.07160098105669022, 0.01732555590569973, 0.05459155887365341, 0.023571955040097237, -0.0018551414832472801, -0.012965255416929722, -0.03291136771440506, -0.08431614190340042, -0.011312645860016346, -0.004620833322405815, 0.04379110038280487, -0.04973798617720604, -0.0942019522190094, -0.03155089542269707, -0.00048461160622537136, -0.10303816199302673, -0.033707715570926666, -0.024654582142829895, 0.026515798643231392, -0.0481686033308506, 0.042950794100761414, 0.01526657398790121, 0.0023369044065475464, -0.04587603732943535, -0.04656408354640007, 0.051096972078084946, -0.023575501516461372, 0.012595987878739834, -0.020518828183412552, -0.03834950178861618, 0.05240057781338692, -0.040593285113573074, -0.017953073605895042, -0.03158659487962723, -0.03578084707260132, 0.025364601984620094, 0.031090760603547096, -0.04699641466140747, -0.026890182867646217, 0.01361819077283144, 0.011643697507679462, 0.07590673118829727, -0.025941483676433563, -0.0233857911080122, 0.01753486506640911, -0.016937505453824997, -0.01198024395853281, -0.009269124828279018, 0.025459052994847298, 0.01045520044863224, 0.030018478631973267, -0.03876030445098877, -0.005077674984931946, 0.028520086780190468, -0.05262645334005356, 0.04392765089869499, -0.06418842822313309, -0.07310907542705536, -0.004661683924496174, -0.08128547668457031, -0.004118533339351416, -0.03801073133945465, -0.012581521645188332, -0.033188872039318085, 0.03423740714788437, -0.017105499282479286, 0.030932795256376266, -0.03127486631274223, -0.019250502809882164, -0.02820521406829357, -0.3234562575817108, 0.02460361272096634, 0.023998703807592392, -0.024107925593852997, 0.03989076241850853, -0.04342649504542351, 0.04748774319887161, -0.005377364344894886, -0.017034102231264114, 0.06665530800819397, 0.06303809583187103, -0.02753463387489319, -0.02092437632381916, -0.011194327846169472, 0.0009329870226792991, 0.017784954980015755, -0.04684997722506523, -0.0685877874493599, -0.026322629302740097, 0.004097123630344868, 0.0090184910222888, -0.01622409000992775, 0.013819271698594093, -0.08740560710430145, 0.04610086977481842, -0.013998627662658691, 0.07991494983434677, 0.06926491856575012, 0.017282530665397644, -0.07837051153182983, 0.08106834441423416, 0.033359162509441376, -0.05327902361750603, -0.030655058100819588, 0.028470031917095184, -0.014018034562468529, 0.03915935382246971, 0.005924852564930916, -0.038983047008514404, 0.020036937668919563, 0.031226636841893196, -0.009524532593786716, 0.04174943268299103, -0.04119640216231346, -0.03063114359974861, -0.022380080074071884, 0.00689890468493104, -0.0390300378203392, 0.01396087184548378, 0.05378318578004837, -0.027555467560887337, 0.05992183834314346, 0.059667304158210754, 0.05208950862288475, -0.04997241124510765, -0.037192218005657196, -0.03679538145661354, -0.054351501166820526, -0.05033285543322563, -0.005675939843058586, -9.667143604019657e-05, -0.001614749664440751, -0.010336223989725113, -0.02203761227428913, 0.025774285197257996, -0.03714974597096443, 0.01863659732043743, 0.06177101656794548, -0.008052853867411613, -0.006985377985984087, -0.06188768520951271, 0.016807127743959427, -0.035568784922361374, 0.05233157053589821, 0.06642594188451767, 0.07802174985408783, 0.009443338960409164, -0.02406218834221363, 0.014262658543884754, -0.0099935969337821, 0.026241566985845566, 0.04083595424890518, 0.009370208717882633, -0.035831429064273834, 0.023193983361124992, -0.042548470199108124, 0.01231695432215929, -0.003305487334728241, -0.013665243983268738, 0.007579432800412178, -0.07457190006971359, -0.019761035218834877, -0.0226890929043293, -0.032346222549676895, -0.015030676499009132, 0.047364696860313416, -0.2849465608596802, 0.024168146774172783, -0.017436809837818146, 0.024894798174500465, 0.06698861718177795, 0.022275565192103386, 0.024674972519278526, -0.06123703345656395, 0.03170696273446083, 0.01570737361907959, 0.006631132680922747, 0.08628229051828384, 0.017223620787262917, -0.1029311791062355, 0.020814331248402596, 0.028083747252821922, 0.05214352905750275, -0.021637244150042534, 0.07044960558414459, -0.04563482850790024, 0.046673718839883804, 0.014259721152484417, 0.2109757512807846, 0.07450557500123978, -0.015509398654103279, 0.01108755636960268, 0.009870173409581184, -0.006991592235863209, -0.019827064126729965, 0.010152597911655903, 0.03072669729590416, -0.01861482299864292, 0.08030538260936737, 0.026500020176172256, -0.012752889655530453, -0.008763996884226799, -0.012830845080316067, -0.011313112452626228, -0.004743944387882948, -0.04366059601306915, 0.030914127826690674, 0.04857796058058739, -0.04750795662403107, 0.006629823241382837, 0.07169413566589355, -0.008177279494702816, -0.013654735870659351, -0.0777726098895073, -0.027446668595075607, 0.027534689754247665, 0.01736447587609291, -0.05496375635266304, 0.04389777034521103, -0.016642972826957703, -0.0001903921365737915, 0.03257261961698532, 0.03073035180568695, 0.06583108752965927, 0.008441631682217121, 0.017398962751030922, 0.00973097700625658, 0.005784804932773113, 0.027609780430793762, 0.027197713032364845, 0.00770854065194726], "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fc82f45a-94bd-4023-86ca-38b5b26554ff", "node_type": "4", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "1a0764ed9a15c6f1286a2f45e7fcc1d528e443ee129f48fed44f286e9f44e789", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3157dcb3-62a2-42ab-822e-9e290ca06552", "node_type": "1", "metadata": {"file_name": "Chapter 6 User Interaction & Analytics.md"}, "hash": "f7d5911928dbfcbdc18c432c8256fb79295a91daaa25cd4e7fdf8d350312223b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "*   These crucial `popularity.json` scores are then used by other parts of DevShelf, like the `ReRanker` to boost trending books in search results and the `Graph` to provide popularity-aware recommendations.\n\nThis dynamic feedback loop ensures that DevShelf isn't just a static library but an intelligent system that adapts to what users are actually interested in, making your next search even more relevant and exciting!\n\nNext, we'll dive deeper into how DevShelf takes all these pieces\u2014search results, popularity, and relationships between books\u2014to enhance your overall search experience.\n\n[Next Chapter: Search Enhancement & Recommendations](07_search_enhancement___recommendations_.md)", "mimetype": "text/plain", "start_char_idx": 20410, "end_char_idx": 21100, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "348a97e3-aad2-4edc-a390-a19c7a78f9a6", "embedding": [-0.0633639544248581, -0.012022404931485653, -0.026553267613053322, 0.019639477133750916, 0.050773195922374725, -0.014052195474505424, -0.039080023765563965, 0.02526811510324478, 0.0009353861096315086, 0.005761334206908941, 0.005892178043723106, 0.003970087040215731, 0.01625788025557995, 0.013016918674111366, -0.008517314679920673, 0.0020766756497323513, 0.013353669084608555, 0.018385913223028183, -0.07664874941110611, -0.03744876757264137, 0.04700889065861702, 0.03010772168636322, 0.026186494156718254, -0.08495848625898361, -0.01714087650179863, 0.021288320422172546, -0.01613311842083931, -0.025263549759984016, -0.03249232843518257, -0.2054721713066101, 0.00798189826309681, 0.02165350690484047, 0.09664306044578552, -0.004614316392689943, -0.030023379251360893, -0.030589153990149498, 0.04370897263288498, 0.013169663026928902, 0.03624960035085678, 0.02651076950132847, 0.017327433452010155, -0.0035281165037304163, -0.007442415226250887, 0.07734990864992142, -0.009507055394351482, 0.015656333416700363, -0.018493711948394775, -0.011683625169098377, -0.045484330505132675, -0.023745743557810783, -0.10155647993087769, -0.01740455813705921, 0.002235791878774762, 0.018721159547567368, 0.030924411490559578, -0.0061818379908800125, 0.025710707530379295, 0.07777255773544312, -4.147888103034347e-05, -0.02380777709186077, 0.03832561895251274, -0.01946338452398777, -0.0843546986579895, 0.06811229139566422, 0.0027789876330643892, 0.015106960199773312, 0.006071174517273903, -0.07419457286596298, -0.010088915005326271, 0.022151855751872063, -0.001032874220982194, 0.05347084626555443, -0.013901852071285248, 0.06898324936628342, 0.008154716342687607, 0.03466140478849411, 0.014114674180746078, -0.03583468869328499, 0.06189211085438728, 0.001964365830644965, -0.016324961557984352, -0.0375242717564106, 0.0360100083053112, -0.039245497435331345, -0.015462600626051426, -0.017483307048678398, 0.056765392422676086, 0.025774721056222916, 0.030571864917874336, 0.003438170300796628, 0.05750149115920067, -0.02934400551021099, 0.02956274338066578, 0.040563181042671204, -0.010665037669241428, 0.004713844042271376, 0.00850299559533596, 0.048776775598526, 0.008714024908840656, 0.4208814203739166, -0.04353071376681328, 0.07499393075704575, -0.02275129407644272, -0.017241762951016426, 0.0015527226496487856, -0.08699379116296768, 0.0550471767783165, 0.015897266566753387, 0.028162330389022827, -0.030587509274482727, 0.01345917396247387, -0.07002823799848557, 0.06213083118200302, -0.03294574096798897, 0.012756370939314365, 0.001953589264303446, 0.019891051575541496, 0.009458063170313835, 0.010957833379507065, -0.007392105180770159, -0.0250904131680727, -0.029050545766949654, 0.029786020517349243, 0.03199136629700661, 0.055754635483026505, -0.017683204263448715, -0.05162988603115082, 0.08991607278585434, -0.007478892337530851, 0.018598470836877823, -0.014612067490816116, 0.009363864548504353, -0.11320389062166214, -0.008886953815817833, 0.03668737784028053, 0.05226996913552284, -0.05125115066766739, -0.014595367014408112, 0.01953607052564621, 0.027458446100354195, 0.006834164261817932, 0.032482363283634186, 0.029691115021705627, -0.023954596370458603, -0.07434271275997162, 0.09601456671953201, 0.04457270726561546, 0.018705125898122787, -0.038223668932914734, -0.044944774359464645, 0.019013330340385437, 0.05223354697227478, -0.02954144775867462, -0.06213384121656418, 0.02466743066906929, 0.047026317566633224, 0.11354448646306992, 0.009319501928985119, -0.03875035047531128, -0.025247182697057724, -0.06539306044578552, 0.02041628211736679, -0.02689359523355961, 0.06580698490142822, -0.03481366112828255, -0.10162801295518875, -0.03580278158187866, -0.010687241330742836, -0.11100322753190994, 0.0015286136185750365, -0.0021568427328020334, -0.012908758595585823, -0.04220821335911751, 0.06225808337330818, 0.019382964819669724, -0.03755534440279007, -0.059123747050762177, -0.02952677384018898, 0.027067717164754868, 0.01831073872745037, 0.017628969624638557, -0.01821727119386196, -0.006607381626963615, 0.022969555109739304, -0.045994993299245834, -0.05083362013101578, -0.03438061475753784, -0.010378142818808556, 0.003360319184139371, 0.05031641200184822, -0.038043662905693054, -0.0008822875679470599, 0.010638625361025333, 0.0010026415111497045, 0.014855430461466312, -0.020842837169766426, -0.027037350460886955, -0.007548260502517223, -0.0002513020299375057, 0.005823312792927027, -0.02333683706820011, 0.012291512452065945, -0.0242574755102396, 0.035499874502420425, -0.032311297953128815, -0.003086248878389597, 0.005788764916360378, -0.051652226597070694, 0.1110614463686943, -0.0019508374389261007, 0.005697634071111679, -0.026751676574349403, -0.03525615856051445, -0.023924140259623528, -0.05399356037378311, -0.0253178458660841, 0.0019871911499649286, 0.03935442119836807, -0.040129370987415314, 0.01401372067630291, -0.01926707848906517, -0.004580928012728691, -0.07433468848466873, -0.2874441146850586, 0.03150166571140289, 0.00015658883785363287, -0.03117559850215912, 0.027070803567767143, -0.09140312671661377, 0.03981617093086243, -0.022295504808425903, -0.02557167038321495, 0.04660489782691002, 0.0725489929318428, -0.0423574298620224, -0.03359540179371834, -0.005410021636635065, 0.027837079018354416, 0.02908589132130146, 0.016142066568136215, -0.020491814240813255, -0.08344345539808273, -0.019284125417470932, 0.02228757180273533, -0.013094514608383179, 0.017515959218144417, -0.12299682945013046, -0.000805956544354558, -0.004212826956063509, 0.08530168980360031, 0.042943257838487625, 0.04065677523612976, -0.026097634807229042, 0.038405079394578934, 0.032721925526857376, -0.054123036563396454, -0.08783918619155884, -0.023265810683369637, 0.011322987265884876, 0.047238532453775406, 0.0004519305075518787, -0.032710328698158264, 0.005061033647507429, 0.04131656885147095, 0.014266455546021461, 0.03579657897353172, -0.025681013241410255, -0.06328140944242477, -0.022054309025406837, -0.015363088808953762, -0.04424380138516426, 0.002321501960977912, 0.061967168003320694, -0.043867077678442, 0.07530506700277328, 0.03149143233895302, 0.008233100175857544, -0.07532421499490738, -0.03476732224225998, -0.04073360934853554, -0.048021599650382996, -0.0068259406834840775, -0.010122987441718578, 0.01771733909845352, -0.006573076825588942, -0.0281290952116251, -0.019328486174345016, 0.030073892325162888, -0.04722299799323082, -0.032379399985075, 0.013243629597127438, 0.04301498830318451, -0.004461410455405712, -0.06191207841038704, 0.04331604391336441, -0.03787636384367943, 0.021782679483294487, 0.019791308790445328, 0.08466315269470215, 0.0437859371304512, 0.027234993875026703, -0.0027765980921685696, -0.03518732637166977, 0.020565764978528023, 0.01772346720099449, 0.07207535952329636, -0.041542068123817444, 0.028803205117583275, -0.030271140858530998, 0.03337209299206734, -0.002572336234152317, 0.015351961366832256, 0.03367912024259567, -0.08021651953458786, -0.011021280661225319, 0.014860864728689194, -0.049719829112291336, 0.045701608061790466, 0.06615288555622101, -0.2527737319469452, 0.008791419677436352, 0.02065248228609562, 0.01934121735394001, 0.01017167791724205, -0.01627025008201599, 0.054309334605932236, -0.0802806094288826, 0.061463069170713425, -0.00905467290431261, 0.0020792027935385704, 0.03162655979394913, 0.002278563566505909, -0.09858601540327072, 0.03095465898513794, 0.028706593438982964, 0.1130504384636879, -0.024954497814178467, 0.028820456936955452, 0.02730066329240799, 0.04572143778204918, 0.01858149655163288, 0.16137279570102692, 0.032491255551576614, 0.03117319382727146, -0.0019451346015557647, -0.006776006426662207, -0.052777569741010666, -0.025757355615496635, 0.03513401001691818, -0.006477849557995796, -0.05059149116277695, 0.0046941302716732025, -0.03147372230887413, -0.026548238471150398, 0.014130045659840107, -0.01610819809138775, -0.01415123138576746, 0.007588226813822985, -0.05091322958469391, 0.03220212087035179, 0.0314052514731884, -0.03378001227974892, 0.041005704551935196, 0.06678305566310883, -0.022763578221201897, 0.01850387640297413, -0.0679134726524353, -0.01218469813466072, 0.03248037397861481, 0.016931528225541115, -0.01799585670232773, 0.026991918683052063, -0.0032123529817909002, 0.040911849588155746, 0.03694961592555046, 0.025518184527754784, 0.031732168048620224, -0.007981250062584877, 0.015535031445324421, 0.01942305453121662, -0.035372573882341385, 0.09557672590017319, 0.026511386036872864, 0.05378245562314987], "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ee1bf574-7fb4-4b01-9027-03a50c180ec0", "node_type": "4", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "ca97d476ee0e14a74f8b324ad696d47cb18b6cdba386ea4f4b3c67d12343d8d3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b3226c57-7f18-4a89-961f-8ee61a217233", "node_type": "1", "metadata": {}, "hash": "27e4611a224775b1082c3f9e1e4e4e55c6af565b43e3c489ed8ebc3a2ea8e1a7", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Welcome back to DevShelf! In our last chapter, [User Interaction & Analytics](06_user_interaction___analytics_.md), we learned how DevShelf quietly observes your clicks to understand which books are truly popular. We also saw how this popularity data can already start making search results smarter.\n\nNow, imagine you walk into a library and ask for a book. A good librarian doesn't just point to the shelf. They might:\n1.  **Lead you to the most popular version** if several exist.\n2.  Say, \"**Did you mean** 'Clean Code' instead of 'Clen Cod'?\" if you misspelled.\n3.  Suggest, \"**If you liked** 'Effective Java', you might also enjoy 'Clean Code'!\"\n\nThis is exactly what **Search Enhancement & Recommendations** is about in DevShelf. It's the \"savvy librarian\" intelligence that takes the raw search results and makes them more helpful, intuitive, and personalized.\n\n### The Problem: Basic Search Isn't Enough\n\nThe [Core Search Engine](05_core_search_engine_.md) is excellent at finding books based on keywords, but it only gives us a basic list. What if:\n*   You type a query like \"pyton\" (misspelled)? The basic search might find nothing.\n*   You search for \"Java,\" and there are 20 Java books. Which ones should appear at the very top? Just the ones with the most keyword matches, or also the ones people actually *click on* and highly rate?\n*   You've found a great book, say \"The Pragmatic Programmer.\" How can DevShelf tell you about *other similar great books* you might not have known to search for?\n\nOur \"Search Enhancement & Recommendations\" abstraction solves these problems by adding layers of intelligence on top of the basic search.\n\n**Our central use case:** You type \"python maching learning\" (misspelled \"machine learning\") into DevShelf. We want DevShelf to:\n1.  **Suggest** \"Python Machine Learning\" if your original query yields poor results.\n2.  **Re-rank** the suggested results to show the most popular and highly-rated \"Python Machine Learning\" books first, especially if their titles match perfectly.\n3.  If you click on one of these books, **recommend** other related and popular machine learning books.", "mimetype": "text/plain", "start_char_idx": 1, "end_char_idx": 2132, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "b3226c57-7f18-4a89-961f-8ee61a217233", "embedding": [-0.05891086161136627, -0.014473226852715015, -0.02691071480512619, 0.022979965433478355, 0.05282674357295036, -0.0016411053948104382, -0.06079700589179993, 0.00018196820747107267, 0.024183617904782295, 0.008075827732682228, 0.008188256993889809, 0.004988759756088257, 0.01707305759191513, 0.013678080402314663, 0.003811036003753543, 0.04618600383400917, 0.04512357711791992, 0.04738682135939598, -0.06484636664390564, -0.06427495181560516, 0.018248241394758224, 0.06637208163738251, 0.019891947507858276, -0.04656631872057915, 0.027878517284989357, 0.004268210846930742, -0.007651244290173054, -0.042265575379133224, -0.03498770669102669, -0.22675743699073792, -0.03530081361532211, 0.009801965206861496, 0.07068747282028198, 0.009130371734499931, -0.04397795349359512, 0.012537257745862007, 0.03568766266107559, 0.03571715205907822, 0.009761098772287369, -0.0029820878989994526, -0.005730627104640007, -0.0255367960780859, 0.007052270229905844, 0.01899772323668003, 0.019191153347492218, 0.017688944935798645, 0.0366804264485836, -0.02506117708981037, -0.006157096941024065, -0.024529581889510155, -0.030417460948228836, -0.04481729865074158, -0.016603289172053337, 0.05199528858065605, 0.03208537399768829, -0.014263498596847057, 0.07216574996709824, 0.08380077034235, -0.0014340404886752367, 0.024506453424692154, 0.045383889228105545, 0.02291850745677948, -0.11212452501058578, 0.06821993738412857, 0.01592283323407173, 0.016340943053364754, -0.01786041259765625, -0.036130547523498535, -0.04647395387291908, 0.09692680090665817, -0.03868790343403816, 0.029435254633426666, -0.008435431867837906, 0.08119715005159378, 0.0017373557202517986, 0.05647898092865944, 0.015576190315186977, -0.04402071610093117, 0.025403838604688644, 0.014867627993226051, -0.019319754093885422, -0.02789200469851494, -0.0012282438110560179, -0.08020492643117905, 0.0023094830103218555, -0.012746263295412064, 0.006669259630143642, 0.03620819002389908, 0.0409737303853035, -0.0003103280032519251, 0.04484189301729202, -0.05470075085759163, 0.03536601737141609, 0.0190719123929739, -0.018240977078676224, 0.004517158959060907, 0.0015586604131385684, 0.0754854753613472, 0.016641132533550262, 0.34441643953323364, -0.05019501969218254, 0.0883607268333435, -0.07499470561742783, -0.00990224163979292, 0.0016605474520474672, -0.11767755448818207, 0.07949604839086533, 0.009133598767220974, 0.03543723002076149, -0.005428797099739313, 0.007940605282783508, -0.035536203533411026, 0.04889778792858124, -0.05158534273505211, 0.0171726755797863, 0.05784955993294716, 0.05188267305493355, 0.03463316336274147, 0.046204227954149246, -0.0095801567658782, -0.032986607402563095, -0.016672169789671898, 0.008293960243463516, -0.016512982547283173, 0.006585795432329178, -0.022011583670973778, -0.018348541110754013, 0.09430552273988724, -0.02395438961684704, 0.020822929218411446, -0.015272997319698334, -0.013170245103538036, -0.09633239358663559, 0.01210025791078806, 0.013852952048182487, 0.031481217592954636, -0.06986162066459656, 0.012703236192464828, 0.023879768326878548, 0.014911271631717682, 0.006007917691022158, 0.011805364862084389, 0.00783403031527996, -0.01107692625373602, -0.09981825202703476, 0.119732566177845, -0.039947912096977234, -0.019298577681183815, -0.04787532985210419, -0.05040033534169197, 0.039339035749435425, 0.04424939677119255, -0.02382204495370388, -0.03701576218008995, 0.021593449637293816, 0.038630928844213486, 0.09847216308116913, -0.051676616072654724, -0.06689615547657013, -0.04184873774647713, -0.03903154283761978, 0.013939768075942993, -0.06588705629110336, 0.0852055773139, -0.008623572066426277, -0.08207357674837112, -0.010006961412727833, -0.03897540271282196, -0.10679509490728378, 0.025700246915221214, 0.011017611250281334, 0.0006646133260801435, -0.033663440495729446, 0.1077890545129776, 0.013995975255966187, -0.02650485746562481, -0.026585334911942482, -0.021740110591053963, 0.012129899114370346, 0.006158968899399042, 0.009768021292984486, -0.05703169107437134, -0.0288139209151268, 0.043164968490600586, -0.02933577261865139, 0.008479904383420944, -0.02922133542597294, -0.02117420919239521, -0.0033159605227410793, 0.05850759521126747, -0.045593470335006714, -0.018392503261566162, -0.0005867190193384886, 0.02079756185412407, 0.020091375336050987, -0.01446620188653469, -0.0308613833039999, -0.018352575600147247, -0.004333603195846081, -0.01946420967578888, -0.022842254489660263, 0.015850596129894257, 0.012409070506691933, 0.014712249860167503, -0.013118320144712925, 0.045299429446458817, 0.022610070183873177, -0.08997973054647446, 0.10967858880758286, -0.019457979127764702, -0.049285292625427246, -0.022377392277121544, -0.030320852994918823, -0.05664467811584473, -0.02075839787721634, -0.004214874003082514, 0.03871697187423706, 0.034347161650657654, -0.06168949604034424, 0.04317726194858551, -0.011103048920631409, -0.029609138146042824, -0.06260707974433899, -0.29114270210266113, -0.023059546947479248, -0.024775788187980652, -0.011636344715952873, 0.004570957738906145, -0.083986297249794, 0.052271768450737, -0.006895699072629213, -0.0012220790376886725, 0.054704878479242325, 0.028963839635252953, -0.05156715586781502, -0.04901791363954544, -0.0038684774190187454, 0.00102238857652992, 0.037304844707250595, 0.013426738791167736, -0.02459731511771679, -0.05900707095861435, -0.026070203632116318, 0.0431085042655468, 0.013511961326003075, 0.05797534063458443, -0.09259562194347382, 0.05195881426334381, 0.0054740565828979015, 0.08280383050441742, -0.00959019921720028, 0.004546099808067083, -0.016122959554195404, 0.04106990993022919, 0.0375424399971962, -0.025170467793941498, -0.0592416450381279, 0.014374644495546818, 0.024599138647317886, 0.044916730374097824, -0.012023449875414371, -0.054154761135578156, -0.0230097696185112, 0.015723006799817085, 0.020265916362404823, 0.021182246506214142, -0.024130498990416527, -0.046156078577041626, 0.00017240115266758949, -0.010562390089035034, -0.02100258506834507, 0.020118428394198418, 0.0813589096069336, -0.04284895583987236, 0.0446401871740818, -0.0021666281390935183, 0.009782925248146057, -0.05104147642850876, -0.01923193782567978, -0.06323415786027908, -0.035514947026968, -0.02993169054389, -0.013341082260012627, 0.024779463186860085, -0.02840990014374256, 0.001247317180968821, -0.04877651482820511, 0.02326097898185253, -0.06766734272241592, 0.0015191772254183888, 0.05466447398066521, 0.03214246407151222, 0.031049394980072975, -0.06687403470277786, 0.004309237003326416, -0.0061370679177343845, 0.04288453981280327, 0.0483056977391243, 0.07360488176345825, 0.008343087509274483, 0.000518342771101743, -0.0008042620029300451, -0.04796129837632179, 0.01063286978751421, 0.007732802536338568, 0.06391246616840363, 0.0019198422087356448, 0.0431542694568634, -0.057826604694128036, 0.0354197733104229, 0.0038593383505940437, 0.024367615580558777, 0.09270399063825607, -0.06680309772491455, -0.00366429565474391, -0.02794959396123886, -0.0022209258750081062, 0.04941749945282936, 0.028996843844652176, -0.25474855303764343, -0.003221968188881874, 0.002124155405908823, 0.0684329941868782, 0.026009663939476013, -0.050832364708185196, 0.05325561389327049, -0.07271323353052139, 0.06738374382257462, -0.02463693544268608, 0.03557993099093437, 0.049067068845033646, 0.016651665791869164, -0.0945948138833046, 0.0005326296668499708, -0.025049278512597084, 0.08498051017522812, -0.02536853589117527, 0.01173427514731884, 0.015610719099640846, 0.019292615354061127, -0.010672533884644508, 0.18527153134346008, 0.050001367926597595, 0.011691535823047161, -0.011931253597140312, 0.0032823109067976475, -0.042185746133327484, -0.014477184973657131, 0.0010406458750367165, 0.029669422656297684, -0.03404466062784195, 0.08986012637615204, 0.010347379371523857, 0.0009043586323969066, 0.03332122787833214, -0.01727653294801712, -0.009675196371972561, 0.007860396057367325, -0.039619188755750656, 0.021440749987959862, 0.031091416254639626, -0.07617907971143723, -0.002934821415692568, 0.058818988502025604, -0.04266771674156189, 0.014737257733941078, -0.05726892128586769, -0.05864446610212326, 0.02185048721730709, 0.018570002168416977, -0.02163962833583355, 0.014779985882341862, -0.01864343322813511, 0.04644044488668442, 0.05567160248756409, -0.013504422269761562, 0.03844565898180008, -0.03509943559765816, 0.01746227592229843, -0.008606054820120335, -0.03078756481409073, 0.08350358158349991, 0.02173270843923092, 0.022811749950051308], "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ee1bf574-7fb4-4b01-9027-03a50c180ec0", "node_type": "4", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "ca97d476ee0e14a74f8b324ad696d47cb18b6cdba386ea4f4b3c67d12343d8d3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "348a97e3-aad2-4edc-a390-a19c7a78f9a6", "node_type": "1", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "a226c883e59038df4867c6b56de7edc32cdae47314fadfbc9ac99946afb8c4b5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "05c22777-a877-4d4d-a2f6-ff8459a3751b", "node_type": "1", "metadata": {}, "hash": "91989bd7e24b998e7a95be7fa4cfc17913774faf966405bc75ddc9a2a3f88b38", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "3.  If you click on one of these books, **recommend** other related and popular machine learning books.\n\n### Key Enhancements from Our Savvy Librarian\n\nDevShelf's savvy librarian has three main tools to enhance your search experience:\n\n1.  **Re-Ranker**: Makes initial search results smarter by blending multiple factors.\n2.  **Suggester**: Offers \"Did you mean?\" suggestions for misspelled queries.\n3.  **Graph**: Recommends related books based on similarities and popularity.\n\nLet's look at each one.\n\n### 1. Making Search Results Smarter: The `ReRanker`\n\nEven after the [Core Search Engine](05_core_search_engine_.md) gives us initial results, the order might not be perfect. The `ReRanker` component is like a special filter that re-sorts the books based on a combination of factors, not just how many times your keywords appear.\n\nIt considers:\n*   **Initial Relevance Score (TF-IDF)**: How well keywords match (from [Core Search Engine](05_core_search_engine_.md)).\n*   **Book's Rating**: How good users rated the book (from [Book (Domain Model)](02_book__domain_model__.md)).\n*   **Popularity**: How many times users have clicked this book (from [User Interaction & Analytics](06_user_interaction___analytics_.md)).\n*   **Exact Title Match**: A special boost if the book's title exactly matches or closely relates to your search query.\n\n#### How `ReRanker` Works (High-Level)\n\nWhen you search, the `QueryProcessor` (our basic search engine) finds an initial list of books. The `ReRanker` then takes this list and for each book, calculates a new \"final score\" by combining all the factors above. Books with higher final scores move to the top!\n\n#### Example: Boosting \"Clean Code\" for a \"clean code\" query\n\nIf you search for \"clean code\", a book titled \"Clean Code\" should definitely appear at the top. Even if another book has many mentions of \"clean\" and \"code\" in its description, an exact title match usually means it's what you're looking for. The `ReRanker` gives a big boost to exact title matches.", "mimetype": "text/plain", "start_char_idx": 2029, "end_char_idx": 4039, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "05c22777-a877-4d4d-a2f6-ff8459a3751b", "embedding": [-0.08614099025726318, 0.033391840755939484, -0.05745450779795647, -0.001011027954518795, 0.024531006813049316, -0.06866566836833954, -0.0008358005434274673, -0.02760457992553711, 0.02545505203306675, 0.02969333902001381, 0.006767744198441505, -0.008184359408915043, 0.026310229673981667, -0.007082454394549131, -0.047273632138967514, 0.04045906662940979, 0.026585206389427185, 0.04321066290140152, -0.02659597434103489, -0.029674245044589043, 0.05873261019587517, 0.02743416652083397, -0.004837307613343, -0.05388118326663971, 0.05057695135474205, 0.009828043170273304, -0.04110843315720558, -0.043304041028022766, -0.027059366926550865, -0.20442523062229156, -0.07174962013959885, 0.0015047764172777534, 0.07451086491346359, 0.03443970903754234, -0.02375497855246067, 0.016535745933651924, 0.025014063343405724, 0.010658664628863335, -0.0024600839242339134, -0.0010728129418566823, -0.03052329458296299, -0.019493309780955315, 0.00896167941391468, 0.048172593116760254, 0.0011577786644920707, 0.012164686806499958, 0.02342263050377369, -0.009964657947421074, -0.03172989934682846, -0.01847650296986103, 0.01085731852799654, -0.02555035427212715, -0.03131944313645363, 0.06416738033294678, 0.01155070774257183, 0.022967087104916573, 0.06894617527723312, 0.04560956358909607, 0.010346529074013233, 0.05251823365688324, 0.02734006568789482, -0.02965507283806801, -0.10102137923240662, 0.07638514041900635, 0.016712358221411705, 0.04358116537332535, -0.05561720207333565, -0.0555046983063221, -0.018836181610822678, 0.05770178884267807, -0.019717475399374962, 0.028715210035443306, 0.02636943757534027, 0.0921785905957222, 0.009145925752818584, 0.032468199729919434, -0.020933546125888824, -0.05477076768875122, -0.006904669106006622, 0.03409290313720703, -0.03602612391114235, -0.06836139410734177, -0.038530133664608, -0.03239688649773598, 0.013187225908041, 0.020999666303396225, -0.02294892631471157, 0.05660412460565567, 0.08708534389734268, 0.006345988716930151, 0.0448865182697773, -0.046013783663511276, 0.02820724993944168, -0.0023191876243799925, -0.022221790626645088, 0.008503749966621399, -0.019293375313282013, 0.0769764855504036, 0.03211130574345589, 0.3611917495727539, -0.05180435627698898, 0.0477716401219368, -0.1034945547580719, -0.017432784661650658, 0.051311761140823364, -0.05418017506599426, 0.07473184168338776, 0.003932006657123566, 0.05099973827600479, -0.0006505260826088488, 0.003970177844166756, -0.013540977612137794, 0.06680836528539658, -0.04880598187446594, 0.03679735213518143, 0.06297504156827927, 0.0325506292283535, 0.021958373486995697, 0.03139321133494377, 0.00748427351936698, 0.016055023297667503, -0.02510911226272583, -0.03201042488217354, -0.036552440375089645, -0.007458734326064587, 0.022517697885632515, 0.005512776784598827, 0.04219988361001015, -0.06475019454956055, -0.021192260086536407, 0.07236126810312271, -0.006577779538929462, -0.06354796886444092, 0.04985819756984711, 0.0028619812801480293, 0.007062469143420458, -0.050007522106170654, 0.040151141583919525, -0.012762212194502354, 0.0005645661149173975, -0.0032742484472692013, -0.013908401131629944, -0.02487764321267605, 0.018901264294981956, -0.12149306386709213, 0.09752365201711655, -0.06512311100959778, 0.032012689858675, -0.08303999155759811, -0.0489414744079113, 0.015823831781744957, 0.03246060386300087, -0.006822227966040373, -0.02773997187614441, -0.00831316877156496, 0.018245955929160118, 0.09817100316286087, -0.04660782217979431, -0.03940426558256149, -0.06672116369009018, 0.006102319341152906, -0.0009121607872657478, -0.04263339936733246, 0.08123500645160675, -8.71977536007762e-05, -0.0643029659986496, 0.029191596433520317, -0.0038051975425332785, -0.110829196870327, 0.05134936794638634, -0.022983182221651077, -0.014984020963311195, -0.012119904160499573, 0.0330519899725914, 0.005927275400608778, -0.007597372401505709, -0.02591753378510475, -0.015482950955629349, 0.030043091624975204, 0.01335636805742979, -0.0008782210061326623, -0.059280507266521454, -0.06131592020392418, 0.06004995107650757, -0.009944530203938484, 0.019742771983146667, -0.049036454409360886, -0.023314334452152252, 0.03265159949660301, -0.0006959420279599726, -0.08239252865314484, -0.031368136405944824, -0.003558088792487979, 0.03943232074379921, 0.005485566332936287, -4.4783184421248734e-05, -0.0069832876324653625, -0.04288189113140106, 0.003316326765343547, -0.03698395565152168, -0.04522458091378212, 0.07096896320581436, 0.005302037578076124, -0.0005614471738226712, 0.055730439722537994, 0.05458050221204758, -0.016370629891753197, -0.11541572958230972, 0.06020436808466911, 0.012432238087058067, -0.0875353291630745, -0.014870242215692997, -0.0793033018708229, -0.0512387715280056, -0.0033738925121724606, -0.07057557255029678, 0.00836106576025486, 0.009195703081786633, -0.026631895452737808, 0.028125762939453125, -0.04235087335109711, -0.024825921282172203, -0.03092772327363491, -0.2724522650241852, 0.0030584651976823807, -0.018260017037391663, -0.018198298290371895, -0.004233815707266331, -0.05979461967945099, 0.012641927227377892, -0.026106756180524826, 0.005842515267431736, 0.039224326610565186, 0.0787523090839386, -0.02600475214421749, -0.020227154716849327, 0.024122733622789383, -0.006594125181436539, 0.02764802798628807, 0.014372093603014946, -0.029827577993273735, -0.04255170375108719, 0.022580036893486977, 0.07867534458637238, -0.0012168115936219692, 0.05564291402697563, -0.05929078161716461, 0.08430241793394089, 0.009863325394690037, 0.14600571990013123, 0.0002896301739383489, 0.06717421114444733, 0.0158391110599041, 0.018179133534431458, 0.014390798285603523, -0.04471452161669731, -0.07941637188196182, 0.02704957313835621, 0.008520134724676609, 0.020585332065820694, -0.043228838592767715, -0.04227426275610924, -0.027039481326937675, -0.016128482297062874, -0.02420922927558422, -0.0014156097313389182, -0.007012367248535156, -0.023059001192450523, -0.009316067211329937, -0.017544206231832504, -0.05997397005558014, -0.013903738930821419, 0.06064188480377197, -0.043258994817733765, 0.03448999300599098, 0.009187614545226097, 0.0150062907487154, -0.0020868091378360987, 0.009487694129347801, -0.034164827316999435, -0.0030757940839976072, -0.042034540325403214, -0.04581761360168457, 0.014697047881782055, -3.4852993849199265e-05, 0.0028424509800970554, -0.020165124908089638, 0.02626117877662182, -0.015493771061301231, 0.08422135561704636, 0.023093821480870247, 0.03752971068024635, 0.0030457191169261932, -0.07295611500740051, -0.010952431708574295, -0.021087301895022392, 0.027489889413118362, 0.04572980850934982, 0.045077886432409286, 0.01114328671246767, -0.04097010940313339, 0.03322841599583626, -0.057694271206855774, -0.0010062598157674074, 0.030638206750154495, 0.06634441763162613, 0.007653156295418739, 0.01806444674730301, -0.05182364955544472, 0.025357529520988464, 0.029180774465203285, 0.03356708213686943, 0.06538157165050507, -0.03448206186294556, 0.046892356127500534, -0.027740899473428726, -0.007395502179861069, 0.0011565035674721003, 0.03143056109547615, -0.2517779469490051, -0.021618874743580818, -0.02278379164636135, 0.06694459170103073, 0.024658069014549255, 0.011925757862627506, 0.05520059913396835, -0.008451891131699085, 0.01780729554593563, 0.0005278916214592755, 0.026915021240711212, 0.04189068824052811, 0.0009185246890410781, -0.08895723521709442, -0.005111502017825842, -0.0025371091905981302, 0.08187856525182724, -0.04857546463608742, 0.018894895911216736, 0.03143472969532013, 0.01622031256556511, -0.04498787596821785, 0.1991865038871765, 0.015443520620465279, 0.045746903866529465, 0.0010421493789181113, 0.01201712153851986, -0.042479097843170166, 0.018671978265047073, 0.027283508330583572, 0.01035301573574543, -0.0007232252391986549, 0.11240749806165695, 0.01899176649749279, -0.04325874522328377, 0.0337456539273262, 0.03902047872543335, -0.005901019554585218, 9.280796075472608e-05, -0.041889261454343796, -0.021063964813947678, 0.029315801337361336, -0.05987472087144852, -0.042278189212083817, 0.06404779851436615, -0.02171960100531578, -0.00036754654138348997, -0.04112400859594345, -0.08379871398210526, 0.005366388708353043, 0.024994496256113052, -0.005462199915200472, 0.012625422328710556, -0.044161923229694366, 0.02720552496612072, 0.04763907566666603, -0.0648437887430191, 0.021571235731244087, -0.0349242277443409, 0.0033255326561629772, -0.01166735589504242, 0.03466655686497688, 0.06389879435300827, 0.04351022467017174, 0.046811725944280624], "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ee1bf574-7fb4-4b01-9027-03a50c180ec0", "node_type": "4", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "ca97d476ee0e14a74f8b324ad696d47cb18b6cdba386ea4f4b3c67d12343d8d3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b3226c57-7f18-4a89-961f-8ee61a217233", "node_type": "1", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "1973e6611721fd5e34577054bec1b6a4da77efc9fdcc10b2bc33884ed02cfce6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "182ba943-fde5-470a-84c7-ef86e376a583", "node_type": "1", "metadata": {}, "hash": "55eef7c5f7f8443ff5486335325e2ac01f09e115a74d1ab38a331cd7f5bb9cc5", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Even if another book has many mentions of \"clean\" and \"code\" in its description, an exact title match usually means it's what you're looking for. The `ReRanker` gives a big boost to exact title matches.\n\n#### Under the Hood: The `ReRanker` in Action\n\nThe `ReRanker` is used by the `BookSearchEngine` (for CLI) or `DevShelfService` (for GUI) right after the `QueryProcessor` returns its initial results.\n\n```mermaid\nsequenceDiagram\n    participant User\n    participant App Service\n    participant QueryProcessor\n    participant ReRanker\n    participant Search Results\n\n    User->>App Service: \"Search: Clean Code\"\n    App Service->>QueryProcessor: search(\"Clean Code\")\n    Note over QueryProcessor: Returns initial results (Book 3, Book 17, Book 5...) with basic relevance scores\n    QueryProcessor-->>App Service: List<SearchResult> (TF-IDF scores)\n    App Service->>ReRanker: reRank(initialResults, \"Clean Code\")\n    loop For each SearchResult\n        ReRanker->>ReRanker: Calculate combined score (TF-IDF + Rating + Popularity)\n        ReRanker->>ReRanker: Check for \"Clean Code\" in book's title (e.g., Book 3's title is \"Clean Code\")\n        Note over ReRanker: If title matches, apply a HUGE boost to Book 3's score\n    end\n    ReRanker-->>App Service: List<SearchResult> (new, boosted scores, re-sorted)\n    App Service-->>User: Display re-ranked books (Book 3 now at the very top)\n```\n\n#### The `ReRanker` Class: Calculating the Master Score\n\nThe `ReRanker` takes the initial search results and adjusts their scores. Notice the `W_...` values, which are \"weights\" that determine how much each factor contributes, and the `EXACT_TITLE_BOOST`, `STARTS_WITH_BOOST`, `CONTAINS_BOOST` values for title matches.", "mimetype": "text/plain", "start_char_idx": 3837, "end_char_idx": 5548, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "182ba943-fde5-470a-84c7-ef86e376a583", "embedding": [-0.04930158704519272, 0.02625279501080513, -0.05628744512796402, -0.009480495937168598, 0.010480059310793877, -0.02508871629834175, -0.005168703850358725, 0.007562991697341204, 0.0766412541270256, -0.01474503893405199, 0.023117750883102417, -0.043468791991472244, 0.054380591958761215, 0.0366157665848732, -0.03250782936811447, 0.006754621397703886, 0.008314433507621288, 0.051884740591049194, -0.06254313886165619, -0.015832651406526566, 0.050627704709768295, 0.014208677224814892, 0.0045058890245854855, -0.05324539542198181, 0.062487032264471054, 0.0007433030987158418, -0.02900093048810959, -0.03758780658245087, -0.025140700861811638, -0.2193497270345688, -0.04807240515947342, -0.08569786697626114, 0.09606115520000458, 0.02006525546312332, -0.02026529423892498, 0.051436521112918854, -0.019973985850811005, 0.004608081188052893, -0.014657163992524147, -0.0009126905933953822, -0.0024041247088462114, -0.00029551697662100196, 0.0049159531481564045, 0.01250683143734932, -0.03823065012693405, -0.006700520869344473, 0.004576089791953564, -0.018742159008979797, -0.031125379726290703, 0.03004220873117447, 0.0019365670159459114, 0.008527691476047039, 0.003801662242040038, 0.06506176292896271, 0.000923608778975904, 0.021152904257178307, 0.07956397533416748, 0.08785969763994217, 0.012464486993849277, 0.012813282199203968, 0.022291190922260284, -0.02183430641889572, -0.1274712085723877, 0.02405143529176712, 0.020314157009124756, -0.015445172786712646, -0.04048221558332443, -0.030020475387573242, -0.03953729197382927, 0.05487213656306267, 0.030445493757724762, 0.046709731221199036, 0.048849109560251236, 0.03802524134516716, -0.0026956996880471706, 0.031339678913354874, -0.0362362265586853, -0.06274186819791794, 0.03516694903373718, 0.03526407107710838, -0.030189301818609238, -0.0030425216536968946, 0.004505585879087448, -0.04771055653691292, 0.012087211944162846, -0.001985883107408881, 0.014929442666471004, 0.022886762395501137, 0.025512607768177986, 0.041261978447437286, 0.005635422188788652, -0.07916443049907684, -0.044977180659770966, -0.0003912807151209563, -0.04064077511429787, -0.02574104629456997, -0.043646059930324554, 0.0036965194158256054, 0.02392296865582466, 0.3856525421142578, -0.019129876047372818, 0.052624352276325226, -0.062365803867578506, 0.0008731659618206322, 0.0046108439564704895, -0.06507162004709244, 0.021840300410985947, -0.007535810116678476, -0.00960925966501236, -0.013492146506905556, -0.007713077124208212, -0.03974335640668869, 0.019691910594701767, -0.05480008199810982, -0.008737780153751373, 0.03878224268555641, -0.018649253994226456, 0.02949533984065056, -0.0072612641379237175, 0.012513852678239346, -0.02072984352707863, -0.04266900569200516, 0.005597525741904974, 0.00014734553406015038, 0.04595167562365532, 0.048624686896800995, 0.0040983478538692, 0.060620397329330444, 0.007714999374002218, 0.008476341143250465, 0.029603153467178345, -0.035306476056575775, -0.07573900371789932, 0.04203082248568535, 0.008466892875730991, 0.01852482557296753, 0.015411393716931343, 0.0026555610820651054, 0.010396234691143036, 0.013928783126175404, 0.03488428518176079, -0.024539150297641754, 0.0011947744060307741, -0.029771657660603523, -0.13592612743377686, 0.1622748225927353, -0.046404555439949036, 0.03137478232383728, -0.02111412212252617, -0.061610471457242966, -0.031152687966823578, 0.007892482914030552, -0.04234885796904564, -0.03972360119223595, 0.005445102229714394, 0.03827385976910591, 0.06987316906452179, -0.03804830089211464, -0.02584201656281948, -0.06849794834852219, -0.03867262974381447, 0.03030965104699135, -0.04500112682580948, 0.08689184486865997, 0.026215607300400734, -0.009959439747035503, 0.03340458124876022, -0.014202922582626343, -0.0803067535161972, 0.041973523795604706, 0.010923830792307854, 0.005163149442523718, -0.011582507751882076, 0.04462587460875511, 0.058579687029123306, -0.017902957275509834, -0.0010611318284645677, -0.036888547241687775, 0.030899347737431526, -0.0006437470437958837, 0.06211892142891884, -0.020046958699822426, -0.08277720957994461, 0.04895932227373123, -0.019363315775990486, 0.01844080351293087, -0.06286131590604782, -0.05836515501141548, 0.021561142057180405, 0.04583491012454033, -0.05669435113668442, -0.03545363247394562, -0.06484097242355347, 0.008812932297587395, 0.047468554228544235, -0.02413303591310978, 3.781516716117039e-05, -0.02210199646651745, 0.035747647285461426, -0.018016790971159935, 0.02039261721074581, 0.06433482468128204, 0.032272014766931534, -0.016887450590729713, 0.020439421758055687, 0.02373102866113186, -0.02669350802898407, -0.056341324001550674, 0.032513611018657684, -0.025526801124215126, -0.06330087780952454, -0.04425008222460747, -0.0690184012055397, -0.030065156519412994, -0.004100262187421322, -0.04838072881102562, 0.03064493089914322, 0.016463840380311012, 0.0021379701793193817, 0.03561217337846756, -0.018193267285823822, -0.03465952351689339, -0.01725480519235134, -0.2893070876598358, 0.0020477366633713245, 0.02343842014670372, -0.03459008410573006, -0.01358069758862257, -0.047522928565740585, 0.0493425577878952, -0.007559908553957939, -0.02250131592154503, 0.05605078116059303, 0.08211664855480194, 0.009499737061560154, -0.04731297492980957, -0.04526861757040024, 0.0289593655616045, -0.006636306177824736, -0.02537049539387226, -0.01801369898021221, -0.0116569884121418, 0.00482263183221221, 0.04131413251161575, -0.00783938355743885, 0.026177121326327324, -0.03721451759338379, 0.07331429421901703, -0.016254780814051628, 0.11977099627256393, 0.015655213966965675, 0.000856030557770282, -0.023573534563183784, 0.05107775330543518, 0.01715945638716221, -0.055063918232917786, -0.00026230086223222315, 0.05123962461948395, -0.02542337216436863, -0.03892725706100464, -0.016540180891752243, -0.035107001662254333, -0.0006920222076587379, -0.012997862882912159, 0.01274771150201559, -0.016674213111400604, -0.054293230175971985, 0.007198702078312635, -0.0075580948032438755, 0.034522999078035355, -0.04490576311945915, 0.03642021492123604, 0.04707201570272446, -0.02831828035414219, 0.014686737209558487, 0.038778021931648254, 0.034482441842556, 0.021083924919366837, -0.02309718169271946, -0.03659484162926674, -0.02038239873945713, -0.030255470424890518, -0.02958243153989315, 0.019150953739881516, -0.034968115389347076, 0.02949473075568676, -0.014925782568752766, 0.024260010570287704, -0.01646358147263527, 0.051998380571603775, 0.034477293491363525, 0.0021899030543863773, -0.010922808200120926, -0.11700252443552017, -0.02854519709944725, -0.008407332934439182, 0.020420869812369347, 0.05388430878520012, 0.051751893013715744, -0.008839137852191925, -0.03713550791144371, 0.041400834918022156, 0.005283209960907698, -0.0046876235865056515, 0.006475367117673159, 0.08488574624061584, 0.010425807908177376, 0.005519404076039791, -0.05579133331775665, 0.046952590346336365, 0.023859091103076935, 0.04285098984837532, 0.08205446600914001, -0.07324645668268204, 0.0002950620255433023, 0.00835578516125679, 0.016647515818476677, -0.004968646448105574, 0.03404393792152405, -0.29105648398399353, -0.006909999996423721, 0.013359107077121735, 0.02253723330795765, 0.028467616066336632, -0.01209559291601181, 0.04495219513773918, -0.040510911494493484, -0.03585408255457878, 0.024306781589984894, 0.023326441645622253, 0.06137820705771446, -0.022996848449110985, -0.0751952975988388, 0.005280552431941032, 0.008894961327314377, 0.02708853781223297, -0.008007443509995937, 0.10716564208269119, 0.030981652438640594, -0.0021496328990906477, 0.009789942763745785, 0.19271863996982574, -0.002529322635382414, 0.032158076763153076, -3.1137195037445053e-05, 0.012718192301690578, -0.045527707785367966, 0.048250600695610046, 0.051940180361270905, -0.0008377339690923691, -0.029569998383522034, 0.13068132102489471, 0.016342133283615112, -0.022425878793001175, 0.062004029750823975, 0.03950648009777069, 0.0014266970101743937, -0.012770257890224457, -0.02116464637219906, 0.03644772246479988, 0.05130768194794655, -0.06749437004327774, -0.024530742317438126, 0.048151444643735886, -0.05755959078669548, 0.03953121230006218, -0.04609597846865654, -0.06297455728054047, 0.010203286074101925, -0.011504431255161762, -0.0060062105767428875, 0.022635048255324364, -0.03341351076960564, 0.02077469788491726, 0.004523743409663439, -0.03717590123414993, -0.005756188649684191, -0.01906181499361992, -0.027572939172387123, -0.033886317163705826, 0.0185293760150671, 0.044213805347681046, 0.04043124243617058, 0.04014882445335388], "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ee1bf574-7fb4-4b01-9027-03a50c180ec0", "node_type": "4", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "ca97d476ee0e14a74f8b324ad696d47cb18b6cdba386ea4f4b3c67d12343d8d3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "05c22777-a877-4d4d-a2f6-ff8459a3751b", "node_type": "1", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "ddf4a046906e272d29961a47dfe1a19990d3971c41bfdd266ced8203195484f8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "15c77077-75d6-44f4-a149-09d24a96c970", "node_type": "1", "metadata": {}, "hash": "137bf613fce552fe351af280a1216f2a833df549ceb0c4852f458377660be901", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Notice the `W_...` values, which are \"weights\" that determine how much each factor contributes, and the `EXACT_TITLE_BOOST`, `STARTS_WITH_BOOST`, `CONTAINS_BOOST` values for title matches.\n\n**`src/main/java/features/search/ReRanker.java` (Simplified `reRank` method)**\n```java\n// Inside ReRanker class\npublic List<SearchResult> reRank(List<SearchResult> tfIdfResults, String query) {\n    List<SearchResult> reRankedResults = new ArrayList<>();\n    String cleanQuery = query.trim().toLowerCase(); // For title matching\n\n    for (SearchResult oldResult : tfIdfResults) {\n        Book book = bookMap.get(oldResult.getDocId()); // Get book details\n        if (book == null) continue;\n\n        double tfIdfScore = oldResult.getScore();\n        double normalizedRating = book.getRating() / 5.0; // Scale rating 0-1\n        double popularityScore = popularityMap.getOrDefault(book.getBookId(), 0.0);\n\n        // 1. Calculate the base score\n        double finalScore = (W_TFIDF * tfIdfScore) +\n                            (W_RATING * normalizedRating) +\n                            (W_POPULARITY * popularityScore);\n\n        // 2. Apply tiered title boosts\n        if (book.getTitle() != null) {\n            String title = book.getTitle().toLowerCase();\n            if (title.equals(cleanQuery)) { finalScore += EXACT_TITLE_BOOST; }\n            else if (title.startsWith(cleanQuery)) { finalScore += STARTS_WITH_BOOST; }\n            else if (title.contains(cleanQuery)) { finalScore += CONTAINS_BOOST; }\n        }\n        reRankedResults.add(new SearchResult(book.getBookId(), finalScore));\n    }\n    Collections.sort(reRankedResults); // Sort by this new finalScore\n    return reRankedResults;\n}\n```\nThis code shows how the `ReRanker` cleverly combines different aspects of a book (relevance, rating, popularity) and then adds a significant boost if the book's title is a strong match to your query. The final list is then sorted by these new `finalScore`s.\n\n### 2. \"Did You Mean?\" Suggestions: The `Suggester`\n\nEver type something quickly and make a typo, only for a search engine to helpfully suggest the correct spelling?", "mimetype": "text/plain", "start_char_idx": 5360, "end_char_idx": 7477, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "15c77077-75d6-44f4-a149-09d24a96c970", "embedding": [-0.06661049276590347, 0.009144473820924759, -0.03853214532136917, 0.01068999245762825, -0.022886022925376892, -0.02627244032919407, -0.018624572083353996, 0.013656466268002987, 0.021968046203255653, 0.010254301130771637, 0.01512384507805109, -0.02560523711144924, 0.02096661552786827, 0.00910030584782362, 0.05140123516321182, -0.024324584752321243, 0.011226406320929527, 0.015818526968359947, -0.05063099041581154, -0.022686246782541275, 0.04806136339902878, 0.05219557508826256, 0.03735990822315216, -0.04213525354862213, -0.030123917385935783, 0.03562143072485924, -0.03408506512641907, -0.015610011294484138, -0.021056275814771652, -0.16745509207248688, 0.004133208189159632, -0.007937069982290268, 0.02305249497294426, -0.0025525770615786314, -0.05973357334733009, 0.06061810627579689, 0.009338435716927052, -0.036004289984703064, -0.007542117033153772, -0.009371788240969181, 0.028250619769096375, -0.00885692611336708, 0.021764062345027924, 0.046465370804071426, -0.005844593979418278, 0.031113874167203903, 0.010336514562368393, -0.0031664336565881968, -0.05475955456495285, -0.005510847549885511, -0.035143572837114334, -0.04153705760836601, 0.02945714443922043, -0.02215602807700634, 0.020687894895672798, 0.007762332446873188, 0.05235206335783005, 0.08037597686052322, 0.020831599831581116, -0.020650170743465424, 0.04549240320920944, -0.023939533159136772, -0.13608895242214203, 0.09799940884113312, -0.01052278932183981, 0.035895563662052155, -0.01823345758020878, -0.05724255368113518, -0.04271995648741722, 0.0737522542476654, 0.03422350808978081, 0.0024286392144858837, -0.10172561556100845, 0.03540751710534096, 0.007881861180067062, 0.01289763581007719, 0.0038289595395326614, 0.028369789943099022, 0.0301656536757946, 0.016701221466064453, -0.041789066046476364, -0.07862680405378342, -0.017883941531181335, -0.04179263114929199, -0.01446465216577053, -0.007358568720519543, -0.006144904997199774, 0.05199730023741722, 0.044020798057317734, -0.0532505139708519, 0.08547532558441162, -0.06806405633687973, 0.017959585413336754, 0.05605289712548256, -0.03128097206354141, 0.022794395685195923, 0.015863168984651566, 0.056850213557481766, -0.06467165797948837, 0.3740634024143219, -0.03439974784851074, 0.03967244178056717, -0.02745288610458374, -0.02898532897233963, 0.0073058330453932285, -0.09818857908248901, 0.025232510641217232, -0.009898141026496887, 0.02686932310461998, -0.005572902504354715, 0.015828832983970642, -0.06969855725765228, 0.07420264929533005, -0.026357626542448997, -0.012873856350779533, 0.04228055477142334, -0.0006896986742503941, 0.03996014967560768, -0.0024315332993865013, 0.01603870466351509, -0.006979409605264664, -0.012650092132389545, -0.007776545826345682, 0.047224998474121094, -0.014902758412063122, 0.01689903810620308, 0.026366399601101875, 0.008216707035899162, -0.005735558457672596, 0.0007236467208713293, -0.009094737470149994, -0.0040024081245064735, -0.06878311932086945, -0.003400480840355158, 0.014335920102894306, 0.04033198207616806, -0.05985720828175545, -0.03154938295483589, 0.04090647026896477, 0.001680839341133833, -0.006126055493950844, -0.038238316774368286, -0.009954153560101986, 0.06545542180538177, -0.07073630392551422, 0.08817265927791595, -0.03727308288216591, 0.014265581965446472, -0.013715806417167187, -0.0483577735722065, -0.013278394937515259, -0.012003729119896889, -0.05459284037351608, -0.07376209646463394, 0.025001535192131996, 0.05160950496792793, 0.11426636576652527, -0.057357389479875565, -0.021152455359697342, -0.0687088593840599, -0.010340221226215363, -0.030723784118890762, -0.04946206137537956, 0.029241012409329414, -0.007520861923694611, -0.055216606706380844, -0.09519529342651367, -0.024949494749307632, -0.08350349217653275, -0.01923741027712822, 0.009803338907659054, 0.023407960310578346, -0.04985975846648216, 0.026053613051772118, -0.01521910447627306, -0.0061925551854074, -0.039716918021440506, -0.02810363471508026, 0.12672708928585052, 0.026534775272011757, 0.03221745789051056, 0.04098694026470184, 0.008804729208350182, 0.0492471419274807, -0.05082688853144646, -0.04707752913236618, -0.06426826119422913, -0.04566236585378647, 0.024510126560926437, 0.06108839809894562, -0.034790873527526855, -0.05555352568626404, 0.04057621583342552, -0.04754266515374184, 0.03501342982053757, -0.008388867601752281, 0.007082456722855568, 0.010572833009064198, 0.021497054025530815, -0.01714613288640976, 0.012165028601884842, 0.03947275131940842, -0.0024070078507065773, 0.0096434336155653, -0.05472478270530701, 0.024806329980492592, 0.025891005992889404, -0.07553355395793915, 0.14200493693351746, 0.000756775145418942, -0.015696216374635696, -0.05381437763571739, -0.009000244550406933, -0.011903599835932255, -0.03826615959405899, -0.024404427036643028, -0.030211331322789192, 0.019860340282320976, 0.000269431562628597, 0.013570770621299744, 0.0052216569893062115, -0.05512232333421707, -0.03478996083140373, -0.2982695996761322, -0.03561456874012947, 0.0004747714556287974, -0.0047346483916044235, -0.003909972961992025, -0.04964357987046242, 0.032282259315252304, 0.04021281376481056, 0.00684657646343112, 0.022171625867486, -0.020792679861187935, -0.01974121853709221, 0.05311089754104614, -0.009888342581689358, 0.0241384357213974, 0.09582047909498215, 0.009941009804606438, -0.03680160269141197, -0.02165246196091175, 0.010983236134052277, 0.003430354641750455, 0.019755661487579346, 0.015122562646865845, -0.12441881000995636, 0.01864020712673664, -0.03144080191850662, 0.12095559388399124, 0.07438237220048904, 0.06896447390317917, -0.044923700392246246, 0.06283707916736603, 0.05796472355723381, -0.02730901539325714, -0.09315850585699081, -0.0276963971555233, 0.024714898318052292, 0.028035864233970642, -0.006404458079487085, -0.04822300001978874, 0.009381387382745743, 0.02598658576607704, 0.027037901803851128, 0.0063926177099347115, 0.021520083770155907, -0.055921539664268494, 0.026810597628355026, 0.0013174760388210416, -0.031164059415459633, -0.030101094394922256, 0.08909068256616592, -0.04177236557006836, 0.08739666640758514, -0.012963398359715939, 0.029922544956207275, -0.030138764530420303, -0.04317464306950569, -0.07413661479949951, -0.0354248508810997, 0.0157978106290102, -0.029006095603108406, 0.013765720650553703, 0.00987591128796339, 0.04521874710917473, -0.03444166108965874, 0.01704505831003189, -0.013757949694991112, 0.01839539222419262, -0.01954311691224575, 0.04548745974898338, 0.04041455313563347, -0.047907862812280655, 0.0740591287612915, -0.027751533314585686, 0.04129136726260185, 0.03208441287279129, 0.06116268411278725, 0.0425696037709713, -0.002526603639125824, -0.01530690398067236, -0.03643904998898506, 0.005488961469382048, 0.0015283436514437199, 0.05546478182077408, -0.013396844267845154, 0.018831517547369003, -0.026509586721658707, 0.030044320970773697, 0.0252985879778862, 0.0681958794593811, 0.02735576406121254, -0.047543395310640335, -0.005661808419972658, -0.0006815336528234184, 0.05071110278367996, 0.03966212645173073, -0.03279590979218483, -0.23391637206077576, 0.050492968410253525, 0.030429204925894737, 0.04679868370294571, 0.034650471061468124, -0.03380640596151352, -0.02165123261511326, -0.05779530480504036, 0.0486794114112854, -0.004446422681212425, 0.004241993185132742, -0.033029139041900635, -0.00932763796299696, -0.07705491781234741, -0.035200610756874084, 0.017292886972427368, 0.12397858500480652, -0.04058493301272392, 0.03394677862524986, -0.0031784321181476116, 0.03667015954852104, -0.0020301348995417356, 0.17005382478237152, 0.013752860017120838, 0.00466718478128314, -0.04013301804661751, 0.035328298807144165, -0.019261730834841728, 0.024062221869826317, 0.030185939744114876, -0.007304544094949961, -0.01879851706326008, 0.03504488244652748, -0.014815027825534344, 0.006463151890784502, 0.01605156995356083, -0.0431523434817791, 0.03027740679681301, 0.04889431223273277, -0.05023595318198204, -0.01954011805355549, -0.026718828827142715, -0.03224005177617073, -0.007825326174497604, 0.05400175601243973, 0.03436732292175293, -0.0010313913226127625, -0.032802436500787735, -0.047242678701877594, 0.03194543719291687, 0.015108393505215645, -0.024135788902640343, 0.019163116812705994, 0.013246854767203331, 0.03589600324630737, 0.052049558609724045, 0.0003378812107257545, 0.010858766734600067, -0.03150103986263275, 0.015142207965254784, -0.03121136501431465, -0.0398174487054348, 0.1446966677904129, 0.005957117769867182, 0.06524525582790375], "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ee1bf574-7fb4-4b01-9027-03a50c180ec0", "node_type": "4", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "ca97d476ee0e14a74f8b324ad696d47cb18b6cdba386ea4f4b3c67d12343d8d3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "182ba943-fde5-470a-84c7-ef86e376a583", "node_type": "1", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "2380d3c1e89491c0831ce70958d413286d333891224640f674e0e2ea7b865833", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8f9f27ab-53d4-403d-be68-c8c86bfe7c60", "node_type": "1", "metadata": {}, "hash": "1ddf121d26944d88dd7c5028d2e8a1d0ef8ac33de3c21d79f60dbefc5b332dc5", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "### 2. \"Did You Mean?\" Suggestions: The `Suggester`\n\nEver type something quickly and make a typo, only for a search engine to helpfully suggest the correct spelling? That's what our `Suggester` does! It's like the librarian gently correcting your pronunciation or spelling.\n\n#### How `Suggester` Works (High-Level)\n\nIf the [Core Search Engine](05_core_search_engine_.md) returns very few or no results for your original query, DevShelf will ask the `Suggester` to step in. The `Suggester` compares your misspelled query to all known book titles, looking for titles that are \"very similar\" even with a few errors. It uses a clever algorithm called **Levenshtein Distance** to measure how many changes (insertions, deletions, substitutions) are needed to turn one word into another. A smaller distance means higher similarity.\n\n#### Example: Searching \"pyton\"\n\nIf you type \"pyton\" (intending \"Python\"), the normal search might not find much.\nThe `Suggester` will compare \"pyton\" to \"Python\", \"C++\", \"Java\", etc. It will find that \"pyton\" is very close to \"Python\" (only one letter change needed!). It will then suggest \"Python\" as a possible correction.\n\n#### Under the Hood: `Suggester` in Action\n\nThe `Suggester` is called from `DevShelfService` (GUI) or `BookSearchEngine` (CLI) when the initial search yields empty results.", "mimetype": "text/plain", "start_char_idx": 7312, "end_char_idx": 8637, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "8f9f27ab-53d4-403d-be68-c8c86bfe7c60", "embedding": [-0.04356280714273453, 0.048148781061172485, -0.04485105723142624, -0.009488914161920547, -0.032978933304548264, -0.020219646394252777, -0.05157288908958435, 0.03779611364006996, 0.02940395474433899, 0.031755246222019196, -0.005055946297943592, -0.025203486904501915, -0.008037994615733624, 0.03481663018465042, 0.0005518799880519509, -0.03228364884853363, 0.044365186244249344, 0.035433195531368256, -0.019836582243442535, -0.027028104290366173, 0.03699576109647751, 0.01313488744199276, -0.008379283361136913, -0.04502252861857414, -0.023692045360803604, 0.02763860672712326, -0.06534995138645172, -0.04699701815843582, -0.05080898106098175, -0.18245616555213928, -0.021516308188438416, -0.04256158694624901, 0.04811311885714531, 0.03071579709649086, -0.03469978645443916, 0.04151879996061325, 0.05631611868739128, -0.001247417414560914, -0.008062324486672878, -0.004536894615739584, 0.03389955312013626, -0.03071882762014866, -0.009715057909488678, 0.06632132083177567, 0.016092807054519653, 0.0032222906593233347, 0.032393306493759155, -0.01589309051632881, -0.039127156138420105, -0.008573071099817753, -0.025235360488295555, -0.058830972760915756, -0.005120279733091593, 0.006841335445642471, -0.0016253397334367037, 0.01502186432480812, 0.020372949540615082, 0.043217822909355164, 0.007743393536657095, 0.02538050152361393, 0.05113973468542099, -0.051210254430770874, -0.13151586055755615, 0.09188240021467209, -0.002306337933987379, 0.04649318382143974, -0.04037955403327942, -0.05543207749724388, -0.024280164390802383, 0.013892007991671562, 0.028905430808663368, 0.02814839780330658, -0.03651631996035576, 0.08654096722602844, 0.007967806421220303, 0.017558539286255836, -0.015485160052776337, 0.005398435052484274, 0.04344690963625908, 0.0022581699304282665, -0.08103049546480179, -0.02558792196214199, -0.0041383677162230015, -0.02970605529844761, 0.021156203001737595, 0.03916547819972038, 0.009104753844439983, 0.04808269813656807, 0.06143274903297424, -0.06784812361001968, 0.024029463529586792, -0.046908799558877945, -0.0226108580827713, 0.05532553791999817, -0.060202907770872116, 0.004489623010158539, 0.011268251575529575, 0.020460674539208412, -0.041120193898677826, 0.34316322207450867, -0.034906383603811264, 0.06692992895841599, -0.050059881061315536, 0.012553086504340172, 0.010020014829933643, -0.06824649125337601, 0.04011841118335724, -0.04589996486902237, 0.0038796148728579283, -0.01689285971224308, 0.017531931400299072, -0.039389949291944504, 0.07547028362751007, -0.06408865004777908, 0.019646570086479187, 0.024070413783192635, -0.02049451507627964, 0.02343440242111683, 0.021536752581596375, 0.03244079276919365, -0.008280070498585701, -0.017995629459619522, 0.011660102754831314, 0.008032751269638538, -0.04959827661514282, 0.06272616982460022, 0.005277624819427729, 0.013498952612280846, -0.02238532155752182, -0.04283639416098595, 0.04262116178870201, 0.022859366610646248, -0.11837956309318542, -0.002460695570334792, 0.005580764729529619, 0.004506134893745184, -0.048285823315382004, 0.0028280986007303, 0.039270054548978806, -0.004799847025424242, -0.013205737806856632, -0.01675494946539402, -0.005125722847878933, 0.03020867146551609, -0.07203184813261032, 0.08503595739603043, -0.03572423383593559, 0.019461793825030327, -0.05236572399735451, -0.0267350934445858, 0.004671614151448011, 0.02137218415737152, -0.041433773934841156, -0.05620855838060379, 0.03320271149277687, 0.07693459093570709, 0.05976521968841553, -0.010714193806052208, -0.04836295545101166, -0.03200138360261917, -0.011668827384710312, -0.0036348069552332163, -0.01270922739058733, 0.06903991848230362, -0.00414119940251112, -0.10224179923534393, -0.0163063146173954, -0.013793181627988815, -0.14460252225399017, 0.03880704566836357, -0.027441512793302536, 0.043819792568683624, -0.022189101204276085, 0.03839101269841194, 0.0019583601970225573, 0.031630437821149826, -0.03427409008145332, -0.02799423225224018, 0.12894532084465027, 0.02955247461795807, -0.0278557687997818, 0.011483346112072468, 0.021022040396928787, 0.05204123631119728, -0.0065492005087435246, -0.030072180554270744, -0.05746797099709511, -0.038532957434654236, -0.019418375566601753, 0.0053545329719781876, -0.050701968371868134, -0.048053693026304245, 0.04674559831619263, -0.01664813980460167, 0.04352221637964249, -0.04273620992898941, 0.020223993808031082, -0.022263195365667343, 0.015430665574967861, 0.0006402781000360847, 0.021727191284298897, 0.023741576820611954, -0.03313014283776283, 0.04914122819900513, -0.0012013475643470883, 0.03222738578915596, -0.026731064543128014, -0.0651511400938034, 0.1393461674451828, 0.009537348523736, -0.004100264050066471, -0.03924902155995369, -0.03798834979534149, -0.004869232419878244, -0.07829264551401138, -0.013186286203563213, -0.017178039997816086, 0.02794768661260605, 0.027706710621714592, 0.034460145980119705, -0.01615508832037449, -0.04507588967680931, -0.01804506592452526, -0.3048321306705475, -0.003249341156333685, -0.0211492907255888, -0.0250984076410532, -0.021401340141892433, -0.04242487996816635, 0.01719634234905243, 0.021284501999616623, -0.010129348374903202, 0.04990211874246597, 0.05984477698802948, -0.020248791202902794, 0.04956001415848732, 0.0038952811155468225, 0.0051185814663767815, 0.052400507032871246, -0.01008604746311903, -0.02330823428928852, -0.04742513224482536, 0.012122026644647121, 0.04600803554058075, 0.0036826690193265676, 0.05225062370300293, -0.09460919350385666, -0.011617249809205532, -0.010282903909683228, 0.13535429537296295, 0.050969358533620834, 0.03959013894200325, -0.03445088490843773, 0.04592477157711983, 0.05421128123998642, -0.10561732202768326, -0.09294955432415009, -0.06297159194946289, 0.012636883184313774, 0.016333656385540962, -0.015454952605068684, -0.04460196942090988, -0.012814865447580814, -0.00022837652068119496, 0.050823044031858444, 0.031675029546022415, -0.012229650281369686, -0.07640035450458527, -0.011661111377179623, 0.022097701206803322, 0.012697314843535423, -0.014027468860149384, 0.04793846979737282, -0.03221756964921951, 0.05878560617566109, 0.007141756359487772, 0.008310634642839432, -0.00428179232403636, -0.04059034585952759, -0.05220378562808037, -0.01899838075041771, -0.03649430721998215, 0.008357766084372997, -0.0001286929182242602, 0.02837722934782505, 0.012231516651809216, 0.011142103001475334, 0.01853926293551922, -0.03029332309961319, 0.019464831799268723, 0.018537120893597603, 0.047542426735162735, 0.021680813282728195, -0.04872513934969902, 0.0030543487519025803, -0.04019542038440704, 0.053683001548051834, 0.05557826906442642, 0.04497118666768074, 0.049064360558986664, -0.03392592445015907, -0.021990308538079262, -0.02026943862438202, -0.007536451797932386, 0.010345022194087505, 0.03401990979909897, -0.020879993215203285, -0.008231747895479202, -0.006747952196747065, 0.030979756265878677, 0.026586713269352913, 0.06913290172815323, 0.01650429144501686, -0.0530535988509655, 0.006527439691126347, -0.0678212121129036, 0.0625002309679985, 0.03986319899559021, 0.04206078499555588, -0.2505037784576416, 0.04503268375992775, -0.019127022475004196, 0.05983637273311615, 0.0332295186817646, -0.027982346713542938, 0.016375308856368065, -0.03743753209710121, 0.057804372161626816, 0.00027980629238300025, 0.013558019883930683, -0.007867950946092606, 0.005676062777638435, -0.08126772940158844, -0.0193487536162138, 0.06315138190984726, 0.09350335597991943, -0.03158307820558548, -0.0031419643200933933, 0.028770942240953445, 0.03322998061776161, 0.007041816134005785, 0.18604028224945068, 6.745306018274277e-05, 0.03487014397978783, 0.00240310444496572, 0.036160822957754135, -0.05442436784505844, 0.01917545683681965, 0.02598898485302925, -0.00394688593223691, -0.02807861752808094, 0.05504906177520752, -0.019687864929437637, -0.007056955248117447, 0.03760765865445137, 0.04035765305161476, 0.0008792001171968877, 0.0430227592587471, -0.06531505286693573, -0.023929625749588013, -0.052941229194402695, -0.029892276972532272, -0.022267013788223267, 0.06456346064805984, 0.019835462793707848, -0.0329299233853817, -0.048471033573150635, -0.05630023404955864, 0.048206012696027756, 0.02228880301117897, -0.05386990308761597, -0.014776266179978848, -0.005166604649275541, 0.06544642895460129, 0.09995222091674805, -0.011069858446717262, 0.021105848252773285, -0.024923037737607956, -0.026710959151387215, 0.04270580783486366, -0.031167998909950256, 0.13667133450508118, 0.0043574133887887, 0.0753171443939209], "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ee1bf574-7fb4-4b01-9027-03a50c180ec0", "node_type": "4", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "ca97d476ee0e14a74f8b324ad696d47cb18b6cdba386ea4f4b3c67d12343d8d3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "15c77077-75d6-44f4-a149-09d24a96c970", "node_type": "1", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "250b24eb3e0757cc3372746d1686d19cda8bdef58ce594131c630a3776236486", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2f7acdde-f746-4558-a1f1-53b898db6ba6", "node_type": "1", "metadata": {}, "hash": "5d1194ae15a956437d300a1ead050ae7e1b9966c3ba4d5190f15ad9c51e451ec", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#### Under the Hood: `Suggester` in Action\n\nThe `Suggester` is called from `DevShelfService` (GUI) or `BookSearchEngine` (CLI) when the initial search yields empty results.\n\n```mermaid\nsequenceDiagram\n    participant User\n    participant App Service\n    participant QueryProcessor\n    participant Suggester\n    participant All Book Titles\n    participant Search Results\n\n    User->>App Service: \"Search: pyton\"\n    App Service->>QueryProcessor: search(\"pyton\")\n    QueryProcessor-->>App Service: Returns NO results (empty List<SearchResult>)\n    App Service->>Suggester: suggestSimilar(\"pyton\")\n    Suggester->>All Book Titles: Compare \"pyton\" with every title (e.g., \"Python\", \"Java\", \"C#\")\n    Note over Suggester: Calculates similarity (e.g., Levenshtein Distance)\n    All Book Titles-->>Suggester: Returns best match (e.g., \"Python\")\n    Suggester-->>App Service: \"Python\"\n    App Service->>User: \"Did you mean: Python?\"\n    App Service->>QueryProcessor: search(\"Python\")\n    Note over QueryProcessor: Now returns results for \"Python\"\n    QueryProcessor-->>App Service: List<SearchResult> for \"Python\"\n    App Service->>User: Display books about Python\n```\n\n#### The `Suggester` Class: Finding Close Matches\n\nThe `Suggester` compares your search query to all book titles using a combined similarity score, where a higher score means a better match.", "mimetype": "text/plain", "start_char_idx": 8465, "end_char_idx": 9817, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "2f7acdde-f746-4558-a1f1-53b898db6ba6", "embedding": [-0.03532291203737259, 0.011277783662080765, -0.06577780842781067, -0.016915034502744675, -0.003600579919293523, -0.019371075555682182, -0.04056989774107933, 0.03445027023553848, 0.05949831381440163, -0.004245467949658632, 0.0011925608851015568, -0.04248291254043579, 0.02427959442138672, 0.07606808841228485, 0.007740737870335579, 0.020497504621744156, 0.0429285392165184, 0.044118285179138184, -0.05794728547334671, -0.042080722749233246, 0.0687020793557167, 0.05100711062550545, 0.00938975065946579, -0.07776804268360138, 0.052539631724357605, 0.0326446034014225, -0.00930048432201147, -0.06268177181482315, -0.02550366148352623, -0.17975351214408875, -0.02984335832297802, -0.024274853989481926, 0.06698264926671982, 0.02771035023033619, -0.05706588178873062, 0.04756885766983032, 0.07413598895072937, -0.03338640555739403, -0.03697578236460686, -0.00868288055062294, -0.01190151460468769, -0.00806368701159954, 0.012426970526576042, 0.04811367020010948, -0.031359635293483734, 0.011386788450181484, 0.01574789360165596, -0.016133969649672508, -0.0032710623927414417, 0.0036934809759259224, -0.031211040914058685, -0.05555307865142822, -9.090225648833439e-05, -0.01956191658973694, 0.01634093187749386, 0.013227244839072227, 0.05486023426055908, 0.03912505507469177, -0.04063795134425163, 0.05300232395529747, 0.02890452742576599, -0.0026431495789438486, -0.10228271782398224, 0.06697387993335724, 0.0155203090980649, 0.013363918289542198, 0.004726950079202652, -0.02775537595152855, -0.03308634087443352, 0.12309025228023529, 0.047638822346925735, 0.051634807139635086, -0.03225872665643692, 0.08433530479669571, 0.0042318906635046005, 0.029379401355981827, 0.0037755686789751053, -0.011930069886147976, 0.026952750980854034, 0.0020772807765752077, -0.11102964729070663, -0.03441103175282478, 0.008475099690258503, -0.0027886475436389446, 0.00592062808573246, 0.05334246903657913, -0.028960878029465675, -0.015434089116752148, 0.038704536855220795, -0.0030923946760594845, 0.029501063749194145, -0.03519537299871445, 0.007634538225829601, -0.011415863409638405, -0.032911766320466995, -0.019766096025705338, -0.013913091272115707, 0.001368061639368534, 0.012258768081665039, 0.3402549922466278, -0.025252392515540123, -0.005076777655631304, -0.001013310975395143, 0.012004739604890347, -0.004330598283559084, -0.0882200077176094, 0.030968375504016876, -0.05546585097908974, 0.02086997963488102, -0.011797782965004444, -0.017985280603170395, -0.09931135177612305, 0.04838915169239044, -0.04113954305648804, 0.009127242490649223, 0.05745597183704376, 0.060013942420482635, 0.007210607640445232, 0.009039124473929405, -0.011714188382029533, -0.016766101121902466, 0.0013050916604697704, -0.02126648835837841, 0.004630928859114647, 0.021917622536420822, -0.03065146878361702, -0.02590424381196499, 0.015504175797104836, 0.014519492164254189, 0.00033799163065850735, 0.011367162689566612, 0.024760479107499123, -0.08437838405370712, 0.01520351879298687, -0.022963717579841614, 0.01758844219148159, -0.020500730723142624, -0.002713378518819809, 0.027587871998548508, -0.0004977398202754557, -0.0011720581678673625, -0.009232682175934315, -0.011284896172583103, -0.01994430273771286, -0.13105231523513794, 0.10747699439525604, -0.03692932054400444, -0.038828045129776, -0.04377375915646553, -0.08259129524230957, 0.02388812229037285, 0.02894025668501854, -0.03969515860080719, -0.0391751192510128, 0.003938447218388319, 0.04581090435385704, 0.1099909096956253, -0.015621540136635303, -0.07224158942699432, -0.02640092559158802, -0.03024790622293949, 0.027477221563458443, -0.06757914274930954, 0.08229010552167892, 0.011595243588089943, -0.04186839982867241, -0.05004425719380379, 0.009216537699103355, -0.09760279953479767, 0.010564357973635197, -0.025147555395960808, 0.03920203447341919, -0.027599770575761795, 0.06440576165914536, 0.036431215703487396, 0.04318107292056084, -0.019672714173793793, -0.016109228134155273, 0.08241482824087143, 0.017695507034659386, -0.017413711175322533, -0.00246416381560266, -0.07699576020240784, 0.06070711463689804, 0.0057586003094911575, -0.01038389839231968, -0.09033317118883133, -0.003915366251021624, -0.01624455116689205, 0.03331299126148224, -0.051294032484292984, -0.06040758639574051, 0.029996313154697418, -0.0034637332428246737, 0.008108532056212425, -0.03254646062850952, -0.002315117744728923, -0.05880322679877281, -0.003893822431564331, -0.013494140468537807, 0.046894267201423645, 0.04765606299042702, -0.021726612001657486, 0.008505457080900669, -0.013849935494363308, -0.0036112263333052397, 0.011547795496881008, -0.08006786555051804, 0.07556949555873871, -7.065918907755986e-05, -0.060746364295482635, -0.04850659891963005, -0.07275157421827316, 0.000929929839912802, -0.033332519233226776, -0.029318904504179955, 0.020017845556139946, 0.03043438121676445, 0.019178304821252823, 0.04960281401872635, -0.01862514764070511, -0.04531271755695343, -0.028247663751244545, -0.2724137604236603, -0.012599717825651169, 0.013033472001552582, -0.007408554665744305, 0.03567739948630333, -0.06052808463573456, 0.015810130164027214, -0.060809068381786346, 0.022814450785517693, 0.028081899508833885, 0.05600528419017792, -0.00853633601218462, -0.005517429206520319, -0.026672862470149994, -0.022150354459881783, 0.013160327449440956, -0.0009822126012295485, 0.005953949876129627, -0.03826729580760002, -0.03530173376202583, 0.031094232574105263, 0.01195245049893856, 0.06437614560127258, -0.10547763854265213, 0.0026227415073662996, 0.016999470070004463, 0.1610545516014099, 0.017590288072824478, 0.05850202962756157, -0.06156755983829498, 0.03793711215257645, 0.03293308988213539, -0.07165561616420746, -0.04381977394223213, -0.001588402665220201, 0.03259355202317238, -0.02458936907351017, -0.014372006058692932, -0.053346045315265656, -0.0023034941405057907, 0.01642405427992344, 0.036805231124162674, 0.01129874587059021, -0.0009764686110429466, -0.054150503128767014, 0.012494479306042194, 0.016620444133877754, -0.0496479794383049, 0.0118781216442585, 0.06748751550912857, 0.020074812695384026, 0.08775199204683304, -0.00783652625977993, 0.03996172919869423, -0.019241541624069214, -0.014983375556766987, -0.026644302532076836, -0.03327777609229088, -0.016585856676101685, -0.04480042681097984, 0.024192675948143005, 0.018816795200109482, 0.002773989224806428, -0.010920981876552105, 0.02489030733704567, -0.03398266062140465, 0.01666148193180561, 0.009610844776034355, 0.01103160995990038, 0.0389723926782608, -0.08307766914367676, 0.019664330407977104, -0.010810443200170994, 0.04210742563009262, 0.058926261961460114, 0.08240469545125961, 0.039035696536302567, 0.016213232651352882, -0.026790479198098183, -0.011895736679434776, 0.031644295901060104, -0.01818198896944523, 0.027129411697387695, 0.009597492404282093, -0.02133147045969963, -0.0021927694324404, 0.06672666221857071, -0.034749362617731094, 0.06584366410970688, 0.042535942047834396, -0.028216971084475517, -0.010200762189924717, -0.01577731780707836, 0.02424352988600731, 0.03270779922604561, -0.017560992389917374, -0.29325544834136963, 0.012270982377231121, -0.012981638312339783, 0.04996941238641739, 0.0495242178440094, -0.05066341906785965, 0.03794024884700775, -0.02758900634944439, 0.034770380705595016, 0.012613470666110516, 0.024592742323875427, 0.041298821568489075, -0.018046511337161064, -0.08739565312862396, -0.015698984265327454, 0.033194754272699356, 0.06767240911722183, -0.016902431845664978, 0.05363854765892029, 0.041144080460071564, 0.055912960320711136, -0.044262755662202835, 0.2179860919713974, -0.011855768039822578, 0.07736711949110031, 0.041917283087968826, 0.045469820499420166, -0.06147737801074982, 0.04141804948449135, 0.007783842738717794, 0.018649425357580185, -0.025810636579990387, 0.1255287379026413, -0.031932588666677475, 0.002297534141689539, 0.0232608150690794, -0.00878190714865923, 0.02755269594490528, -0.0007148794829845428, -0.059209082275629044, -0.01345208752900362, -0.03088534064590931, -0.008387613110244274, 0.00205666059628129, 0.05186043679714203, 0.004121888894587755, -0.009229129180312157, -0.03719262406229973, -0.009538806974887848, 0.021680718287825584, -0.004995038732886314, -0.013561851345002651, 6.430526991607621e-05, -0.028327319771051407, 0.028278298676013947, 0.045619163662195206, 0.005925772711634636, 0.007141612004488707, -0.05996035784482956, -0.04443896934390068, 0.0019659441895782948, 0.0033069425262510777, 0.08205889165401459, 0.02114228345453739, 0.03548707440495491], "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ee1bf574-7fb4-4b01-9027-03a50c180ec0", "node_type": "4", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "ca97d476ee0e14a74f8b324ad696d47cb18b6cdba386ea4f4b3c67d12343d8d3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8f9f27ab-53d4-403d-be68-c8c86bfe7c60", "node_type": "1", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "43b4bcaef44ec7243df77bf02e5c733efde67592751c64ce8034960f049b4c1d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6c803b5a-9e9d-4791-9439-a46146349132", "node_type": "1", "metadata": {}, "hash": "111536727c1646fe870363dc0fb1c32132c129a4108051efb0d8a8a8891ff3c5", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "**`src/main/java/features/search/Suggester.java` (Simplified `suggestSimilar` method)**\n```java\n// Inside Suggester class\npublic String suggestSimilar(String query) {\n    if (query == null || query.trim().isEmpty()) return null;\n\n    String cleanedQuery = preprocess(query); // Clean up query first\n    if (cleanedQuery.isEmpty()) return null;\n\n    double bestScore = 0.0;\n    String bestMatch = null;\n\n    for (String title : allTitles) { // Loop through ALL book titles\n        if (title == null || title.trim().isEmpty()) continue;\n\n        String cleanedTitle = preprocess(title);\n        if (cleanedTitle.isEmpty()) continue;\n\n        // Calculate similarity using global (Levenshtein) and word-level methods\n        double globalSim = calculateSimilarity(cleanedQuery, cleanedTitle);\n        double wordSim = wordLevelSimilarity(cleanedQuery, cleanedTitle);\n        double finalScore = 0.65 * wordSim + 0.35 * globalSim; // Combine scores\n\n        if (finalScore > bestScore) {\n            bestScore = finalScore;\n            bestMatch = title;\n        }\n    }\n    // Only suggest if the match is good enough (score >= 0.6)\n    return (bestMatch != null && bestScore >= 0.6) ? bestMatch : null;\n}\n```\nThe `preprocess` method cleans up the text, `calculateSimilarity` uses the Levenshtein distance, and `wordLevelSimilarity` compares words within the query and title. These are combined to find the best suggestion.\n\n### 3. Recommending Related Books: The `Graph`\n\nOnce you've found a book you like, DevShelf can suggest other books that are related. This is like the librarian saying, \"Oh, you liked this? Then you might be interested in these other books too!\"\n\n#### How `Graph` Works (High-Level)\n\nThe `Graph` component builds a \"network\" of books. Imagine each book as a \"node\" (a circle) in this network, and lines (called \"edges\") connect books that are similar. The strength of the connection (the similarity score) depends on shared authors, programming languages, categories, and tags.\n\nWhen you ask for recommendations for a specific book, the `Graph` looks at its immediate neighbors in this network.", "mimetype": "text/plain", "start_char_idx": 9819, "end_char_idx": 11935, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "6c803b5a-9e9d-4791-9439-a46146349132", "embedding": [-0.020604845136404037, -0.024820854887366295, -0.08369670808315277, -0.005813293159008026, 0.033282242715358734, -0.026054058223962784, -0.02594444341957569, 0.08246029168367386, 0.05352678894996643, -0.04604409262537956, -0.010169091634452343, 0.022907335311174393, 0.02004128135740757, 0.07912066578865051, 0.008973823860287666, 0.06151554360985756, 0.01731233485043049, 0.02113092690706253, 0.016774069517850876, -0.06067751720547676, 0.04991599917411804, 0.01302286982536316, 0.04451119154691696, -0.10070721805095673, 0.045705776661634445, 0.04703187942504883, -0.0074759735725820065, -0.05241870507597923, -0.020428868010640144, -0.20046661794185638, -0.045746464282274246, 0.02608533389866352, 0.08975176513195038, 0.01028392743319273, -0.04690892994403839, 0.037096403539180756, 0.0753665342926979, -0.013154596090316772, 0.00750761479139328, -0.009076464921236038, -0.00415783328935504, 0.019266510382294655, 0.005148835945874453, 0.04246070608496666, -0.004898524843156338, 0.008275063708424568, 0.011921457946300507, -0.014727476984262466, -0.06706061214208603, 0.02072073519229889, -0.015921425074338913, -0.0616961233317852, 0.009515412151813507, 0.018544986844062805, 0.05170728638768196, 0.0112987719476223, 0.03836368769407272, 0.054111380130052567, -0.0696927011013031, 0.05314712971448898, 0.01964404247701168, 0.004217950627207756, -0.10142683237791061, 0.05163663625717163, 0.04064648970961571, 0.009254736825823784, -0.022286739200353622, 3.0452360078925267e-05, -0.040882658213377, 0.07941381633281708, 0.013252911157906055, 0.06622166931629181, -0.05010947957634926, 0.03816269710659981, 0.019901156425476074, 0.01431752648204565, 0.016056474298238754, -0.012749865651130676, 0.005241110920906067, 0.0048428066074848175, -0.04479862004518509, -0.024733688682317734, -0.02238195389509201, -0.07338355481624603, -0.008120971731841564, 0.03534359857439995, 0.057796236127614975, 0.03884464502334595, 0.020957093685865402, 0.013435164466500282, -0.02072121389210224, -0.009109437465667725, 0.02261372096836567, -0.0270240418612957, -0.0345330536365509, -0.028529943898320198, -0.007727730553597212, -0.008662519045174122, -0.008975908160209656, 0.3965582549571991, -0.04199519008398056, -0.008802841417491436, -0.02331441268324852, 0.027887174859642982, 0.017538078129291534, -0.06182258203625679, 0.07648545503616333, -0.04315674304962158, 0.0502222515642643, -0.012051302939653397, -0.010611492209136486, -0.0723123773932457, 0.010974512435495853, -0.05609744042158127, 0.06589864194393158, 0.015304913744330406, 0.05210306867957115, 0.03307011350989342, 0.03651494160294533, -0.017350705340504646, -0.02714530937373638, 0.01759122498333454, 0.017781026661396027, -0.0074773081578314304, -0.00540987029671669, -0.044274717569351196, -0.05604013055562973, 0.04019204154610634, 0.027810310944914818, -0.00024286180268973112, 0.024206507951021194, 0.020367369055747986, -0.0666041448712349, -0.004807638935744762, -0.03628052398562431, 0.013861838728189468, 0.005804633256047964, -0.00638979347422719, -0.0008015062194317579, 0.04377808794379234, 0.0180277731269598, 0.050593238323926926, 0.013631623238325119, -0.0025567440316081047, -0.10354841500520706, 0.0752098485827446, -0.007112299092113972, -0.008460513316094875, -0.042987577617168427, -0.028569791465997696, 0.006699139717966318, 0.02221774496138096, -0.012114055454730988, -0.03427090495824814, 0.005573678761720657, 0.026843735948204994, 0.07751170545816422, 0.0028555775061249733, -0.04960719496011734, -0.014531456865370274, -0.005622358061373234, 0.010901299305260181, -0.08384574204683304, 0.07960408180952072, -0.01185021921992302, -0.07126878201961517, 0.016235822811722755, 0.007764964830130339, -0.04544006660580635, 0.005163202062249184, -0.04107830673456192, 0.018350210040807724, 0.03759719431400299, 0.09944245219230652, 0.0288437157869339, 0.005640379153192043, -0.05717941373586655, -0.04264286905527115, 0.05024946853518486, 0.022914540022611618, 0.04224662110209465, -0.0036790536250919104, -0.041116464883089066, 0.03583947941660881, -0.046773165464401245, 0.022578097879886627, -0.07163657248020172, -0.008059353567659855, 0.0022067504469305277, 0.04183456301689148, -0.09120041877031326, -0.0115581089630723, 0.0014805806567892432, 0.06335260719060898, 0.021141335368156433, -0.005255457479506731, -0.0331336185336113, -0.05710802972316742, -0.041372232139110565, -0.03074432723224163, -0.022170178592205048, 0.02776915393769741, -0.00934878084808588, 0.010437065735459328, -0.07415200769901276, 0.03135775774717331, -0.009923193603754044, -0.047248367220163345, 0.059902843087911606, -0.04179568216204643, -0.06832185387611389, -0.03078925423324108, -0.047235194593667984, 0.019611278548836708, -0.050709307193756104, -0.00840012077242136, 0.03859921544790268, 0.0630306676030159, 0.048198405653238297, 0.07651934772729874, -0.003611922264099121, -0.020794453099370003, -0.035136960446834564, -0.29014328122138977, 0.0005658571608364582, -0.0104619599878788, 0.014574041590094566, 0.06001213937997818, -0.07735460996627808, -0.00079476332757622, -0.052328795194625854, -0.00829477608203888, 0.07823454588651657, 0.05866513028740883, -0.027706168591976166, -0.047121673822402954, -0.024178415536880493, -0.002297922968864441, 0.03531143069267273, -0.009332668967545033, -0.022091766819357872, -0.05066462978720665, -0.03451787307858467, 0.008877316489815712, 0.022411568090319633, -0.003273450769484043, -0.06882312148809433, -0.020351605489850044, 0.01906072534620762, 0.10303658992052078, -0.04795307293534279, 0.024400273337960243, -0.050353873521089554, 0.018808219581842422, 0.035121239721775055, -0.044090185314416885, -0.05636918544769287, -0.0006666131084784865, 0.03544967621564865, 0.028999745845794678, -0.019637620076537132, -0.047203049063682556, 0.006802136544138193, -0.010446738451719284, -0.0019530286081135273, 0.048403747379779816, -0.0060604349710047245, -0.07161865383386612, 0.0013765314361080527, 0.021441921591758728, -0.08424326777458191, -0.016836876049637794, 0.07605588436126709, -0.032344430685043335, 0.05779380351305008, 0.005198601633310318, 0.03503115102648735, -0.055481720715761185, -0.025748267769813538, -0.04167092218995094, 0.022943057119846344, -0.0029094223864376545, 0.01252947747707367, 0.005195555277168751, 0.013018619269132614, -0.017763907089829445, -0.0544217973947525, 0.026230167597532272, -0.020567111670970917, -0.036067843437194824, 0.034288834780454636, 0.02136160433292389, 0.05259432643651962, -0.048082493245601654, 0.008766611106693745, -0.026717739179730415, 0.00021120863675605506, 0.03620695695281029, 0.03482469543814659, 0.034532126039266586, 0.010663894936442375, -0.002271939069032669, -0.004006906878203154, 0.013811650685966015, -0.005997436121106148, 0.0261802040040493, 0.013615211471915245, 0.011260607279837132, -0.017780663445591927, 0.05324956402182579, -0.017502237111330032, -0.007318595424294472, 0.015698852017521858, -0.008959705010056496, 0.01736650988459587, -0.04265732690691948, -0.03393393009901047, 0.06429648399353027, -0.0010079351486638188, -0.28848689794540405, -0.000102335681731347, -0.01960117742419243, 0.06293102353811264, 0.0033560756128281355, 6.1380909755826e-05, 0.062475234270095825, -0.05817220360040665, 0.02933598682284355, -0.014415409415960312, 0.07460222393274307, 0.040027569979429245, -0.003717751707881689, -0.08119851350784302, -0.041202954947948456, 0.039802100509405136, 0.07330245524644852, -0.01449697744101286, 0.02045219950377941, 0.019019851461052895, 0.04451742023229599, -0.02159060165286064, 0.19897830486297607, 0.016675826162099838, 0.07861217111349106, -0.0049592568539083, 0.014151095412671566, -0.009657848626375198, -0.02015741914510727, 0.02674790658056736, 0.007140981964766979, -0.015793349593877792, 0.087505042552948, -0.04549413174390793, 0.0012609680416062474, 0.005104828625917435, 0.019475389271974564, 0.00908228475600481, 0.026703251525759697, -0.04971975088119507, 0.05802882835268974, -0.020005755126476288, -0.03582353889942169, -0.030226223170757294, 0.05696120113134384, 0.02481996826827526, 0.0001476276374887675, -0.06705700606107712, -0.01409420557320118, -0.0057953884825110435, -0.023351164534687996, -0.08144774287939072, -0.014749965630471706, -0.012275728397071362, 0.025547195225954056, 0.03422265499830246, 0.004920344799757004, 0.04635763168334961, -0.06239555403590202, -0.02763289213180542, -0.014604171738028526, 0.015534834004938602, 0.0833948478102684, 0.03944936767220497, -0.005014093592762947], "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ee1bf574-7fb4-4b01-9027-03a50c180ec0", "node_type": "4", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "ca97d476ee0e14a74f8b324ad696d47cb18b6cdba386ea4f4b3c67d12343d8d3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2f7acdde-f746-4558-a1f1-53b898db6ba6", "node_type": "1", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "7d0aee0d89603d8ff382f25eab0f4285348bdd6688f1eda920ec48514ba37719", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "41127064-c158-4a0a-b2d4-50729107276c", "node_type": "1", "metadata": {}, "hash": "cd47fa6b5c96edd08eb80ff25634555efbd6b73bbc04845e8c67e4b14b2ab36d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "The strength of the connection (the similarity score) depends on shared authors, programming languages, categories, and tags.\n\nWhen you ask for recommendations for a specific book, the `Graph` looks at its immediate neighbors in this network. It then uses the popularity data (from [User Interaction & Analytics](06_user_interaction___analytics_.md)) to recommend the *most popular* of those related books first.\n\n#### Example: Recommendations for \"Clean Code\"\n\nIf you're viewing \"Clean Code\", the `Graph` might see that:\n*   \"The Pragmatic Programmer\" shares common \"Software Engineering\" tags.\n*   \"Effective Java\" is by a well-known author in the same general domain and is often clicked by people interested in \"Clean Code.\"\n\nThe `Graph` would then recommend these, prioritizing \"The Pragmatic Programmer\" if it's currently more popular than \"Effective Java.\"\n\n#### Under the Hood: `Graph` Building and Recommendations\n\nThe `Graph` is built once when the application starts, using all the available [Book (Domain Model)](02_book__domain_model__.md) objects.", "mimetype": "text/plain", "start_char_idx": 11693, "end_char_idx": 12754, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "41127064-c158-4a0a-b2d4-50729107276c", "embedding": [-0.049700893461704254, -0.003948323894292116, -0.06839621812105179, -0.008893053978681564, 0.007462522946298122, 0.00995309092104435, -0.04191122204065323, 0.03779095783829689, 0.06013554707169533, -0.03688870742917061, 0.01817169599235058, -0.08202674239873886, 0.02179429493844509, 0.06259904056787491, -0.02054092288017273, 0.010963086038827896, 0.007390865124762058, -0.0068522728979587555, 0.014585248194634914, -0.032484281808137894, 0.04373916983604431, 0.027828887104988098, 0.02109248749911785, -0.0795920118689537, 0.038540180772542953, 0.05351705104112625, 0.013076595030725002, -0.04953113570809364, -0.02214994840323925, -0.19214023649692535, -0.025946518406271935, -0.005919167771935463, 0.11598090827465057, 0.010977149941027164, -0.03650875762104988, 0.019958248361945152, 0.04302497208118439, 0.016214381903409958, -0.0029951450414955616, -0.009513997472822666, -0.02868509665131569, 0.016821056604385376, 0.0207356046885252, 0.029458288103342056, -9.037681593326852e-06, 0.0030075041577219963, 0.004366881214082241, 0.0018459520069882274, -0.028152743354439735, 0.027946431189775467, 0.012181307189166546, -0.06676077097654343, 0.020060518756508827, 0.008307598531246185, 0.049008809030056, 0.03875534236431122, 0.048709020018577576, 0.08475004136562347, -0.05096741020679474, 0.03824222460389137, 0.00030512927332893014, 0.003068755380809307, -0.0985603854060173, 0.01661892794072628, 0.028179673478007317, 0.0012208956759423018, -0.049021992832422256, -0.04774387180805206, -0.04639117419719696, 0.14866270124912262, 0.03910370543599129, 0.0334601104259491, 0.02965698577463627, 0.046497732400894165, 0.027227405458688736, 0.06487677246332169, -0.013485844247043133, -0.03232010453939438, 0.040562957525253296, 0.019140204414725304, -0.08142060041427612, -0.03443599492311478, -0.02354339323937893, -0.03470665588974953, 0.018228091299533844, 0.023027436807751656, 0.017500139772892, 0.0004892074503004551, 0.013372763991355896, 0.013093055225908756, -0.00589145440608263, -0.02010955847799778, -0.01522831805050373, -0.013082407414913177, -0.05597229674458504, -0.053608156740665436, -0.051990874111652374, -0.056027814745903015, 0.012051001191139221, 0.3609786927700043, -0.030008098110556602, 0.0019828886725008488, -0.05260678008198738, 0.022833004593849182, -0.009843484498560429, -0.05170310661196709, 0.05117828771471977, -0.06076357141137123, 0.02116871438920498, -0.06577569991350174, -0.007842791266739368, -0.02970818616449833, 0.012985526584088802, -0.0696512758731842, -0.0019256898667663336, 0.044956717640161514, 0.03586388751864433, 0.038054678589105606, 0.03219502046704292, 0.0012506201164796948, 0.005128647666424513, 0.01721128076314926, -0.013779674656689167, -0.043160200119018555, 0.015784772112965584, 0.0032259239815175533, -0.037661582231521606, 0.008552753366529942, 0.03294965252280235, -0.007386765908449888, 0.004712868947535753, 0.03085475228726864, -0.06211179494857788, 0.006226149387657642, -0.008775404654443264, 0.026446348056197166, -0.0077412547543644905, 0.002454776782542467, 0.04565083608031273, 0.029722094535827637, 0.024218592792749405, 0.029550371691584587, 0.0039062469732016325, -0.0028867048677057028, -0.11034703254699707, 0.12353351712226868, -0.022369451820850372, 0.011758746579289436, -0.02930588833987713, -0.053982630372047424, -0.00015279850049410015, 0.0434037484228611, -0.02398214302957058, -0.01891983672976494, -0.005392884369939566, 0.046440429985523224, 0.030365685001015663, 0.005297448951750994, -0.022717608138918877, -0.03452751040458679, -0.034899111837148666, 0.008050660602748394, -0.08441609889268875, 0.05358193442225456, 0.016812238842248917, -0.06801905483007431, -0.0052411602810025215, 0.03393474221229553, -0.05692357197403908, -0.010916061699390411, -0.034973811358213425, 0.06058957055211067, 0.05022566393017769, 0.06681009382009506, 0.04091872647404671, 0.007626772858202457, -0.04151923954486847, 0.0017785870004445314, 0.05763751640915871, 0.03018559329211712, 0.025798184797167778, -0.034982044249773026, -0.09852515161037445, 0.03510518744587898, -0.0430721752345562, 0.0028392968233674765, -0.08224043995141983, -0.02871650643646717, -0.007070399355143309, 0.053859539330005646, -0.05622386187314987, -0.019180262461304665, -0.026730753481388092, 0.029311178252100945, 0.018289852887392044, 0.00269484193995595, 0.011303146369755268, -0.04905197396874428, -0.048208024352788925, -0.03461940959095955, 0.03047335334122181, 0.029301414266228676, -0.014392069540917873, 0.015330132097005844, -0.06198086962103844, 0.005248256027698517, 0.037254150956869125, -0.05277074873447418, 0.010560759343206882, -0.036592088639736176, -0.08098829537630081, -0.036056987941265106, -0.07090062648057938, 0.011489705182611942, -0.014074601233005524, 0.007386352401226759, 0.034065525978803635, 0.029060259461402893, 0.04036908969283104, 0.06709837913513184, -0.06468029320240021, -0.039990607649087906, -0.022496556863188744, -0.30783796310424805, 0.004353837110102177, 0.0008069035247899592, 0.013876249082386494, 0.04162367433309555, -0.03611750528216362, -0.004765843041241169, -0.059289198368787766, -0.006301363930106163, 0.04800672084093094, 0.08870497345924377, -0.025868434458971024, -0.044245634227991104, -0.026126839220523834, -0.0602964349091053, 0.02717876434326172, -0.027810564264655113, 0.008755890652537346, -0.040723059326410294, -0.03040977381169796, -0.008752169087529182, 0.03003769926726818, 0.04022835195064545, -0.06596639752388, 0.037330638617277145, 0.04231983423233032, 0.11337624490261078, -0.02640286087989807, 0.028241243213415146, -0.07055503875017166, 0.03187011554837227, 0.04868762195110321, -0.06752884387969971, -0.059049829840660095, 0.033927179872989655, 0.01212953869253397, -0.047485023736953735, -0.0043438514694571495, -0.07149871438741684, -0.004523803945630789, -0.002398241078481078, 0.00683788675814867, 0.018561331555247307, -0.019584162160754204, -0.016206473112106323, 0.00830155424773693, 0.042661018669605255, -0.04732917621731758, 0.019489778205752373, 0.07290815562009811, -0.005699757020920515, 0.029854148626327515, 0.02984273061156273, 0.025802025571465492, -0.052564967423677444, -0.0406075082719326, -0.06283539533615112, -0.009701250120997429, -0.006521065719425678, -0.0315043069422245, 0.050818219780921936, -0.035782430320978165, 0.006224177777767181, -0.014298230409622192, 0.05596921592950821, 0.004212528001517057, 0.01789134182035923, 0.021713491529226303, -0.02558901160955429, 0.03369452431797981, -0.03139762207865715, -0.02688641846179962, 0.007289375178515911, -0.0208200141787529, 0.06780828535556793, 0.0276865903288126, 0.009316336363554, 0.006249271333217621, -0.011092946864664555, 0.0175323523581028, 0.02649698592722416, -0.028176531195640564, 0.035990070551633835, 0.03172102943062782, 0.012998555786907673, 0.027439303696155548, 0.059410303831100464, 0.0005408269353210926, 0.03553996980190277, 0.04378413408994675, -0.013380040414631367, -0.0055503542535007, -0.01958271861076355, 0.01651180535554886, 0.04022657871246338, -0.01391505729407072, -0.31122708320617676, 0.011526890099048615, -0.010709677822887897, 0.03821180388331413, 0.0026228732895106077, -0.05901382118463516, 0.06958527863025665, -0.0029677562415599823, 0.016151759773492813, -0.02311496064066887, 0.023512395098805428, 0.03181286156177521, 0.0029770182445645332, -0.043975912034511566, -0.02899855002760887, 0.009223907254636288, 0.06514877080917358, 0.014472343027591705, 0.05367989093065262, 0.027470162138342857, 0.05227402225136757, -0.026369111612439156, 0.20219872891902924, -0.0032656234689056873, 0.06934653222560883, 0.011448766104876995, 0.033176761120557785, -0.020871972665190697, 0.02926548570394516, 0.047970738261938095, -0.012239276431500912, -0.032489925622940063, 0.127935528755188, -0.004473698791116476, 0.01904917322099209, 0.03399886190891266, 0.01378620881587267, 0.018524030223488808, -0.002962409984320402, -0.04378276318311691, 0.043895795941352844, -0.034815918654203415, -0.0355551652610302, 0.02916455641388893, 0.06446155905723572, -0.016738418489694595, -0.01086396723985672, -0.029900770634412766, -0.016160504892468452, -0.0014311457052826881, -0.05182047560811043, -0.051831163465976715, -0.00885133258998394, -0.016800852492451668, 0.04471801966428757, 0.03318226337432861, -0.012498589232563972, 0.02464495599269867, -0.06036169081926346, -0.04372365027666092, -0.05785585939884186, 0.05521998181939125, 0.06599380075931549, 0.054996415972709656, 0.01799309439957142], "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ee1bf574-7fb4-4b01-9027-03a50c180ec0", "node_type": "4", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "ca97d476ee0e14a74f8b324ad696d47cb18b6cdba386ea4f4b3c67d12343d8d3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6c803b5a-9e9d-4791-9439-a46146349132", "node_type": "1", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "39bf47cc25f5217936a39a3107313e916a87d29d194b3bae406eb9f0065fc2f1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "215e8e0f-7f68-4f57-94a1-4421484caee7", "node_type": "1", "metadata": {}, "hash": "ce2d30f24890a1b02e3f4c37076cd69a8af0a91400ebf09b6961b977572c8e8d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#### Under the Hood: `Graph` Building and Recommendations\n\nThe `Graph` is built once when the application starts, using all the available [Book (Domain Model)](02_book__domain_model__.md) objects.\n\n**`src/main/java/features/recommendation/Graph.java` (Simplified `calculateSimilarityScore` method)**\n```java\n// Inside Graph class\npublic double calculateSimilarityScore(Book b1, Book b2) {\n    if (b1 == null || b2 == null) return 0.0;\n    double score = 0.0;\n    // Add points for matching attributes\n    if (equalsIgnoreCase(b1.getAuthor(), b2.getAuthor())) score += 1.0; // Strong match\n    if (equalsIgnoreCase(b1.getProgLang(), b2.getProgLang())) score += 0.9; // High match\n    \n    // Check for overlapping tags (e.g., \"clean-code\", \"refactoring\")\n    Set<String> tags1 = normalizeTags(b1.getTag());\n    Set<String> tags2 = normalizeTags(b2.getTag());\n    Set<String> intersection = new HashSet<>(tags1);\n    intersection.retainAll(tags2); // Tags that are in BOTH sets\n    Set<String> union = new HashSet<>(tags1);\n    union.addAll(tags2); // All unique tags from EITHER set\n    if (!union.isEmpty()) score += (intersection.size() / (double) union.size()) * 0.5;\n\n    if (equalsIgnoreCase(b1.getCategory(), b2.getCategory()) && score < 0.9) {\n        score += 0.2; // Weak match\n    }\n    return score >= 0.3 ? score : 0.0; // Only consider if score is above a threshold\n}\n```\nThis method is called for many pairs of books to build the graph. It compares their attributes and assigns a similarity score. For instance, if two books share the same author, they get a strong similarity boost.", "mimetype": "text/plain", "start_char_idx": 12558, "end_char_idx": 14154, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "215e8e0f-7f68-4f57-94a1-4421484caee7", "embedding": [-0.051382895559072495, -0.028394337743520737, -0.07931455969810486, -0.008026027120649815, -0.009337548166513443, -0.006915736012160778, -0.007690013851970434, 0.040820542722940445, 0.07666967809200287, -0.0030074117239564657, 0.009337767958641052, 0.01004478707909584, 0.057956110686063766, 0.05262441188097, -0.03520156815648079, 0.026041878387331963, 0.05829541012644768, 0.015870772302150726, -0.038616057485342026, -0.03882434219121933, 0.033511932939291, 0.0006815743399783969, 0.01304866187274456, -0.073615662753582, 0.060437750071287155, 0.04883015900850296, -0.04316047206521034, -0.03660013526678085, -0.05944255366921425, -0.191727876663208, -0.019756188616156578, 0.0026050005108118057, 0.06801528483629227, 0.015491155907511711, -0.07302545756101608, 0.020099174231290817, 0.09579078108072281, 0.0005341837531886995, -0.015769995748996735, -0.007045312784612179, -0.014306227676570415, -0.0041800509206950665, -0.009341472759842873, 0.03781304135918617, -0.0076217688620090485, 0.014583711512386799, 0.009127946570515633, -0.0008588965865783393, -0.008866948075592518, -0.000645082734990865, 0.011126021854579449, -0.07235579937696457, -0.018039435148239136, 0.044006653130054474, 0.035082075744867325, 0.01889021508395672, 0.0585576668381691, 0.07062043249607086, -0.004464098252356052, 0.09017857909202576, 0.04269209876656532, -0.03223775327205658, -0.09805861115455627, 0.05694897100329399, 0.00731088500469923, 0.009966952726244926, -0.04591628536581993, -0.0204706359654665, -0.053012389689683914, 0.02357305772602558, 0.00023145918385125697, 0.03623899817466736, 0.013201749883592129, 0.056153230369091034, 0.029346659779548645, 0.035529039800167084, -0.017552340403199196, -0.034322191029787064, -0.03181752935051918, 0.011389913968741894, -0.06363572180271149, -0.025353366509079933, -0.00987307820469141, -0.03409847617149353, 0.06740967929363251, 0.03204907849431038, 0.03013019636273384, 0.01670069806277752, 0.02957294136285782, 0.01382641401141882, -0.009926175698637962, -0.022438056766986847, 0.007468529976904392, -0.02069866470992565, -0.044340573251247406, -0.037531014531850815, -0.01729625277221203, -0.018280399963259697, 0.033290281891822815, 0.30419906973838806, -0.0234769769012928, 0.02049906551837921, -0.0479230098426342, 0.0339164137840271, 0.0026923874393105507, -0.09731248021125793, 0.08313233405351639, -0.06629866361618042, 0.036829788237810135, 0.017457278445363045, -0.025175876915454865, -0.05453932285308838, 0.022164229303598404, -0.07271788269281387, 0.01587493345141411, 0.022145038470625877, 0.02380187064409256, 0.06817572563886642, 0.038279857486486435, -0.023661188781261444, -0.03231055662035942, 0.0015390368644148111, -0.018870869651436806, -0.03538822382688522, 0.021553438156843185, 0.034375954419374466, -0.019764356315135956, 0.03861436992883682, 0.028172755613923073, -0.008651218377053738, 0.027384920045733452, 0.021353192627429962, -0.09503393620252609, -0.013246392831206322, -0.023769354447722435, 0.021633761003613472, -0.01353185810148716, -0.022721825167536736, 0.02256176248192787, 0.02549363672733307, 0.027632005512714386, 0.04844110086560249, 0.01861996203660965, 0.027426408603787422, -0.09845671057701111, 0.11797480285167694, -0.028598494827747345, 0.052886713296175, -0.022135606035590172, -0.03009609691798687, 0.018888646736741066, 0.033698711544275284, -0.016133956611156464, -0.042274463921785355, -0.009212493896484375, 0.05075617879629135, 0.04395326226949692, -0.015211297199130058, -0.04099871590733528, -0.017310855910182, 0.00810697115957737, 0.022575916722416878, -0.04650450125336647, 0.08288578689098358, -0.0036235996522009373, -0.06965114176273346, 0.013067442923784256, -0.024748055264353752, -0.07151085138320923, 0.03372093290090561, -0.024064458906650543, 0.0531855970621109, 0.014175555668771267, 0.11533493548631668, 0.019419588148593903, 0.02240011654794216, -0.030660506337881088, -0.056393157690763474, 0.06333526223897934, -0.021693473681807518, 0.006274790968745947, -0.025450030341744423, -0.04764094203710556, 0.07200266420841217, -0.02834082581102848, 0.0075006927363574505, -0.030928965657949448, -0.020279809832572937, 0.0009702126844786108, 0.00014391237345989794, -0.03184408321976662, -0.043441347777843475, 0.020615890622138977, 0.043176282197237015, 0.04235226660966873, -0.021561134606599808, -0.04528350755572319, -0.021087931469082832, -0.0049252621829509735, -0.02732013911008835, -0.021711748093366623, 0.034691572189331055, -0.0005183590110391378, 0.017592981457710266, -0.014814268797636032, 0.04000331088900566, -0.005654033273458481, -0.08352931588888168, 0.06371919065713882, -0.05654522404074669, -0.09641188383102417, -0.03625824674963951, -0.11232379078865051, -0.0005727881798520684, -0.054864730685949326, 0.03786202892661095, 0.026959743350744247, 0.04049411043524742, 0.040290262550115585, 0.06764660775661469, -0.013924201019108295, -0.026997525244951248, -0.037945929914712906, -0.311547189950943, -0.02747618407011032, 0.008470440283417702, -0.005622811149805784, 0.013353437185287476, -0.029959412291646004, 0.021417053416371346, -0.05703755468130112, -0.002758633578196168, 0.07914215326309204, 0.06821227073669434, -0.05053382366895676, -0.005498306825757027, 0.0005744034424424171, -0.008532922714948654, 0.047731492668390274, -0.019775906577706337, -0.01747848279774189, -0.011524319648742676, -0.008262800984084606, 0.034498199820518494, 0.017016420140862465, 0.0406816229224205, -0.03753633052110672, 0.03280312195420265, 0.03616787865757942, 0.08480273932218552, -0.006234411615878344, 0.004040910862386227, -0.03152594342827797, 0.0074193477630615234, 0.043207015842199326, -0.07253459095954895, -0.03368595242500305, 0.004411333240568638, 0.05093866214156151, 0.014792079105973244, -0.04386169835925102, -0.049521710723638535, -0.0362287275493145, -0.034498147666454315, 0.00929414201527834, 0.03521280735731125, -0.06000668555498123, -0.04182844236493111, -0.03890853002667427, 0.015500815585255623, -0.035661596804857254, -0.015004833228886127, 0.07585582137107849, -0.05718131363391876, 0.07006827741861343, 0.0018263616366311908, 0.027230486273765564, 0.008240045979619026, -0.010523106902837753, -0.031383875757455826, -0.0032280823215842247, -0.03811046481132507, -0.022461196407675743, -0.020573502406477928, -0.016407577320933342, 0.014701633714139462, -0.05261794850230217, 0.04679693281650543, -0.030031900852918625, -0.022492587566375732, 0.07363061606884003, 0.0014770878478884697, 0.07049393653869629, -0.06445914506912231, -0.011509096249938011, -0.046585213392972946, 0.033953990787267685, 0.04684329032897949, 0.04887901246547699, 0.024636484682559967, -0.01991884596645832, -0.009250161238014698, -0.010404087603092194, 0.0007006076630204916, 0.02718951553106308, 0.03454671800136566, -0.0038083598483353853, 0.0005308991530910134, -0.04686761274933815, 0.020314253866672516, 0.030498875305056572, 0.011874135583639145, 0.04076406732201576, -0.005550432484596968, 0.0248224176466465, -0.06644643843173981, 0.004123202059417963, -0.009318816475570202, 0.019827350974082947, -0.2568241059780121, -0.009987440891563892, -0.06332875788211823, 0.10999009013175964, -0.0015516101848334074, -0.016485391184687614, 0.049516934901475906, -0.02440430410206318, 0.0565909668803215, -0.03198839724063873, 0.04542546346783638, 0.06401966512203217, 0.021138576790690422, -0.10169553011655807, -0.04440651461482048, 0.03341260552406311, 0.08358797430992126, 0.005307430401444435, 0.04986042529344559, -0.0038653132505714893, 0.05081929266452789, -0.053168680518865585, 0.23378022015094757, 0.04453481361269951, 0.03270532935857773, 0.020704321563243866, 0.012993579730391502, -0.0386647954583168, 0.0030142345931380987, 0.011134340427815914, 0.004729386884719133, -0.022152403369545937, 0.11021381616592407, -0.029961153864860535, -0.027513079345226288, 0.011868558824062347, 0.01887885108590126, -0.003145176451653242, 0.0075609334744513035, -0.03768610581755638, 0.018015513196587563, -0.023167889565229416, -0.08580856025218964, -0.03545012325048447, 0.09528481215238571, 0.019028838723897934, -0.03794507309794426, -0.04734918475151062, -0.053830355405807495, 0.007702880539000034, -0.008833417668938637, -0.06856732070446014, -0.036609139293432236, -0.03627873584628105, 0.042638376355171204, 0.08430922776460648, -0.03119046241044998, 0.07015550136566162, -0.030144549906253815, -0.024397974833846092, -0.011663549579679966, -0.01625899225473404, 0.0826110988855362, 0.05000123381614685, 0.039245836436748505], "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ee1bf574-7fb4-4b01-9027-03a50c180ec0", "node_type": "4", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "ca97d476ee0e14a74f8b324ad696d47cb18b6cdba386ea4f4b3c67d12343d8d3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "41127064-c158-4a0a-b2d4-50729107276c", "node_type": "1", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "6bcc50618cc70bc731985bb676b81481151a734a964db783e58dcdef1cea69ea", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b44802f6-54bb-4719-a37f-1c74a32e140a", "node_type": "1", "metadata": {}, "hash": "85b042d804a739de4cdbae488909194291efa9fed9a34a7636bbff8e3fa6b92f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "It compares their attributes and assigns a similarity score. For instance, if two books share the same author, they get a strong similarity boost.\n\nThen, when you ask for recommendations:\n\n```mermaid\nsequenceDiagram\n    participant User\n    participant App Service\n    participant Graph\n    participant ReRanker (Popularity)\n    participant Books\n\n    User->>App Service: \"Show recommendations for 'Clean Code'\"\n    App Service->>Graph: recommendPopularBooks(\"Clean Code\", 5, popularityMap)\n    Graph->>Graph: Find direct neighbors of \"Clean Code\" in the network (e.g., \"Pragmatic Programmer\", \"Effective Java\")\n    Graph->>ReRanker (Popularity): Get popularity scores for these neighbors\n    Note over Graph: Combines intrinsic similarity with popularity to rank recommendations\n    ReRanker (Popularity)-->>Graph: Popularity scores\n    Graph-->>App Service: List of recommended titles (e.g., [\"Pragmatic Programmer\", \"Effective Java\"])\n    App Service->>Books: Get full Book objects for titles\n    Books-->>App Service: List<Book>\n    App Service-->>User: Display recommended books\n```\n\nThe `recommendPopularBooks` method takes the chosen book's title, finds its most similar neighbors in the graph, and then uses the `popularityMap` (from the `ReRanker`) to sort these recommendations, ensuring trending and highly-clicked books are prioritized.\n\n**`src/main/java/features/recommendation/Graph.java` (Simplified `recommendPopularBooks` method)**\n```java\n// Inside Graph class\npublic List<String> recommendPopularBooks(String bookTitle, int limit, Map<Integer, Double> popularityMap) {\n    String key = normalize(bookTitle); // Clean input title\n    Map<String, Double> relatedBooks = adjList.getOrDefault(key, Collections.emptyMap());\n    List<String> result = new ArrayList<>(relatedBooks.keySet());\n\n    final double ALPHA = 0.7; // How much emphasis on relevance vs.", "mimetype": "text/plain", "start_char_idx": 14008, "end_char_idx": 15880, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "b44802f6-54bb-4719-a37f-1c74a32e140a", "embedding": [-0.06593123078346252, -0.016068333759903908, -0.03169163316488266, 0.012124193832278252, 0.018153468146920204, -0.014990287832915783, -0.014886375516653061, 0.013715479522943497, 0.09480341523885727, 0.0007632992928847671, -0.0005594705580733716, -0.03137291595339775, 0.0479440875351429, 0.03610079362988472, -0.006172048393636942, 0.034146860241889954, 0.05938431993126869, 0.007358991540968418, -0.05958566442131996, 0.016158655285835266, 0.02546858601272106, 0.040598392486572266, 0.04692268744111061, -0.023184696212410927, 0.05701038986444473, 0.04465043172240257, -0.037933144718408585, -0.058422546833753586, -0.025773487985134125, -0.22827844321727753, -0.03211053088307381, -0.005334922112524509, 0.11060863733291626, 0.005872719455510378, -0.023162268102169037, -0.002730682259425521, 0.019004879519343376, -0.015946991741657257, 0.01568412221968174, -0.024600747972726822, 0.012836701236665249, 0.012971153482794762, -0.02271818369626999, 0.016329584643244743, -0.025180485099554062, 0.021514160558581352, -0.05872848629951477, 0.01770608127117157, 0.018672041594982147, 0.008393030613660812, -0.0393112376332283, -0.03850504010915756, -0.027763456106185913, 0.06030318886041641, 0.025035865604877472, 0.011839732527732849, 0.027606477960944176, 0.06441962718963623, 0.01753840409219265, 0.03180898725986481, 0.041930556297302246, -0.006470130756497383, -0.12478867173194885, 0.0215037502348423, 0.003003625897690654, -0.013408035971224308, -0.05435756966471672, -0.004124210681766272, -0.04304360970854759, 0.0056120967492461205, -0.027513256296515465, 0.05611870065331459, 0.02653929963707924, 0.09149744361639023, 0.01274895016103983, 0.026739735156297684, -0.0035620531998574734, -0.041096657514572144, 0.013047749176621437, 0.004104552324861288, -0.03450591862201691, 0.027600646018981934, 0.00972997210919857, -0.0749245285987854, 0.028696557506918907, 0.013230900280177593, 0.0354711189866066, -0.005673692096024752, 0.03603367879986763, -0.005177628714591265, 0.009785718284547329, -0.020354129374027252, 0.005080743692815304, 0.03759578987956047, -0.017265131697058678, -0.011732086539268494, -0.0027482344303280115, 0.02543383091688156, 0.05363188683986664, 0.36756691336631775, -0.04845619201660156, 0.030639417469501495, -0.04200175404548645, 0.005989144090563059, 0.025925828143954277, -0.08614019304513931, 0.09649205952882767, -0.026941075921058655, 0.012200837954878807, -0.0010073082521557808, -0.020662875846028328, -0.05742437019944191, 0.04745516553521156, -0.09400313347578049, 0.07000796496868134, 0.034695032984018326, 0.022022675722837448, 0.036668531596660614, 0.028712520375847816, -0.017520733177661896, -0.049164123833179474, 0.00012800295371562243, 0.04138561710715294, -0.0017995147500187159, 0.05992970988154411, 0.024162625893950462, -0.004259871318936348, 0.05113934725522995, 0.012831209227442741, 0.005837338976562023, 0.016942396759986877, 0.0003602328069973737, -0.12868256866931915, -0.033370260149240494, -0.010764704085886478, 0.028936069458723068, -0.015546894632279873, -0.030372073873877525, 0.007953744381666183, 0.0015919848810881376, 0.04888969287276268, -0.04909089207649231, 0.035559915006160736, -0.009047440253198147, -0.08988984674215317, 0.13520114123821259, 0.014122910797595978, 0.03071000799536705, -0.037758685648441315, -0.004606760572642088, 0.011855383403599262, 0.008517353795468807, -0.032168805599212646, -0.05469373241066933, 0.016547732055187225, 0.04120299592614174, 0.05854512006044388, 0.03748377040028572, 0.008560611866414547, -0.040914710611104965, -0.05152721703052521, -0.032934945076704025, -0.06075155362486839, 0.04562366381287575, -0.027511978521943092, -0.05798818916082382, 0.010787950828671455, -0.0213308222591877, -0.07952876389026642, 0.028723327443003654, 0.007402244955301285, 0.02798021398484707, -0.007293513510376215, 0.11929184198379517, 0.031065067276358604, -0.016165519133210182, -0.02292359434068203, -0.07177948206663132, 0.06030366197228432, 0.005929132457822561, 0.03217718377709389, -0.05405409634113312, -0.030347710475325584, 0.0630289763212204, -0.046005599200725555, 0.03733157739043236, -0.006268749944865704, -0.023129547014832497, 0.016861923038959503, 0.04774438217282295, 0.013887167908251286, -0.007770382799208164, -0.0037524085491895676, 0.02012864127755165, 0.048234973102808, -0.026318475604057312, -0.0289015956223011, -0.02155168727040291, 0.009787579998373985, 0.015599873848259449, -0.01441366970539093, -0.009016088210046291, -0.024274814873933792, -0.014238842763006687, -0.017238736152648926, 0.012861942872405052, 0.020889142528176308, -0.060260284692049026, 0.07165280729532242, -0.02874145656824112, -0.032319340854883194, -0.09183677285909653, -0.07706793397665024, -0.036325402557849884, -0.02125254087150097, -0.028987715020775795, 0.02104118838906288, 0.06213730573654175, -0.018408706411719322, 0.04607352614402771, 0.0009383633150719106, -0.059087496250867844, -0.06446755677461624, -0.2797168493270874, 0.017433537170290947, 0.012188843451440334, -0.0344616137444973, 0.00672890106216073, -0.0376385897397995, 0.04352698475122452, -0.024470265954732895, -0.006179029121994972, 0.08252660185098648, 0.02889680303633213, -0.032326992601156235, -0.038038380444049835, 0.022310219705104828, -0.025373369455337524, -0.006829762365669012, -0.04368466138839722, -0.0122980996966362, -0.04086890071630478, -0.035467617213726044, 0.014564561657607555, -0.031182223930954933, -0.015604439191520214, -0.08226561546325684, 0.018295301124453545, -0.015844905748963356, 0.06848759949207306, 0.016975879669189453, -0.023122427985072136, -0.005022120196372271, 0.024093711748719215, 0.016573134809732437, -0.06948845833539963, -0.011851206421852112, -0.003995693754404783, 0.04072505980730057, 0.07129635661840439, 0.0007145845447666943, -0.07905328273773193, -0.017492439597845078, -0.024726763367652893, 0.04979993402957916, 0.010348833166062832, -0.054938048124313354, -0.040696121752262115, -0.022041380405426025, 0.05679013580083847, 0.015563835389912128, 0.025454239919781685, 0.08392001688480377, -0.03889048472046852, 0.01898343116044998, 0.01807137206196785, 0.021280311048030853, -0.04310550540685654, -0.03409147635102272, -0.060736771672964096, -0.03952084854245186, -0.04719189554452896, -0.00477445125579834, -0.004571398254483938, -0.053548917174339294, 0.03256112337112427, -0.027572987601161003, -0.018773440271615982, -0.022439152002334595, -0.04694318398833275, 0.0841856449842453, -0.0054506463930010796, 0.02625458501279354, -0.06982143968343735, 0.018061751499772072, -0.04282142594456673, 0.035801008343696594, 0.025541551411151886, 0.054389432072639465, 0.05177464336156845, 0.023878352716565132, -0.019542016088962555, -0.013852983713150024, 0.03178603947162628, 0.054839398711919785, 0.019896768033504486, -0.018779365345835686, 0.03201195225119591, -0.0718773826956749, 0.06929223239421844, -0.0027544409967958927, -0.026958603411912918, 0.03675714507699013, -0.014303979463875294, -0.01653279736638069, -0.015333946794271469, 0.0006142053753137589, -0.021002493798732758, 0.03403500095009804, -0.27728813886642456, -0.01205718144774437, -0.02666526474058628, 0.05180151388049126, 0.03223787620663643, -0.030156580731272697, 0.07043032348155975, -0.06209206581115723, 0.03418930992484093, 0.021532118320465088, 0.056309062987565994, 0.07475007325410843, 0.03199734538793564, -0.04992857575416565, -0.03977293521165848, -0.003156363731250167, 0.028529325500130653, -0.03448077291250229, 0.05505627766251564, 0.02507346123456955, 0.02202550135552883, -0.0010941873770207167, 0.18928025662899017, 0.04608667269349098, 0.034110333770513535, -0.04376554489135742, -0.018222913146018982, 0.0016652768244966865, 0.0293938796967268, -0.001269067986868322, -0.010554447770118713, -0.0321943424642086, 0.057642754167318344, -0.05421440675854683, -0.01386579591780901, 0.016214720904827118, 0.011728614568710327, 0.024966677650809288, 0.009925455786287785, -0.03193405643105507, 0.024113373830914497, 0.011612356640398502, -0.10673018544912338, -0.011476916261017323, 0.07707061618566513, 0.003095874097198248, 0.03305977210402489, -0.07367345690727234, -0.0376853384077549, 0.018003715202212334, 0.009030045010149479, -0.03595087304711342, -0.02453792095184326, -0.01222979836165905, 0.036325473338365555, 0.07154467701911926, 0.01161375641822815, 0.06295613944530487, -0.0028689445462077856, -0.01494594570249319, -0.028616756200790405, -0.038841698318719864, 0.09167259931564331, 0.07024385780096054, 0.012298795394599438], "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ee1bf574-7fb4-4b01-9027-03a50c180ec0", "node_type": "4", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "ca97d476ee0e14a74f8b324ad696d47cb18b6cdba386ea4f4b3c67d12343d8d3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "215e8e0f-7f68-4f57-94a1-4421484caee7", "node_type": "1", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "86d2ceb0f1155b88904c1b5f1fe6d3de68a27a889c17f5e01829208e7822fff6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8d7e5543-64e3-42ea-bc79-dcb148b405d3", "node_type": "1", "metadata": {}, "hash": "0f2b699623863acfc988c8329b73bf5e9572933584af822eac32d75d14a0fc0f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "popularity (70% relevance, 30% popularity)\n\n    // Sort related books by a combined score of similarity AND popularity\n    result.sort((a, b) -> {\n        double relA = relatedBooks.getOrDefault(a, 0.0); // Similarity to original book\n        double relB = relatedBooks.getOrDefault(b, 0.0);\n\n        // Get popularity score from the map\n        double popA = popularityMap.getOrDefault(titleToId.getOrDefault(a, -1), 0.0);\n        double popB = popularityMap.getOrDefault(titleToId.getOrDefault(b, -1), 0.0);\n\n        // Combine relevance and popularity for final recommendation score\n        double scoreA = ALPHA * relA + (1 - ALPHA) * popA;\n        double scoreB = ALPHA * relB + (1 - ALPHA) * popB;\n\n        return Double.compare(scoreB, scoreA); // Sort highest score first\n    });\n    return result.subList(0, Math.min(limit, result.size())); // Return top N\n}\n```\nThis method takes a book title and the `popularityMap`. It finds books related to the input title (`relatedBooks`) and then sorts them by a `finalScore` which is a blend of their intrinsic similarity (`relA`, `relB`) and their current popularity (`popA`, `popB`).\n\n### The Savvy Librarian in Action: Putting It All Together\n\nLet's revisit our central use case: searching for \"python maching learning\".\n\n| Step                               | Component Involved | What Happens                                                                     | User Experience                                       |\n| :--------------------------------- | :----------------- | :------------------------------------------------------------------------------- | :---------------------------------------------------- |\n| **1. Initial Search**              | `QueryProcessor`   | Tries to find books for \"python maching learning\", finds few/none.               | \"No results found for 'python maching learning'.\"     |\n| **2. Suggestion**                  | `Suggester`        | Compares \"maching learning\" to titles, finds it's very close to \"machine learning\". | \"Did you mean: Python Machine Learning?\"              |\n| **3. Re-Search with Suggestion**   | `QueryProcessor`   | Runs search for \"Python Machine Learning\". Finds many books.                     | (System automatically searches for the suggestion)    |\n| **4.", "mimetype": "text/plain", "start_char_idx": 15881, "end_char_idx": 18160, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "8d7e5543-64e3-42ea-bc79-dcb148b405d3", "embedding": [-0.0592150054872036, 0.016019389033317566, -0.02998455800116062, 0.031603407114744186, 0.02055083028972149, -0.0045481473207473755, -0.0743403211236, 0.03864526003599167, 0.03168722242116928, -0.0046069263480603695, 0.010993901640176773, -0.011326641775667667, 0.02181628718972206, 0.031155316159129143, 0.010368294082581997, 0.01686089299619198, 0.051517635583877563, 0.025511935353279114, -0.049611564725637436, -0.049413152039051056, 0.031118258833885193, 0.04226512089371681, 0.00019039836479350924, -0.08673600107431412, -0.015140802599489689, -0.0010900736087933183, 0.008412245661020279, -0.026207933202385902, -0.026997795328497887, -0.20455940067768097, 0.02082398161292076, -0.014356357045471668, 0.07238061726093292, 0.0005975289968773723, -0.025864938274025917, 0.013450097292661667, 0.03651461750268936, 0.011418692767620087, -0.006857072468847036, 0.007269986905157566, 0.01756248064339161, -0.03807740658521652, -0.0038797222077846527, 0.047438137233257294, 0.009259957820177078, 0.034373506903648376, -0.008784685283899307, -0.0384412556886673, -0.05538511276245117, -0.0009013747330754995, -0.04854092374444008, -0.04373454302549362, 0.0030204688664525747, 0.054085277020931244, 0.04240680858492851, 0.031793296337127686, 0.053120508790016174, 0.07188829779624939, 0.03103531338274479, 0.019426671788096428, 0.06882435083389282, -0.004720991011708975, -0.10892431437969208, 0.03764699026942253, 0.01910325698554516, -0.0005395370535552502, -0.020907364785671234, -0.07106202095746994, 0.007459696847945452, 0.06570771336555481, -0.008303369395434856, 0.04212665930390358, -0.0311861764639616, 0.048117801547050476, 0.0003921833704225719, 0.07658600807189941, 0.012805037200450897, -0.02616788074374199, 0.05613826960325241, 0.03388703614473343, -0.009562191553413868, -0.0038399978075176477, -0.021198444068431854, -0.05473269522190094, 0.006923120003193617, -0.016428176313638687, 0.006618386600166559, 0.017261559143662453, 0.03950297832489014, -0.025345072150230408, 0.04641610383987427, -0.02268771268427372, 0.04713919386267662, 0.039514683187007904, -0.0422804094851017, 0.01015158835798502, 0.013918958604335785, 0.07828965783119202, -0.014049770310521126, 0.33502450585365295, -0.058049559593200684, 0.07463765144348145, -0.03764744848012924, 0.012055275030434132, -0.0288753230124712, -0.11936590820550919, 0.01124187558889389, 0.002138364827260375, 0.014821672812104225, -0.014578180387616158, 0.005122404545545578, -0.06830456852912903, 0.06490297615528107, -0.040727850049734116, -0.005974982865154743, 0.04048852249979973, -0.01191436406224966, 0.053753845393657684, 0.03066934272646904, 0.0007732565863989294, -0.034270819276571274, -0.04129304736852646, 0.00829415861517191, 0.00897987000644207, 0.020695174112915993, 0.009776195511221886, -0.039977699518203735, 0.0847080796957016, -0.026674624532461166, 0.008649253286421299, -0.01031405944377184, -0.0003733584890142083, -0.10932379215955734, 0.003000494558364153, 0.065475694835186, 0.028423525393009186, -0.03449723869562149, -0.003598710522055626, 0.020295754075050354, 0.014330399222671986, -0.01696624606847763, -0.004889791831374168, 0.01599564217031002, 0.01321391947567463, -0.09436269104480743, 0.12623466551303864, -0.034388184547424316, -0.019930263981223106, -0.04733335226774216, -0.05653110891580582, 0.01608380675315857, 0.043939560651779175, -0.049430686980485916, -0.06317120045423508, 0.05293877422809601, 0.06171911954879761, 0.0887504518032074, -0.02579103596508503, -0.0633295550942421, -0.034936510026454926, -0.061246953904628754, -0.008584577590227127, -0.046007122844457626, 0.08938785642385483, 0.010206659324467182, -0.10565988719463348, -0.0493101142346859, -0.040746282786130905, -0.12277129292488098, 0.037881139665842056, 0.03299899026751518, 0.022373005747795105, -0.036524977535009384, 0.06607815623283386, -0.03397001326084137, -0.015929395332932472, -0.06842733174562454, -0.045216068625450134, 0.04638063162565231, -0.006342470645904541, -0.007329386658966541, -0.022543488070368767, -0.02471759542822838, 0.016812274232506752, -0.02717076614499092, -0.018725087866187096, -0.0430443175137043, -0.04317839816212654, -0.010382909327745438, 0.040102552622556686, -0.03538338094949722, -0.0028723780997097492, 0.03851095214486122, -0.008729921653866768, 0.045663394033908844, -0.029885049909353256, -0.014761146157979965, 0.011731520295143127, 0.003945725038647652, -0.007191910408437252, 0.002137304749339819, 0.039706308394670486, -4.21510158048477e-05, 0.004092702642083168, -0.03368527442216873, 0.0032621121499687433, -0.0001790086244000122, -0.04351835697889328, 0.11577972024679184, -0.020660696551203728, 0.010501929558813572, -0.07749596983194351, -0.030754316598176956, -0.05042653903365135, -0.06922461092472076, 0.007894864305853844, 0.018852494657039642, 0.02156711183488369, -0.031315553933382034, 0.039806269109249115, -0.0038635432720184326, -0.004038266837596893, -0.04920398071408272, -0.2899665832519531, -0.013082741759717464, 0.0014658959116786718, -0.011909195221960545, 0.001702882582321763, -0.0652698501944542, 0.05532511696219444, 0.020735377445816994, 0.03057706542313099, 0.06398659944534302, 0.03762541338801384, -0.006819472182542086, -0.0252592284232378, -0.00023583740403410047, 0.007967855781316757, 0.015266909264028072, 0.0306538175791502, -0.01738189533352852, -0.08989180624485016, -0.04130931198596954, 0.026452859863638878, 0.0034986187238246202, 0.04042121395468712, -0.13368873298168182, 0.032861724495887756, -0.017748937010765076, 0.12761075794696808, 0.024308370426297188, 0.03680151328444481, -0.04170247167348862, 0.024243725463747978, 0.055489733815193176, -0.055385928601026535, -0.084565170109272, -0.002445041900500655, 0.013508775271475315, 0.04616514593362808, 0.013832002878189087, -0.0361020602285862, 0.02248792164027691, 0.058699123561382294, 0.01730424165725708, 0.043435271829366684, -0.031072884798049927, -0.03980565071105957, 0.010017708875238895, 0.01784420572221279, -0.024091122671961784, 0.02245396003127098, 0.08517584204673767, -0.04244086146354675, 0.05946468934416771, 0.017277196049690247, -0.012993182986974716, -0.06338340044021606, -0.017524830996990204, -0.05940434709191322, -0.05959417298436165, -0.016009727492928505, -0.0595770888030529, 0.007238804362714291, -0.03372097760438919, -0.004655723460018635, -0.037429116666316986, 0.04174715280532837, -0.06934719532728195, 0.028425542637705803, 0.01791883446276188, 0.017261816188693047, 0.01282803900539875, -0.06478780508041382, 0.033324237912893295, -0.017044613137841225, 0.036443039774894714, 0.06811128556728363, 0.058562811464071274, 0.036765675991773605, 0.00938884261995554, -0.02734287828207016, -0.04047642648220062, 0.06085696816444397, 0.00585367763414979, 0.04673883318901062, -0.02306615188717842, 0.03765197470784187, -0.04651665687561035, 0.04793517664074898, 0.003875346388667822, 0.05130966007709503, 0.0739334225654602, -0.05838318169116974, -0.042833760380744934, -0.05267030745744705, 0.02584303542971611, 0.05334393307566643, 0.04046323895454407, -0.25532492995262146, 0.025875793769955635, -0.014963800087571144, 0.02113175578415394, 0.028898781165480614, -0.021052606403827667, 0.022284312173724174, -0.0327213779091835, 0.062155675143003464, -0.04647804796695709, -0.014286687597632408, 0.03334394842386246, 0.020766912028193474, -0.07811477035284042, -0.002427895786240697, -0.005420367699116468, 0.08272326737642288, -0.028701476752758026, 0.013054410926997662, 0.01581389643251896, 0.02079533040523529, 0.022716008126735687, 0.18420358002185822, 0.0138236153870821, 0.038716960698366165, -0.015208244323730469, -0.001202865969389677, -0.06827852129936218, -0.02889549359679222, 0.02206440456211567, 0.014393438585102558, -0.0600409135222435, 0.05505387857556343, -0.016382988542318344, 0.00596015527844429, 0.04767141491174698, -0.022487124428153038, -0.005297739524394274, 0.03286391869187355, -0.0370965376496315, 0.04844989627599716, 0.017758645117282867, -0.05006544291973114, 0.0024878012482076883, 0.05561297386884689, 0.003580058692023158, 0.028579769656062126, -0.07085353136062622, -0.03912477567791939, 0.06008680909872055, 0.024821747094392776, -0.01725078374147415, 0.0020806612446904182, -0.01816733181476593, 0.06750304251909256, 0.04931878298521042, 0.016743144020438194, 0.0186118483543396, -0.009447113610804081, -0.025235939770936966, 0.01876874826848507, -0.03392501920461655, 0.06802965700626373, 0.007171370089054108, 0.025632064789533615], "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ee1bf574-7fb4-4b01-9027-03a50c180ec0", "node_type": "4", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "ca97d476ee0e14a74f8b324ad696d47cb18b6cdba386ea4f4b3c67d12343d8d3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b44802f6-54bb-4719-a37f-1c74a32e140a", "node_type": "1", "metadata": {"file_name": "Chapter 7 Search Enhancement & Recommendations.md"}, "hash": "cb29352484ee441ba48bf5f9b475ebca44221cd934509db6213ce9b2ce26df7c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Re-Search with Suggestion**   | `QueryProcessor`   | Runs search for \"Python Machine Learning\". Finds many books.                     | (System automatically searches for the suggestion)    |\n| **4. Enhance Search Results**      | `ReRanker`         | Takes results for \"Python Machine Learning\", boosts exact title matches (\"Python Machine Learning\"), and pushes up popular/highly-rated books. | Top results are the best, most relevant, and popular \"Python Machine Learning\" books. |\n| **5. Get Recommendations**         | `Graph`            | If you click on a \"Python Machine Learning\" book, it finds related books (e.g., \"Deep Learning\", \"Data Science Handbook\") and prioritizes those that are currently popular. | \"If you liked this, you might also like: Deep Learning, Data Science Handbook...\" |\n\n### Conclusion\n\nIn this chapter, we explored \"Search Enhancement & Recommendations,\" the intelligent layer that refines DevShelf's core search. We learned how:\n*   The `ReRanker` takes raw search results and makes them smarter by combining initial relevance, book ratings, user popularity, and powerful title boosting.\n*   The `Suggester` acts as our helpful librarian, correcting misspelled queries with \"Did you mean?\" suggestions using advanced similarity algorithms.\n*   The `Graph` builds a network of related books based on shared attributes and, combined with popularity data, provides personalized and trending recommendations.\n\nTogether, these components transform DevShelf from a basic search tool into a truly savvy digital librarian, making your search experience much more intuitive, helpful, and enjoyable!\n\nNext, we'll dive into the foundational tools that underpin many of these intelligent features: the \"Text Normalization Utilities\" that ensure all our text is clean and consistent.\n\n[Next Chapter: Text Normalization Utilities](08_text_normalization_utilities_.md)", "mimetype": "text/plain", "start_char_idx": 17962, "end_char_idx": 19850, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "c3405965-3835-4862-9028-a82d4102bec1", "embedding": [-0.06298305094242096, 0.02501853182911873, -0.04324784502387047, 0.037151895463466644, 0.039538804441690445, -0.050836920738220215, -0.06482402235269547, 0.01933017559349537, -0.004667746368795633, -0.024541987106204033, 0.00290573388338089, -0.021450603380799294, 0.004031669348478317, -0.013731916435062885, -0.011240331456065178, -0.025007305666804314, 0.02241583541035652, 0.03802720829844475, -0.08446884900331497, -0.008820798248052597, 0.06364883482456207, 0.044797468930482864, 0.02180902473628521, -0.07595233619213104, 0.01937483251094818, 0.04436272382736206, -0.008432389236986637, -0.005512124393135309, -0.030655207112431526, -0.222100168466568, 0.00036255011218599975, 0.022042453289031982, 0.09784382581710815, 0.004422998055815697, 0.008850004523992538, -0.022689063102006912, 0.0009261755039915442, 0.024688804522156715, 0.011226717382669449, 0.0025182696990668774, -0.0056834411807358265, 0.0036336483899503946, -0.0157391969114542, 0.0526401586830616, -0.011746196076273918, 0.0039961449801921844, -0.04509241133928299, -0.02154906466603279, -0.05332484841346741, -0.017925536260008812, -0.08487337082624435, 0.007965870201587677, 0.030326204374432564, 0.006160504184663296, 0.007175144273787737, -0.0029421064537018538, 0.05943867936730385, 0.06162142753601074, 0.011884856037795544, -0.03335283696651459, -0.002356611890718341, -0.010233450680971146, -0.08648422360420227, 0.10252432525157928, 0.017725348472595215, -0.0006242786184884608, -0.0022135756444185972, -0.0753026232123375, -0.010324009694159031, 0.01781989261507988, 0.005215237382799387, 0.05448244884610176, 0.005283787380903959, 0.0904943123459816, 0.015402683988213539, -0.009150167927145958, 0.0027347649447619915, -0.024493230506777763, 0.05044787377119064, 0.009113620035350323, -0.034028664231300354, -0.05930657312273979, 0.036759234964847565, 0.01129125151783228, -0.013256380334496498, 0.0013810937525704503, 0.020201342180371284, -0.0038962666876614094, 0.020608622580766678, 0.004308026283979416, 0.053110234439373016, -0.06196940317749977, 0.06501807272434235, 0.03272134065628052, -0.01864384114742279, -0.010105039924383163, -0.007118557579815388, 0.05861884728074074, -0.007419556844979525, 0.3909454643726349, -0.0330987423658371, 0.07202973961830139, 0.02651422843337059, -0.017955774441361427, 0.012676124460995197, -0.05829562991857529, 0.004375594202429056, 0.01645798794925213, 0.025693506002426147, -0.015949562191963196, 0.011828482151031494, -0.06313246488571167, 0.06828803569078445, -0.022045956924557686, 0.00824675802141428, 0.02011057548224926, -0.009662325493991375, 0.015859201550483704, -0.007193258963525295, -0.015861615538597107, 0.0004781910392921418, -0.006829437334090471, -0.03594101220369339, 0.02895917370915413, 0.07608433067798615, -0.02491346374154091, -0.02534635178744793, 0.07213585078716278, -0.02810784988105297, 0.004033111501485109, -0.01638386771082878, 0.012115742079913616, -0.0801781564950943, 0.0072916001081466675, 0.03875226527452469, 0.047076232731342316, -0.08407525718212128, -0.04488960653543472, 0.004998697899281979, 0.0047370619140565395, -0.027553653344511986, 0.03625719994306564, 0.0058350590988993645, -0.00017805743846111, -0.07568228244781494, 0.10380931943655014, 0.006599710322916508, 0.004728957079350948, -0.04551516845822334, -0.05400632694363594, 0.009239105507731438, 0.04044654965400696, -0.004222410265356302, -0.060729917138814926, 0.026444951072335243, 0.03473549708724022, 0.10345586389303207, -0.008564096875488758, -0.049049943685531616, -0.08191324025392532, -0.022157810628414154, 0.015787199139595032, -0.04040415585041046, 0.09234540909528732, -0.03631807863712311, -0.05816866084933281, -0.04985470697283745, -0.008871179074048996, -0.12009809166193008, -0.004585547372698784, 0.00673338770866394, -0.04921368137001991, -0.03526203706860542, 0.040533646941185, -0.016764042899012566, -0.034618817269802094, -0.053459685295820236, 0.025858977809548378, 0.020953288301825523, 0.0005927610327489674, 0.04333687946200371, -0.003999087493866682, -0.009322992525994778, 0.02184946835041046, -0.007783397566527128, -0.07741331309080124, -0.04536942392587662, -0.009292944334447384, 0.07515448331832886, 0.0210554376244545, -0.0197252556681633, -0.02819342352449894, 0.022658109664916992, -0.029685745015740395, 0.013482369482517242, 0.006130475550889969, -0.01268099807202816, -0.0256597138941288, -0.02715293876826763, -0.0125614358112216, -0.01093155425041914, 0.07832706719636917, -0.007179085165262222, 0.0018521938472986221, -0.025316737592220306, -0.016788307577371597, 0.010835017077624798, -0.0830155462026596, 0.07032021880149841, 0.02217322774231434, -0.021319963037967682, -0.042522720992565155, -0.02992248348891735, -0.035000067204236984, -0.034045521169900894, -0.00448850030079484, 0.015526990406215191, 0.043725404888391495, -0.02394927851855755, 0.056250233203172684, -0.03412617743015289, 0.004048184026032686, -0.0548635795712471, -0.2961706519126892, 0.013217710889875889, -0.014664184302091599, -0.013323775492608547, 0.05643086135387421, -0.058633703738451004, 0.01747686229646206, -0.034921351820230484, -0.05964413285255432, 0.02283707819879055, 0.05632948875427246, -0.06329090893268585, -0.009337877854704857, -0.031001634895801544, 0.0228582676500082, 0.07243847101926804, 0.05462789908051491, -0.019459422677755356, -0.0651848167181015, -7.003516657277942e-05, 0.026839787140488625, -0.021384306252002716, 0.007727055344730616, -0.08411760628223419, 0.027632305398583412, 0.016819803044199944, 0.10439909249544144, 0.033947721123695374, 0.11590210348367691, -0.06010042503476143, 0.03581170737743378, 0.025385992601513863, -0.05042876675724983, -0.0807417556643486, -0.01723024621605873, 0.02128765918314457, 0.0012307525612413883, 0.012478278949856758, -0.01943124085664749, -0.0024764728732407093, 0.04770788177847862, -0.001659786095842719, -0.015204940922558308, -0.0037630016449838877, -0.049138881266117096, -0.0009165348019450903, -0.0039281705394387245, -0.1294185072183609, 0.016107071191072464, 0.05408007279038429, -0.042819008231163025, 0.06149819493293762, 0.020481640473008156, 0.02573389746248722, -0.0032295959535986185, -0.02018897980451584, -0.04667861759662628, -0.043383583426475525, -0.024229872971773148, -0.03341896831989288, 0.02829986996948719, 0.017687616869807243, -0.0023338645696640015, -0.003205370856449008, 0.03819463402032852, -0.019214458763599396, -0.007859829813241959, 0.003720758017152548, 0.05722055956721306, -0.015295936726033688, -0.06718800216913223, 0.013027118518948555, -0.04081937298178673, -0.0028622157406061888, 0.018014755100011826, 0.06409504264593124, 0.01915927417576313, 0.03056284226477146, 0.025899333879351616, -0.04559232294559479, 0.04272624850273132, 0.02402787283062935, 0.09938685595989227, -0.0427352711558342, 0.014250126667320728, -0.006836323067545891, 0.03266437351703644, -0.02194090373814106, 0.024808138608932495, 0.04305507615208626, -0.04981536418199539, 0.013272695243358612, 0.017416493967175484, 0.0027692101430147886, 0.04550885409116745, 0.04840682074427605, -0.2761867046356201, -0.002864687703549862, 0.03005855344235897, -0.01553745474666357, 0.019498081877827644, -0.00024919366114772856, 0.017816875129938126, -0.048803575336933136, 0.053952042013406754, 0.014330138452351093, -0.048080530017614365, 0.030612675473093987, -0.011939887888729572, -0.09149956703186035, 0.03394201770424843, 0.048513926565647125, 0.1285981684923172, -0.030951974913477898, 0.009524972178041935, -0.0010539594804868102, 0.04178665578365326, -0.014942052774131298, 0.17040906846523285, -0.016543760895729065, 0.014504644088447094, 0.006705205421894789, 0.03359239920973778, -0.023416876792907715, 0.002281754743307829, 0.056655772030353546, 0.04862210899591446, -0.03659145534038544, 0.040933988988399506, 0.029756449162960052, -0.0031165361870080233, -0.018254755064845085, 0.0088660828769207, 0.012283897027373314, 0.01679484359920025, -0.036620642989873886, 0.0022529191337525845, 0.02585703693330288, -0.012682250700891018, -0.03450360894203186, 0.041989054530858994, -0.022635256871581078, -0.003870008746162057, -0.023087957873940468, -0.041240397840738297, 0.038733795285224915, -0.006680787540972233, 0.012279314920306206, 0.020718509331345558, -0.017163226380944252, 0.05569275841116905, 0.03218407928943634, 0.015289198607206345, 0.003855784423649311, -0.03207757696509361, 0.02548382245004177, 0.026779551059007645, -0.027438532561063766, 0.08228405565023422, 0.05539419874548912, 0.030860664322972298], "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "b2dc9d6c-4c98-42c5-9ebc-99a008254820", "node_type": "4", "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "hash": "39654890a2379ae3b4d9f1a61cec235b2dd0a88bd362763fb1a1cdcda3e8a888", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6e9c5c1d-37fc-4736-81eb-d37847daa968", "node_type": "1", "metadata": {}, "hash": "a45fc330e9aa76816e7c850bfa8f85278dd42a4bf81c382e93e6846b733ef38a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Welcome back to DevShelf! In our last chapter, [Search Enhancement & Recommendations](07_search_enhancement___recommendations_.md), we saw how DevShelf becomes a \"savvy librarian,\" offering intelligent suggestions and smart recommendations to improve your search experience. But all that intelligence relies on a fundamental, behind-the-scenes hero: making sure all text is clean and consistent.\n\nImagine asking a librarian for \"books on running,\" and they can only find books that specifically contain the word \"running.\" They might miss great books that use \"ran,\" \"runs,\" or \"jogging\"! Or what if you typed \"Python books,\" but a book's description said \"PYTHON programming guide\"? Without some clever pre-processing, these wouldn't match perfectly.\n\nThis is the problem that **Text Normalization Utilities** solve. It's like having a meticulous editor who pre-processes *all* text in the library \u2013 every book description and every search query you type \u2013 to make it uniform and easy for the search engine to understand.\n\n#### The Problem Our Utilities Solve\n\nText comes in all shapes and sizes. Sometimes it's all uppercase, sometimes it has punctuation, and often it contains very common words that don't help us find specific books. If DevShelf tries to match \"Python\" (capital P) from your query with \"python\" (lowercase p) in a book description, it won't work perfectly unless both are standardized.\n\n**Our central use case:** You search for \"How to write **Clean Code** in **Java**\". DevShelf needs to understand that you're looking for books on \"clean,\" \"code,\" and \"java,\" regardless of capitalization, common words like \"to\" or \"how,\" or even if the book says \"java programs\" instead of just \"java.\" This utility ensures your query matches the book's content accurately.\n\n### The Text Processor: Our Digital Editor\n\nThe main tool for text normalization in DevShelf is the `TextProcessor`. Think of it as our digital editor. Its job is to take any raw text (from book descriptions, titles, or your search query) and put it through a series of cleaning steps.\n\nWhen you give the `TextProcessor` some text, it does four main things:\n\n1.  **Tokenization**: Breaks down a sentence into individual \"words\" or \"tokens.\"\n2.  **Lowercasing**: Converts all text to lowercase.\n3.", "mimetype": "text/plain", "start_char_idx": 1, "end_char_idx": 2280, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "6e9c5c1d-37fc-4736-81eb-d37847daa968", "embedding": [-0.006349898874759674, 0.005521968472748995, -0.05215225741267204, 0.043696869164705276, -0.021794762462377548, -0.08849891275167465, -0.02195483073592186, 0.036257434636354446, 0.0093087675049901, 0.04265834763646126, 0.020805146545171738, -0.03998996689915657, -0.007253886200487614, -0.05450902879238129, -0.058401383459568024, -0.0039325496181845665, 0.003097061300650239, 0.015299593098461628, -0.08148530125617981, -0.03374219313263893, 0.06718412786722183, 0.030016275122761726, -0.00946203712373972, -0.062292128801345825, 0.04103695601224899, 0.03819139674305916, -0.07508018612861633, -0.028929345309734344, 0.0282797459512949, -0.16615402698516846, 0.027119237929582596, -0.04097040742635727, 0.09155099838972092, 0.051633477210998535, -0.011072353459894657, 0.037447988986968994, 0.001836138078942895, 0.00984591618180275, -0.04219905287027359, 0.002298470586538315, -0.00029573350911960006, 0.005499964114278555, -0.042163945734500885, 0.03716746345162392, 0.027515506371855736, -0.02378726191818714, -0.03807491064071655, -0.06816363334655762, -0.009550375863909721, 0.06200812757015228, -0.035535778850317, 0.0030314431060105562, 0.0357980914413929, 0.008346169255673885, 0.007028056308627129, -0.05407991260290146, 0.07240637391805649, 0.09619155526161194, 0.024160437285900116, 0.012386755086481571, 0.023318052291870117, -0.01801343634724617, -0.15257327258586884, 0.10454583913087845, -0.02358824759721756, -0.014613335020840168, -0.02059883065521717, 0.0040736752562224865, -0.03337589278817177, 0.09686006605625153, -0.015004357323050499, 0.049277544021606445, 0.00476594315841794, 0.10143299400806427, -0.0006388517213054001, -0.04004944860935211, 0.0018969452939927578, -0.028451552614569664, 0.036643464118242264, -0.008224735036492348, -0.0277334563434124, 0.005555665120482445, -0.0014865320408716798, 0.0009093567496165633, 0.010118522681295872, 0.050417643040418625, -0.03511642664670944, 0.032078903168439865, 0.059985704720020294, -0.033337485045194626, 0.03954466059803963, -0.09291545301675797, 0.047159258276224136, 0.04004776477813721, -0.011038627475500107, -0.039311353117227554, -0.0035436879843473434, 0.06716543436050415, 0.029923323541879654, 0.29273146390914917, -0.06021259352564812, 0.05225607007741928, -0.02424698881804943, -0.030295010656118393, 0.01487228088080883, -0.05786576494574547, 0.01743585616350174, 0.013502014800906181, 2.6983658244716935e-05, 0.010388665832579136, 0.006277231499552727, -0.03228754550218582, 0.0007188956951722503, -0.009580055251717567, 0.037256013602018356, -0.005136961583048105, 0.02404411882162094, 0.01625658944249153, -0.022172115743160248, 0.05095613747835159, 0.01964711956679821, 0.02273225225508213, -0.015902183949947357, 0.01267295703291893, 0.06502294540405273, 0.03023787960410118, 0.044659290462732315, 0.07801076024770737, -0.018927311524748802, -0.005549315363168716, 0.024825099855661392, -0.035851214081048965, -0.07274273782968521, 0.04079838842153549, 0.035184670239686966, 0.004684528335928917, -0.002927289577201009, -0.04395299777388573, -0.0010900911875069141, 0.00666944682598114, 0.002137109637260437, 0.028009256348013878, 0.010918687097728252, -0.0027206328231841326, -0.033182963728904724, 0.09009597450494766, -0.05195741355419159, -0.0654829666018486, -0.03223150223493576, -0.035811323672533035, -0.04049531742930412, 0.021805889904499054, -0.007812092080712318, -0.062277961522340775, 0.022242804989218712, 0.03585060313344002, 0.06188898906111717, 0.01391688920557499, -0.059858836233615875, -0.030115881934762, -0.035359177738428116, 0.026494553312659264, -0.09301145374774933, 0.10657952725887299, 0.009834515862166882, -0.05496684089303017, -0.016842665150761604, -0.000309385999571532, -0.07941809296607971, -0.05244361236691475, 0.04560082405805588, -0.032618261873722076, -0.049932826310396194, 0.025848083198070526, -0.033983584493398666, 0.0003939748858101666, -0.025849580764770508, -0.0030575741548091173, 0.04104282706975937, 0.028862066566944122, 0.052331335842609406, -0.03892887011170387, 0.00020346365636214614, 0.0025226545985788107, 0.040472064167261124, 0.003202866530045867, -0.027571119368076324, -0.0032752116676419973, 0.05240825191140175, -0.016440361738204956, -0.0022390219382941723, 0.018090922385454178, -0.011496547609567642, -0.061520908027887344, -0.01579776033759117, 0.04376669228076935, -0.02639176696538925, -0.03448032960295677, -0.04719644784927368, 0.056218165904283524, 0.00956446211785078, 0.08519577980041504, -0.0304826982319355, -0.025318004190921783, 0.02432742528617382, 0.009258612059056759, 0.011347891762852669, -0.047902438789606094, 0.06686745584011078, 0.006632478907704353, -0.05830686166882515, -0.047810934484004974, -0.029825367033481598, -0.04133307933807373, -0.05388792231678963, -0.05412803590297699, 0.027897173538804054, 0.0457160584628582, 0.0048507885076105595, 0.03252505883574486, -0.02281098999083042, -0.04323958232998848, -0.0767061859369278, -0.30202460289001465, -0.05847804248332977, 0.017743755131959915, 0.012002328410744667, 0.07601980865001678, -0.050412263721227646, -0.06574472784996033, -0.0352461002767086, -0.060673706233501434, 0.02073032222688198, 0.028167858719825745, -0.0805177316069603, -0.005999692715704441, -0.028396498411893845, 0.029187746345996857, 0.001536166644655168, 0.01862430013716221, -0.019036922603845596, -0.05127411335706711, -0.024739159271121025, 0.05561747029423714, -0.023567531257867813, 0.04498452693223953, -0.0719846561551094, -0.03367987275123596, 0.007888584397733212, 0.10340134799480438, 0.0005333308945409954, 0.10579269379377365, 0.0015012499643489718, -0.008599957451224327, -0.010994006879627705, -0.02965060994029045, -0.08423346281051636, -0.01936279982328415, -0.0012881545117124915, 0.008125203661620617, -0.01972920075058937, -0.011784040369093418, -0.00838881079107523, -0.0005200707819312811, 0.05687437206506729, 0.013191821053624153, -0.03166290000081062, 0.006701549980789423, -0.03117913194000721, 0.007126222364604473, -0.10821279883384705, 0.05013393610715866, 0.06175634637475014, -0.018950514495372772, 0.10693777352571487, -0.012971973977982998, 0.06618934869766235, 0.038086529821157455, -0.07612291723489761, -0.033296771347522736, 0.021027227863669395, 0.0026200846768915653, -0.04058319702744484, 0.017888106405735016, -0.0036277035251259804, 0.013262438587844372, 0.027561740949749947, 0.004540706053376198, -0.03768608719110489, 0.033198725432157516, 0.050341974943876266, 0.007153138983994722, 0.008699409663677216, -0.07079309225082397, 0.052307941019535065, -0.05551625415682793, -0.010844896547496319, -0.006006593815982342, 0.018055951222777367, -0.02289392240345478, 0.02179308608174324, -0.0007536899647675455, -0.034860145300626755, 0.0528109148144722, 0.03284436836838722, 0.04881845787167549, 0.033686332404613495, -0.010255871340632439, 0.02854524739086628, 0.023823820054531097, -0.01561011839658022, 0.0026291212998330593, -0.010184524580836296, -0.03873417526483536, 0.012972317636013031, -0.027720825746655464, 0.08238136023283005, 0.02128922939300537, 0.034926775842905045, -0.2812208831310272, 0.029597196727991104, 0.03000359609723091, 0.003146070521324873, 0.0662439689040184, 0.009957167319953442, 0.026362719014286995, -0.019555652514100075, 0.019283073022961617, 0.051164694130420685, -0.05180031806230545, 0.03126854822039604, -0.007716346066445112, -0.058493658900260925, -0.021996665745973587, 0.04753587394952774, 0.1448162943124771, -0.04553624615073204, -0.023795291781425476, 0.008919138461351395, 0.035656366497278214, -0.030085748061537743, 0.17097757756710052, -0.02402750588953495, 0.04253097251057625, -0.013759775087237358, 0.047773752361536026, 0.0248565711081028, 0.04425715655088425, 0.016827978193759918, 0.029399903491139412, -0.013659890741109848, 0.1193557158112526, 0.0067673237062990665, 0.0016890972619876266, -0.001049519400112331, 0.06157444790005684, 0.028857916593551636, 0.022967331111431122, 0.017498116940259933, -0.04810553416609764, 0.01783469319343567, -0.016380617395043373, -0.07266121357679367, -0.0005250663962215185, -0.06276316940784454, -0.0003400118148420006, -0.08552812784910202, -0.031564369797706604, 0.060095157474279404, -0.0742299035191536, 0.013991141691803932, 0.011154056526720524, -0.03444647789001465, 0.017472296953201294, 0.04534986987709999, -0.04904359579086304, 0.029214436188340187, -0.006303205154836178, -0.013242287561297417, -0.002744054887443781, -0.028402253985404968, 0.02257646434009075, 0.10489233583211899, 0.043279170989990234], "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "b2dc9d6c-4c98-42c5-9ebc-99a008254820", "node_type": "4", "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "hash": "39654890a2379ae3b4d9f1a61cec235b2dd0a88bd362763fb1a1cdcda3e8a888", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c3405965-3835-4862-9028-a82d4102bec1", "node_type": "1", "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "hash": "dc7b83a48f571e808ebdf1efb7fa85b43b68880fe9a83f700dd793bea1a1e41d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1e47bb23-2b94-4cee-991d-ca2fa4b671cf", "node_type": "1", "metadata": {}, "hash": "5c442cb93028a2a9a20bedf9f31abea5d2688144bda6c95be17faa058fad9d6b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "**Tokenization**: Breaks down a sentence into individual \"words\" or \"tokens.\"\n2.  **Lowercasing**: Converts all text to lowercase.\n3.  **Stop Word Removal**: Filters out common, uninformative words.\n4.  **Stemming**: Reduces words to their basic \"root\" form.\n\n#### How `TextProcessor` is Used\n\nThe `TextProcessor` is a foundational utility. It's used by critical components like the `IndexBuilder` (from [Search Index Management](04_search_index_management_.md)) to process book content *before* indexing, and by the `QueryProcessor` (from [Core Search Engine](05_core_search_engine_.md)) to clean up your search queries.\n\nLet's see a simple example of how you'd use it:\n\n```java\n// Assuming 'textProcessor' is ready to use\nString rawText = \"The best BOOKS for running CODE in Python!\";\nList<String> cleanedWords = textProcessor.process(rawText);\nSystem.out.println(cleanedWords);\n```\n\n**Output:**\n```\n[best, book, run, code, python]\n```\n\nAs you can see, the original sentence `\"The best BOOKS for running CODE in Python!\"` has been transformed into a concise list of important, standardized words: `[\"best\", \"book\", \"run\", \"code\", \"python\"]`. \"The,\" \"for,\" \"in\" are gone (stop words), \"BOOKS\" became \"book\" (lowercasing, stemming), and \"running\" became \"run\" (stemming).\n\n### Under the Hood: The `TextProcessor`'s Workflow\n\nLet's visualize the `TextProcessor` at work when it cleans a piece of text:\n\n```mermaid\nsequenceDiagram\n    participant Raw Text\n    participant TextProcessor\n    participant StopWordLoader\n    participant Stemmer\n    participant Cleaned Words\n\n    Raw Text->>TextProcessor: \"Process 'The best BOOKS for running CODE in Python!'\"\n    TextProcessor->>TextProcessor: Tokenize & Lowercase\n    Note over TextProcessor: \"the\", \"best\", \"books\", \"for\", \"running\", \"code\", \"in\", \"python\"\n    TextProcessor->>StopWordLoader: \"Are 'the', 'for', 'in' stopwords?\"\n    StopWordLoader-->>TextProcessor: \"Yes, they are.\"", "mimetype": "text/plain", "start_char_idx": 2147, "end_char_idx": 4077, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "1e47bb23-2b94-4cee-991d-ca2fa4b671cf", "embedding": [-0.02391987293958664, 0.03330894187092781, -0.03362612798810005, 0.034411873668432236, 0.010608904995024204, -0.07575010508298874, -0.016938552260398865, 0.03594551607966423, 0.007853269577026367, 0.012379486113786697, 0.037590932101011276, -0.01619325950741768, 0.023997033014893532, -0.04295537993311882, -0.05326535180211067, -0.02025495283305645, 0.003719401778653264, 0.02814321592450142, -0.05598306283354759, -0.021217074245214462, 0.04538513720035553, 0.05685536935925484, -0.0018994159763678908, -0.0393947996199131, 0.044336993247270584, 0.06186634674668312, -0.07828444987535477, -0.023215193301439285, 0.011968089267611504, -0.15532231330871582, -0.0024459296837449074, -0.07400517165660858, 0.04714968428015709, 0.013111395761370659, 0.010793712921440601, 0.042339932173490524, -0.027779044583439827, 0.019162600859999657, -0.05543523654341698, 0.00198540766723454, -0.02954571507871151, -0.008131565526127815, -0.0434960313141346, 0.03142464905977249, 0.03058643639087677, -0.032611194998025894, -0.031090475618839264, -0.0709368959069252, 0.03848550468683243, 0.00406145304441452, -0.04491966962814331, -0.008748347871005535, 0.04320026561617851, -0.01578693650662899, 0.013019821606576443, -0.0426100455224514, 0.11148594319820404, 0.04972587525844574, 0.033680129796266556, -0.013409133069217205, -0.028541017323732376, -0.05084795132279396, -0.16403579711914062, 0.09645320475101471, -0.0349576435983181, 0.0008500408148393035, 0.019846828654408455, -0.006915711797773838, -0.02427104115486145, 0.07150699198246002, 0.015812348574399948, 0.07813560217618942, -0.0066990056075155735, 0.09061471372842789, -0.0065406570211052895, -0.03845157101750374, 0.006823033094406128, -0.026110226288437843, 0.05305502563714981, 0.01362689584493637, -0.051505766808986664, -0.022469185292720795, 0.009165467694401741, -0.0027920848224312067, 0.007641497999429703, 0.06302560120820999, -0.003591699292883277, 0.04950469732284546, 0.06529973447322845, -0.011845745146274567, 0.017294935882091522, -0.07527349144220352, 0.03678727149963379, 0.022894663736224174, -0.010478870943188667, -0.030964810401201248, -0.012211805209517479, 0.05907927826046944, -0.02776772528886795, 0.29862141609191895, -0.03307713568210602, 0.024155566468834877, -0.017155194655060768, -0.04984094202518463, 0.011412866413593292, -0.08722168207168579, -0.026280421763658524, -0.02510036900639534, -0.0016034310683608055, 0.018673675134778023, 0.01921800523996353, -0.055608123540878296, 0.06280578672885895, 0.0004383071791380644, 0.041093822568655014, -0.02369050867855549, 0.05150013044476509, -0.01985664665699005, -0.03358788043260574, 0.019594069570302963, 0.018051855266094208, 0.03298628330230713, -0.02690514363348484, 0.01139118056744337, 0.048052407801151276, 0.03931377828121185, 0.050827402621507645, 0.08935067057609558, -0.001049411715939641, 0.010090947151184082, 0.03199319913983345, -0.026275305077433586, -0.05549756437540054, 0.04601838067173958, 0.010915786027908325, 0.002071682596579194, -0.017147717997431755, -0.015513136982917786, -0.006399715319275856, -0.05045539140701294, -0.016741270199418068, -0.03911378234624863, 0.00960248801857233, -0.04807372763752937, -0.052439745515584946, 0.06600410491228104, -0.08040545135736465, -0.027923746034502983, -0.010113916359841824, -0.015435006469488144, -0.038657296448946, 0.04141218215227127, -0.007697632070630789, -0.05367519333958626, -0.0048033930361270905, 0.043303973972797394, 0.0842069536447525, 0.010800494812428951, -0.04276818037033081, -0.048171933740377426, 0.01460360363125801, 0.013566683046519756, -0.05576372891664505, 0.06475182622671127, -0.015563728287816048, -0.035102784633636475, -0.009139261208474636, -0.041033316403627396, -0.06692732125520706, -0.016800452023744583, 0.025164984166622162, 0.00195886567234993, -0.016639165580272675, -0.0031260838732123375, -0.024551698938012123, -0.01487865298986435, -0.008456850424408913, 0.02987629547715187, 0.0386359766125679, 0.03006708063185215, 0.01049319189041853, 0.01711752638220787, -0.022895675152540207, 0.03224150463938713, 0.04514716565608978, -0.02598850056529045, 0.0028981578070670366, -0.058474358171224594, 0.064805768430233, 0.0004509236023295671, -0.02135288342833519, 0.02728939987719059, -0.031668771058321, -0.05748019739985466, -0.011143255047500134, 0.004275667946785688, -0.03918278217315674, -0.04114941135048866, -0.01673801988363266, 0.021778374910354614, 0.01059893611818552, 0.1119161918759346, -0.017377778887748718, -0.03481563925743103, 0.009877127595245838, 0.015908684581518173, 0.007305260747671127, -0.020181922242045403, 0.07145868986845016, -0.01278424821794033, -0.07951776683330536, -0.09794720262289047, -0.01694360561668873, -0.025229251012206078, -0.07000849395990372, -0.00665704719722271, -0.005926438607275486, 0.012256947346031666, 0.009258496575057507, 0.0483439676463604, -0.017041640356183052, -0.021343747153878212, -0.05273521691560745, -0.3021174669265747, -0.031306613236665726, 0.01140318252146244, 0.020479800179600716, 0.08190914243459702, 0.02130415290594101, 0.003967004828155041, -0.04792698100209236, -0.046443335711956024, -0.014483295381069183, 0.04462799057364464, -0.05256650224328041, -0.010290218517184258, -0.04620640352368355, 0.01807454787194729, 0.007361903320997953, 0.0366804376244545, -0.008320968598127365, -0.04295085370540619, -0.013869529590010643, 0.06252847611904144, -0.03341415524482727, 0.012040374800562859, -0.027925215661525726, -0.004555429797619581, -0.03328908607363701, 0.1511472761631012, -0.01036309078335762, 0.09716501086950302, 0.02954062633216381, -0.0039004101417958736, 0.021630577743053436, 0.03479398787021637, -0.06050778180360794, 0.012029943987727165, 0.0072331782430410385, -0.011790260672569275, -0.05726803466677666, 0.010477665811777115, 0.04956388473510742, 0.019254151731729507, 0.07141256332397461, -0.026795700192451477, -0.05682280287146568, 0.02109314501285553, -0.07334353029727936, -0.026047907769680023, -0.1283378303050995, 0.016275953501462936, 0.04056047648191452, 0.011634532362222672, 0.049668822437524796, 0.023694172501564026, 0.07547524571418762, 0.028512444347143173, -0.06510655581951141, -0.04190199077129364, 0.060723647475242615, -0.023619530722498894, -0.03169511258602142, -0.0010645771399140358, 0.0461551770567894, -0.007553893141448498, 0.0688512995839119, -0.004929782822728157, -0.0077756899408996105, 0.06384649127721786, 0.029673419892787933, 0.029587065801024437, 0.006844181567430496, -0.049170203506946564, 0.05887700989842415, -0.010803380981087685, -0.02822689153254032, -0.03657297417521477, 0.008278298191726208, -0.02177255041897297, -0.029989952221512794, -0.006908893585205078, -0.043200600892305374, 0.06913666427135468, 0.04986634850502014, 0.046599678695201874, 0.051827386021614075, -0.009385157376527786, 0.042790722101926804, 0.021820664405822754, -0.03320446237921715, 0.023334426805377007, 0.01906631700694561, 0.015076209791004658, 0.046065788716077805, 0.01004217192530632, 0.08509565144777298, 0.06825318187475204, 0.04173746332526207, -0.25684258341789246, -0.03318306803703308, 0.00844592321664095, -0.0007798150763846934, 0.048283468931913376, -0.012106946669518948, -0.02157900668680668, -0.0004099842335563153, 0.010631019249558449, 0.029569625854492188, -0.04570910334587097, 0.09406724572181702, 0.01495739072561264, -0.01981949247419834, -0.019603099673986435, 0.042920179665088654, 0.13285209238529205, -0.021324804052710533, 0.0008215399575419724, -0.019668443128466606, 0.009508401155471802, -0.06913398206233978, 0.15826013684272766, 0.0003122108755633235, 0.029963664710521698, -0.04018033295869827, 0.032341234385967255, -0.017238765954971313, -0.005132271908223629, 0.02462463453412056, 0.003930598963052034, -0.017966341227293015, 0.10172875225543976, 0.009577522054314613, 0.01390141248703003, 0.018805421888828278, 0.09000861644744873, 0.021090442314743996, 0.014908047392964363, 0.02322721667587757, -0.07447430491447449, 0.03652692586183548, -0.048527199774980545, -0.10747690498828888, 0.058700740337371826, -0.09809314459562302, -0.017880650237202644, -0.054603174328804016, -0.02179381065070629, 0.03438478708267212, -0.07941077649593353, -0.0160332340747118, -0.0202307291328907, -0.035222116857767105, 0.013918382115662098, 0.05751143768429756, -0.06325545907020569, 0.007998917251825333, -0.060497596859931946, -0.01310743112117052, 0.006442069076001644, -0.024105552583932877, 0.062276508659124374, 0.11720184236764908, 0.031016366556286812], "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "b2dc9d6c-4c98-42c5-9ebc-99a008254820", "node_type": "4", "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "hash": "39654890a2379ae3b4d9f1a61cec235b2dd0a88bd362763fb1a1cdcda3e8a888", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6e9c5c1d-37fc-4736-81eb-d37847daa968", "node_type": "1", "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "hash": "311c085f1739a60d59157b940fbb70359b6c46938dfb49b0d6452367b0b1139a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "492c8d61-9fce-4146-abfc-56b199600184", "node_type": "1", "metadata": {}, "hash": "0b8995c1281d9e2a174cac5c5a3ebbd285a34d8b957f3fdd00171e88f59d0d35", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "StopWordLoader-->>TextProcessor: \"Yes, they are.\"\n    TextProcessor->>TextProcessor: Remove stopwords\n    Note over TextProcessor: \"best\", \"books\", \"running\", \"code\", \"python\"\n    TextProcessor->>Stemmer: \"Stem 'books', 'running'\"\n    Stemmer-->>TextProcessor: \"book\", \"run\"\n    TextProcessor->>TextProcessor: Collect stemmed words\n    TextProcessor-->>Cleaned Words: [\"best\", \"book\", \"run\", \"code\", \"python\"]\n```\n\n#### The `TextProcessor` Class: The Orchestrator\n\nThe `TextProcessor` class ties together all the individual cleaning steps. It takes a `Set` of stopwords (common words to ignore) and uses a `Stemmer` (a tool to find root words) when it's created.\n\n**`src/main/java/utils/TextProcessor.java` (Simplified Constructor)**\n```java\npackage utils;\n\nimport org.tartarus.snowball.ext.englishStemmer;\nimport java.util.Set;\n\npublic class TextProcessor {\n\n   private final Set<String> stopWords;           // Our list of uninformative words\n   private final englishStemmer stemmer = new englishStemmer(); // Our root-word finder\n\n   // When TextProcessor is created, it needs the list of stop words\n   public TextProcessor(Set<String> stopWords) {\n       this.stopWords = stopWords;\n   }\n\n   // ... process method ...\n}\n```\nThe constructor makes sure our `TextProcessor` is equipped with the necessary tools (`stopWords` and `stemmer`) to do its job effectively.\n\n#### The `process` Method: Step-by-Step Cleaning\n\nThis is the core method that performs all the normalization steps.\n\n**`src/main/java/utils/TextProcessor.java` (Simplified `process` method)**\n```java\n// Inside TextProcessor class\npublic List<String> process(String text) {\n\n    if (text == null || text.isBlank()) {\n        return Collections.emptyList(); // Handle empty or null text\n    }\n\n    // 1. Tokenization and Lowercasing\n    // Splits text by anything that's not a letter/number/apostrophe\n    String[] rawTokens = text.toLowerCase().split(\"[^a-zA-Z0-9']+\");\n    List<String> tokens = Arrays.asList(rawTokens);\n\n    // 2.", "mimetype": "text/plain", "start_char_idx": 4028, "end_char_idx": 6028, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "492c8d61-9fce-4146-abfc-56b199600184", "embedding": [-0.01869991235435009, 0.03931306302547455, -0.024460425600409508, 0.025640251114964485, -0.007155288010835648, -0.06100572645664215, -0.024900322780013084, 0.012412365525960922, 0.01195811852812767, 0.05318608507514, 0.022989314049482346, -0.020848382264375687, 0.05264163017272949, -0.02423318848013878, -0.010215762071311474, -0.02615477703511715, -0.014890400692820549, 0.02510221116244793, -0.10464326292276382, -0.013855600729584694, 0.07686195522546768, 0.07365167886018753, 0.023545600473880768, -0.033029526472091675, 0.025600049644708633, 0.06085558608174324, -0.05913146212697029, -0.0073919761925935745, 0.03964865207672119, -0.1782224327325821, -0.021413974463939667, -0.044186782091856, 0.011878982186317444, 0.03358828276395798, 0.0039003929123282433, 0.07338815927505493, -0.04235004261136055, 0.03529038652777672, -0.03517632558941841, 0.05351635441184044, 0.030338723212480545, 0.028650783002376556, -0.017990173771977425, 0.002591877244412899, -0.014333190396428108, -0.022533468902111053, -0.028340574353933334, -0.04148707166314125, 0.027120713144540787, -0.008564461953938007, -0.05629083886742592, -0.018979543820023537, 0.060476891696453094, 0.01970193348824978, -0.014572636224329472, -0.014631484635174274, 0.07182425260543823, 0.10149827599525452, -0.01035718061029911, -0.005868210922926664, 0.007879934273660183, -0.022737637162208557, -0.13754132390022278, 0.0819283202290535, -0.056104209274053574, -0.003446982242166996, 0.000565153721254319, -0.0042970385402441025, -0.011431286111474037, 0.15554608404636383, -0.013842965476214886, 0.060463517904281616, -0.04670754820108414, 0.07022394239902496, -0.018227772787213326, -0.027705008164048195, 0.023366335779428482, -0.022511765360832214, 0.05486707016825676, 0.002308172406628728, -0.04710976406931877, -0.0112504493445158, 0.01507880724966526, -0.017450014129281044, -0.0008555619278922677, 0.012022938579320908, 0.01564110442996025, -0.02733808197081089, 0.04038449376821518, 0.00852026604115963, -0.0040703872218728065, -0.08585180342197418, 0.020717594772577286, 0.023767048493027687, -0.04678027331829071, -0.0339769572019577, -0.02347215637564659, 0.039666999131441116, -0.013547598384320736, 0.3305571377277374, -0.048361241817474365, 0.040678612887859344, -0.0627928301692009, -0.05989610031247139, 0.027996234595775604, -0.0688137337565422, -0.005642211064696312, -0.009855462238192558, 0.021450316533446312, 0.0023436446208506823, 0.006621089763939381, -0.03831901401281357, 0.05649876222014427, 0.0012862768489867449, -0.011934539303183556, 0.006950308568775654, 0.06934128701686859, 0.021150730550289154, -0.0169305931776762, -6.609210686292499e-05, -0.013647954910993576, 0.006015028338879347, -0.005836420692503452, 0.039942555129528046, 0.07495124638080597, 0.10417283326387405, 0.028606286272406578, 0.062483739107847214, 0.01077547762542963, 0.0689617469906807, 0.08486344665288925, -0.04557768628001213, -0.0348561555147171, 0.02603708952665329, 0.02288442850112915, 0.02482772059738636, -0.030695971101522446, -0.003077319823205471, -0.008051482029259205, 0.004080349579453468, -0.0163399837911129, -0.07895597070455551, -0.004740181844681501, -0.014829101972281933, -0.03281514719128609, 0.054832007735967636, -0.061866361647844315, -0.036731209605932236, 0.013162537477910519, -0.06412949413061142, -0.03594617918133736, 0.057626865804195404, -0.038491714745759964, -0.07105618715286255, 0.0027239914052188396, 0.04315225034952164, 0.07104216516017914, 0.008644584566354752, -0.04228170961141586, -0.032447218894958496, 0.005199185572564602, 0.013662902638316154, -0.09735728800296783, 0.0825134813785553, 0.030851488932967186, 0.003610182786360383, -0.019735578447580338, -0.0002441666438244283, -0.0707593783736229, -0.04814774915575981, 0.03556336462497711, 0.029060915112495422, -0.007216672413051128, 0.0080889156088233, 0.01208188384771347, -0.019671844318509102, -0.05362728238105774, 0.0074834092520177364, 0.049579132348299026, 0.03832443431019783, -0.0164050180464983, -0.016269776970148087, -0.012271327897906303, 0.035555120557546616, -0.014756306074559689, -0.01748066581785679, -0.03621678054332733, -0.010988700203597546, 0.051283400505781174, -0.0011865247506648302, -0.0060863918624818325, 0.012094528414309025, -0.057748183608055115, -0.03682327643036842, -0.006020640023052692, -0.01747085526585579, -0.02909751608967781, -0.043444424867630005, -0.02555893361568451, 0.010342970490455627, 0.030455000698566437, 0.04031360521912575, 0.02303924784064293, -0.010116500779986382, 0.004715376067906618, 0.029183635488152504, 0.03884952887892723, -0.02486310340464115, 0.04955098778009415, -0.025267502292990685, -0.07118304818868637, -0.03938141092658043, -0.011160040274262428, -0.0521622933447361, -0.025511881336569786, -0.07386718690395355, 0.01871982216835022, -0.002759145339950919, -0.01604265160858631, 0.01519579067826271, -0.04279066622257233, -0.06914229691028595, -0.046951547265052795, -0.3131199777126312, -0.035289451479911804, 0.04294329881668091, 0.029215946793556213, 0.06543148308992386, -0.02568972110748291, -0.01881686970591545, -0.041175369173288345, -0.02587888576090336, 0.02721826173365116, 0.03357129171490669, -0.03484320268034935, 0.0003604397061280906, -0.04269055277109146, 0.013520369306206703, -0.006765259895473719, 0.011730988509953022, 0.013559818267822266, -0.016384748741984367, 0.020494189113378525, 0.05065879970788956, -0.030573442578315735, 0.08304516226053238, -0.05038175731897354, -0.04441215470433235, -0.020485909655690193, 0.1354645937681198, 0.027922319248318672, 0.0692882165312767, 0.0033088100608438253, 0.009068218059837818, 0.0317290797829628, 0.014760887250304222, -0.05030957609415054, -0.0032795919105410576, 0.020170971751213074, -0.012628008611500263, -0.012330320663750172, -0.024125052616000175, 0.032548680901527405, 0.0612340047955513, 0.03576129302382469, -0.011920316144824028, -0.03779148310422897, 0.052327513694763184, -0.02921639382839203, 0.00630985340103507, -0.08577659726142883, 0.0656391829252243, 0.04943329095840454, 0.019299190491437912, 0.06068537384271622, 0.01823975145816803, 0.05736572667956352, -0.022655043751001358, -0.06877680122852325, -0.04132341593503952, -0.002133687725290656, 0.031988475471735, -0.06281241029500961, -0.03812316432595253, 0.004524564370512962, 0.025217698886990547, 0.01724386028945446, -0.02180110476911068, 0.01444499846547842, 0.020696239545941353, 0.041837263852357864, -0.0116208391264081, 0.008527981117367744, -0.043309085071086884, 0.04463968798518181, 0.01206393912434578, -0.02981192246079445, -0.046055227518081665, 0.06165851652622223, -0.05310969799757004, 0.009895065799355507, -0.03704575076699257, 0.01751776412129402, 0.04732843488454819, -0.0003664737450890243, 0.06261216104030609, 0.04484357684850693, -0.005234805401414633, 0.06032690033316612, 0.01629905216395855, -0.010912328027188778, 0.03282313048839569, 0.003628932870924473, -0.030209191143512726, 0.07939638197422028, 0.0030490937642753124, 0.05461772531270981, 0.04829443618655205, 0.014955299906432629, -0.2543812096118927, -0.0064378478564321995, 0.006675836630165577, 0.01559361256659031, 0.04459747299551964, -0.008585273288190365, 0.026657551527023315, -0.04090161621570587, 0.014370695687830448, -0.0045045893639326096, -0.07374487817287445, 0.04061053693294525, 0.04371735453605652, -0.07868687808513641, -0.02490450255572796, 0.029492735862731934, 0.13186593353748322, -0.011522650718688965, -0.020071202889084816, 0.019523201510310173, 0.038132429122924805, -0.06824342906475067, 0.15500378608703613, 0.015416376292705536, 0.031809695065021515, -0.06941799074411392, 0.014302799478173256, -0.03624691441655159, -0.028778312727808952, 0.04931526631116867, -0.033110361546278, -0.014068088494241238, 0.12317384779453278, -0.024701721966266632, 0.044479284435510635, -0.0210439320653677, 0.04791185259819031, 0.00531306117773056, 0.036279529333114624, -0.036597833037376404, -0.06462276726961136, 0.03694433346390724, -0.054124340415000916, -0.036026086658239365, 0.027758462354540825, -0.07688008248806, -0.002489515347406268, -0.034213993698358536, 0.02596328966319561, 0.021413292735815048, -0.061775341629981995, 0.010350620374083519, -0.029323041439056396, -0.0392368882894516, 0.013505254872143269, 0.02391931228339672, -0.049938932061195374, -0.0011455122148618102, -0.020642926916480064, -0.04631848633289337, -0.05315209925174713, -0.07565274089574814, 0.03392494097352028, 0.11884555220603943, 0.03102867305278778], "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "b2dc9d6c-4c98-42c5-9ebc-99a008254820", "node_type": "4", "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "hash": "39654890a2379ae3b4d9f1a61cec235b2dd0a88bd362763fb1a1cdcda3e8a888", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1e47bb23-2b94-4cee-991d-ca2fa4b671cf", "node_type": "1", "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "hash": "c8fbb85447e35f8ad111683af85bdbe658a261ff9c114ccac93cd3715d14bcaa", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3fda8d3a-d756-469f-80cd-c3b2934de0e9", "node_type": "1", "metadata": {}, "hash": "9cd12b8c811703b899fe173e15c78831cf100f4cee2a21e1eb6fc5530cb25840", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Stop Word Removal\n    List<String> filteredTokens = new ArrayList<>();\n    for(String token : tokens) {\n        if (token.isEmpty()) continue; // Skip empty strings from splitting\n        if(!stopWords.contains(token)) { // If it's NOT a stop word\n            filteredTokens.add(token);\n        }\n    }\n\n    // 3. Stemming\n    List<String> stemmedTokens = new ArrayList<>();\n    for (String token : filteredTokens) {\n        stemmer.setCurrent(token); // Give the stemmer the word\n        stemmer.stem();            // Ask it to find the root\n        stemmedTokens.add(stemmer.getCurrent()); // Get the root word\n    }\n\n    return stemmedTokens;\n}\n```\nLet's break down these steps:\n\n1.  **Tokenization & Lowercasing**:\n    *   `text.toLowerCase()`: Converts the entire text to lowercase. \"BOOKS\" becomes \"books\", \"Python\" becomes \"python\".\n    *   `.split(\"[^a-zA-Z0-9']+\")`: This is a \"regular expression\" that tells Java to break the sentence into words wherever it finds characters that are *not* letters (a-z, A-Z), numbers (0-9), or apostrophes ('). So, \"running CODE!\" becomes [\"running\", \"code\"].\n\n2.  **Stop Word Removal**:\n    *   It loops through all the `tokens` (words) found in the previous step.\n    *   `!stopWords.contains(token)`: It checks if the current word is present in our `stopWords` list. If it's *not* a stop word (meaning it's an important word), it's added to `filteredTokens`.\n    *   This is how words like \"the,\" \"for,\" \"is\" are removed, as they generally don't help in understanding the core topic.\n\n3.  **Stemming**:\n    *   It takes each word from `filteredTokens` and hands it to our `stemmer`.\n    *   `stemmer.setCurrent(token)`: Loads the word into the stemmer.\n    *   `stemmer.stem()`: This is the magic! The stemmer uses linguistic rules to find the root form. \"running\" becomes \"run,\" \"developers\" becomes \"develop,\" \"algorithms\" becomes \"algorithm.\"", "mimetype": "text/plain", "start_char_idx": 6029, "end_char_idx": 7921, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "3fda8d3a-d756-469f-80cd-c3b2934de0e9", "embedding": [-0.02262759767472744, 0.06194274127483368, -0.02676522545516491, 0.02115597017109394, 0.016089385375380516, -0.021324308589100838, -0.02260090783238411, 0.01511872187256813, -0.01126012858003378, -0.014088479802012444, 0.019124122336506844, 0.0021760885138064623, 0.034364327788352966, -0.050161391496658325, -0.019383160397410393, -0.017395664006471634, -0.027660436928272247, 0.030324727296829224, -0.06097519397735596, -0.027273103594779968, 0.08103834837675095, 0.030679745599627495, 0.02657362073659897, -0.0526072159409523, -0.010308420285582542, 0.058142513036727905, -0.09549342840909958, -0.01158839836716652, 0.014007062651216984, -0.17227070033550262, 0.008599153719842434, -0.017152678221464157, 0.020557191222906113, 0.03970463573932648, -0.023905549198389053, 0.05103854835033417, -0.04340090975165367, 0.014296023175120354, -0.034376971423625946, -0.007892103865742683, -0.05659503489732742, 0.005313475150614977, -0.010263131931424141, 0.052210453897714615, -0.005797313526272774, -0.014661591500043869, -0.04176503047347069, 0.0008130584028549492, -0.005242041312158108, -0.03087811917066574, -0.06780895590782166, -0.013057535514235497, 0.06687986850738525, 0.008853822015225887, -0.010652500204741955, -0.0006974919815547764, 0.10063210874795914, 0.0320633128285408, 0.026674142107367516, -0.03129645437002182, 0.015500306151807308, -0.03098749741911888, -0.1691771298646927, 0.07019104063510895, -0.006576034240424633, 0.0021010651253163815, -0.0011101332493126392, -0.00370757351629436, -0.016543738543987274, 0.11712700873613358, 0.04698299989104271, 0.07511229813098907, -0.028259869664907455, 0.04829993098974228, 0.008105490356683731, -0.01590624265372753, 0.004092761315405369, 0.00420147180557251, 0.0793471708893776, -0.003267587162554264, 0.0021242727525532246, -0.02189347892999649, -0.038026247173547745, 0.016758251935243607, -0.0247165709733963, 0.019055211916565895, 0.04771171510219574, 0.03138001263141632, 0.07943352311849594, 0.014306619763374329, -0.0018805674044415355, -0.08640103042125702, 0.004237697459757328, 0.034630343317985535, -0.05620446056127548, -0.04899786785244942, -0.006019955966621637, 0.02242763340473175, -0.026934092864394188, 0.35533255338668823, -0.03975623473525047, 0.010514956898987293, -0.01667960174381733, -0.052147816866636276, -0.002284103073179722, -0.049021948128938675, -0.023204917088150978, 0.008872106671333313, 0.0044435737654566765, 0.024610931053757668, 0.0005132463411428034, -0.02344643324613571, 0.054645899683237076, -0.04825301095843315, 0.012675845064222813, -0.04154045879840851, 0.0018142106710001826, -0.04639556631445885, -0.04203417897224426, -0.0037313485518097878, 0.011485484428703785, 0.03678031265735626, -0.021188290789723396, 0.0075594219379127026, 0.05164192244410515, 0.04623996838927269, 0.032795801758766174, 0.06458080559968948, 0.002588906092569232, 0.012051200494170189, 0.03622068837285042, -0.010104382410645485, -0.05028063431382179, 0.04369710013270378, 0.027821946889162064, 0.024119412526488304, -0.014208314940333366, -0.0027996713761240244, -0.03136640787124634, -0.03429875895380974, -0.022096846252679825, -0.01670214720070362, 0.03213513270020485, -0.03609592467546463, -0.040635786950588226, 0.026789508759975433, -0.031442057341337204, -0.003269538749009371, 0.037192486226558685, -0.012250530533492565, -0.030863536521792412, 0.04192609339952469, -0.004256835673004389, -0.09341830760240555, 0.01577526144683361, 0.04945174232125282, 0.08542504906654358, -0.02735835127532482, -0.04103367403149605, -0.034996043890714645, -0.005345636047422886, -0.006054719910025597, -0.03145848587155342, 0.08973641693592072, -0.004689473658800125, -0.02833881787955761, -0.04133416339755058, 0.008153323084115982, -0.034832898527383804, -0.08478330075740814, 0.06713085621595383, 0.012545010074973106, 0.02011493220925331, -0.06691863387823105, -0.03420131653547287, -0.020750168710947037, -0.06154896691441536, -0.004463464021682739, 0.021077120676636696, 0.05563419684767723, 0.018340935930609703, -0.02449304796755314, -0.038338590413331985, 0.036977872252464294, -0.017140643671154976, -0.04157114401459694, -0.05061905458569527, -0.04345766454935074, 0.0348198264837265, -0.016570132225751877, -0.029980340972542763, 0.036771997809410095, -0.052336838096380234, -0.054109808057546616, -0.01767735183238983, -0.03984073922038078, -0.02831348218023777, 0.003508596681058407, -0.028430059552192688, 0.03023938089609146, 0.005865093320608139, 0.09789913147687912, -0.0007114983745850623, 0.005616293288767338, -0.043770693242549896, 0.017006732523441315, 0.028147244825959206, 0.002687315456569195, 0.08831353485584259, -0.05474889650940895, -0.053665876388549805, -0.06889539211988449, 0.008274649269878864, -0.010048197582364082, -0.07071731239557266, 0.010644654743373394, 0.0017626427579671144, -0.007012657821178436, 0.005606560036540031, 0.01562809757888317, -0.03935221955180168, -0.04701490327715874, -0.017423877492547035, -0.32852306962013245, -0.03895126283168793, 0.01353329885751009, 0.01714237406849861, 0.05612433701753616, 0.011087466031312943, 0.03729290887713432, -0.004194807726889849, -0.03775465115904808, -0.02130952477455139, 0.05438961461186409, -0.03121371380984783, -0.01566774956882, -0.06469648331403732, 0.030166538432240486, -0.029162824153900146, 0.030996069312095642, 0.009423517622053623, -0.01297466829419136, 0.01948445290327072, 0.0456707663834095, -0.05825674161314964, 0.023465877398848534, -0.08104710280895233, -0.051065657287836075, -0.03232094272971153, 0.11701328307390213, 0.03857225179672241, 0.09743939340114594, -0.0011742470087483525, 0.016089826822280884, 0.04816145449876785, 0.05385215952992439, -0.04204524680972099, 0.008702163584530354, -0.03461829945445061, 0.0303757693618536, 0.01591602712869644, 0.030629975721240044, 0.05620920658111572, 0.06206982582807541, 0.047894518822431564, -0.025278091430664062, 0.017398271709680557, 0.02737039141356945, -0.0627189427614212, -0.019727634266018867, -0.1315496861934662, 0.018575279042124748, 0.02064734511077404, -0.004891890101134777, 0.029233621433377266, 0.010323652997612953, 0.034641850739717484, 0.007194823585450649, -0.06336226314306259, -0.04161640256643295, 0.028713205829262733, 0.026958830654621124, -0.06408987194299698, -0.020485026761889458, 0.03901234269142151, -0.014394405297935009, 0.0521610863506794, 0.01845432259142399, 0.0026527554728090763, 0.04573911055922508, -0.011053966358304024, -0.009817959740757942, 0.007060647942125797, -0.020316243171691895, 0.049340393394231796, -0.018961813300848007, -0.02343827672302723, -0.005311295390129089, 0.03470923379063606, -0.0008431017631664872, -0.022622572258114815, -0.05176817998290062, -0.0037239023949950933, 0.04337521269917488, 0.008327505551278591, 0.05310353636741638, -0.008983464911580086, -0.03199577331542969, 0.02006857842206955, 0.042381126433610916, 0.0020849136635661125, 0.05126051604747772, 0.03187471628189087, -0.03053520806133747, 0.0669703409075737, 0.030201347544789314, 0.017987221479415894, 0.060625430196523666, 0.01995568349957466, -0.2698844373226166, -0.008092593401670456, 0.03430407866835594, 0.0038919327780604362, 0.04671195149421692, -0.020804034546017647, 0.039862196892499924, -0.03639303147792816, 0.03738654777407646, -0.039249103516340256, -0.0578770637512207, 0.054211653769016266, 0.0021402358543127775, -0.040339794009923935, -0.008263432420790195, 0.04804369807243347, 0.1665221005678177, 0.006914039142429829, 0.03136175125837326, -0.021550998091697693, 0.036753859370946884, -0.016680724918842316, 0.13429735600948334, -0.002516609849408269, 0.00675205048173666, -0.03322773426771164, 0.0032800761982798576, -0.022509228438138962, -0.030442610383033752, 0.06045910343527794, -0.05591500550508499, -0.024056747555732727, 0.0955718606710434, -0.0466177798807621, 0.031107736751437187, 0.026678981259465218, 0.0976843535900116, 0.02038617432117462, 0.10731595754623413, -0.01423806231468916, -0.04313960298895836, 0.03238895535469055, -0.010006560944020748, -0.04230126366019249, 0.014052962884306908, -0.06958066672086716, 0.025469183921813965, -0.03188401460647583, -0.005222661886364222, 0.01827983558177948, -0.049040064215660095, 0.014582843519747257, -0.01563384383916855, -0.03353025019168854, -0.021340936422348022, 0.029071372002363205, -0.0024445736780762672, -0.0010258072288706899, -0.025123879313468933, -0.03278229758143425, -0.006738145835697651, -0.019655808806419373, 0.08049514889717102, 0.08671186864376068, 0.06169820949435234], "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "b2dc9d6c-4c98-42c5-9ebc-99a008254820", "node_type": "4", "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "hash": "39654890a2379ae3b4d9f1a61cec235b2dd0a88bd362763fb1a1cdcda3e8a888", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "492c8d61-9fce-4146-abfc-56b199600184", "node_type": "1", "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "hash": "33d0e27db2dd3cfd12120eceb2d0a2e93c1f274b31e138fdf3db6bcf398dce0f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "aa5b905f-228b-4932-b91a-6ef25521682f", "node_type": "1", "metadata": {}, "hash": "22faf98629cc53dedd1e1eea033c552a26fb3c2c763ce8f8cd180f4a8142f718", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "*   `stemmer.stem()`: This is the magic! The stemmer uses linguistic rules to find the root form. \"running\" becomes \"run,\" \"developers\" becomes \"develop,\" \"algorithms\" becomes \"algorithm.\"\n    *   `stemmedTokens.add(stemmer.getCurrent())`: The root word is then added to our final list.\n\n#### Loading Stop Words: `StopWordLoader`\n\nBut where do the `stopWords` come from? DevShelf has a special list of common English words in a file called `stopword.txt`. The `StopWordLoader`'s job is to read this file and provide the `TextProcessor` with the set of words to ignore.\n\n**`src/main/resources/data/stopword.txt` (Snippet)**\n```\n\"a\",\"an\",\"the\",\"and\",\"or\",\"but\",\"if\",\"then\",\"else\",\"on\",\"in\",\"at\",\"by\",\"for\",\"with\",\"about\",\"against\",\n\"between\",\"into\",\"through\",\"during\",\"before\",\"after\",\"above\",\"below\",\"to\",\"from\",\"up\",\"down\",\"of\",\"is\",\n\"are\",\"was\",\"were\",\"be\",\"been\",\"being\",\"as\",\"that\",\"this\",\"these\",\"those\",\"it\",\"its\",\"I\",\"you\",\"he\",\"she\",\"they\"\n```\nEach of these words will be considered \"unimportant\" by our `TextProcessor`.", "mimetype": "text/plain", "start_char_idx": 7733, "end_char_idx": 8760, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "aa5b905f-228b-4932-b91a-6ef25521682f", "embedding": [-0.03181743621826172, 0.022566096857190132, -0.05162448436021805, -0.02298082411289215, 0.00831826962530613, -0.013685384765267372, -0.012913428246974945, -0.015309948474168777, -0.02042338438332081, -0.023061836138367653, 0.0166284441947937, -0.008144186809659004, 0.051209233701229095, 0.012351094745099545, 0.00871250405907631, -0.03691807761788368, 0.010686956346035004, 0.0335206463932991, -0.049975812435150146, -0.00788683257997036, 0.06786703318357468, 0.08119077235460281, 0.03242048993706703, -0.04406062513589859, 0.00952423270791769, 0.02027759701013565, -0.08052226155996323, -0.0335579514503479, -0.020685207098722458, -0.16776500642299652, -0.0019588705617934465, -0.11483647674322128, 0.028953829780220985, 0.028806550428271294, -0.029839491471648216, 0.06449546664953232, 0.005198164377361536, 0.03715115040540695, -0.0015644077211618423, -0.015469647943973541, -0.04800375923514366, 0.028555452823638916, -0.01287037692964077, 0.023880740627646446, -0.017729928717017174, 0.016093658283352852, 0.0010519842617213726, -0.028772220015525818, 0.013600468635559082, 0.0003858494746964425, -0.06045180931687355, -0.018254896625876427, 0.04450136050581932, -0.004042681306600571, -0.011806070804595947, -0.04508502781391144, 0.08881377428770065, 0.06436825543642044, 0.027991527691483498, -0.005863290745764971, -0.03355947509407997, -0.007695022039115429, -0.13277679681777954, 0.04630501568317413, 0.01357224676758051, -0.015566259622573853, 0.0173595380038023, 0.039613161236047745, -0.026243168860673904, 0.09977281838655472, -0.022118808701634407, 0.0981018990278244, -0.011948781087994576, 0.11214897781610489, -0.00568913109600544, -0.04837324097752571, 0.0361834280192852, -0.030094124376773834, 0.01041397824883461, 0.0059047723188996315, -0.055944595485925674, -0.04698127508163452, 0.04108687862753868, -0.017577119171619415, -0.02895789034664631, 0.004550862591713667, 0.054196033626794815, -0.011539711616933346, 0.03940211981534958, -0.00972547847777605, -0.022875534370541573, -0.039963047951459885, 0.009937581606209278, 0.018790101632475853, -0.07368841022253036, -0.008366870693862438, -0.03150439262390137, 0.025315098464488983, -0.019366538152098656, 0.3377324342727661, -0.03726948797702789, -0.01688004471361637, -0.020726749673485756, -0.11454309523105621, -0.00011589862697292119, -0.06966911256313324, -0.0008968178881332278, 0.007432527374476194, -0.03278427571058273, 0.022185802459716797, 0.019596129655838013, -0.03955914080142975, 0.06634531915187836, 0.0005316751776263118, -0.025943778455257416, -0.021556925028562546, 0.012949964962899685, 0.02211267314851284, -0.03512164577841759, 0.010266334749758244, -0.0032719464506953955, 0.003614908317103982, -0.04863877594470978, -0.0064575863070786, 0.04486144334077835, 0.007985741831362247, 0.051319655030965805, 0.07076656073331833, 0.006033160723745823, -0.030183609575033188, 0.026286205276846886, -0.024361195042729378, -0.08144764602184296, 0.018486520275473595, 0.05916137248277664, 0.04859887436032295, -0.028495432808995247, 0.02197388745844364, 0.010353846475481987, -0.03904341161251068, -0.03902449458837509, -0.04442040994763374, -0.007399778813123703, -0.04550020396709442, -0.03443676233291626, 0.07418264448642731, -0.0471709705889225, -0.02129218354821205, 0.0118922283872962, -0.0734831914305687, 0.007707949262112379, 0.005889102350920439, -0.042028866708278656, -0.07182855159044266, 0.021499477326869965, 0.02658586949110031, 0.07585304230451584, -0.03423145413398743, -0.06143052130937576, -0.0855916365981102, 0.04390855133533478, 0.008565862663090229, -0.07412111759185791, 0.04493848606944084, 0.017400963231921196, -0.02354802004992962, 0.0022651702165603638, -0.03887413442134857, -0.038071271032094955, -0.042003415524959564, 0.018723053857684135, 0.026255112141370773, -0.010574735701084137, -0.01822762005031109, -0.011274751275777817, -0.009365386329591274, -0.05091286450624466, 0.008463649079203606, 0.024620486423373222, 0.0452994666993618, 0.003167317481711507, 0.010642308741807938, -0.033031873404979706, 0.02808716893196106, -0.01947709545493126, -0.02759525738656521, -0.036474600434303284, 0.01059752982109785, 0.08028584718704224, 0.020395221188664436, -0.0297562126070261, 0.014377651736140251, -0.06583074480295181, -0.04921163618564606, -0.002879018196836114, -0.050839874893426895, -0.025307344272732735, 0.023883746936917305, -0.004343702923506498, -0.047378286719322205, 0.05089850723743439, 0.1440517157316208, -0.011952970176935196, 0.005108579993247986, -0.004716954659670591, 0.044313378632068634, 0.03378410264849663, -0.042793065309524536, 0.05949405953288078, -0.04483693838119507, -0.0488145649433136, -0.07536549121141434, -0.024317137897014618, 0.002979130018502474, -0.05524876341223717, -0.00919052492827177, 0.0344574972987175, 0.01953776739537716, 0.04480361565947533, 0.04252323880791664, -0.02415061555802822, -0.054565515369176865, -0.030614091083407402, -0.30937427282333374, 0.00645779725164175, 0.004776901565492153, -0.013101241551339626, 0.05205529183149338, 0.013457747176289558, 0.022625278681516647, -0.04865047708153725, -0.019611358642578125, 0.008825549855828285, 0.06847579777240753, -0.052831489592790604, -0.042028967291116714, -0.06845373660326004, 0.02500339038670063, 0.0008579746354371309, -0.0032123366836458445, -0.014049546793103218, -0.04257833957672119, 0.013826418668031693, 0.05273685231804848, -0.006648401264101267, 0.026482123881578445, -0.07179263979196548, 0.04663544520735741, 0.0243600495159626, 0.1128166988492012, -0.00383554445579648, 0.09671979397535324, -0.03618382290005684, 0.027295252308249474, 0.009593741036951542, -0.0034911937545984983, -0.04726295545697212, 0.01537590753287077, -0.015884816646575928, -0.02902688831090927, -0.011822118423879147, 0.00462035508826375, 0.08347422629594803, 0.022099506109952927, 0.004390391521155834, -0.024021165445446968, -0.024562617763876915, 0.015255698002874851, -0.041066236793994904, -0.005907558370381594, -0.10242363065481186, 0.042640067636966705, -0.02604617364704609, -0.04282175749540329, 0.00417528348043561, -0.006976271513849497, 0.03125026077032089, 0.0490192286670208, -0.05461207777261734, -0.02763984352350235, 0.022021695971488953, 0.008488932624459267, -0.030154570937156677, 0.0057159727439284325, -0.02323945052921772, 0.023381032049655914, 0.044744666665792465, -0.031186986714601517, -0.004085218068212271, 0.0355876125395298, 0.020831864327192307, -0.014139335602521896, 0.013967717997729778, -0.0593438483774662, 0.04134298488497734, 0.024795744568109512, 0.03929263725876808, 0.006732334848493338, 0.04576386511325836, -0.011383908800780773, -0.047042377293109894, -0.003658485831692815, -0.009955965913832188, 0.07083859294652939, 0.033116746693849564, 0.09070342034101486, 0.035629138350486755, -0.018465479835867882, 0.05590274930000305, 0.047081269323825836, 0.031003933399915695, 0.0389036200940609, 0.04115033522248268, 0.0013335865223780274, 0.09500682353973389, 0.018755994737148285, 0.03343622013926506, 0.08341853320598602, -0.013982520438730717, -0.2908213138580322, -0.0018591773696243763, -0.00689428998157382, 0.005070227663964033, 0.046053268015384674, 0.007086233235895634, 0.007058694027364254, -0.005523920524865389, 0.03491539508104324, -0.0046378266997635365, -0.057698238641023636, 0.07131554186344147, 0.027273528277873993, -0.010102905333042145, 0.006597657687962055, 0.05484801530838013, 0.10199365019798279, 0.05303320288658142, 0.04116448014974594, -0.0031083186622709036, -0.006165754981338978, -0.041704755276441574, 0.18360836803913116, -0.03513343632221222, 0.0219737458974123, -0.022330503910779953, 0.011896597221493721, -0.017358651384711266, -0.010776662267744541, 0.04278937727212906, -0.0385453999042511, 0.0021555940620601177, 0.11741165071725845, 0.0018098963191732764, 0.03295789659023285, -0.005868328269571066, 0.11263514310121536, 0.039973676204681396, 0.03774884343147278, 0.011878463439643383, -0.08004926890134811, 0.05929873511195183, -0.010691874660551548, -0.028422396630048752, 0.055759247392416, -0.049302663654088974, -0.020142221823334694, -0.06187371909618378, -0.022428255528211594, -0.0005068404134362936, -0.05691520869731903, -0.03000720962882042, 0.014106052927672863, -0.017282210290431976, 0.005872839130461216, 0.040057647973299026, -0.021714795380830765, -0.0028755292296409607, -0.0278257355093956, -0.03779337927699089, 0.019068976864218712, 0.0019496202003210783, 0.04748274013400078, 0.04867514222860336, 0.00945788249373436], "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "b2dc9d6c-4c98-42c5-9ebc-99a008254820", "node_type": "4", "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "hash": "39654890a2379ae3b4d9f1a61cec235b2dd0a88bd362763fb1a1cdcda3e8a888", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3fda8d3a-d756-469f-80cd-c3b2934de0e9", "node_type": "1", "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "hash": "e852e34d0a6fa1bf86a122197e15ac621b6bedd3d88af39ebd4d0d1be26e11b5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "377302f2-4c85-45ec-bd6a-38e0eeb6cce9", "node_type": "1", "metadata": {}, "hash": "3992ab7cef4c7612053d8d160a614ede98bf769be3a2fa00fa37634f4bba8233", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "**`src/main/java/utils/StopWordLoader.java` (Simplified `loadStopWords` method)**\n```java\npackage utils;\n\nimport java.io.BufferedReader;\nimport java.io.FileReader;\nimport java.io.IOException;\nimport java.util.HashSet;\nimport java.util.Set;\n\npublic class StopWordLoader {\n\n    // This method can be called directly without creating an object\n    public static Set<String> loadStopWords(String filePath) {\n       Set<String> stopWords = new HashSet<>();\n       try(BufferedReader reader = new BufferedReader(new FileReader(filePath))) {\n           String line;\n           while( (line = reader.readLine()) != null ) {\n               String word = line.trim().toLowerCase();\n               if(!word.isEmpty()) {\n                   stopWords.add(word); // Add each word from the file to our set\n               }\n           }\n       } catch (IOException e) {\n           System.err.println(\"Error loading stopwords file: \" + e.getMessage());\n       }\n       return stopWords;\n    }\n}\n```\nThe `loadStopWords` method simply reads each line from the `stopword.txt` file, cleans it up a bit (removes extra spaces, makes it lowercase), and adds it to a `HashSet`. A `HashSet` is perfect for fast \"contains\" checks later.\n\n#### The `Stemmer` Class: Finding Root Words\n\nThe `Stemmer` class (`src/main/java/utils/Stemmer.java`) in DevShelf acts as a convenient wrapper for an existing powerful library called \"Snowball Stemmer.\" This library knows the complex rules of English grammar to reduce words to their base form.\n\nFor instance, if you give it \"programming,\" it will return \"program.\" If you give it \"configured,\" it will return \"configur.\" This ensures that a search for \"program\" will match books containing \"programming,\" \"programs,\" \"programmer,\" or \"programmed.\"\n\n### Why Text Normalization is So Important\n\nText normalization is a silent hero in our search engine. Without it, DevShelf's search capabilities would be severely limited:\n\n| Feature                   | WITHOUT Text Normalization                                   | WITH Text Normalization                                                |\n| :------------------------ | :----------------------------------------------------------- | :--------------------------------------------------------------------- |\n| **Search Accuracy**       | Misses matches due to capitalization, punctuation, or different word endings. | Finds more relevant matches by standardizing all text.", "mimetype": "text/plain", "start_char_idx": 8762, "end_char_idx": 11193, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, {"__data__": {"id_": "377302f2-4c85-45ec-bd6a-38e0eeb6cce9", "embedding": [-0.0625787004828453, 0.029548346996307373, -0.03942161425948143, 0.023564070463180542, 0.053307510912418365, -0.008866776712238789, -0.022837549448013306, 0.02223343402147293, 0.02109583094716072, -0.05487053841352463, 0.003915857058018446, -0.010525084100663662, 0.05189143866300583, 0.012943482957780361, 0.008565554395318031, -0.00033760120277293026, -0.0036231824196875095, 0.03907556086778641, -0.05815468728542328, -0.03146792948246002, 0.07847198098897934, 0.03647869825363159, 0.0264827199280262, -0.06913415342569351, -0.005127402488142252, 0.052232563495635986, -0.0025516124442219734, -0.00904281809926033, -0.02075163461267948, -0.217556893825531, 0.010784939862787724, -0.007443972863256931, 0.11876138299703598, 0.019345063716173172, -0.024219773709774017, -0.022723358124494553, -0.015380306169390678, 0.018595214933156967, 0.019154096022248268, -0.02712373621761799, -0.02049969509243965, 0.020731795579195023, -0.019588494673371315, 0.029117612168192863, -0.028001295402646065, -0.009447156451642513, -0.06095828115940094, 0.0035498375073075294, -0.06542413681745529, 0.012162151746451855, -0.08879762142896652, -0.029892336577177048, -0.010349899530410767, 0.03526690974831581, 0.03282711282372475, 0.028404921293258667, 0.06410546600818634, 0.07577849179506302, -0.031029239296913147, -0.021129820495843887, 0.027950601652264595, -0.035075973719358444, -0.08532661199569702, 0.0653563067317009, 0.0009303640108555555, -0.031704436987638474, 0.010610933415591717, -0.07156673818826675, -0.036247242242097855, 0.02753121592104435, 0.0036823556292802095, 0.07254812866449356, 0.012687167152762413, 0.07731760293245316, -0.0008706972002983093, 0.012829773128032684, -0.017405400052666664, -0.04938957095146179, 0.01588469371199608, 0.011546812951564789, -0.0010427080560475588, -0.044555991888046265, 0.038340527564287186, -0.005071958061307669, -0.023463597521185875, -0.020361993461847305, 0.012995387427508831, -0.022721780464053154, 0.022024087607860565, -0.008504834026098251, 0.051911450922489166, -0.03639886900782585, 0.008085756562650204, 0.0027199150063097477, -0.03086674027144909, 0.01525058876723051, -0.024398261681199074, 0.05852057784795761, 0.011370391584932804, 0.400265634059906, -0.017287597060203552, 0.07240329682826996, 0.010150749236345291, -0.07093991339206696, 0.0037494972348213196, -0.051387567073106766, 0.0014383798697963357, 0.02277112938463688, 0.02970469743013382, -0.01086217537522316, 0.02730582468211651, -0.06092209741473198, 0.037502218037843704, -0.00835425779223442, -0.029001928865909576, 0.013679077848792076, 0.004627647344022989, 0.012551538646221161, 0.0320773720741272, 0.004227281082421541, -0.020498398691415787, -0.0001882830256363377, -0.015061701647937298, 0.03117760643362999, 0.06700365990400314, -0.00688823452219367, -0.023958461359143257, 0.050651244819164276, -0.0069083282724022865, 0.016078926622867584, -0.0005895211943425238, -0.005839500110596418, -0.06753028184175491, 0.028544515371322632, 0.05856596305966377, 0.0290451031178236, -0.05586878955364227, -0.016041608527302742, -0.011378391645848751, 0.03230459615588188, -0.0429966039955616, 0.020486105233430862, 0.04296374320983887, -0.012806962244212627, -0.10141365230083466, 0.13327693939208984, 0.026246797293424606, -0.0022450354881584644, -0.03427000716328621, -0.06423543393611908, 0.018685203045606613, 0.04936858266592026, -0.001251181703992188, -0.06516777724027634, -0.0005624292534776032, 0.03640099987387657, 0.07955177873373032, -0.014566284604370594, -0.06580308079719543, -0.08155433088541031, -0.04505779594182968, 0.017171936109662056, -0.04086088389158249, 0.1103932335972786, -0.017817117273807526, -0.0903196856379509, -0.04189717024564743, -0.006830895785242319, -0.10491134226322174, -0.03398263826966286, 0.013583282940089703, -0.019302574917674065, -0.024244774132966995, 0.03146519139409065, -0.03119809739291668, -0.03735481575131416, -0.044950228184461594, 0.0073159788735210896, 0.007891617715358734, 0.009428619407117367, 0.05269955098628998, -0.014754516072571278, -0.030560951679944992, 0.022227954119443893, -0.02114996686577797, -0.032255835831165314, -0.03976888209581375, 0.007324197795242071, 0.05279373377561569, 0.019313635304570198, -0.031916167587041855, -0.019477641209959984, 0.0007265013991855085, 0.005313389003276825, 0.020128795877099037, -0.021083341911435127, 0.02041119895875454, -0.018873775377869606, -0.01290270034223795, -0.0035705571062862873, 0.0571548193693161, 0.054785069078207016, 0.004899177700281143, -0.010854396969079971, -0.03210432082414627, 0.013384763151407242, 0.021702423691749573, -0.07420174032449722, 0.05127762630581856, 0.02337735705077648, -0.04658162593841553, -0.019558154046535492, -0.05699292942881584, -0.018559154123067856, 0.004937643650919199, -0.03017730452120304, 0.037511344999074936, 0.05161380022764206, 0.0016855901340022683, 0.0934140533208847, -0.033684439957141876, 0.01756567880511284, -0.04126900061964989, -0.2826610803604126, -0.027593066915869713, -0.02697080932557583, 0.01260773092508316, 0.03318917751312256, -0.05008355900645256, 0.015495597384870052, -0.01906701549887657, -0.026470577344298363, 0.04583129659295082, 0.042679429054260254, -0.022404460236430168, -0.03625963255763054, 0.004436641000211239, -0.0031602331437170506, -0.013450611382722855, 0.04810533672571182, 0.012929193675518036, -0.045817092061042786, -0.012088687159121037, 0.03860897198319435, -0.007298118434846401, 0.05639230087399483, -0.10745518654584885, 0.030105507001280785, -0.004501392133533955, 0.08809322118759155, 0.00962864886969328, 0.015336286276578903, -0.0659543052315712, 0.04376036673784256, 0.010530541650950909, -0.05003085359930992, -0.07968461513519287, 0.009484087117016315, 0.005002623423933983, 0.011650254018604755, -0.014239005744457245, -0.00447686156257987, 0.02186271734535694, 0.03332344815135002, -0.015008227899670601, -0.004310645628720522, -0.03598451241850853, -0.05412337929010391, -0.008130095899105072, -0.01401932816952467, -0.12666423618793488, 0.013372602872550488, 0.06294356286525726, -0.011669504456222057, 0.04126720130443573, 0.05909765139222145, 0.006544553674757481, 0.002915715565904975, -0.05762171372771263, -0.034947238862514496, -0.037068482488393784, -0.02852254919707775, -0.03917699307203293, 0.023402417078614235, -0.016595249995589256, 0.007456200197339058, -0.011866162531077862, 0.020007729530334473, -0.0236482173204422, 0.015141391195356846, -0.00010459472105139866, -0.009654433466494083, -0.025382742285728455, -0.08648458123207092, 0.03511839359998703, -0.04753849655389786, 0.02306431159377098, 0.034254539757966995, 0.05067357420921326, 0.023409783840179443, 0.015523058362305164, 0.05064946785569191, -0.020904337987303734, 0.07529859244823456, 0.029652593657374382, 0.10278097540140152, -0.03391148895025253, -0.004562297835946083, 0.03075294755399227, 0.0883699283003807, -0.02979888580739498, 0.03528879955410957, 0.02654808945953846, -0.017272470518946648, -0.020486554130911827, 0.003226922359317541, -0.04002559930086136, 0.017975859344005585, 0.025935370475053787, -0.2934893071651459, 0.032184552401304245, -0.003956301137804985, -0.009103941731154919, 0.01688021421432495, 0.0026427218690514565, 0.05292121320962906, -0.060291893780231476, 0.05905812606215477, -0.001487867790274322, -0.05322092026472092, 0.03712496906518936, -0.029481694102287292, -0.07434073835611343, 0.042131584137678146, 0.055209092795848846, 0.06724997609853745, -0.009908533655107021, 0.02540401555597782, 0.0076359594240784645, 0.0366363488137722, 0.022148504853248596, 0.2125457525253296, -0.05534646287560463, 0.007109102793037891, 0.030742716044187546, 0.02566262148320675, -0.0348845049738884, 0.000897618883755058, 0.04780192673206329, 0.003676715539768338, -0.047372788190841675, 0.0658462792634964, 0.009101755917072296, 0.013914527371525764, 0.033416636288166046, 0.022005323320627213, -0.039410654455423355, 0.020951636135578156, -0.05185164138674736, 0.005669129081070423, 0.025603875517845154, -0.003957862034440041, 0.009181415662169456, 0.043574318289756775, -0.029756871983408928, 0.030121246352791786, -0.03237258270382881, -0.04237894341349602, 0.019587410613894463, -0.017618518322706223, -0.010932829231023788, 0.025559313595294952, 0.009715286083519459, 0.046141743659973145, 0.0070020901039242744, 0.0004267226322554052, 0.021891731768846512, -0.016922147944569588, -0.03097880631685257, 0.005375848617404699, 0.03442379832267761, 0.039929311722517014, 0.051153481006622314, 0.03111923672258854], "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "b2dc9d6c-4c98-42c5-9ebc-99a008254820", "node_type": "4", "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "hash": "39654890a2379ae3b4d9f1a61cec235b2dd0a88bd362763fb1a1cdcda3e8a888", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "aa5b905f-228b-4932-b91a-6ef25521682f", "node_type": "1", "metadata": {"file_name": "Chapter 8 Text Normalization Utilities.md"}, "hash": "fc1f0308c90106c5274e54a9519ec4858ce7bf1f5d325e8857d9ff0e822320bc", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "| Finds more relevant matches by standardizing all text.                 |\n| **Search Efficiency**     | The index (from [Search Index Management](04_search_index_management_.md)) would be much larger (e.g., storing \"Run\", \"Runs\", \"Running\" as separate terms). | Smaller index (only stores \"run\"), leading to faster lookups.         |\n| **User Experience**       | Frustrating, as users expect \"Java\" to match \"java\" and \"develop\" to match \"developer\". | Intuitive, forgiving search that \"understands\" what the user means. |\n| **Relevance Scoring**     | Scores might be skewed by common words or inconsistent spellings. | Clearer, more precise relevance scores.                                |\n\nThis table clearly shows why this seemingly simple step is absolutely crucial for DevShelf to function as an intelligent and user-friendly digital library.\n\n### Conclusion\n\nIn this chapter, we explored **Text Normalization Utilities**, the essential behind-the-scenes processes that make all our text clean, consistent, and easy for the search engine to understand. We learned that:\n*   The `TextProcessor` is our digital editor, performing **tokenization, lowercasing, stop word removal, and stemming** on all text inputs.\n*   It relies on a `Set` of `stopWords` loaded by the `StopWordLoader` from `stopword.txt` to filter out uninformative words.\n*   It uses a `Stemmer` to reduce words to their root form, allowing searches to match variations of words.\n*   This consistency is vital for the search engine (the [Core Search Engine](05_core_search_engine_.md)) to accurately match queries with book content and generate relevant results.\n\nBy ensuring all text is normalized, DevShelf provides a much more accurate, efficient, and user-friendly search experience, forming the bedrock for all its intelligent features.\n\nThis marks the end of our tutorial chapters for DevShelfGUI. We hope you've enjoyed this journey through the application's architecture and learned a lot about how a modern search engine works!", "mimetype": "text/plain", "start_char_idx": 11137, "end_char_idx": 13148, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}]}}}